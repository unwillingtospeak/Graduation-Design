{"version":3,"file":"StockToolbar.js","sourceRoot":"","sources":["../../../../../../src/.internal/charts/stock/toolbar/StockToolbar.ts"],"names":[],"mappings":";AAIA,OAAO,EAAE,MAAM,EAAkD,MAAM,2BAA2B,CAAA;AAClG,OAAO,eAAe,MAAM,mBAAmB,CAAC;AAEhD,OAAO,KAAK,MAAM,MAAM,0BAA0B,CAAC;AACnD,OAAO,KAAK,MAAM,MAAM,0BAA0B,CAAC;AA4CnD;;GAEG;AACH;IAAkC,gCAAM;IAAxC;QAAA,qEAgFC;QAxEA;;;;;WAAiC;;IAwElC,CAAC;;;;;eAtEA;YACC,iBAAM,SAAS,WAAE,CAAC;YAElB,oCAAoC;YACpC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,cAAc,CAAC;YAC5D,iBAAM,oBAAoB,WAAE,CAAC;YAE7B,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,IAAI,CAAC,cAAc,EAAE,CAAC;YAEtB,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;YAE7B,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,SAAS,EAAE;gBAC/B,IAAI,EAAE,SAAS;gBACf,MAAM,EAAE,IAAI;aACZ,CAAC,CAAC;QACJ,CAAC;;;;;;eAED;YACC,iBAAM,aAAa,WAAE,CAAC;YAEtB,IAAI,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,EAAE;gBAC9B,OAAO;aACP;YAED,IAAI,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,EAAE;gBAClC,IAAI,IAAI,CAAC,GAAG,CAAC,eAAe,CAAC,EAAE;oBAC9B,IAAI,CAAC,cAAc,EAAE,CAAC;iBACtB;qBACI,IAAI,IAAI,CAAC,YAAY,EAAE;oBAC3B,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC;iBAC5B;aACD;YAED,IAAI,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE;gBAC7B,IAAI,CAAC,aAAa,EAAE,CAAC;aACrB;QAEF,CAAC;;;;;;eAED;YACC,iBAAM,QAAQ,WAAE,CAAC;YAEjB,4CAA4C;YAC5C,gBAAgB;YAChB,MAAM;QACP,CAAC;;;;;;eAED;YAAA,iBASC;YARA,IAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;YAC1C,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,UAAC,OAAO,EAAE,MAAM;gBACrC,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,SAAS,CAAC,EAAE;oBACnC,iCAAiC;oBACjC,OAAO,CAAC,UAAU,CAAC,SAAS,EAAE,KAAI,CAAC,CAAC;oBACpC,KAAI,CAAC,GAAG,CAAC,WAAW,CAAE,CAAC,WAAW,CAAC,OAAO,CAAC,UAAU,CAAC,QAAQ,CAAE,CAAC,CAAC;iBAClE;YACF,CAAC,CAAC,CAAA;QACH,CAAC;;IAED;;;;OAIG;;;;;eACH;YACC,IAAM,QAAQ,GAAG,eAAe,CAAC,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;YACnF,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC/B,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC;QAC9B,CAAC;;IA7ED;;;;eAAkC,cAAc;OAAC;IACjD;;;;eAA0C,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;OAAC;IA8E9F,mBAAC;CAAA,AAhFD,CAAkC,MAAM,GAgFvC;SAhFY,YAAY","sourcesContent":["import type { IDisposer } from \"../../../core/util/Disposer\";\r\nimport type { StockChart } from \"../StockChart\";\r\nimport type { StockControl } from \"./StockControl\";\r\n\r\nimport { Entity, IEntitySettings, IEntityPrivate, IEntityEvents } from \"../../../core/util/Entity\"\r\nimport StockToolbarCSS from \"./StockToolbarCSS\";\r\n\r\nimport * as $array from \"../../../core/util/Array\";\r\nimport * as $utils from \"../../../core/util/Utils\";\r\n//import * as $type from \"../../../core/util/Type\";\r\n\r\nexport interface IStockToolbarSettings extends IEntitySettings {\r\n\r\n\t/**\r\n\t * A [[StockChart]] the toolbar is for.\r\n\t */\r\n\tstockChart: StockChart;\r\n\r\n\t/**\r\n\t * A reference to an element in the document to place tools in.\r\n\t */\r\n\tcontainer: HTMLElement;\r\n\r\n\t/**\r\n\t * A list of tools to show in toolbar.\r\n\t */\r\n\tcontrols?: StockControl[];\r\n\r\n\t/**\r\n\t * If set to `false` the toolbar will not load default CSS.\r\n\t *\r\n\t * @default true\r\n\t */\r\n\tuseDefaultCSS?: boolean;\r\n\r\n\t/**\r\n\t * Menu will disable all interactions for the underlying chart when using\r\n\t * tools.\r\n\t *\r\n\t * @default true\r\n\t */\r\n\tdeactivateRoot?: boolean;\r\n\r\n}\r\n\r\nexport interface IStockToolbarPrivate extends IEntityPrivate {\r\n}\r\n\r\nexport interface IStockToolbarEvents extends IEntityEvents {\r\n\tcreated: {}\r\n}\r\n\r\n/**\r\n * @todo revview\r\n */\r\nexport class StockToolbar extends Entity {\r\n\tpublic static className: string = \"StockToolbar\";\r\n\tpublic static classNames: Array<string> = Entity.classNames.concat([StockToolbar.className]);\r\n\r\n\tdeclare public _settings: IStockToolbarSettings;\r\n\tdeclare public _privateSettings: IStockToolbarPrivate;\r\n\tdeclare public _events: IStockToolbarEvents;\r\n\r\n\tprivate _cssDisposer?: IDisposer;\r\n\r\n\tprotected _afterNew() {\r\n\t\tsuper._afterNew();\r\n\r\n\t\t// Inherit default themes from chart\r\n\t\tthis._defaultThemes = this.get(\"stockChart\")._defaultThemes;\r\n\t\tsuper._afterNewApplyThemes();\r\n\r\n\t\tthis._initControls();\r\n\t\tthis.loadDefaultCSS();\r\n\r\n\t\tthis._root.addDisposer(this);\r\n\r\n\t\tthis.events.dispatch(\"created\", {\r\n\t\t\ttype: \"created\",\r\n\t\t\ttarget: this\r\n\t\t});\r\n\t}\r\n\r\n\tpublic _afterChanged() {\r\n\t\tsuper._afterChanged();\r\n\r\n\t\tif (this.isDirty(\"container\")) {\r\n\t\t\t// TODO\r\n\t\t}\r\n\r\n\t\tif (this.isDirty(\"useDefaultCSS\")) {\r\n\t\t\tif (this.get(\"useDefaultCSS\")) {\r\n\t\t\t\tthis.loadDefaultCSS();\r\n\t\t\t}\r\n\t\t\telse if (this._cssDisposer) {\r\n\t\t\t\tthis._cssDisposer.dispose();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.isDirty(\"controls\")) {\r\n\t\t\tthis._initControls();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tprotected _dispose(): void {\r\n\t\tsuper._dispose();\r\n\r\n\t\t// $array.each(this._itemDisposers, (x) => {\r\n\t\t// \tx.dispose();\r\n\t\t// });\r\n\t}\r\n\r\n\tprivate _initControls(): void {\r\n\t\tconst controls = this.get(\"controls\", []);\r\n\t\t$array.each(controls, (control, _index) => {\r\n\t\t\tif (!control.getPrivate(\"toolbar\")) {\r\n\t\t\t\t// @todo insert at specific index\r\n\t\t\t\tcontrol.setPrivate(\"toolbar\", this);\r\n\t\t\t\tthis.get(\"container\")!.appendChild(control.getPrivate(\"button\")!);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * Loads the default CSS.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic loadDefaultCSS(): void {\r\n\t\tconst disposer = StockToolbarCSS($utils.getShadowRoot(this._root.dom), this._root);\r\n\t\tthis._disposers.push(disposer);\r\n\t\tthis._cssDisposer = disposer;\r\n\t}\r\n\r\n}"]}