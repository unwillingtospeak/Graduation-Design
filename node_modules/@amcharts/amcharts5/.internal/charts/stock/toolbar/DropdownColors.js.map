{"version":3,"file":"DropdownColors.js","sourceRoot":"","sources":["../../../../../../src/.internal/charts/stock/toolbar/DropdownColors.ts"],"names":[],"mappings":"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","sourcesContent":["import { Color, color } from \"../../../core/util/Color\";\r\n\r\nimport { ColorSet } from \"../../../core/util/ColorSet\";\r\nimport { Dropdown, IDropdownSettings, IDropdownPrivate, IDropdownEvents } from \"./Dropdown\"\r\n\r\nimport * as $array from \"../../../core/util/Array\";\r\nimport * as $utils from \"../../../core/util/Utils\";\r\n\r\nexport interface IDropdownColorsSettings extends IDropdownSettings {\r\n\tcolors?: ColorSet;\r\n\tuseOpacity?: boolean;\r\n}\r\n\r\n\r\nexport interface IDropdownColorsPrivate extends IDropdownPrivate {\r\n\tlist?: HTMLUListElement;\r\n\tcolor?: Color;\r\n\topacity?: number;\r\n}\r\n\r\nexport interface IDropdownColorsEvents extends IDropdownEvents {\r\n\tinvoked: {\r\n\t\tcolor: Color;\r\n\t};\r\n\r\n\tinvokedOpacity: {\r\n\t\topacity: number;\r\n\t};\r\n}\r\n\r\n/**\r\n * A dropdown used for color picker control.\r\n *\r\n * Should not be used as standalone control.\r\n */\r\nexport class DropdownColors extends Dropdown {\r\n\tpublic static className: string = \"DropdownColors\";\r\n\tpublic static classNames: Array<string> = Dropdown.classNames.concat([DropdownColors.className]);\r\n\r\n\tdeclare public _settings: IDropdownColorsSettings;\r\n\tdeclare public _privateSettings: IDropdownColorsPrivate;\r\n\tdeclare public _events: IDropdownColorsEvents;\r\n\r\n\t// private _itemDisposers: Array<IDisposer> = [];\r\n\r\n\tprotected _afterNew() {\r\n\t\tsuper._afterNew();\r\n\t\tthis._root.addDisposer(this);\r\n\t}\r\n\r\n\tprotected _initElements(): void {\r\n\t\tsuper._initElements();\r\n\r\n\t\t// Create container\r\n\t\tconst container = this.getPrivate(\"container\")!;\r\n\r\n\t\t// Create list\r\n\t\tconst list = document.createElement(\"ul\");\r\n\t\tlist.className = \"am5stock-control-colors\";\r\n\t\tcontainer.appendChild(list);\r\n\t\tthis.setPrivate(\"list\", list);\r\n\r\n\t\tthis._initItems();\r\n\t}\r\n\r\n\tprotected _initItems(): void {\r\n\t\tconst list = this.getPrivate(\"list\")!;\r\n\t\tlist.innerHTML = \"\";\r\n\r\n\t\tlet cs = this.get(\"colors\");\r\n\t\tif (!cs) {\r\n\t\t\tcs = ColorSet.new(this._root, {});\r\n\t\t}\r\n\t\tconst colors = cs.get(\"colors\", []);\r\n\t\t$array.each(colors, (item) => {\r\n\t\t\tthis.addItem(item);\r\n\t\t});\r\n\t\tthis._initOpacity();\r\n\t}\r\n\r\n\tpublic _beforeChanged() {\r\n\t\tsuper._beforeChanged();\r\n\r\n\t\tif (this.isDirty(\"colors\") || this.isDirty(\"useOpacity\") || this.isPrivateDirty(\"color\") || this.isPrivateDirty(\"opacity\")) {\r\n\t\t\tthis._initItems();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tprotected _dispose(): void {\r\n\t\tsuper._dispose();\r\n\t}\r\n\r\n\tpublic addItem(color: Color): void {\r\n\t\tconst currentColor = this.getPrivate(\"color\") ? this.getPrivate(\"color\")!.hex : 0;\r\n\t\tconst list = this.getPrivate(\"list\")!;\r\n\t\tconst item = document.createElement(\"li\");\r\n\t\titem.className = \"am5stock-control-color\";\r\n\t\tif (currentColor == color.hex) {\r\n\t\t\titem.className += \" am5stock-control-active\";\r\n\t\t}\r\n\t\titem.style.background = color.toCSS();\r\n\t\tlist.appendChild(item);\r\n\r\n\t\t// Add click event\r\n\t\tthis._disposers.push($utils.addEventListener(item, \"click\", (_ev) => {\r\n\t\t\tthis.hide();\r\n\t\t\tthis.events.dispatch(\"invoked\", {\r\n\t\t\t\ttype: \"invoked\",\r\n\t\t\t\tcolor: color,\r\n\t\t\t\ttarget: this\r\n\t\t\t});\r\n\t\t}));\r\n\t}\r\n\r\n\tprotected _initOpacity(): void {\r\n\t\tif (this.get(\"useOpacity\")) {\r\n\t\t\tconst currentOpacity = this.getPrivate(\"opacity\", 1);\r\n\t\t\tconst list = this.getPrivate(\"list\")!;\r\n\t\t\tconst hr = document.createElement(\"hr\");\r\n\t\t\tlist.appendChild(hr);\r\n\r\n\t\t\tfor (let opacity = 100; opacity >= 0; opacity -= 25) {\r\n\t\t\t\tconst fill = color(0x000000);\r\n\t\t\t\tconst item = document.createElement(\"li\");\r\n\t\t\t\titem.innerHTML = opacity + \"%\";\r\n\t\t\t\titem.className = \"am5stock-control-opacity am5stock-control-opacity-\" + opacity;\r\n\t\t\t\tif (currentOpacity * 100 == opacity) {\r\n\t\t\t\t\titem.className += \" am5stock-control-active\";\r\n\t\t\t\t}\r\n\t\t\t\titem.style.background = fill.toCSS(opacity / 100);\r\n\t\t\t\tlist.appendChild(item);\r\n\r\n\t\t\t\t// Add click event\r\n\t\t\t\tthis._disposers.push($utils.addEventListener(item, \"click\", (_ev) => {\r\n\t\t\t\t\tthis.hide();\r\n\t\t\t\t\tthis.events.dispatch(\"invokedOpacity\", {\r\n\t\t\t\t\t\ttype: \"invokedOpacity\",\r\n\t\t\t\t\t\topacity: opacity / 100,\r\n\t\t\t\t\t\ttarget: this\r\n\t\t\t\t\t});\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}"]}