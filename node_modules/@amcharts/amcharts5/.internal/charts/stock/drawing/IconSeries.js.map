{"version":3,"file":"IconSeries.js","sourceRoot":"","sources":["../../../../../../src/.internal/charts/stock/drawing/IconSeries.ts"],"names":[],"mappings":"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","sourcesContent":["import type { Percent } from \"../../../core/util/Percent\";\r\nimport type { ISpritePointerEvent } from \"../../../core/render/Sprite\";\r\nimport type { DataItem } from \"../../../core/render/Component\";\r\n\r\nimport { PolylineSeries, IPolylineSeriesSettings, IPolylineSeriesPrivate, IPolylineSeriesDataItem } from \"./PolylineSeries\";\r\nimport { Bullet } from \"../../../core/render/Bullet\";\r\nimport { Graphics } from \"../../../core/render/Graphics\";\r\nimport { SpriteResizer } from \"./SpriteResizer\";\r\n\r\nexport interface IIconSeriesDataItem extends IPolylineSeriesDataItem {\r\n\t/**\r\n\t * @todo review\r\n\t */\t\r\n\tsvgPath: string;\r\n\t/**\r\n\t * @todo review\r\n\t */\t\r\n\tsnapToData?: boolean;\r\n}\r\n\r\nexport interface IIconSeriesSettings extends IPolylineSeriesSettings {\r\n\t/**\r\n\t * @todo review\r\n\t */\t\r\n\ticonSvgPath: string;\r\n\t/**\r\n\t * @todo review\r\n\t */\t\r\n\ticonScale?: number;\r\n\t/**\r\n\t * @todo review\r\n\t */\t\r\n\ticonCenterX?: Percent;\r\n\t/**\r\n\t * @todo review\r\n\t */\t\r\n\ticonCenterY?: Percent;\r\n\t/**\r\n\t * @todo review\r\n\t */\t\r\n\tsnapToData?: boolean;\r\n}\r\n\r\nexport interface IIconSeriesPrivate extends IPolylineSeriesPrivate {\r\n}\r\n\r\nexport class IconSeries extends PolylineSeries {\r\n\tpublic static className: string = \"IconSeries\";\r\n\tpublic static classNames: Array<string> = PolylineSeries.classNames.concat([IconSeries.className]);\r\n\r\n\tdeclare public _settings: IIconSeriesSettings;\r\n\tdeclare public _privateSettings: IIconSeriesPrivate;\r\n\tdeclare public _dataItemSettings: IIconSeriesDataItem;\r\n\r\n\tpublic spriteResizer = this.children.push(SpriteResizer.new(this._root, {}));\r\n\r\n\tprotected _tag = \"icon\";\r\n\r\n\tprotected _afterNew() {\r\n\t\tsuper._afterNew();\r\n\r\n\t\tthis.bullets.clear();\r\n\r\n\t\tthis.strokes.template.set(\"visible\", false);\r\n\t\tthis.fills.template.set(\"visible\", false);\r\n\r\n\t\tthis.bullets.push(() => {\r\n\t\t\tconst color = this.get(\"fillColor\", this.get(\"fill\"));\r\n\t\t\tconst strokeColor = this.get(\"strokeColor\", this.get(\"stroke\"));\r\n\r\n\t\t\tconst sprite = Graphics.new(this._root, {\r\n\t\t\t\tdraggable: true,\r\n\t\t\t\tsvgPath: this.get(\"iconSvgPath\"),\r\n\t\t\t\tscale: this.get(\"iconScale\", 1),\r\n\t\t\t\tthemeTags: [\"icon\"],\r\n\t\t\t\tfill: color,\r\n\t\t\t\tstroke: strokeColor,\r\n\t\t\t\tfillOpacity: this.get(\"fillOpacity\", 1),\r\n\t\t\t\tstrokeOpacity: this.get(\"strokeOpacity\", 1)\r\n\t\t\t});\r\n\r\n\t\t\tconst iconCenterX = this.get(\"iconCenterX\");\r\n\t\t\tif (iconCenterX != null) {\r\n\t\t\t\tsprite.set(\"centerX\", iconCenterX)\r\n\t\t\t}\r\n\r\n\t\t\tconst iconCenterY = this.get(\"iconCenterY\");\r\n\t\t\tif (iconCenterY != null) {\r\n\t\t\t\tsprite.set(\"centerY\", iconCenterY)\r\n\t\t\t}\r\n\r\n\t\t\tthis._addBulletInteraction(sprite);\r\n\r\n\t\t\tsprite.events.on(\"click\", () => {\r\n\t\t\t\tthis.spriteResizer.set(\"sprite\", sprite);\r\n\t\t\t})\r\n\r\n\t\t\tsprite.events.on(\"pointerover\", () => {\r\n\t\t\t\tthis._isHover = true;\r\n\t\t\t})\r\n\r\n\t\t\tsprite.events.on(\"pointerout\", () => {\r\n\t\t\t\tthis._isHover = false;\r\n\t\t\t})\r\n\r\n\t\t\tthis.spriteResizer.set(\"sprite\", undefined);\r\n\r\n\t\t\treturn Bullet.new(this._root, {\r\n\t\t\t\tlocationX: undefined,\r\n\t\t\t\tsprite: sprite\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tprotected _handlePointerClick(event: ISpritePointerEvent) {\r\n\t\tif (!this._isHover) {\r\n\t\t\tsuper._handlePointerClick(event);\r\n\t\t\tthis._index++;\r\n\t\t\tthis._di[this._index] = {};\r\n\t\t}\r\n\t}\r\n\r\n\tpublic disposeDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\r\n\t\tsuper.disposeDataItem(dataItem);\r\n\t\tthis.spriteResizer.set(\"sprite\", undefined);\r\n\t\tthis._isHover = false;\r\n\t}\r\n\r\n\tprotected _hideAllBullets() {\r\n\r\n\t}\r\n\r\n\tprotected _setXLocation(dataItem: DataItem<this[\"_dataItemSettings\"]>, value: number) {\r\n\t\tif(!this.get(\"snapToData\")){\r\n\t\t\tthis._setXLocationReal(dataItem, value);\r\n\t\t}\t\t\r\n\t}\r\n}"]}