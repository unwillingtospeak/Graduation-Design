{"version":3,"file":"DrawingSeries.js","sourceRoot":"","sources":["../../../../../../src/.internal/charts/stock/drawing/DrawingSeries.ts"],"names":[],"mappings":";AAUA,OAAO,EAAE,UAAU,EAAgE,MAAM,4BAA4B,CAAC;AACtH,OAAO,EAAE,MAAM,EAAE,MAAM,6BAA6B,CAAC;AACrD,OAAO,EAAE,MAAM,EAAE,MAAM,6BAA6B,CAAC;AACrD,OAAO,EAAE,SAAS,EAAE,MAAM,gCAAgC,CAAC;AAC3D,OAAO,EAAE,QAAQ,EAAE,MAAM,6BAA6B,CAAC;AAGvD,OAAO,KAAK,MAAM,MAAM,0BAA0B,CAAC;AACnD,OAAO,KAAK,KAAK,MAAM,yBAAyB,CAAC;AACjD,OAAO,KAAK,KAAK,MAAM,yBAAyB,CAAC;AACjD,OAAO,KAAK,KAAK,MAAM,yBAAyB,CAAC;AACjD,OAAO,KAAK,OAAO,MAAM,2BAA2B,CAAC;AAiDrD;IAAmC,iCAAU;IAA7C;QAAA,qEAkpBC;QA1oBA;;;;;WAA+B;QAC/B;;;;;WAA8B;QAC9B;;;;;WAA8B;QAC9B;;;;;WAA4B;QAE5B;;;;mBAAqC,KAAK;WAAC;QAC3C;;;;mBAAiC,KAAK;WAAC;QAEvC;;;;;WAAsC;QACtC;;;;;WAAqC;QAErC;;;;mBAAgC,KAAK;WAAC;QACtC;;;;mBAAoC,KAAK;WAAC;QAE1C;;;;mBAA2B,CAAC;WAAC;QAE7B;;;;mBAA8E,EAAE;WAAC;QAEjF;;;;mBAAiC,CAAC;WAAC;QACnC;;;;mBAAgC,CAAC;WAAC;QAElC;;;;mBAA2D,EAAE;WAAC;QAC9D;;;;mBAA0D,EAAE;WAAC;QAE7D;;;;mBAA8B,KAAK;WAAC;QAEpC;;;;mBAAqC,KAAK;WAAC;QAE3C;;;;;WAAwB;;IA8mBzB,CAAC;;;;;eA5mBA;YAAA,iBA2JC;YA1JA,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;YAEvB,IAAI,IAAI,CAAC,IAAI,EAAE;gBACd,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACvB;YAED,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,QAAQ,CAAC,CAAC;YAClC,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,QAAQ,CAAC,CAAC;YAElC,iBAAM,SAAS,WAAE,CAAC;YAElB,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;YAEjB,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;YAC3B,IAAI,CAAC,GAAG,CAAC,cAAc,EAAE,QAAQ,CAAC,CAAC;YACnC,IAAI,CAAC,GAAG,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;YAE/B,IAAM,eAAe,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC;YAC9C,eAAe,CAAC,GAAG,CAAC,eAAe,EAAE,QAAQ,CAAC,CAAC;YAE/C,IAAM,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;YAC1C,aAAa,CAAC,MAAM,CAAC,EAAE,aAAa,EAAE,MAAM,EAAE,CAAC,CAAC;YAGhD,aAAa,CAAC,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE,UAAC,CAAC;gBACtC,KAAI,CAAC,oBAAoB,CAAC,CAAC,EAAE,KAAI,CAAC,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;gBAEvD,KAAI,CAAC,cAAc,GAAG,IAAI,CAAC;YAC5B,CAAC,CAAC,CAAA;YAEF,aAAa,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,EAAE,UAAC,CAAC;gBACxC,IAAM,KAAK,GAAG,KAAI,CAAC,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;gBACvC,IAAI,KAAI,CAAC,eAAe,EAAE;oBACzB,KAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;iBAC1B;qBACI;oBACJ,IAAM,aAAa,GAAG,CAAC,CAAC,aAAoB,CAAC;oBAC7C,IAAI,CAAC,aAAa,CAAC,MAAM,IAAI,KAAI,CAAC,eAAe,EAAE;wBAClD,KAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC;qBAC3B;iBACD;gBAED,IAAM,MAAM,GAAG,KAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC,CAAC;gBAClE,IAAI,MAAM,EAAE;oBACX,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;iBACpB;YACF,CAAC,CAAC,CAAA;YAEF,eAAe,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,EAAE,UAAC,CAAC;gBAC1C,IAAI,KAAI,CAAC,eAAe,EAAE;oBACzB,KAAI,CAAC,aAAa,CAAC,KAAI,CAAC,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;iBAC7C;qBACI;oBACJ,IAAM,aAAa,GAAG,CAAC,CAAC,aAAoB,CAAC;oBAC7C,IAAI,CAAC,aAAa,CAAC,MAAM,IAAI,KAAI,CAAC,eAAe,EAAE;wBAClD,KAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC;qBAC3B;iBACD;YACF,CAAC,CAAC,CAAA;YAEF,aAAa,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,UAAC,CAAC;gBACrC,KAAI,CAAC,cAAc,GAAG,KAAK,CAAC;gBAC5B,IAAM,KAAK,GAAG,KAAI,CAAC,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;gBACvC,KAAI,CAAC,mBAAmB,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;gBAEnC,IAAM,MAAM,GAAG,KAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC,CAAC;gBAClE,IAAI,MAAM,EAAE;oBACX,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;iBACnB;YACF,CAAC,CAAC,CAAA;YAEF,aAAa,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,EAAE,UAAC,CAAC;gBACxC,IAAM,KAAK,GAAG,KAAI,CAAC,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;gBACvC,IAAM,MAAM,GAAG,KAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC,CAAC;gBAClE,IAAI,MAAM,EAAE;oBACX,MAAM,CAAC,KAAK,EAAE,CAAC;iBACf;gBACD,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;gBACrB,KAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,CAAC;YACjC,CAAC,CAAC,CAAA;YAEF,aAAa,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE;gBACrC,KAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;gBACtB,KAAI,CAAC,eAAe,EAAE,CAAC;YACxB,CAAC,CAAC,CAAA;YAEF,eAAe,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,EAAE,UAAC,CAAC;gBAC1C,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;gBACrB,KAAI,CAAC,mBAAmB,CAAC,KAAI,CAAC,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;YACpD,CAAC,CAAC,CAAA;YAEF,eAAe,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE;gBACvC,KAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;gBACtB,KAAI,CAAC,eAAe,EAAE,CAAC;YACxB,CAAC,CAAC,CAAA;YAEF,eAAe,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,UAAC,CAAC;gBACvC,KAAI,CAAC,mBAAmB,CAAC,CAAC,EAAE,KAAI,CAAC,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;YACvD,CAAC,CAAC,CAAA;YAEF,eAAe,CAAC,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE,UAAC,CAAC;gBACxC,KAAI,CAAC,oBAAoB,CAAC,CAAC,EAAE,KAAI,CAAC,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;YACxD,CAAC,CAAC,CAAA;YAEF,IAAI,CAAC,GAAG,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;YACpC,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,MAAM,CAAC,QAAQ,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;YAE7E,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC;gBACjB,IAAM,KAAK,GAAG,KAAI,CAAC,GAAG,CAAC,aAAa,EAAE,KAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAE1D,IAAM,SAAS,GAAG,SAAS,CAAC,GAAG,CAAC,KAAI,CAAC,KAAK,EAAE;oBAC3C,SAAS,EAAE,CAAC,MAAM,CAAC;oBACnB,kBAAkB,EAAE,IAAI;oBACxB,SAAS,EAAE,IAAI;iBACf,CAAC,CAAA;gBAEF,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,KAAI,CAAC,KAAK,EAAE;oBAC9C,SAAS,EAAE,CAAC,SAAS,CAAC;oBACtB,MAAM,EAAE,KAAK;iBACb,CAAC,CAAC,CAAA;gBAEH,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,KAAI,CAAC,KAAK,EAAE;oBAC9C,MAAM,EAAE,KAAK;iBACb,CAAC,CAAC,CAAC;gBAEJ,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,EAAE,UAAC,KAAK;oBACxC,IAAM,QAAQ,GAAG,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC;oBACvC,IAAI,QAAQ,EAAE;wBACb,IAAM,WAAW,GAAG,QAAQ,CAAC,WAAkB,CAAC;wBAChD,KAAI,CAAC,mBAAmB,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;qBAC5C;gBACF,CAAC,CAAC,CAAA;gBAEF,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE;oBACjC,KAAI,CAAC,eAAe,EAAE,CAAC;gBACxB,CAAC,CAAC,CAAA;gBAEF,KAAI,CAAC,qBAAqB,CAAC,SAAS,CAAC,CAAC;gBAEtC,KAAI,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;gBAE7B,OAAO,MAAM,CAAC,GAAG,CAAC,KAAI,CAAC,KAAK,EAAE;oBAC7B,SAAS,EAAE,SAAS;oBACpB,MAAM,EAAE,SAAS;iBACjB,CAAC,CAAC;YACJ,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,EAAE;gBAC7B,KAAI,CAAC,kBAAkB,EAAE,CAAC;YAC3B,CAAC,CAAC,CAAA;YAEF,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE;gBAC5B,KAAI,CAAC,iBAAiB,EAAE,CAAC;YAC1B,CAAC,CAAC,CAAA;QACH,CAAC;;;;;;eAED,UAAwB,KAAa;YAArC,iBAQC;YAPA,IAAM,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YAElC,IAAI,SAAS,EAAE;gBACd,OAAO,CAAC,IAAI,CAAC,SAAS,EAAE,UAAC,IAAI,EAAE,QAAQ;oBACtC,KAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;gBAChC,CAAC,CAAC,CAAA;aACF;QACF,CAAC;;;;;;eAED;YAAA,iBAIC;YAHA,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,UAAC,UAAU,EAAE,KAAK;gBACvC,KAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YAC3B,CAAC,CAAC,CAAC;QACJ,CAAC;;;;;;eAED,UAAoB,MAAc;YACjC,IAAM,QAAQ,GAAG,MAAM,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;YACxC,IAAI,QAAQ,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;gBACpC,IAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC7C,IAAI,QAAQ,EAAE;oBACb,IAAM,WAAW,GAAG,QAAQ,CAAC,WAAkB,CAAC;oBAChD,IAAI,WAAW,EAAE;wBAChB,OAAO,WAAW,CAAC,KAAK,CAAC;qBACzB;iBACD;aACD;YACD,OAAO,CAAC,CAAC;QACV,CAAC;;;;;;eAED,UAA0B,KAAa;YAAvC,iBAWC;YAVA,IAAI,CAAC,GAAG,CAAC,CAAC;YACV,IAAI,CAAC,GAAG,KAAK,CAAC;YACd,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,UAAC,MAAM;gBACxB,IAAM,WAAW,GAAG,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;gBAC3C,IAAI,WAAW,IAAI,KAAK,EAAE;oBACzB,CAAC,GAAG,CAAC,CAAC;iBACN;gBACD,CAAC,EAAE,CAAC;YACL,CAAC,CAAC,CAAA;YACF,OAAO,CAAC,CAAC;QACV,CAAC;;;;;;eAED,UAA8B,KAAa;YAC1C,IAAM,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YAClC,IAAI,SAAS,EAAE;gBACd,OAAO,CAAC,IAAI,CAAC,SAAS,EAAE,UAAC,IAAI,EAAE,QAAQ;oBACtC,IAAM,OAAO,GAAG,QAAQ,CAAC,OAAO,CAAC;oBACjC,IAAI,OAAO,EAAE;wBACZ,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,UAAC,MAAM;4BAC3B,IAAM,MAAM,GAAG,MAAM,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;4BACpC,IAAI,MAAM,EAAE;gCACX,MAAM,CAAC,IAAI,EAAE,CAAC;6BACd;wBACF,CAAC,CAAC,CAAA;qBACF;gBACF,CAAC,CAAC,CAAA;aACF;QACF,CAAC;;;;;;eAED;YACC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,UAAC,MAAM;gBACxB,MAAM,CAAC,OAAO,EAAE,CAAC;YAClB,CAAC,CAAC,CAAA;YAEF,IAAI,CAAC,IAAI,CAAC,eAAe,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;gBAC/C,IAAM,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;gBAEjC,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,UAAC,QAAQ;oBAC/B,IAAM,OAAO,GAAG,QAAQ,CAAC,OAAO,CAAC;oBACjC,IAAI,OAAO,EAAE;wBACZ,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,UAAC,MAAM;4BAC3B,IAAM,MAAM,GAAG,MAAM,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;4BACpC,IAAI,MAAM,EAAE;gCACX,MAAM,CAAC,IAAI,EAAE,CAAC;6BACd;wBACF,CAAC,CAAC,CAAA;qBACF;gBACF,CAAC,CAAC,CAAA;aACF;QACF,CAAC;;;;;;eAED,UAA+B,KAA0B,EAAE,KAAa;YAAxE,iBAmBC;YAlBA,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;YACzB,IAAI,KAAK,EAAE;gBACV,IAAM,OAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;gBAChC,IAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;gBAEhC,IAAM,KAAK,GAAG,KAAK,CAAC,aAAa,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;gBAEvD,IAAI,CAAC,YAAY,GAAG,OAAK,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;gBACxD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,eAAe,CAAC,KAAK,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAE/F,IAAM,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;gBAClC,IAAI,SAAS,EAAE;oBACd,OAAO,CAAC,IAAI,CAAC,SAAS,EAAE,UAAC,GAAG,EAAE,QAAQ;wBACrC,KAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,OAAK,CAAC,eAAe,CAAC,QAAQ,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,CAAC;wBACnE,KAAI,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;oBACzC,CAAC,CAAC,CAAA;iBACF;aACD;QACF,CAAC;;;;;;eAED,UAA8B,KAA0B,EAAE,KAAa;YAAvE,iBAsCC;YArCA,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;YACzB,IAAI,KAAK,EAAE;gBACV,IAAM,KAAK,GAAG,KAAK,CAAC,aAAa,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;gBAEvD,IAAM,OAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;gBAChC,IAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;gBAEhC,IAAM,IAAI,GAAG,OAAK,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;gBACjD,IAAM,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,eAAe,CAAC,KAAK,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAE3F,IAAM,KAAG,GAAG,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC;gBACrC,IAAM,IAAE,GAAG,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC;gBAErC,IAAM,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;gBAElC,IAAI,SAAS,EAAE;oBACd,OAAO,CAAC,IAAI,CAAC,SAAS,EAAE,UAAC,GAAG,EAAE,QAAQ;wBACrC,IAAM,IAAI,GAAG,KAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;wBAC7B,IAAM,GAAG,GAAG,KAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;wBAC3B,IAAI,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;4BAEhD,IAAM,GAAG,GAAG,IAAI,GAAG,KAAG,CAAC;4BACvB,IAAM,EAAE,GAAG,GAAG,GAAG,IAAE,CAAC;4BACpB,IAAM,EAAE,GAAG,KAAI,CAAC,UAAU,CAAC,OAAK,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC,CAAA;4BAEtD,QAAQ,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;4BAC3B,KAAI,CAAC,aAAa,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;4BAEjC,QAAQ,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;4BAC3B,QAAQ,CAAC,GAAG,CAAC,eAAe,EAAE,EAAE,CAAC,CAAC;yBAClC;oBACF,CAAC,CAAC,CAAA;iBACF;aACD;YAED,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;YAC3B,IAAI,CAAC,eAAe,EAAE,CAAC;QACxB,CAAC;;;;;;eAED,UAAyB,MAAc;QAEvC,CAAC;;;;;;eAED;YAEC,IAAI,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,iBAAiB,CAAC,EAAE;gBAC/L,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,kBAAkB,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,gBAAgB,EAAE,EAAE,CAAC,CAAC;aACrF;YAED,IAAI,CAAC,eAAe,EAAE,CAAC;YACvB,iBAAM,eAAe,WAAE,CAAC;QACzB,CAAC;;;;;;eAED;YACC,IAAM,YAAY,GAAQ,EAAE,CAAC;YAE7B,IAAM,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;YACxC,IAAI,SAAS,IAAI,IAAI,EAAE;gBACtB,YAAY,CAAC,IAAI,GAAG,SAAS,CAAC;aAC9B;YAED,IAAM,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;YAC5C,IAAI,WAAW,IAAI,IAAI,EAAE;gBACxB,YAAY,CAAC,WAAW,GAAG,WAAW,CAAC;aACvC;YAED,OAAO,QAAQ,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;QACnC,CAAC;;;;;;eAED;YACC,IAAM,cAAc,GAAQ,EAAE,CAAC;YAE/B,IAAM,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;YAC5C,IAAI,WAAW,IAAI,IAAI,EAAE;gBACxB,cAAc,CAAC,MAAM,GAAG,WAAW,CAAC;aACpC;YAED,IAAM,aAAa,GAAG,IAAI,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;YAChD,IAAI,aAAa,IAAI,IAAI,EAAE;gBAC1B,cAAc,CAAC,aAAa,GAAG,aAAa,CAAC;aAC7C;YAED,IAAM,eAAe,GAAG,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;YACpD,IAAI,eAAe,IAAI,IAAI,EAAE;gBAC5B,cAAc,CAAC,eAAe,GAAG,eAAe,CAAC;aACjD;YAED,IAAM,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;YAC5C,IAAI,WAAW,IAAI,IAAI,EAAE;gBACxB,cAAc,CAAC,WAAW,GAAG,WAAW,CAAC;aACzC;YAED,OAAO,QAAQ,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;QACrC,CAAC;;;;;;eAED;QAEA,CAAC;;;;;;eAED,UAAuB,UAAqB;QAE5C,CAAC;;;;;;eAED,UAAgC,MAAc;YAA9C,iBA+BC;YA9BA,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,EAAE,UAAC,CAAC;gBAC7B,KAAI,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC;gBAC7B,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;YACzB,CAAC,CAAC,CAAA;YAEF,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE,UAAC,CAAC;gBAC/B,KAAI,CAAC,sBAAsB,CAAC,CAAC,CAAC,CAAC;YAChC,CAAC,CAAC,CAAA;YAEF,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,UAAC,CAAC;gBAC9B,KAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC;gBAC9B,KAAI,CAAC,UAAU,CAAC;oBACf,KAAI,CAAC,WAAW,GAAG,KAAK,CAAC;gBAC1B,CAAC,EAAE,GAAG,CAAC,CAAA;YACR,CAAC,CAAC,CAAA;YAEF,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,UAAC,CAAC;gBAC3B,IAAI,KAAI,CAAC,eAAe,EAAE;oBACzB,IAAM,QAAQ,GAAG,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC;oBACnC,IAAI,QAAQ,EAAE;wBACb,IAAM,WAAW,GAAG,QAAQ,CAAC,WAAkB,CAAC;wBAChD,IAAI,WAAW,EAAE;4BAChB,KAAI,CAAC,aAAa,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;yBACtC;qBACD;iBACD;qBACI;oBACJ,KAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;iBAC5B;YACF,CAAC,CAAC,CAAA;QACH,CAAC;;;;;;eAED,UAA8B,KAA0B;YACvD,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;YACzB,IAAI,KAAK,EAAE;gBACV,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC,aAAa,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAA;aAClE;QACF,CAAC;;IAED,8EAA8E;;;;;eAC9E;YACC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;QAChD,CAAC;;;;;;eAED,UAA+B,KAA0B;YAExD,IAAM,QAAQ,GAAG,KAAK,CAAC,MAAM,CAAC,QAA+C,CAAC;YAE9E,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;YACzB,IAAI,KAAK,EAAE;gBACV,IAAM,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC;gBAC5B,IAAM,KAAK,GAAG,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,EAAE,CAAC;gBAC/C,IAAI,CAAC,wBAAwB,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;aAC/C;YAED,IAAM,WAAW,GAAG,QAAQ,CAAC,WAAkB,CAAC;YAChD,IAAI,WAAW,EAAE;gBAChB,IAAM,KAAK,GAAG,WAAW,CAAC,KAAK,CAAC;gBAChC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;gBAC3B,IAAI,CAAC,eAAe,EAAE,CAAC;aACvB;QACF,CAAC;;;;;;eAED,UAAmC,QAA6C,EAAE,KAAa;YAC9F,IAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;YAChC,IAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;YAEhC,IAAM,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,eAAe,CAAC,KAAK,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAC3F,IAAM,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,eAAe,CAAC,KAAK,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAE3F,QAAQ,CAAC,GAAG,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;YAC/B,IAAI,CAAC,aAAa,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;YAErC,QAAQ,CAAC,GAAG,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;YAC/B,QAAQ,CAAC,GAAG,CAAC,eAAe,EAAE,MAAM,CAAC,CAAC;YAEtC,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC;QACjC,CAAC;;;;;;eAED,UAAiC,MAA2B;QAE5D,CAAC;;;;;;eAED,UAAgC,MAA2B;QAE3D,CAAC;;;;;;eAED;QAEA,CAAC;;;;;;eAED;QAEA,CAAC;;;;;;eAED,UAA0B,KAAa,EAAE,MAAY;YACpD,IAAM,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;YACjC,IAAM,GAAG,GAAG,SAAS,CAAC,MAAM,CAAC;YAC7B,IAAM,QAAQ,GAAG,SAAS,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;YACpC,IAAM,WAAW,GAAG,QAAQ,CAAC,WAAkB,CAAC;YAChD,IAAI,WAAW,EAAE;gBAChB,WAAW,CAAC,KAAK,GAAG,KAAK,CAAC;gBAC1B,IAAI,MAAM,IAAI,IAAI,EAAE;oBACnB,WAAW,CAAC,MAAM,GAAG,MAAM,CAAC;iBAC5B;aACD;YACD,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE;gBACrB,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;aACrB;YACD,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,GAAG,QAAQ,CAAC;QACpC,CAAC;;;;;;eAED;YAAA,iBAwCC;YAvCA,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;YACzB,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;YAC7B,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;YAC5B,IAAI,KAAK,EAAE;gBACV,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;oBACnB,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,UAAC,CAAC;wBACxD,IAAM,aAAa,GAAG,CAAC,CAAC,aAAoB,CAAC;wBAC7C,IAAI,CAAC,aAAa,CAAC,MAAM,IAAI,CAAC,KAAI,CAAC,eAAe,EAAE;4BACnD,KAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;yBAC5B;oBACF,CAAC,CAAC,CAAA;iBACF;gBAED,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;oBAClB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,EAAE,UAAC,CAAC;wBAC7D,IAAM,aAAa,GAAG,CAAC,CAAC,aAAoB,CAAC;wBAC7C,IAAI,CAAC,aAAa,CAAC,MAAM,IAAI,CAAC,KAAI,CAAC,eAAe,EAAE;4BACnD,KAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC;yBAC3B;oBACF,CAAC,CAAC,CAAA;iBACF;gBAED,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;oBAChB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,CAAC,iBAAiB,EAAE,UAAC,CAAC;wBAC/D,IAAM,aAAa,GAAG,CAAC,CAAC,aAAoB,CAAC;wBAC7C,IAAI,CAAC,aAAa,CAAC,MAAM,IAAI,CAAC,KAAI,CAAC,eAAe,EAAE;4BACnD,KAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;yBACzB;oBACF,CAAC,CAAC,CAAA;iBACF;gBAED,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;oBAClB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,CAAC,mBAAmB,EAAE,UAAC,CAAC;wBACnE,IAAI,CAAC,KAAI,CAAC,eAAe,EAAE;4BAC1B,KAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC;yBAC3B;oBACF,CAAC,CAAC,CAAA;iBACF;aACD;QACF,CAAC;;;;;;eAED;YACC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAC7B,CAAC;;;;;;eAED;YACC,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;QAC9B,CAAC;;;;;;eAED;YACC,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;YAC7B,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;YAC7B,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;YACxB,IAAI,IAAI,CAAC,QAAQ,EAAE;gBAClB,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;gBACxB,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC;aAC1B;YAED,IAAI,IAAI,CAAC,OAAO,EAAE;gBACjB,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;gBACvB,IAAI,CAAC,OAAO,GAAG,SAAS,CAAC;aACzB;YAED,IAAI,IAAI,CAAC,KAAK,EAAE;gBACf,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;gBACrB,IAAI,CAAC,KAAK,GAAG,SAAS,CAAC;aACvB;YACD,IAAI,CAAC,eAAe,EAAE,CAAC;QACxB,CAAC;;;;;;eAED,UAA6B,KAA0B;YACtD,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;YACzB,IAAI,KAAK,EAAE;gBACV,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC,aAAa,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAA;aACjE;QACF,CAAC;;;;;;eAED,UAA6B,MAA2B;YACvD,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC5B,CAAC;;;;;;eAED,UAA2B,MAA2B;YACrD,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC7B,CAAC;;;;;;eAED;YACC,OAAO,CAAC,CAAC;QACV,CAAC;;;;;;eAED;YACC,OAAO,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;QAC9B,CAAC;;;;;;eAED,UAAwB,QAA6C,EAAE,KAAa;YACnF,IAAI,CAAC,iBAAiB,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;QACzC,CAAC;;;;;;eAED,UAA4B,QAA6C,EAAE,KAAa;YACvF,IAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;YAChC,IAAM,YAAY,GAAG,KAAK,CAAC,UAAU,CAAC,cAAc,CAAC,CAAC;YACtD,IAAM,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,EAAE,YAAY,CAAC,QAAQ,EAAE,YAAY,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,cAAc,EAAE,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,OAAO,EAAE,CAAC;YACjJ,IAAM,KAAK,GAAG,KAAK,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,EAAE,YAAY,CAAC,QAAQ,EAAE,YAAY,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,OAAO,EAAE,CAAC;YAC7G,IAAM,SAAS,GAAG,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,GAAG,IAAI,CAAC,CAAC;YAClD,QAAQ,CAAC,GAAG,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;QACtC,CAAC;;;;;;eAED,UAAuB,QAA6C;YAApE,iBAgBC;YAfA,IAAM,WAAW,GAAG,QAAQ,CAAC,WAAkB,CAAC;YAChD,IAAI,WAAW,EAAE;gBAChB,IAAM,KAAK,GAAG,WAAW,CAAC,KAAK,CAAC;gBAEhC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;gBAC7C,IAAI,CAAC,eAAe,EAAE,CAAC;gBAEvB,IAAM,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;gBAElC,IAAI,SAAS,EAAE;oBACd,OAAO,CAAC,IAAI,CAAC,SAAS,EAAE,UAAC,IAAI,EAAE,QAAQ;wBACtC,iBAAM,eAAe,aAAC,QAAQ,CAAC,CAAC;oBACjC,CAAC,CAAC,CAAA;iBACF;aACD;QACF,CAAC;;;;;;eAGD,UAAqB,KAAa;YACjC,IAAI,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,IAAI,8BAA8B,EAAE;gBAC7D,IAAM,eAAe,GAAG,IAAI,CAAC,UAAU,CAAC,iBAAiB,CAAC,CAAC;gBAC3D,IAAI,eAAe,EAAE;oBACpB,IAAM,SAAS,GAAG,eAAe,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;oBACrD,KAAK,GAAG,KAAK,GAAG,GAAG,GAAG,SAAS,GAAG,SAAS,CAAC;iBAC5C;aACD;YACD,OAAO,KAAK,CAAC;QACd,CAAC;;;;;;eAED,UAAqB,KAAa;YACjC,IAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;YAChC,IAAM,GAAG,GAAG,KAAK,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC;YAC3C,IAAM,GAAG,GAAG,KAAK,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC;YAC3C,OAAO,KAAK,CAAC,UAAU,CAAC,KAAK,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;QAC1C,CAAC;;IAhpBD;;;;eAAkC,eAAe;OAAC;IAClD;;;;eAA0C,UAAU,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;OAAC;IAgpBnG,oBAAC;CAAA,AAlpBD,CAAmC,UAAU,GAkpB5C;SAlpBY,aAAa","sourcesContent":["import type { IDisposer } from \"../../../core/util/Disposer\";\r\nimport type { IPoint } from \"../../../core/util/IPoint\";\r\nimport type { Color } from \"../../../core/util/Color\";\r\nimport type { ISpritePointerEvent } from \"../../../core/render/Sprite\";\r\nimport type { ValueAxis } from \"../../xy/axes/ValueAxis\";\r\nimport type { DateAxis } from \"../../xy/axes/DateAxis\";\r\nimport type { AxisRenderer } from \"../../xy/axes/AxisRenderer\";\r\nimport type { Sprite } from \"../../../core/render/Sprite\";\r\nimport type { DataItem } from \"../../../core/render/Component\";\r\n\r\nimport { LineSeries, ILineSeriesSettings, ILineSeriesPrivate, ILineSeriesDataItem } from \"../../xy/series/LineSeries\";\r\nimport { Bullet } from \"../../../core/render/Bullet\";\r\nimport { Circle } from \"../../../core/render/Circle\";\r\nimport { Container } from \"../../../core/render/Container\";\r\nimport { Template } from \"../../../core/util/Template\";\r\nimport type { XYSeries } from \"../../xy/series/XYSeries\";\r\n\r\nimport * as $array from \"../../../core/util/Array\";\r\nimport * as $time from \"../../../core/util/Time\";\r\nimport * as $type from \"../../../core/util/Type\";\r\nimport * as $math from \"../../../core/util/Math\";\r\nimport * as $object from \"../../../core/util/Object\";\r\n\r\nexport interface IDrawingSeriesDataItem extends ILineSeriesDataItem {\r\n}\r\n\r\nexport interface IDrawingSeriesSettings extends ILineSeriesSettings {\r\n\t/**\r\n\t * @todo review\r\n\t */\t\r\n\txAxis: DateAxis<AxisRenderer>;\r\n\t/**\r\n\t * @todo review\r\n\t */\t\r\n\tyAxis: ValueAxis<AxisRenderer>;\r\n\t/**\r\n\t * @todo review\r\n\t */\t\r\n\tstrokeColor?: Color;\r\n\t/**\r\n\t * @todo review\r\n\t */\t\r\n\tfillColor?: Color;\r\n\t/**\r\n\t * @todo review\r\n\t */\t\r\n\tstrokeOpacity?: number;\r\n\t/**\r\n\t * @todo review\r\n\t */\t\r\n\tfillOpacity?: number;\r\n\t/**\r\n\t * @todo review\r\n\t */\t\r\n\tstrokeWidth?: number;\r\n\t/**\r\n\t * @todo review\r\n\t */\t\r\n\tstrokeDasharray?: Array<number>;\r\n\t/**\r\n\t * @todo review\r\n\t */\r\n\tseries?: XYSeries;\r\n}\r\n\r\nexport interface IDrawingSeriesPrivate extends ILineSeriesPrivate {\r\n\r\n}\r\n\r\n\r\nexport class DrawingSeries extends LineSeries {\r\n\tpublic static className: string = \"DrawingSeries\";\r\n\tpublic static classNames: Array<string> = LineSeries.classNames.concat([DrawingSeries.className]);\r\n\r\n\tdeclare public _settings: IDrawingSeriesSettings;\r\n\tdeclare public _privateSettings: IDrawingSeriesPrivate;\r\n\tdeclare public _dataItemSettings: IDrawingSeriesDataItem;\r\n\r\n\tprotected _clickDp?: IDisposer;\r\n\tprotected _moveDp?: IDisposer;\r\n\tprotected _downDp?: IDisposer;\r\n\tprotected _upDp?: IDisposer;\r\n\r\n\tprotected _drawingEnabled: boolean = false;\r\n\tprotected _isDragging: boolean = false;\r\n\r\n\tprotected _clickPointerPoint?: IPoint;\r\n\tprotected _movePointerPoint?: IPoint;\r\n\r\n\tprotected _isDrawing: boolean = false;\r\n\tprotected _isPointerDown: boolean = false;\r\n\r\n\tprotected _index: number = 0;\r\n\r\n\tprotected _di: Array<{ [index: string]: DataItem<IDrawingSeriesDataItem> }> = [];\r\n\r\n\tprotected _dragStartPX: number = 0;\r\n\tprotected _dragStartY: number = 0;\r\n\r\n\tprotected _dvpX: { [index: string]: number | undefined } = {};\r\n\tprotected _dvY: { [index: string]: number | undefined } = {};\r\n\r\n\tprotected _isHover: boolean = false;\r\n\r\n\tprotected _erasingEnabled: boolean = false;\r\n\r\n\tprotected _tag?: string;\r\n\r\n\tprotected _afterNew() {\r\n\t\tthis.addTag(\"drawing\");\r\n\r\n\t\tif (this._tag) {\r\n\t\t\tthis.addTag(this._tag);\r\n\t\t}\r\n\r\n\t\tthis.set(\"valueYField\", \"valueY\");\r\n\t\tthis.set(\"valueXField\", \"valueX\");\r\n\r\n\t\tsuper._afterNew();\r\n\r\n\t\tthis._di[0] = {};\r\n\r\n\t\tthis.set(\"connect\", false);\r\n\t\tthis.set(\"autoGapCount\", Infinity);\r\n\t\tthis.set(\"ignoreMinMax\", true);\r\n\r\n\t\tconst strokesTemplate = this.strokes.template;\r\n\t\tstrokesTemplate.set(\"templateField\", \"stroke\");\r\n\r\n\t\tconst fillsTemplate = this.fills.template;\r\n\t\tfillsTemplate.setAll({ templateField: \"fill\" });\r\n\r\n\r\n\t\tfillsTemplate.events.on(\"dragstart\", (e) => {\r\n\t\t\tthis._handleFillDragStart(e, this._getIndex(e.target));\r\n\r\n\t\t\tthis._isPointerDown = true;\r\n\t\t})\r\n\r\n\t\tfillsTemplate.events.on(\"pointerdown\", (e) => {\r\n\t\t\tconst index = this._getIndex(e.target);\r\n\t\t\tif (this._erasingEnabled) {\r\n\t\t\t\tthis._disposeIndex(index);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconst originalEvent = e.originalEvent as any;\r\n\t\t\t\tif (!originalEvent.button && this._drawingEnabled) {\r\n\t\t\t\t\tthis._handlePointerDown(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst stroke = this.strokes.getIndex(this._getStrokeIndex(index));\r\n\t\t\tif (stroke) {\r\n\t\t\t\tstroke.dragStart(e);\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tstrokesTemplate.events.on(\"pointerdown\", (e) => {\r\n\t\t\tif (this._erasingEnabled) {\r\n\t\t\t\tthis._disposeIndex(this._getIndex(e.target));\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconst originalEvent = e.originalEvent as any;\r\n\t\t\t\tif (!originalEvent.button && this._drawingEnabled) {\r\n\t\t\t\t\tthis._handlePointerDown(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tfillsTemplate.events.on(\"dragstop\", (e) => {\r\n\t\t\tthis._isPointerDown = false;\r\n\t\t\tconst index = this._getIndex(e.target);\r\n\t\t\tthis._handleFillDragStop(e, index);\r\n\r\n\t\t\tconst stroke = this.strokes.getIndex(this._getStrokeIndex(index));\r\n\t\t\tif (stroke) {\r\n\t\t\t\tstroke.dragStop(e);\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tfillsTemplate.events.on(\"pointerover\", (e) => {\r\n\t\t\tconst index = this._getIndex(e.target);\r\n\t\t\tconst stroke = this.strokes.getIndex(this._getStrokeIndex(index));\r\n\t\t\tif (stroke) {\r\n\t\t\t\tstroke.hover();\r\n\t\t\t}\r\n\t\t\tthis._isHover = true;\r\n\t\t\tthis._showSegmentBullets(index);\r\n\t\t})\r\n\r\n\t\tfillsTemplate.events.on(\"pointerout\", () => {\r\n\t\t\tthis._isHover = false;\r\n\t\t\tthis._hideAllBullets();\r\n\t\t})\r\n\r\n\t\tstrokesTemplate.events.on(\"pointerover\", (e) => {\r\n\t\t\tthis._isHover = true;\r\n\t\t\tthis._showSegmentBullets(this._getIndex(e.target));\r\n\t\t})\r\n\r\n\t\tstrokesTemplate.events.on(\"pointerout\", () => {\r\n\t\t\tthis._isHover = false;\r\n\t\t\tthis._hideAllBullets();\r\n\t\t})\r\n\r\n\t\tstrokesTemplate.events.on(\"dragstop\", (e) => {\r\n\t\t\tthis._handleFillDragStop(e, this._getIndex(e.target));\r\n\t\t})\r\n\r\n\t\tstrokesTemplate.events.on(\"dragstart\", (e) => {\r\n\t\t\tthis._handleFillDragStart(e, this._getIndex(e.target));\r\n\t\t})\r\n\r\n\t\tthis.set(\"groupDataDisabled\", true);\r\n\t\tthis.bulletsContainer.states.create(\"hidden\", { visible: true, opacity: 0 });\r\n\r\n\t\tthis.bullets.push(() => {\r\n\t\t\tconst color = this.get(\"strokeColor\", this.get(\"stroke\"));\r\n\r\n\t\t\tconst container = Container.new(this._root, {\r\n\t\t\t\tthemeTags: [\"grip\"],\r\n\t\t\t\tsetStateOnChildren: true,\r\n\t\t\t\tdraggable: true\r\n\t\t\t})\r\n\r\n\t\t\tcontainer.children.push(Circle.new(this._root, {\r\n\t\t\t\tthemeTags: [\"outline\"],\r\n\t\t\t\tstroke: color\r\n\t\t\t}))\r\n\r\n\t\t\tcontainer.children.push(Circle.new(this._root, {\r\n\t\t\t\tstroke: color\r\n\t\t\t}));\r\n\r\n\t\t\tcontainer.events.on(\"pointerover\", (event) => {\r\n\t\t\t\tconst dataItem = event.target.dataItem;\r\n\t\t\t\tif (dataItem) {\r\n\t\t\t\t\tconst dataContext = dataItem.dataContext as any;\r\n\t\t\t\t\tthis._showSegmentBullets(dataContext.index);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\tcontainer.events.on(\"pointerout\", () => {\r\n\t\t\t\tthis._hideAllBullets();\r\n\t\t\t})\r\n\r\n\t\t\tthis._addBulletInteraction(container);\r\n\r\n\t\t\tthis._tweakBullet(container);\r\n\r\n\t\t\treturn Bullet.new(this._root, {\r\n\t\t\t\tlocationX: undefined,\r\n\t\t\t\tsprite: container\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tthis.events.on(\"pointerover\", () => {\r\n\t\t\tthis._handlePointerOver();\r\n\t\t})\r\n\r\n\t\tthis.events.on(\"pointerout\", () => {\r\n\t\t\tthis._handlePointerOut();\r\n\t\t})\r\n\t}\r\n\r\n\tprotected _disposeIndex(index: number) {\r\n\t\tconst dataItems = this._di[index];\r\n\r\n\t\tif (dataItems) {\r\n\t\t\t$object.each(dataItems, (_key, dataItem) => {\r\n\t\t\t\tthis.disposeDataItem(dataItem);\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tpublic clearDrawings(): void {\r\n\t\t$array.each(this._di, (_dataItems, index) => {\r\n\t\t\tthis._disposeIndex(index);\r\n\t\t});\r\n\t}\r\n\r\n\tprotected _getIndex(sprite: Sprite): number {\r\n\t\tconst userData = sprite.get(\"userData\");\r\n\t\tif (userData && userData.length > 0) {\r\n\t\t\tconst dataItem = this.dataItems[userData[0]];\r\n\t\t\tif (dataItem) {\r\n\t\t\t\tconst dataContext = dataItem.dataContext as any;\r\n\t\t\t\tif (dataContext) {\r\n\t\t\t\t\treturn dataContext.index;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tprotected _getStrokeIndex(index: number) {\r\n\t\tlet i = 0;\r\n\t\tlet c = index;\r\n\t\tthis.strokes.each((stroke) => {\r\n\t\t\tconst strokeIndex = this._getIndex(stroke);\r\n\t\t\tif (strokeIndex == index) {\r\n\t\t\t\tc = i;\r\n\t\t\t}\r\n\t\t\ti++;\r\n\t\t})\r\n\t\treturn c;\r\n\t}\r\n\r\n\tprotected _showSegmentBullets(index: number) {\r\n\t\tconst dataItems = this._di[index];\r\n\t\tif (dataItems) {\r\n\t\t\t$object.each(dataItems, (_key, dataItem) => {\r\n\t\t\t\tconst bullets = dataItem.bullets;\r\n\t\t\t\tif (bullets) {\r\n\t\t\t\t\t$array.each(bullets, (bullet) => {\r\n\t\t\t\t\t\tconst sprite = bullet.get(\"sprite\");\r\n\t\t\t\t\t\tif (sprite) {\r\n\t\t\t\t\t\t\tsprite.show();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tprotected _hideAllBullets() {\r\n\t\tthis.strokes.each((stroke) => {\r\n\t\t\tstroke.unhover();\r\n\t\t})\r\n\r\n\t\tif (!this._drawingEnabled && !this._isDragging) {\r\n\t\t\tconst dataItems = this.dataItems;\r\n\r\n\t\t\t$array.each(dataItems, (dataItem) => {\r\n\t\t\t\tconst bullets = dataItem.bullets;\r\n\t\t\t\tif (bullets) {\r\n\t\t\t\t\t$array.each(bullets, (bullet) => {\r\n\t\t\t\t\t\tconst sprite = bullet.get(\"sprite\");\r\n\t\t\t\t\t\tif (sprite) {\r\n\t\t\t\t\t\t\tsprite.hide();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tprotected _handleFillDragStart(event: ISpritePointerEvent, index: number) {\r\n\t\tconst chart = this.chart;\r\n\t\tif (chart) {\r\n\t\t\tconst xAxis = this.get(\"xAxis\");\r\n\t\t\tconst yAxis = this.get(\"yAxis\");\r\n\r\n\t\t\tconst point = chart.plotContainer.toLocal(event.point);\r\n\r\n\t\t\tthis._dragStartPX = xAxis.coordinateToPosition(point.x);\r\n\t\t\tthis._dragStartY = this._getYValue(yAxis.positionToValue(yAxis.coordinateToPosition(point.y)));\r\n\r\n\t\t\tconst dataItems = this._di[index];\r\n\t\t\tif (dataItems) {\r\n\t\t\t\t$object.each(dataItems, (key, dataItem) => {\r\n\t\t\t\t\tthis._dvpX[key] = xAxis.valueToPosition(dataItem.get(\"valueX\", 0));\r\n\t\t\t\t\tthis._dvY[key] = dataItem.get(\"valueY\");\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprotected _handleFillDragStop(event: ISpritePointerEvent, index: number) {\r\n\t\tconst chart = this.chart;\r\n\t\tif (chart) {\r\n\t\t\tconst point = chart.plotContainer.toLocal(event.point);\r\n\r\n\t\t\tconst xAxis = this.get(\"xAxis\");\r\n\t\t\tconst yAxis = this.get(\"yAxis\");\r\n\r\n\t\t\tconst posX = xAxis.coordinateToPosition(point.x);\r\n\t\t\tconst valueY = this._getYValue(yAxis.positionToValue(yAxis.coordinateToPosition(point.y)));\r\n\r\n\t\t\tconst dpx = posX - this._dragStartPX;\r\n\t\t\tconst dy = valueY - this._dragStartY;\r\n\r\n\t\t\tconst dataItems = this._di[index];\r\n\r\n\t\t\tif (dataItems) {\r\n\t\t\t\t$object.each(dataItems, (key, dataItem) => {\r\n\t\t\t\t\tconst dvpx = this._dvpX[key];\r\n\t\t\t\t\tconst dvy = this._dvY[key];\r\n\t\t\t\t\tif ($type.isNumber(dvpx) && $type.isNumber(dvy)) {\r\n\r\n\t\t\t\t\t\tconst vpx = dvpx + dpx;\r\n\t\t\t\t\t\tconst vy = dvy + dy;\r\n\t\t\t\t\t\tconst vx = this._getXValue(xAxis.positionToValue(vpx))\r\n\r\n\t\t\t\t\t\tdataItem.set(\"valueX\", vx);\r\n\t\t\t\t\t\tthis._setXLocation(dataItem, vx);\r\n\r\n\t\t\t\t\t\tdataItem.set(\"valueY\", vy);\r\n\t\t\t\t\t\tdataItem.set(\"valueYWorking\", vy);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._updateSegment(index);\r\n\t\tthis._updateElements();\r\n\t}\r\n\r\n\tprotected _updateSegment(_index: number) {\r\n\r\n\t}\r\n\r\n\tpublic _updateChildren() {\r\n\r\n\t\tif (this.isDirty(\"strokeColor\") || this.isDirty(\"fillColor\") || this.isDirty(\"strokeOpacity\") || this.isDirty(\"fillOpacity\") || this.isDirty(\"strokeWidth\") || this.isDirty(\"strokeDasharray\")) {\r\n\t\t\tthis.data.push({ stroke: this._getStrokeTemplate(), fill: this._getFillTemplate() });\r\n\t\t}\r\n\r\n\t\tthis._updateElements();\r\n\t\tsuper._updateChildren();\r\n\t}\r\n\r\n\tprotected _getFillTemplate(): Template<any> {\r\n\t\tconst fillTemplate: any = {};\r\n\r\n\t\tconst fillColor = this.get(\"fillColor\");\r\n\t\tif (fillColor != null) {\r\n\t\t\tfillTemplate.fill = fillColor;\r\n\t\t}\r\n\r\n\t\tconst fillOpacity = this.get(\"fillOpacity\");\r\n\t\tif (fillOpacity != null) {\r\n\t\t\tfillTemplate.fillOpacity = fillOpacity;\r\n\t\t}\r\n\r\n\t\treturn Template.new(fillTemplate);\r\n\t}\r\n\r\n\tprotected _getStrokeTemplate(): Template<any> {\r\n\t\tconst strokeTemplate: any = {};\r\n\r\n\t\tconst strokeColor = this.get(\"strokeColor\");\r\n\t\tif (strokeColor != null) {\r\n\t\t\tstrokeTemplate.stroke = strokeColor;\r\n\t\t}\r\n\r\n\t\tconst strokeOpacity = this.get(\"strokeOpacity\");\r\n\t\tif (strokeOpacity != null) {\r\n\t\t\tstrokeTemplate.strokeOpacity = strokeOpacity;\r\n\t\t}\r\n\r\n\t\tconst strokeDasharray = this.get(\"strokeDasharray\");\r\n\t\tif (strokeDasharray != null) {\r\n\t\t\tstrokeTemplate.strokeDasharray = strokeDasharray;\r\n\t\t}\r\n\r\n\t\tconst strokeWidth = this.get(\"strokeWidth\");\r\n\t\tif (strokeWidth != null) {\r\n\t\t\tstrokeTemplate.strokeWidth = strokeWidth;\r\n\t\t}\r\n\r\n\t\treturn Template.new(strokeTemplate);\r\n\t}\r\n\r\n\tprotected _updateElements() {\r\n\r\n\t}\r\n\r\n\tprotected _tweakBullet(_container: Container) {\r\n\r\n\t}\r\n\r\n\tprotected _addBulletInteraction(sprite: Sprite) {\r\n\t\tsprite.events.on(\"dragged\", (e) => {\r\n\t\t\tthis._handleBulletDragged(e);\r\n\t\t\tthis._isDragging = true;\r\n\t\t})\r\n\r\n\t\tsprite.events.on(\"dragstart\", (e) => {\r\n\t\t\tthis._handleBulletDragStart(e);\r\n\t\t})\r\n\r\n\t\tsprite.events.on(\"dragstop\", (e) => {\r\n\t\t\tthis._handleBulletDragStop(e);\r\n\t\t\tthis.setTimeout(() => {\r\n\t\t\t\tthis._isDragging = false;\r\n\t\t\t}, 100)\r\n\t\t})\r\n\r\n\t\tsprite.events.on(\"click\", (e) => {\r\n\t\t\tif (this._erasingEnabled) {\r\n\t\t\t\tconst dataItem = e.target.dataItem;\r\n\t\t\t\tif (dataItem) {\r\n\t\t\t\t\tconst dataContext = dataItem.dataContext as any;\r\n\t\t\t\t\tif (dataContext) {\r\n\t\t\t\t\t\tthis._disposeIndex(dataContext.index);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._handlePointerClick(e);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tprotected _handlePointerClick(event: ISpritePointerEvent) {\r\n\t\tconst chart = this.chart;\r\n\t\tif (chart) {\r\n\t\t\tthis._clickPointerPoint = chart.plotContainer.toLocal(event.point)\r\n\t\t}\r\n\t}\r\n\r\n\t// need this in order bullets not to be placed to the charts bullets container\r\n\tpublic _placeBulletsContainer() {\r\n\t\tthis.children.moveValue(this.bulletsContainer);\r\n\t}\r\n\r\n\tprotected _handleBulletDragged(event: ISpritePointerEvent) {\r\n\r\n\t\tconst dataItem = event.target.dataItem as DataItem<this[\"_dataItemSettings\"]>;\r\n\r\n\t\tconst chart = this.chart;\r\n\t\tif (chart) {\r\n\t\t\tconst target = event.target;\r\n\t\t\tconst point = { x: target.x(), y: target.y() };\r\n\t\t\tthis._handleBulletDraggedReal(dataItem, point);\r\n\t\t}\r\n\r\n\t\tconst dataContext = dataItem.dataContext as any;\r\n\t\tif (dataContext) {\r\n\t\t\tconst index = dataContext.index;\r\n\t\t\tthis._updateSegment(index);\r\n\t\t\tthis._updateElements();\r\n\t\t}\r\n\t}\r\n\r\n\tprotected _handleBulletDraggedReal(dataItem: DataItem<this[\"_dataItemSettings\"]>, point: IPoint) {\r\n\t\tconst xAxis = this.get(\"xAxis\");\r\n\t\tconst yAxis = this.get(\"yAxis\");\r\n\r\n\t\tconst valueX = this._getXValue(xAxis.positionToValue(xAxis.coordinateToPosition(point.x)));\r\n\t\tconst valueY = this._getYValue(yAxis.positionToValue(yAxis.coordinateToPosition(point.y)));\r\n\r\n\t\tdataItem.set(\"valueX\", valueX);\r\n\t\tthis._setXLocation(dataItem, valueX);\r\n\r\n\t\tdataItem.set(\"valueY\", valueY);\r\n\t\tdataItem.set(\"valueYWorking\", valueY);\r\n\r\n\t\tthis._positionBullets(dataItem);\r\n\t}\r\n\r\n\tprotected _handleBulletDragStart(_event: ISpritePointerEvent) {\r\n\r\n\t}\r\n\r\n\tprotected _handleBulletDragStop(_event: ISpritePointerEvent) {\r\n\r\n\t}\r\n\r\n\tprotected _handlePointerOver() {\r\n\r\n\t}\r\n\r\n\tprotected _handlePointerOut() {\r\n\r\n\t}\r\n\r\n\tprotected _addContextInfo(index: number, corner?: any) {\r\n\t\tconst dataItems = this.dataItems;\r\n\t\tconst len = dataItems.length;\r\n\t\tconst dataItem = dataItems[len - 1];\r\n\t\tconst dataContext = dataItem.dataContext as any;\r\n\t\tif (dataContext) {\r\n\t\t\tdataContext.index = index;\r\n\t\t\tif (corner != null) {\r\n\t\t\t\tdataContext.corner = corner;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!this._di[index]) {\r\n\t\t\tthis._di[index] = {};\r\n\t\t}\r\n\t\tthis._di[index][corner] = dataItem;\r\n\t}\r\n\r\n\tpublic enableDrawing() {\r\n\t\tconst chart = this.chart;\r\n\t\tthis._erasingEnabled = false;\r\n\t\tthis._drawingEnabled = true;\r\n\t\tif (chart) {\r\n\t\t\tif (!this._clickDp) {\r\n\t\t\t\tthis._clickDp = chart.plotContainer.events.on(\"click\", (e) => {\r\n\t\t\t\t\tconst originalEvent = e.originalEvent as any;\r\n\t\t\t\t\tif (!originalEvent.button && !this._erasingEnabled) {\r\n\t\t\t\t\t\tthis._handlePointerClick(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tif (!this._downDp) {\r\n\t\t\t\tthis._downDp = chart.plotContainer.events.on(\"pointerdown\", (e) => {\r\n\t\t\t\t\tconst originalEvent = e.originalEvent as any;\r\n\t\t\t\t\tif (!originalEvent.button && !this._erasingEnabled) {\r\n\t\t\t\t\t\tthis._handlePointerDown(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tif (!this._upDp) {\r\n\t\t\t\tthis._upDp = chart.plotContainer.events.on(\"globalpointerup\", (e) => {\r\n\t\t\t\t\tconst originalEvent = e.originalEvent as any;\r\n\t\t\t\t\tif (!originalEvent.button && !this._erasingEnabled) {\r\n\t\t\t\t\t\tthis._handlePointerUp(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tif (!this._moveDp) {\r\n\t\t\t\tthis._moveDp = chart.plotContainer.events.on(\"globalpointermove\", (e) => {\r\n\t\t\t\t\tif (!this._erasingEnabled) {\r\n\t\t\t\t\t\tthis._handlePointerMove(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic enableErasing() {\r\n\t\tthis._erasingEnabled = true;\r\n\t}\r\n\r\n\tpublic disableErasing() {\r\n\t\tthis._erasingEnabled = false;\r\n\t}\r\n\r\n\tpublic disableDrawing() {\r\n\t\tthis._erasingEnabled = false;\r\n\t\tthis._drawingEnabled = false;\r\n\t\tthis._isDrawing = false;\r\n\t\tif (this._clickDp) {\r\n\t\t\tthis._clickDp.dispose();\r\n\t\t\tthis._clickDp = undefined;\r\n\t\t}\r\n\r\n\t\tif (this._downDp) {\r\n\t\t\tthis._downDp.dispose();\r\n\t\t\tthis._downDp = undefined;\r\n\t\t}\r\n\r\n\t\tif (this._upDp) {\r\n\t\t\tthis._upDp.dispose();\r\n\t\t\tthis._upDp = undefined;\r\n\t\t}\r\n\t\tthis._hideAllBullets();\r\n\t}\r\n\r\n\tprotected _handlePointerMove(event: ISpritePointerEvent) {\r\n\t\tconst chart = this.chart;\r\n\t\tif (chart) {\r\n\t\t\tthis._movePointerPoint = chart.plotContainer.toLocal(event.point)\r\n\t\t}\r\n\t}\r\n\r\n\tprotected _handlePointerDown(_event: ISpritePointerEvent) {\r\n\t\tthis._isPointerDown = true;\r\n\t}\r\n\r\n\tprotected _handlePointerUp(_event: ISpritePointerEvent) {\r\n\t\tthis._isPointerDown = false;\r\n\t}\r\n\r\n\tpublic startIndex(): number {\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tpublic endIndex(): number {\r\n\t\treturn this.dataItems.length;\r\n\t}\r\n\r\n\tprotected _setXLocation(dataItem: DataItem<this[\"_dataItemSettings\"]>, value: number) {\r\n\t\tthis._setXLocationReal(dataItem, value);\r\n\t}\r\n\r\n\tprotected _setXLocationReal(dataItem: DataItem<this[\"_dataItemSettings\"]>, value: number) {\r\n\t\tconst xAxis = this.get(\"xAxis\");\r\n\t\tconst baseInterval = xAxis.getPrivate(\"baseInterval\");\r\n\t\tconst open = $time.round(new Date(value), baseInterval.timeUnit, baseInterval.count, this._root.locale.firstDayOfWeek, this._root.utc).getTime();\r\n\t\tconst close = $time.add(new Date(open), baseInterval.timeUnit, baseInterval.count, this._root.utc).getTime();\r\n\t\tconst locationX = (value - open) / (close - open);\r\n\t\tdataItem.set(\"locationX\", locationX);\r\n\t}\r\n\r\n\tpublic disposeDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\r\n\t\tconst dataContext = dataItem.dataContext as any;\r\n\t\tif (dataContext) {\r\n\t\t\tconst index = dataContext.index;\r\n\r\n\t\t\t$array.removeFirst(this.dataItems, dataItem);\r\n\t\t\tthis.markDirtyValues();\r\n\r\n\t\t\tconst dataItems = this._di[index];\r\n\r\n\t\t\tif (dataItems) {\r\n\t\t\t\t$object.each(dataItems, (_key, dataItem) => {\r\n\t\t\t\t\tsuper.disposeDataItem(dataItem);\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tprotected _getYValue(value: number): number {\r\n\t\tif (this.get(\"valueYShow\") == \"valueYChangeSelectionPercent\") {\r\n\t\t\tconst baseValueSeries = this.getPrivate(\"baseValueSeries\");\r\n\t\t\tif (baseValueSeries) {\r\n\t\t\t\tconst baseValue = baseValueSeries._getBase(\"valueY\");\r\n\t\t\t\tvalue = value / 100 * baseValue + baseValue;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tprotected _getXValue(value: number): number {\r\n\t\tconst xAxis = this.get(\"xAxis\");\r\n\t\tconst min = xAxis.getPrivate(\"min\", 0) + 1;\r\n\t\tconst max = xAxis.getPrivate(\"max\", 1) - 1;\r\n\t\treturn $math.fitToRange(value, min, max);\r\n\t}\t\r\n}"]}