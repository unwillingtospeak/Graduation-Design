{"version":3,"file":"StockPanel.js","sourceRoot":"","sources":["../../../../../src/.internal/charts/stock/StockPanel.ts"],"names":[],"mappings":"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","sourcesContent":["import type { PanelControls } from \"./PanelControls\";\r\nimport type { StockChart } from \"./StockChart\"\r\n\r\nimport { XYChart, IXYChartPrivate, IXYChartSettings } from \"../xy/XYChart\";\r\nimport type { XYSeries } from \"../xy/series/XYSeries\";\r\n\r\nimport * as $array from \"../../core/util/Array\";\r\nimport { ListAutoDispose } from \"../../core/util/List\";\r\n\r\nexport interface IStockPanelSettings extends IXYChartSettings {\r\n}\r\n\r\nexport interface IStockPanelPrivate extends IXYChartPrivate {\r\n\r\n\t/**\r\n\t * A target [[StockChart]].\r\n\t */\r\n\tstockChart: StockChart;\r\n\r\n}\r\n\r\n/**\r\n * A panel instance for the [[StockChart]].\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/stock/panels/} for more info\r\n * @important\r\n */\r\nexport class StockPanel extends XYChart {\r\n\tpublic static className: string = \"StockPanel\";\r\n\tpublic static classNames: Array<string> = XYChart.classNames.concat([StockPanel.className]);\r\n\r\n\tdeclare public _settings: IStockPanelSettings;\r\n\tdeclare public _privateSettings: IStockPanelPrivate;\r\n\r\n\t/**\r\n\t * An instance of [[PanelControls]].\r\n\t */\r\n\tpublic panelControls!: PanelControls;\r\n\r\n\r\n\t/**\r\n\t * A list of drawings on panel.\r\n\t *\r\n\t */\r\n\tpublic readonly drawings: ListAutoDispose<XYSeries> = new ListAutoDispose();\t\r\n\r\n\tprotected _afterNew() {\t\t\r\n\t\tsuper._afterNew();\r\n\t\t\r\n\t\tthis._disposers.push(this.drawings.events.onAll((change) => {\r\n\t\t\tif (change.type === \"clear\") {\r\n\t\t\t\t$array.each(change.oldValues, (series) => {\r\n\t\t\t\t\tthis.series.removeValue(series);\r\n\t\t\t\t})\t\t\t\t\r\n\t\t\t} else if (change.type === \"push\") {\t\t\t\t\r\n\t\t\t\tthis.series.push(change.newValue);\r\n\t\t\t} else if (change.type === \"setIndex\") {\r\n\t\t\t\tthis.series.setIndex(change.index, change.newValue);\r\n\t\t\t} else if (change.type === \"insertIndex\") {\r\n\t\t\t\tthis.series.insertIndex(change.index, change.newValue);\r\n\t\t\t} else if (change.type === \"removeIndex\") {\r\n\t\t\t\tthis.series.removeIndex(change.index);\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Error(\"Unknown IListEvent type\");\r\n\t\t\t}\r\n\t\t}));\r\n\t}\t\r\n\r\n\t/**\r\n\t * Moves panel up.\r\n\t */\r\n\tpublic moveUp(): void {\r\n\t\tconst stockChart = this.getPrivate(\"stockChart\");\r\n\t\tconst children = stockChart.panelsContainer.children;\r\n\r\n\t\tconst index = children.indexOf(this);\r\n\t\tif (index > 0) {\r\n\t\t\tchildren.moveValue(this, index - 1);\r\n\t\t}\r\n\r\n\t\tstockChart._updateControls();\r\n\t}\r\n\r\n\t/**\r\n\t * Moves panel down.\r\n\t */\r\n\tpublic moveDown(): void {\r\n\t\tconst stockChart = this.getPrivate(\"stockChart\");\r\n\t\tconst children = stockChart.panelsContainer.children;\r\n\r\n\t\tconst index = children.indexOf(this);\r\n\t\tif (index < children.length - 1) {\r\n\t\t\tchildren.moveValue(this, index + 1);\r\n\t\t}\r\n\t\tstockChart._updateControls();\r\n\t}\r\n\r\n\t/**\r\n\t * Closes panel.\r\n\t */\r\n\tpublic close(): void {\r\n\t\tconst stockChart = this.getPrivate(\"stockChart\");\r\n\t\tstockChart.panels.removeValue(this);\r\n\t\tstockChart._updateControls();\r\n\t}\r\n\r\n\t/**\r\n\t * Toggles \"full screen\" mode of the panel on and off.\r\n\t */\r\n\tpublic expand(): void {\r\n\t\tconst stockChart = this.getPrivate(\"stockChart\");\r\n\r\n\t\tconst panels: Array<StockPanel> = [];\r\n\t\tstockChart.panels.each((panel) => {\r\n\t\t\tif (!panel.isVisible()) {\r\n\t\t\t\tpanels.push(panel);\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\t$array.each(panels, (panel) => {\r\n\t\t\tpanel.setPrivate(\"visible\", true);\r\n\t\t})\r\n\r\n\t\tif (panels.length == 0) {\r\n\t\t\tstockChart.panels.each((panel) => {\r\n\t\t\t\tif (panel != this) {\r\n\t\t\t\t\tpanel.setPrivate(\"visible\", false);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tstockChart._updateControls();\r\n\r\n\t\tif (panels.length == 0) {\r\n\t\t\tconst panelControls = this.panelControls;\r\n\t\t\tpanelControls.upButton.setPrivate(\"visible\", false);\r\n\t\t\tpanelControls.downButton.setPrivate(\"visible\", false);\r\n\t\t\tpanelControls.closeButton.setPrivate(\"visible\", false);\r\n\t\t}\r\n\t}\r\n}\r\n"]}