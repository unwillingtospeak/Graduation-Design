{
  "version": 3,
  "sources": ["../../src/.internal/core/util/ResizeSensor.ts", "../../src/.internal/core/util/InterfaceColors.ts", "../../src/.internal/core/render/PointedRectangle.ts", "../../src/.internal/core/render/Tooltip.ts", "../../src/.internal/core/util/NumberFormatter.ts", "../../src/.internal/core/util/DateFormatter.ts", "../../src/.internal/core/util/DurationFormatter.ts", "../../src/locales/en.ts", "../../src/.internal/core/util/Language.ts", "../../src/.internal/core/util/Matrix.ts", "../../svg-arc-to-cubic-bezier/modules/index.js", "../../src/.internal/core/render/backend/CanvasRenderer.ts", "../../src/.internal/core/Root.ts", "../../src/.internal/core/util/Modal.ts", "../../src/.internal/core/render/Bullet.ts", "../../src/.internal/core/render/Circle.ts", "../../src/.internal/core/render/Ellipse.ts", "../../src/.internal/core/render/Star.ts", "../../src/.internal/core/render/gradients/Gradient.ts", "../../src/.internal/core/render/gradients/LinearGradient.ts", "../../src/.internal/core/render/HeatLegend.ts", "../../src/.internal/core/render/Legend.ts", "../../src/.internal/core/util/Draw.ts", "../../src/.internal/core/render/Line.ts", "../../src/.internal/core/render/Picture.ts", "../../src/.internal/core/render/RadialText.ts", "../../src/.internal/core/render/RadialLabel.ts", "../../src/.internal/core/render/Triangle.ts", "../../src/.internal/core/render/Scrollbar.ts", "../../src/.internal/core/render/Slider.ts", "../../d3-path/src/path.js", "../../d3-shape/src/constant.js", "../../d3-shape/src/math.js", "../../d3-shape/src/arc.js", "../../d3-shape/src/array.js", "../../d3-shape/src/curve/linear.js", "../../d3-shape/src/curve/radial.js", "../../d3-shape/src/symbol/asterisk.js", "../../d3-shape/src/symbol/diamond.js", "../../d3-shape/src/symbol/star.js", "../../d3-shape/src/symbol/triangle.js", "../../d3-shape/src/symbol/triangle2.js", "../../d3-shape/src/symbol/wye.js", "../../d3-shape/src/noop.js", "../../d3-shape/src/curve/basis.js", "../../d3-shape/src/curve/basisClosed.js", "../../d3-shape/src/curve/basisOpen.js", "../../d3-shape/src/curve/bundle.js", "../../d3-shape/src/curve/cardinal.js", "../../d3-shape/src/curve/cardinalClosed.js", "../../d3-shape/src/curve/cardinalOpen.js", "../../d3-shape/src/curve/catmullRom.js", "../../d3-shape/src/curve/catmullRomClosed.js", "../../d3-shape/src/curve/catmullRomOpen.js", "../../d3-shape/src/curve/linearClosed.js", "../../d3-shape/src/curve/monotone.js", "../../d3-shape/src/curve/natural.js", "../../d3-shape/src/curve/step.js", "../../src/.internal/core/render/Slice.ts", "../../src/.internal/core/render/Tick.ts", "../../src/.internal/core/util/Timezone.ts", "../../src/.internal/core/render/gradients/RadialGradient.ts", "../../src/.internal/core/render/patterns/Pattern.ts", "../../src/.internal/core/render/patterns/CirclePattern.ts", "../../src/.internal/core/render/patterns/LinePattern.ts", "../../src/.internal/core/render/patterns/RectanglePattern.ts", "../../src/.internal/core/util/ColorSet.ts", "../../src/.internal/core/util/DataParser.ts", "../../src/.internal/core/util/DataProcessor.ts", "../../src/.internal/core/util/Net.ts"],
  "sourcesContent": ["/** @ignore *//** */\n\nimport type { IDisposer } from \"./Disposer\";\nimport * as $array from \"./Array\";\n\n/**\n * @ignore\n */\ninterface Sensor {\n\taddTarget(target: Element, callback: () => void): void;\n\tremoveTarget(target: Element): void;\n}\n\n/**\n * @ignore\n */\ndeclare const ResizeObserver: any;\n\n/**\n * @ignore\n */\nclass Native implements Sensor {\n\tprivate _observer: any;\n\tprivate _targets: Array<{ target: Element, callback: () => void }> = [];\n\n\tconstructor() {\n\t\tthis._observer = new ResizeObserver((entries: Array<any>) => {\n\t\t\t$array.each(entries, (entry) => {\n\t\t\t\t$array.each(this._targets, (x) => {\n\t\t\t\t\tif (x.target === entry.target) {\n\t\t\t\t\t\tx.callback();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\n\taddTarget(target: Element, callback: () => void) {\n\t\tthis._observer.observe(target, { box: \"border-box\" });\n\t\tthis._targets.push({ target, callback });\n\t}\n\n\tremoveTarget(target: Element) {\n\t\tthis._observer.unobserve(target);\n\n\t\t$array.keepIf(this._targets, (x) => {\n\t\t\treturn x.target !== target;\n\t\t});\n\t}\n}\n\n/**\n * @ignore\n */\ninterface ClientBounds {\n\twidth: number,\n\theight: number,\n\tleft: number,\n\tright: number,\n\ttop: number,\n\tbottom: number,\n\tx: number,\n\ty: number\n}\n\n\n/**\n * @ignore\n */\nclass Raf implements Sensor {\n\tpublic static delay: number = 200;\n\n\tprivate _timer: number | null = null;\n\tprivate _targets: Array<{ target: Element, callback: () => void, size: ClientRect | DOMRect | ClientBounds }> = [];\n\n\taddTarget(target: Element, callback: () => void) {\n\t\tif (this._timer === null) {\n\t\t\tlet lastTime: number | null = null;\n\n\t\t\tconst loop = () => {\n\t\t\t\tconst currentTime = Date.now();\n\n\t\t\t\tif (lastTime === null || currentTime > (lastTime + Raf.delay)) {\n\t\t\t\t\tlastTime = currentTime;\n\n\t\t\t\t\t$array.each(this._targets, (x) => {\n\t\t\t\t\t\tlet newSize = x.target.getBoundingClientRect();\n\n\t\t\t\t\t\tif (newSize.width !== x.size.width || newSize.height !== x.size.height) {\n\t\t\t\t\t\t\tx.size = newSize;\n\t\t\t\t\t\t\tx.callback();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (this._targets.length === 0) {\n\t\t\t\t\tthis._timer = null;\n\n\t\t\t\t} else {\n\t\t\t\t\tthis._timer = requestAnimationFrame(loop);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis._timer = requestAnimationFrame(loop);\n\t\t}\n\n\t\t// We start off with fake bounds so that sensor always kicks in\n\t\tlet size = { width: 0, height: 0, left: 0, right: 0, top: 0, bottom: 0, x: 0, y: 0 };\n\t\tthis._targets.push({ target, callback, size });\n\t}\n\n\tremoveTarget(target: Element) {\n\t\t$array.keepIf(this._targets, (x) => {\n\t\t\treturn x.target !== target;\n\t\t});\n\n\t\tif (this._targets.length === 0) {\n\t\t\tif (this._timer !== null) {\n\t\t\t\tcancelAnimationFrame(this._timer);\n\t\t\t\tthis._timer = null;\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n/**\n * @ignore\n */\nlet observer: Sensor | null = null;\n\n/**\n * @ignore\n */\nfunction makeSensor(): Sensor {\n\tif (observer === null) {\n\t\tif (typeof ResizeObserver !== \"undefined\") {\n\t\t\tobserver = new Native();\n\n\t\t} else {\n\t\t\tobserver = new Raf();\n\t\t}\n\t}\n\n\treturn observer;\n}\n\n/**\n * @ignore\n */\nexport class ResizeSensor implements IDisposer {\n\tprivate _sensor: Sensor;\n\tprivate _element: Element;\n\tprivate _disposed: boolean = false;\n\n\tconstructor(element: Element, callback: () => void) {\n\t\tthis._sensor = makeSensor();\n\t\tthis._element = element;\n\t\tthis._sensor.addTarget(element, callback);\n\t}\n\n\tpublic isDisposed() {\n\t\treturn this._disposed;\n\t}\n\n\tpublic dispose() {\n\t\tif (!this._disposed) {\n\t\t\tthis._disposed = true;\n\t\t\tthis._sensor.removeTarget(this._element);\n\t\t}\n\t}\n\n\tpublic get sensor(): Sensor {\n\t\treturn this._sensor;\n\t}\n}\n", "import type { Color } from \"./Color\"\n\nimport { Entity, IEntitySettings } from \"./Entity\"\n\n\nexport interface IInterfaceColorsSettings extends IEntitySettings {\n\n\t/**\n\t * Used for generic outlines.\n\t */\n\tstroke?: Color,\n\n\t/**\n\t * Used for generic fills.\n\t */\n\tfill?: Color,\n\n\t/**\n\t * Primary button fill color.\n\t */\n\tprimaryButton?: Color,\n\n\t/**\n\t * Primary button fill color on hover.\n\t */\n\tprimaryButtonHover?: Color,\n\n\t/**\n\t * Primary button fill color when pressing down on it.\n\t */\n\tprimaryButtonDown?: Color,\n\n\t/**\n\t * Primary button fill color when it is set as active.\n\t */\n\tprimaryButtonActive?: Color,\n\n\t/**\n\t * Primary button text color.\n\t */\n\tprimaryButtonText?: Color,\n\n\t/**\n\t * Primary button stroke (outline) color.\n\t */\n\tprimaryButtonStroke?: Color,\n\n\t/**\n\t * Secondary button fill color.\n\t */\n\tsecondaryButton?: Color,\n\n\t/**\n\t * Secondary button fill color on hover.\n\t */\n\tsecondaryButtonHover?: Color,\n\n\t/**\n\t * Secondary button fill color when pressing down on it.\n\t */\n\tsecondaryButtonDown?: Color,\n\n\t/**\n\t * Secondary button fill color when it is set as active.\n\t */\n\tsecondaryButtonActive?: Color,\n\n\t/**\n\t * Secondary button text color.\n\t */\n\tsecondaryButtonText?: Color,\n\n\t/**\n\t * Secondary button stroke (outline) color.\n\t */\n\tsecondaryButtonStroke?: Color,\n\n\t/**\n\t * Grid color.\n\t */\n\tgrid?: Color,\n\n\t/**\n\t * Chart background color.\n\t */\n\tbackground?: Color,\n\n\t/**\n\t * Alternative background, for elements that need to contrast with primary\n\t * background.\n\t */\n\talternativeBackground?: Color,\n\n\t/**\n\t * Label text color.\n\t */\n\ttext?: Color,\n\n\t/**\n\t * Alternative text color, used for inverted (dark) backgrounds.\n\t * @type {[type]}\n\t */\n\talternativeText?: Color,\n\n\t/**\n\t * Color for disabled elements.\n\t */\n\tdisabled?: Color,\n\n\t/**\n\t * Color to indicate positive value.\n\t */\n\tpositive?: Color,\n\n\t/**\n\t * Color to indicate negative value.\n\t */\n\tnegative?: Color\n\n}\n\n\n/**\n * Presets for common UI elements.\n */\nexport class InterfaceColors extends Entity {\n\tpublic static className: string = \"InterfaceColors\";\n\tpublic static classNames: Array<string> = Entity.classNames.concat([InterfaceColors.className]);\n\n\tdeclare public _settings: IInterfaceColorsSettings;\n}\n", "import { Graphics, IGraphicsSettings, IGraphicsPrivate } from \"./Graphics\";\nimport * as $math from \"../util/Math\";\n\nexport interface IPointedRectangleSettings extends IGraphicsSettings {\n\n\t/**\n\t * A width of the pinter's (stem's) thick end (base) in pixels.\n\t */\n\tpointerBaseWidth?: number;\n\n\t/**\n\t * A length of the pinter (stem) in pixels.\n\t */\n\tpointerLength?: number;\n\n\t/**\n\t * X coordinate the shape is pointing to.\n\t */\n\tpointerX?: number;\n\n\t/**\n\t * Y coordinate the shape is pointing to.\n\t */\n\tpointerY?: number;\n\n\t/**\n\t * Corner radius in pixels.\n\t */\n\tcornerRadius?: number;\n}\n\nexport interface IPointedRectanglePrivate extends IGraphicsPrivate {\n}\n\n/**\n * Draws a rectangle with a pointer.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\n * @important\n */\nexport class PointedRectangle extends Graphics {\n\n\tdeclare public _settings: IPointedRectangleSettings;\n\tdeclare public _privateSettings: IPointedRectanglePrivate;\n\n\tpublic static className: string = \"PointedRectangle\";\n\tpublic static classNames: Array<string> = Graphics.classNames.concat([PointedRectangle.className]);\n\n\tpublic _beforeChanged() {\n\t\tsuper._beforeChanged();\n\n\t\tif (this.isDirty(\"pointerBaseWidth\") || this.isDirty(\"cornerRadius\") || this.isDirty(\"pointerLength\") || this.isDirty(\"pointerX\") || this.isDirty(\"pointerY\") || this.isDirty(\"width\") || this.isDirty(\"height\")) {\n\t\t\tthis._clear = true;\n\t\t}\n\t}\n\n\tpublic _changed() {\n\t\tsuper._changed();\n\n\t\tif (this._clear) {\n\n\t\t\tthis.markDirtyBounds();\n\n\t\t\tlet w = this.width();\n\t\t\tlet h = this.height();\n\n\t\t\tif (w > 0 && h > 0) {\n\t\t\t\tlet cr = this.get(\"cornerRadius\", 8);\n\t\t\t\tcr = $math.fitToRange(cr, 0, Math.min(w / 2, h / 2));\n\n\t\t\t\tlet x = this.get(\"pointerX\", 0);\n\t\t\t\tlet y = this.get(\"pointerY\", 0);\n\t\t\t\tlet bwh = this.get(\"pointerBaseWidth\", 15) / 2;\n\n\t\t\t\t// corner coordinates\n\t\t\t\t// top left\n\t\t\t\tlet xtl = 0;\n\t\t\t\tlet ytl = 0;\n\t\t\t\t// top right\n\t\t\t\tlet xtr = w;\n\t\t\t\tlet ytr = 0;\n\t\t\t\t// bottom right\n\t\t\t\tlet xbr = w;\n\t\t\t\tlet ybr = h;\n\t\t\t\t// bottom left\n\t\t\t\tlet xbl = 0;\n\t\t\t\tlet ybl = h;\n\n\t\t\t\t// find stem base side: http://$math.stackexchange.com/questions/274712/calculate-on-which-side-of-straign-line-is-dot-located\n\t\t\t\t// d=(x\u2212x1)(y2\u2212y1)\u2212(y\u2212y1)(x2\u2212x1)\n\t\t\t\tlet d1 = (x - xtl) * (ybr - ytl) - (y - ytl) * (xbr - xtl);\n\t\t\t\tlet d2 = (x - xbl) * (ytr - ybl) - (y - ybl) * (xtr - xbl);\n\n\t\t\t\tconst display = this._display;\n\t\t\t\t// top\n\t\t\t\tdisplay.moveTo(cr, 0);\n\n\t\t\t\tif (d1 > 0 && d2 > 0) {\n\t\t\t\t\tlet stemX = Math.round($math.fitToRange(x, cr + bwh, w - bwh - cr));\n\t\t\t\t\ty = $math.fitToRange(y, -Infinity, 0);\n\n\t\t\t\t\tdisplay.lineTo(stemX - bwh, 0);\n\t\t\t\t\tdisplay.lineTo(x, y);\n\t\t\t\t\tdisplay.lineTo(stemX + bwh, 0);\n\t\t\t\t}\n\n\t\t\t\tdisplay.lineTo(w - cr, 0);\n\t\t\t\tdisplay.arcTo(w, 0, w, cr, cr);\n\n\t\t\t\t// right\n\t\t\t\tif (d1 > 0 && d2 < 0) {\n\t\t\t\t\tlet stemY = Math.round($math.fitToRange(y, cr + bwh, h - bwh - cr));\n\t\t\t\t\tx = $math.fitToRange(x, w, Infinity);\n\t\t\t\t\tdisplay.lineTo(w, cr);\n\t\t\t\t\tdisplay.lineTo(w, stemY - bwh);\n\t\t\t\t\tdisplay.lineTo(x, y);\n\t\t\t\t\tdisplay.lineTo(w, stemY + bwh);\n\t\t\t\t}\n\t\t\t\tdisplay.lineTo(w, h - cr);\n\t\t\t\tdisplay.arcTo(w, h, w - cr, h, cr);\n\n\t\t\t\t// bottom\n\t\t\t\tif (d1 < 0 && d2 < 0) {\n\t\t\t\t\tlet stemX = Math.round($math.fitToRange(x, cr + bwh, w - bwh - cr));\n\t\t\t\t\ty = $math.fitToRange(y, h, Infinity);\n\n\t\t\t\t\tdisplay.lineTo(w - cr, h);\n\t\t\t\t\tdisplay.lineTo(stemX + bwh, h);\n\t\t\t\t\tdisplay.lineTo(x, y);\n\t\t\t\t\tdisplay.lineTo(stemX - bwh, h);\n\t\t\t\t}\n\t\t\t\tdisplay.lineTo(cr, h)\n\t\t\t\tdisplay.arcTo(0, h, 0, h - cr, cr);\n\n\n\t\t\t\t// left\n\t\t\t\tif (d1 < 0 && d2 > 0) {\n\t\t\t\t\tlet stemY = Math.round($math.fitToRange(y, cr + bwh, h - cr - bwh));\n\t\t\t\t\tx = $math.fitToRange(x, -Infinity, 0);\n\t\t\t\t\tdisplay.lineTo(0, h - cr);\n\t\t\t\t\tdisplay.lineTo(0, stemY + bwh);\n\t\t\t\t\tdisplay.lineTo(x, y);\n\t\t\t\t\tdisplay.lineTo(0, stemY - bwh);\n\t\t\t\t}\n\t\t\t\tdisplay.lineTo(0, cr);\n\t\t\t\tdisplay.arcTo(0, 0, cr, 0, cr);\n\t\t\t}\n\t\t}\n\t}\n}\n", "import type { IBounds } from \"../util/IBounds\";\nimport type { IPoint } from \"../util/IPoint\";\nimport type { Pattern } from \"../render/patterns/Pattern\";\nimport type { Time } from \"../util/Animation\";\nimport type { Sprite } from \"../render/Sprite\";\nimport type { MultiDisposer, IDisposer } from \"../util/Disposer\";\n\nimport { Label } from \"../render/Label\";\nimport { PointedRectangle } from \"../render/PointedRectangle\";\nimport { Container, IContainerPrivate, IContainerSettings } from \"./Container\";\nimport { Percent } from \"../util/Percent\";\nimport { Color } from \"../util/Color\";\n\nimport * as $math from \"../util/Math\";\nimport * as $array from \"../util/Array\";\nimport * as $utils from \"../util/Utils\";\n//import * as $utils from \"../util/Utils\";\nimport type { DataItem, IComponentDataItem } from \"./Component\";\n\n\nexport interface ITooltipSettings extends IContainerSettings {\n\n\t/**\n\t * Text to use for tooltip's label.\n\t */\n\tlabelText?: string\n\n\t/**\n\t * HTML content to use for tooltip's label.\n\t *\n\t * @since 5.2.11\n\t */\n\tlabelHTML?: string\n\n\t/**\n\t * A direction of the tooltip pointer.\n\t *\n\t * https://www.amcharts.com/docs/v5/concepts/common-elements/tooltips/#Orientation\n\t */\n\tpointerOrientation?: \"left\" | \"right\" | \"up\" | \"down\" | \"vertical\" | \"horizontal\";\n\n\t/**\n\t * If set to `true` will use the same `fill` color for its background as\n\t * its `tooltipTarget`.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/tooltips/#Colors} for more info\n\t * @default false\n\t */\n\tgetFillFromSprite?: boolean;\n\n\t/**\n\t * If set to `true` will use the same `fill` color as its `tooltipTarget`.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/tooltips/#Colors} for more info\n\t * @default false\n\t */\n\tgetLabelFillFromSprite?: boolean;\n\n\t/**\n\t * If set to `true` will use the same `stroke` color as its `tooltipTarget`.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/tooltips/#Colors} for more info\n\t * @default false\n\t */\n\tgetStrokeFromSprite?: boolean;\n\n\t/**\n\t * Scree bounds to constring tooltip within.\n\t */\n\tbounds?: IBounds;\n\n\t/**\n\t * If set to `true` tooltip will adjust its text color for better visibility\n\t * on its background.\n\t *\n\t * @default true\n\t */\n\tautoTextColor?: boolean;\n\n\t/**\n\t * Screen coordinates the tooltip show point to.\n\t */\n\tpointTo?: IPoint;\n\n\t/**\n\t * Duration in milliseconds for tooltip position change, e.g. when tooltip\n\t * is jumping from one target to another.\n\t */\n\tanimationDuration?: number;\n\n\t/**\n\t * Easing function for tooltip animation.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/animations/#Easing_functions} for more info\n\t */\n\tanimationEasing?: (t: Time) => Time;\n\n\t/**\n\t * A target element tooltip is shown fow.\n\t */\n\ttooltipTarget?: Sprite;\n\n}\n\nexport interface ITooltipPrivate extends IContainerPrivate {\n}\n\n/**\n * Creates a tooltip.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/tooltips/} for more info\n * @important\n */\nexport class Tooltip extends Container {\n\n\tprotected _arrangeDisposer: MultiDisposer | undefined;\n\n\tpublic _fx: number = 0;\n\tpublic _fy: number = 0;\n\n\tdeclare public _settings: ITooltipSettings;\n\tdeclare public _privateSettings: ITooltipPrivate;\n\n\tprotected _label!: Label;\n\tpublic static className: string = \"Tooltip\";\n\tpublic static classNames: Array<string> = Container.classNames.concat([Tooltip.className]);\n\n\tprotected _fillDp: IDisposer | undefined;\n\tprotected _strokeDp: IDisposer | undefined;\n\tprotected _labelDp: IDisposer | undefined;\n\n\tprotected _w: number = 0;\n\tprotected _h: number = 0;\n\n\tprotected _afterNew() {\n\t\tthis._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"tooltip\"]);\n\n\t\tsuper._afterNew();\n\n\t\tthis.set(\"background\", PointedRectangle.new(this._root, {\n\t\t\tthemeTags: [\"tooltip\", \"background\"]\n\t\t}));\n\n\t\tthis._label = this.children.push(Label.new(this._root, {}));\n\n\t\tthis._disposers.push(this._label.events.on(\"boundschanged\", () => {\n\t\t\tthis._updateBackground();\n\t\t}))\n\n\t\tthis.on(\"bounds\", () => {\n\t\t\tthis._updateBackground();\n\t\t})\n\n\t\tthis._updateTextColor();\n\n\t\tthis._root.tooltipContainer.children.push(this);\n\t\tthis.hide(0);\n\n\t\tthis._root._tooltips.push(this);\n\t}\n\n\t/**\n\t * A [[Label]] element for the tooltip.\n\t *\n\t * @readonly\n\t * @return Label\n\t */\n\tpublic get label(): Label {\n\t\treturn this._label;\n\t}\n\n\t/**\n\t * Permanently disposes the tooltip.\n\t */\n\tpublic dispose() {\n\t\tsuper.dispose();\n\t\t$array.remove(this._root._tooltips, this);\n\t}\n\n\tpublic _updateChildren() {\n\t\tsuper._updateChildren();\n\t\tconst labelText = this.get(\"labelText\");\n\t\tif (labelText != null) {\n\t\t\tthis.label.set(\"text\", this.get(\"labelText\"));\n\t\t}\n\t\tconst labelHTML = this.get(\"labelHTML\");\n\t\tif (labelHTML != null) {\n\t\t\tthis.label.set(\"html\", this.get(\"labelHTML\"));\n\t\t}\n\t}\n\n\tpublic _changed() {\n\t\tsuper._changed();\n\n\t\tif (this.isDirty(\"pointTo\")) {\n\t\t\t// can't compare to previous, as sometimes pointTo is set twice (when pointer moves, so the position won't be udpated)\n\t\t\tthis._updateBackground();\n\t\t}\n\n\t\tif (this.isDirty(\"tooltipTarget\")) {\n\t\t\tthis.updateBackgroundColor();\n\t\t}\n\t}\n\n\tprotected _onShow() {\n\t\tsuper._onShow();\n\t\tthis.updateBackgroundColor();\n\t}\n\n\n\tpublic updateBackgroundColor() {\n\t\tlet tooltipTarget = this.get(\"tooltipTarget\");\n\t\tconst background = this.get(\"background\");\n\t\tlet fill: Color | undefined;\n\t\tlet stroke: Color | undefined;\n\n\n\t\tif (tooltipTarget && background) {\n\n\t\t\tfill = tooltipTarget.get(\"fill\" as any);\n\t\t\tstroke = tooltipTarget.get(\"stroke\" as any);\n\n\t\t\tif (fill == null) {\n\t\t\t\tfill = stroke;\n\t\t\t}\n\n\t\t\tif (this.get(\"getFillFromSprite\")) {\n\n\t\t\t\tif (this._fillDp) {\n\t\t\t\t\tthis._fillDp.dispose();\n\t\t\t\t}\n\n\t\t\t\tif (fill != null) {\n\t\t\t\t\tbackground.set(\"fill\", fill as any);\n\t\t\t\t}\n\n\t\t\t\tthis._fillDp = tooltipTarget.on(\"fill\" as any, (fill) => {\n\t\t\t\t\tif (fill != null) {\n\t\t\t\t\t\tbackground.set(\"fill\", fill as any);\n\t\t\t\t\t\tthis._updateTextColor(fill);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tif (this.get(\"getStrokeFromSprite\")) {\n\n\t\t\t\tif (this._strokeDp) {\n\t\t\t\t\tthis._strokeDp.dispose();\n\t\t\t\t}\n\n\t\t\t\tif (fill != null) {\n\t\t\t\t\tbackground.set(\"stroke\", fill as any);\n\t\t\t\t}\n\n\t\t\t\tthis._strokeDp = tooltipTarget.on(\"fill\" as any, (fill) => {\n\t\t\t\t\tif (fill != null) {\n\t\t\t\t\t\tbackground.set(\"stroke\", fill as any);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tif (this.get(\"getLabelFillFromSprite\")) {\n\n\t\t\t\tif (this._labelDp) {\n\t\t\t\t\tthis._labelDp.dispose();\n\t\t\t\t}\n\n\t\t\t\tif (fill != null) {\n\t\t\t\t\tthis.label.set(\"fill\", fill as any);\n\t\t\t\t}\n\n\t\t\t\tthis._labelDp = tooltipTarget.on(\"fill\" as any, (fill) => {\n\t\t\t\t\tif (fill != null) {\n\t\t\t\t\t\tthis.label.set(\"fill\", fill as any);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\n\t\tthis._updateTextColor(fill);\n\t}\n\n\n\tprotected _updateTextColor(fill?: Color | Pattern) {\n\t\tif (this.get(\"autoTextColor\")) {\n\t\t\tif (fill == null) {\n\t\t\t\tfill = this.get(\"background\")!.get(\"fill\") as Color;\n\t\t\t}\n\n\t\t\tif (fill == null) {\n\t\t\t\tfill = this._root.interfaceColors.get(\"background\");\n\t\t\t}\n\n\t\t\tif (fill instanceof Color) {\n\t\t\t\tthis.label.set(\"fill\", Color.alternative(fill, this._root.interfaceColors.get(\"alternativeText\"), this._root.interfaceColors.get(\"text\")));\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic _setDataItem(dataItem?: DataItem<IComponentDataItem>): void {\n\t\tsuper._setDataItem(dataItem);\n\t\tthis.label._setDataItem(dataItem);\n\t}\n\n\n\tprotected _updateBackground() {\n\t\tsuper.updateBackground();\n\t\tconst parent = this._root.container;\n\n\t\tif (parent) {\n\n\t\t\tlet cw = 0.5;\n\t\t\tlet ch = 0.5;\n\n\t\t\tlet centerX = this.get(\"centerX\");\n\t\t\tif (centerX instanceof Percent) {\n\t\t\t\tcw = centerX.value;\n\t\t\t}\n\n\t\t\tlet centerY = this.get(\"centerY\");\n\t\t\tif (centerY instanceof Percent) {\n\t\t\t\tch = centerY.value;\n\t\t\t}\n\n\t\t\tlet parentW = parent.width();\n\t\t\tlet parentH = parent.height();\n\n\t\t\tconst bounds = this.get(\"bounds\", { left: 0, top: 0, right: parentW, bottom: parentH });\n\n\t\t\tthis._updateBounds();\n\n\t\t\tlet w = this.width();\n\t\t\tlet h = this.height();\n\n\t\t\t// use old w and h,as when tooltip is hidden, these are 0 and unneeded animation happens\n\t\t\tif (w === 0) {\n\t\t\t\tw = this._w;\n\t\t\t}\n\n\t\t\tif (h === 0) {\n\t\t\t\th = this._h;\n\t\t\t}\n\n\t\t\tlet pointTo = this.get(\"pointTo\", { x: parentW / 2, y: parentH / 2 });\n\t\t\tlet x = pointTo.x;\n\t\t\tlet y = pointTo.y;\n\n\t\t\tlet pointerOrientation = this.get(\"pointerOrientation\");\n\n\t\t\tlet background = this.get(\"background\");\n\t\t\tlet pointerLength = 0;\n\t\t\tlet bgStrokeSizeY = 0;\n\t\t\tlet bgStrokeSizeX = 0;\n\n\t\t\tif (background instanceof PointedRectangle) {\n\t\t\t\tpointerLength = background.get(\"pointerLength\", 0);\n\t\t\t\tbgStrokeSizeY = background.get(\"strokeWidth\", 0) / 2;\n\t\t\t\tbgStrokeSizeX = bgStrokeSizeY;\n\t\t\t}\n\n\t\t\tlet pointerX = 0;\n\t\t\tlet pointerY = 0;\n\n\t\t\tlet boundsW = bounds.right - bounds.left;\n\t\t\tlet boundsH = bounds.bottom - bounds.top;\n\n\n\n\t\t\t// horizontal\n\t\t\tif (pointerOrientation == \"horizontal\" || pointerOrientation == \"left\" || pointerOrientation == \"right\") {\n\t\t\t\tbgStrokeSizeY = 0;\n\t\t\t\tif (pointerOrientation == \"horizontal\") {\n\t\t\t\t\tif (x > bounds.left + boundsW / 2) {\n\t\t\t\t\t\tx -= (w * (1 - cw) + pointerLength);\n\t\t\t\t\t\tbgStrokeSizeX *= -1;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tx += (w * cw + pointerLength);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (pointerOrientation == \"left\") {\n\t\t\t\t\tx += (w * (1 - cw) + pointerLength);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tx -= (w * cw + pointerLength);\n\t\t\t\t\tbgStrokeSizeX *= -1;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// vertical pointer\n\t\t\telse {\n\t\t\t\tbgStrokeSizeX = 0;\n\t\t\t\tif (pointerOrientation == \"vertical\") {\n\t\t\t\t\tif (y > bounds.top + h / 2 + pointerLength) {\n\t\t\t\t\t\ty -= (h * (1 - ch) + pointerLength);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\ty += (h * ch + pointerLength);\n\t\t\t\t\t\tbgStrokeSizeY *= -1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (pointerOrientation == \"down\") {\n\t\t\t\t\ty -= (h * (1 - ch) + pointerLength);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ty += (h * ch + pointerLength);\n\t\t\t\t\tbgStrokeSizeY *= -1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tx = $math.fitToRange(x, bounds.left + w * cw, bounds.left + boundsW - w * (1 - cw)) + bgStrokeSizeX;\n\t\t\ty = $math.fitToRange(y, bounds.top + h * ch, bounds.top + boundsH - h * (1 - ch)) - bgStrokeSizeY;\n\n\t\t\tpointerX = pointTo.x - x + w * cw + bgStrokeSizeX;\n\t\t\tpointerY = pointTo.y - y + h * ch - bgStrokeSizeY;\n\n\t\t\tthis._fx = x;\n\t\t\tthis._fy = y;\n\n\t\t\tconst animationDuration = this.get(\"animationDuration\", 0);\n\n\t\t\tif (animationDuration > 0 && this.get(\"visible\") && this.get(\"opacity\") > 0.1) {\n\t\t\t\tconst animationEasing = this.get(\"animationEasing\");\n\t\t\t\tthis.animate({ key: \"x\", to: x, duration: animationDuration, easing: animationEasing });\n\t\t\t\tthis.animate({ key: \"y\", to: y, duration: animationDuration, easing: animationEasing });\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.set(\"x\", x);\n\t\t\t\tthis.set(\"y\", y);\n\t\t\t}\n\n\t\t\tif (background instanceof PointedRectangle) {\n\t\t\t\tbackground.set(\"pointerX\", pointerX);\n\t\t\t\tbackground.set(\"pointerY\", pointerY);\n\t\t\t}\n\n\t\t\tif (w > 0) {\n\t\t\t\tthis._w = w;\n\t\t\t}\n\t\t\tif (h > 0) {\n\t\t\t\tthis._h = h;\n\t\t\t}\n\t\t}\n\t}\n}\n", "import type { Language } from \"./Language\";\n\nimport { Entity, IEntitySettings, IEntityPrivate } from \"./Entity\"\nimport { TextFormatter } from \"./TextFormatter\";\n\nimport * as $object from \"./Object\";\nimport * as $utils from \"./Utils\";\nimport * as $type from \"./Type\";\n\n/**\n * @ignore\n */\nexport interface INumberSuffix {\n\tnumber: number;\n\tsuffix: string;\n}\n\nexport interface INumberFormatterSettings extends IEntitySettings {\n\n\t/**\n\t * Number format to be used when formatting numbers.\n\t *\n\t * @default \"#,###.#####\"\n\t */\n\tnumberFormat?: string | Intl.NumberFormatOptions;\n\n\t/**\n\t * A threshold value for negative numbers.\n\t *\n\t * @default 0\n\t */\n\tnegativeBase?: number;\n\n\t/**\n\t * Prefixes and thresholds to group big numbers into, e.g. 1M.\n\t *\n\t * Used in conjunction with `a` modifier of the number format.\n\t */\n\tbigNumberPrefixes?: INumberSuffix[];\n\n\t/**\n\t * Prefixes and thresholds to group small numbers into, e.g. 1m.\n\t *\n\t * Used in conjunction with `a` modifier of the number format.\n\t */\n\tsmallNumberPrefixes?: INumberSuffix[];\n\n\t/**\n\t * All numbers below this value are considered small.\n\t *\n\t * @default 1\n\t */\n\tsmallNumberThreshold?: number;\n\n\t/**\n\t * Prefixes to and thresholds to use when grouping data size numbers, e.g. 1MB.\n\t *\n\t * Used in conjunction with `b` modifier of the number format.\n\t */\n\tbytePrefixes?: INumberSuffix[];\n\n\t/**\n\t * Indicates which fields in data should be considered numeric.\n\t *\n\t * It is used when formatting data placeholder values.\n\t */\n\tnumericFields?: string[];\n\n\t/**\n\t * Locales if you are using date formats in `Intl.NumberFormatOptions` syntax.\n\t *\n\t * @see (@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NumberFormat) about using Intl for number formatting\n\t * @param value Locales\n\t */\n\tintlLocales?: string;\n\n}\n\nexport interface INumberFormatterPrivate extends IEntityPrivate {\n}\n\n/**\n * Number formatter\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-numbers/} for more info\n * @important\n */\nexport class NumberFormatter extends Entity {\n\tdeclare public _settings: INumberFormatterSettings;\n\tdeclare public _privateSettings: INumberFormatterPrivate;\n\n\tprotected _setDefaults() {\n\t\t// Defaults\n\t\tthis._setDefault(\"negativeBase\", 0);\n\t\tthis._setDefault(\"numberFormat\", \"#,###.#####\");\n\t\tthis._setDefault(\"smallNumberThreshold\", 1.00);\n\n\t\tconst bns = \"_big_number_suffix_\";\n\t\tconst sns = \"_small_number_suffix_\";\n\t\tconst bs = \"_byte_suffix_\";\n\n\t\tthis._setDefault(\"bigNumberPrefixes\", [\n\t\t\t{ \"number\": 1e+3, \"suffix\": this._t(bns + \"3\") },\n\t\t\t{ \"number\": 1e+6, \"suffix\": this._t(bns + \"6\") },\n\t\t\t{ \"number\": 1e+9, \"suffix\": this._t(bns + \"9\") },\n\t\t\t{ \"number\": 1e+12, \"suffix\": this._t(bns + \"12\") },\n\t\t\t{ \"number\": 1e+15, \"suffix\": this._t(bns + \"15\") },\n\t\t\t{ \"number\": 1e+18, \"suffix\": this._t(bns + \"18\") },\n\t\t\t{ \"number\": 1e+21, \"suffix\": this._t(bns + \"21\") },\n\t\t\t{ \"number\": 1e+24, \"suffix\": this._t(bns + \"24\") }\n\t\t]);\n\n\t\tthis._setDefault(\"smallNumberPrefixes\", [\n\t\t\t{ \"number\": 1e-24, \"suffix\": this._t(sns + \"24\") },\n\t\t\t{ \"number\": 1e-21, \"suffix\": this._t(sns + \"21\") },\n\t\t\t{ \"number\": 1e-18, \"suffix\": this._t(sns + \"18\") },\n\t\t\t{ \"number\": 1e-15, \"suffix\": this._t(sns + \"15\") },\n\t\t\t{ \"number\": 1e-12, \"suffix\": this._t(sns + \"12\") },\n\t\t\t{ \"number\": 1e-9, \"suffix\": this._t(sns + \"9\") },\n\t\t\t{ \"number\": 1e-6, \"suffix\": this._t(sns + \"6\") },\n\t\t\t{ \"number\": 1e-3, \"suffix\": this._t(sns + \"3\") }\n\t\t]);\n\n\t\tthis._setDefault(\"bytePrefixes\", [\n\t\t\t{ \"number\": 1, suffix: this._t(bs + \"B\") },\n\t\t\t{ \"number\": 1024, suffix: this._t(bs + \"KB\") },\n\t\t\t{ \"number\": 1048576, suffix: this._t(bs + \"MB\") },\n\t\t\t{ \"number\": 1073741824, suffix: this._t(bs + \"GB\") },\n\t\t\t{ \"number\": 1099511627776, suffix: this._t(bs + \"TB\") },\n\t\t\t{ \"number\": 1125899906842624, suffix: this._t(bs + \"PB\") }\n\t\t]);\n\n\t\tsuper._setDefaults();\n\t}\n\n\tpublic _beforeChanged() {\n\t\tsuper._beforeChanged();\n\t}\n\n\t/**\n\t * Formats the number according to specific format.\n\t *\n\t * @param value   Value to format\n\t * @param format  Format to apply\n\t * @return Formatted number\n\t */\n\tpublic format(value: number | string, format?: string | Intl.NumberFormatOptions, precision?: number): string {\n\n\t\t// no format passed in or \"Number\"\n\t\tif (format == null || ($type.isString(format) && format.toLowerCase() === \"number\")) {\n\t\t\tformat = this.get(\"numberFormat\", \"\");\n\t\t}\n\n\t\t// Init return value\n\t\tlet formatted;\n\n\t\t// Cast to number just in case\n\t\t// TODO: maybe use better casting\n\t\tlet source: number = Number(value);\n\n\t\t// Is it a built-in format or Intl.NumberFormatOptions\n\t\tif ($type.isObject(format)) {\n\t\t\ttry {\n\t\t\t\tif (this.get(\"intlLocales\")) {\n\t\t\t\t\treturn new Intl.NumberFormat(this.get(\"intlLocales\"), <Intl.NumberFormatOptions>format).format(source);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn new Intl.NumberFormat(undefined, <Intl.NumberFormatOptions>format).format(source);\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\treturn \"Invalid\";\n\t\t\t}\n\n\t\t}\n\t\telse {\n\n\t\t\t// Clean format\n\t\t\tformat = $utils.cleanFormat(format!);\n\n\t\t\t// Get format info (it will also deal with parser caching)\n\t\t\tlet info = this.parseFormat(format, this._root.language);\n\n\n\t\t\t// format and replace the number\n\t\t\tlet details;\n\t\t\tif (source > this.get(\"negativeBase\")) {\n\t\t\t\tdetails = info.positive;\n\t\t\t}\n\t\t\telse if (source < this.get(\"negativeBase\")) {\n\t\t\t\tdetails = info.negative;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdetails = info.zero;\n\t\t\t}\n\n\t\t\t// Adjust precision\n\t\t\tif (precision != null && !details.mod) {\n\t\t\t\tdetails = $object.copy(details);\n\t\t\t\tdetails.decimals.active = source == 0 ? 0 : precision;\n\t\t\t}\n\n\t\t\t// Format\n\t\t\tformatted = details.template.split($type.PLACEHOLDER).join(this.applyFormat(source, details));\n\n\t\t}\n\n\t\treturn formatted;\n\t}\n\n\t/**\n\t * Parses supplied format into structured object which can be used to format\n\t * the number.\n\t *\n\t * @param format Format string, i.e. \"#,###.00\"\n\t * @param language Language\n\t * @ignore\n\t */\n\tprotected parseFormat(format: string, language: Language): any {\n\n\t\t// Check cache\n\t\t// TODO\n\t\t// let cached = this.getCache(format);\n\t\t// if (cached != null) {\n\t\t// \treturn cached;\n\t\t// }\n\n\t\tconst thousandSeparator = language.translateEmpty(\"_thousandSeparator\");\n\t\tconst decimalSeparator = language.translateEmpty(\"_decimalSeparator\")\n\n\t\t// init format parse info holder\n\t\tlet info: any = {\n\t\t\t\"positive\": {\n\t\t\t\t\"thousands\": {\n\t\t\t\t\t\"active\": -1,\n\t\t\t\t\t\"passive\": -1,\n\t\t\t\t\t\"interval\": -1,\n\t\t\t\t\t\"separator\": thousandSeparator\n\t\t\t\t},\n\t\t\t\t\"decimals\": {\n\t\t\t\t\t\"active\": -1,\n\t\t\t\t\t\"passive\": -1,\n\t\t\t\t\t\"separator\": decimalSeparator\n\t\t\t\t},\n\t\t\t\t\"template\": \"\",\n\t\t\t\t\"source\": \"\",\n\t\t\t\t\"parsed\": false\n\t\t\t},\n\t\t\t\"negative\": {\n\t\t\t\t\"thousands\": {\n\t\t\t\t\t\"active\": -1,\n\t\t\t\t\t\"passive\": -1,\n\t\t\t\t\t\"interval\": -1,\n\t\t\t\t\t\"separator\": thousandSeparator\n\t\t\t\t},\n\t\t\t\t\"decimals\": {\n\t\t\t\t\t\"active\": -1,\n\t\t\t\t\t\"passive\": -1,\n\t\t\t\t\t\"separator\": decimalSeparator\n\t\t\t\t},\n\t\t\t\t\"template\": \"\",\n\t\t\t\t\"source\": \"\",\n\t\t\t\t\"parsed\": false\n\t\t\t},\n\t\t\t\"zero\": {\n\t\t\t\t\"thousands\": {\n\t\t\t\t\t\"active\": -1,\n\t\t\t\t\t\"passive\": -1,\n\t\t\t\t\t\"interval\": -1,\n\t\t\t\t\t\"separator\": thousandSeparator\n\t\t\t\t},\n\t\t\t\t\"decimals\": {\n\t\t\t\t\t\"active\": -1,\n\t\t\t\t\t\"passive\": -1,\n\t\t\t\t\t\"separator\": decimalSeparator\n\t\t\t\t},\n\t\t\t\t\"template\": \"\",\n\t\t\t\t\"source\": \"\",\n\t\t\t\t\"parsed\": false\n\t\t\t}\n\t\t};\n\n\t\t// Escape double vertical bars (that mean display one vertical bar)\n\t\tformat = format.replace(\"||\", $type.PLACEHOLDER2);\n\n\t\t// Split it up and deal with different formats\n\t\tlet parts = format.split(\"|\");\n\t\tinfo.positive.source = parts[0];\n\n\t\tif (typeof parts[2] === \"undefined\") {\n\t\t\tinfo.zero = info.positive;\n\t\t}\n\t\telse {\n\t\t\tinfo.zero.source = parts[2];\n\t\t}\n\n\t\tif (typeof parts[1] === \"undefined\") {\n\t\t\tinfo.negative = info.positive;\n\t\t}\n\t\telse {\n\t\t\tinfo.negative.source = parts[1];\n\t\t}\n\n\t\t// Parse each\n\t\t$object.each(info, (_part, item) => {\n\t\t\t// Already parsed\n\t\t\tif (item.parsed) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Check cached\n\t\t\t// TODO\n\t\t\t// if (typeof this.getCache(item.source) !== \"undefined\") {\n\t\t\t// \tinfo[part] = this.getCache(item.source);\n\t\t\t// \treturn;\n\t\t\t// }\n\n\t\t\t// Begin parsing\n\t\t\tlet partFormat = item.source;\n\n\t\t\t// Just \"Number\"?\n\t\t\tif (partFormat.toLowerCase() === \"number\") {\n\t\t\t\tpartFormat = this.get(\"numberFormat\", \"#,###.#####\");\n\t\t\t}\n\n\t\t\t// Let TextFormatter split into chunks\n\t\t\tlet chunks = TextFormatter.chunk(partFormat, true);\n\t\t\tfor (let i: number = 0; i < chunks.length; i++) {\n\t\t\t\tlet chunk = chunks[i];\n\n\t\t\t\t// replace back double vertical bar\n\t\t\t\tchunk.text = chunk.text.replace($type.PLACEHOLDER2, \"|\");\n\n\t\t\t\tif (chunk.type === \"value\") {\n\t\t\t\t\t// Parse format\n\n\t\t\t\t\t// Look for codes\n\t\t\t\t\tlet matches: string[] | null = chunk.text.match(/[#0.,]+[ ]?[abesABES%!]?[abesABES\u2030!]?/);\n\n\t\t\t\t\tif (matches) {\n\t\t\t\t\t\tif (matches === null || matches[0] === \"\") {\n\t\t\t\t\t\t\t// no codes here - assume string\n\t\t\t\t\t\t\t// nothing to do here\n\t\t\t\t\t\t\titem.template += chunk.text;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\n\t\t\t\t\t\t\t// look for the format modifiers at the end\n\t\t\t\t\t\t\tlet mods: string[] | null = matches[0].match(/[abesABES%\u2030!]{2}|[abesABES%\u2030]{1}$/);\n\n\t\t\t\t\t\t\tif (mods) {\n\t\t\t\t\t\t\t\titem.mod = mods[0].toLowerCase();\n\t\t\t\t\t\t\t\titem.modSpacing = matches[0].match(/[ ]{1}[abesABES%\u2030!]{1}$/) ? true : false;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// break the format up\n\t\t\t\t\t\t\tlet a = matches[0].split(\".\");\n\n\t\t\t\t\t\t\t// Deal with thousands\n\t\t\t\t\t\t\tif (a[0] === \"\") {\n\t\t\t\t\t\t\t\t// No directives for thousands\n\t\t\t\t\t\t\t\t// Leave default settings (no formatting)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t// Counts\n\t\t\t\t\t\t\t\titem.thousands.active = (a[0].match(/0/g) || []).length;\n\t\t\t\t\t\t\t\titem.thousands.passive = (a[0].match(/\\#/g) || []).length + item.thousands.active;\n\n\t\t\t\t\t\t\t\t// Separator interval\n\t\t\t\t\t\t\t\tlet b = a[0].split(\",\");\n\t\t\t\t\t\t\t\tif (b.length === 1) {\n\t\t\t\t\t\t\t\t\t// No thousands separators\n\t\t\t\t\t\t\t\t\t// Do nothing\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t// Use length fo the last chunk as thousands length\n\t\t\t\t\t\t\t\t\titem.thousands.interval = (b.pop() || \"\").length;\n\n\t\t\t\t\t\t\t\t\tif (item.thousands.interval === 0) {\n\t\t\t\t\t\t\t\t\t\titem.thousands.interval = -1;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Deal with decimals\n\t\t\t\t\t\t\tif (typeof (a[1]) === \"undefined\") {\n\t\t\t\t\t\t\t\t// No directives for decimals\n\t\t\t\t\t\t\t\t// Leave at defaults (no formatting)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t// Counts\n\t\t\t\t\t\t\t\titem.decimals.active = (a[1].match(/0/g) || []).length;\n\t\t\t\t\t\t\t\titem.decimals.passive = (a[1].match(/\\#/g) || []).length + item.decimals.active;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Add special code to template\n\t\t\t\t\t\t\titem.template += chunk.text.split(matches[0]).join($type.PLACEHOLDER);\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// Quoted string - take it as it is\n\t\t\t\t\titem.template += chunk.text;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Apply style formatting\n\t\t\t//item.template = getTextFormatter().format(item.template, this.outputFormat);\n\n\t\t\t// Save cache\n\t\t\t// TODO\n\t\t\t//this.setCache(item.source, item);\n\n\t\t\t// Mark this as parsed\n\t\t\titem.parsed = true;\n\n\t\t});\n\n\t\t// Save cache (the whole thing)\n\t\t// TODO\n\t\t//this.setCache(format, info);\n\n\t\treturn info;\n\t}\n\n\t/**\n\t * Applies parsed format to a numeric value.\n\t *\n\t * @param value    Value\n\t * @param details  Parsed format as returned by parseFormat()\n\t * @return Formatted number\n\t * @ignore\n\t */\n\tprotected applyFormat(value: number, details: any): string {\n\n\t\t// Use absolute values\n\t\tlet negative: boolean = value < 0;\n\t\tvalue = Math.abs(value);\n\n\t\t// Recalculate according to modifier\n\t\tlet prefix: string = \"\", suffix: string = \"\";\n\t\tlet mods: string[] = details.mod ? details.mod.split(\"\") : [];\n\t\tif (mods.indexOf(\"b\") !== -1) {\n\t\t\tlet a = this.applyPrefix(value, this.get(\"bytePrefixes\")!, mods.indexOf(\"!\") !== -1);\n\t\t\tvalue = a[0];\n\t\t\tprefix = a[1];\n\t\t\tsuffix = a[2];\n\t\t\tif (details.modSpacing) {\n\t\t\t\tsuffix = \" \" + suffix;\n\t\t\t}\n\t\t}\n\t\telse if (mods.indexOf(\"a\") !== -1) {\n\t\t\tlet a = this.applyPrefix(value, value < this.get(\"smallNumberThreshold\")! ? this.get(\"smallNumberPrefixes\")! : this.get(\"bigNumberPrefixes\")!, mods.indexOf(\"!\") !== -1);\n\t\t\tvalue = a[0];\n\t\t\tprefix = a[1];\n\t\t\tsuffix = a[2];\n\t\t\tif (details.modSpacing) {\n\t\t\t\tsuffix = \" \" + suffix;\n\t\t\t}\n\t\t}\n\t\telse if (mods.indexOf(\"%\") !== -1) {\n\t\t\tlet ol = Math.min(value.toString().length + 2, 21);\n\t\t\tvalue *= 100;\n\t\t\tvalue = parseFloat(value.toPrecision(ol));\n\t\t\tsuffix = \"%\";\n\t\t}\n\t\telse if (mods.indexOf(\"\u2030\") !== -1) {\n\t\t\tlet ol = Math.min(value.toString().length + 3, 21);\n\t\t\tvalue *= 1000;\n\t\t\tvalue = parseFloat(value.toPrecision(ol));\n\t\t\tsuffix = \"\u2030\";\n\t\t}\n\n\t\t// Round to passive\n\t\tif (mods.indexOf(\"e\") !== -1) {\n\t\t\t// convert the value to exponential\n\t\t\tlet exp: string[];\n\t\t\tif (details.decimals.passive >= 0) {\n\t\t\t\texp = value.toExponential(details.decimals.passive).split(\"e\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\texp = value.toExponential().split(\"e\");\n\t\t\t}\n\t\t\tvalue = Number(exp[0]);\n\t\t\tsuffix = \"e\" + exp[1];\n\t\t\tif (details.modSpacing) {\n\t\t\t\tsuffix = \" \" + suffix;\n\t\t\t}\n\t\t}\n\t\telse if (details.decimals.passive === 0) {\n\t\t\tvalue = Math.round(value);\n\t\t}\n\t\telse if (details.decimals.passive > 0) {\n\t\t\tlet d: number = Math.pow(10, details.decimals.passive);\n\t\t\tvalue = Math.round(value * d) / d;\n\t\t}\n\n\t\t// Init return value\n\t\tlet res: string = \"\";\n\n\t\t// Calc integer and decimal parts\n\t\tlet a = $type.numberToString(value).split(\".\");\n\n\t\t// Format integers\n\t\tlet ints = a[0];\n\n\t\t// Pad integers to active length\n\t\tif (ints.length < details.thousands.active) {\n\t\t\tints = Array(details.thousands.active - ints.length + 1).join(\"0\") + ints;\n\t\t}\n\n\t\t// Insert thousands separators\n\t\tif (details.thousands.interval > 0) {\n\t\t\tlet ip: string[] = [];\n\t\t\tlet intsr: string = ints.split(\"\").reverse().join(\"\");\n\t\t\tfor (let i = 0, len = ints.length; i <= len; i += details.thousands.interval) {\n\t\t\t\tlet c: string = intsr.substr(i, details.thousands.interval).split(\"\").reverse().join(\"\");\n\t\t\t\tif (c !== \"\") {\n\t\t\t\t\tip.unshift(c);\n\t\t\t\t}\n\t\t\t}\n\t\t\tints = ip.join(details.thousands.separator);\n\t\t}\n\n\t\t// Add integers\n\t\tres += ints;\n\n\t\t// Add decimals\n\t\tif (a.length === 1) {\n\t\t\ta.push(\"\");\n\t\t}\n\t\tlet decs: string = a[1];\n\n\t\t// Fill zeros?\n\t\tif (decs.length < details.decimals.active) {\n\t\t\tdecs += Array(details.decimals.active - decs.length + 1).join(\"0\");\n\t\t}\n\n\t\tif (decs !== \"\") {\n\t\t\tres += details.decimals.separator + decs;\n\t\t}\n\n\t\t// Can't have empty return value\n\t\tif (res === \"\") {\n\t\t\tres = \"0\";\n\t\t}\n\n\t\t// Add minus sign back\n\t\tif (value !== 0 && negative && (mods.indexOf(\"s\") === -1)) {\n\t\t\tres = \"-\" + res;\n\t\t}\n\n\t\t// Add suffixes/prefixes\n\t\tif (prefix) {\n\t\t\tres = prefix + res;\n\t\t}\n\t\tif (suffix) {\n\t\t\tres += suffix;\n\t\t}\n\n\t\treturn res;\n\t}\n\n\n\tprotected applyPrefix(value: number, prefixes: any[], force: boolean = false): any[] {\n\t\tlet newvalue = value;\n\t\tlet prefix = \"\";\n\t\tlet suffix = \"\";\n\t\tlet applied = false;\n\t\tlet k = 1;\n\n\t\tfor (let i = 0, len = prefixes.length; i < len; i++) {\n\t\t\tif (prefixes[i].number <= value) {\n\t\t\t\tif (prefixes[i].number === 0) {\n\t\t\t\t\tnewvalue = 0;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tnewvalue = value / prefixes[i].number;\n\t\t\t\t\tk = prefixes[i].number;\n\t\t\t\t}\n\t\t\t\tprefix = prefixes[i].prefix;\n\t\t\t\tsuffix = prefixes[i].suffix;\n\t\t\t\tapplied = true;\n\t\t\t}\n\t\t}\n\n\n\t\tif (!applied && force && prefixes.length && value != 0) {\n\t\t\t// Prefix was not applied. Use the first prefix.\n\t\t\tnewvalue = value / prefixes[0].number;\n\t\t\tprefix = prefixes[0].prefix;\n\t\t\tsuffix = prefixes[0].suffix;\n\t\t\tapplied = true;\n\t\t}\n\n\t\tif (applied) {\n\t\t\tnewvalue = parseFloat(\n\t\t\t\tnewvalue.toPrecision(\n\t\t\t\t\tMath.min(k.toString().length + Math.floor(newvalue).toString().replace(/[^0-9]*/g, \"\").length, 21)\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\n\t\treturn [newvalue, prefix, suffix];\n\t}\n\n\t/**\n\t * Replaces brackets with temporary placeholders.\n\t *\n\t * @ignore Exclude from docs\n\t * @param text  Input text\n\t * @return Escaped text\n\t */\n\tpublic escape(text: string): string {\n\t\treturn text.replace(\"||\", $type.PLACEHOLDER2);\n\t}\n\n\t/**\n\t * Replaces placeholders back to brackets.\n\t *\n\t * @ignore Exclude from docs\n\t * @param text  Escaped text\n\t * @return Unescaped text\n\t */\n\tpublic unescape(text: string): string {\n\t\treturn text.replace($type.PLACEHOLDER2, \"|\");\n\t}\n\n}\n", "import type { ILocaleSettings } from \"./Language\"\n\nimport { Entity, IEntitySettings, IEntityPrivate } from \"./Entity\"\nimport { TextFormatter } from \"./TextFormatter\"\n\nimport * as $type from \"./Type\"\nimport * as $utils from \"./Utils\";\n\n/**\n * Interface describing parsed date format definition.\n *\n * @ignore\n */\nexport interface DateFormatInfo {\n\t\"template\": string;\n\t\"parts\": any[];\n}\n\nexport interface IDateFormatterSettings extends IEntitySettings {\n\n\t/**\n\t * Should the first letter of the formatted date be capitalized?\n\t *\n\t * @default true\n\t */\n\tcapitalize?: boolean;\n\n\t/**\n\t * A date format to be used when formatting dates.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/} for more info\n\t */\n\tdateFormat?: string | Intl.DateTimeFormatOptions;\n\n\t/**\n\t * An array of data fields that hold date values and should be formatted\n\t * with a [[DateFormatter]].\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/data-placeholders/#Formatting_placeholders} for more info\n\t */\n\tdateFields?: string[];\n\n\t/**\n\t * Locales to use when formatting using `Intl.DateFormatter`.\n\t */\n\tintlLocales?: string;\n\n}\n\nexport interface IDateFormatterPrivate extends IEntityPrivate {\n}\n\ntype Months = \"January\" | \"February\" | \"March\" | \"April\" | \"May\" | \"June\" | \"July\" | \"August\" | \"September\" | \"October\" | \"November\" | \"December\";\ntype ShortMonths = \"Jan\" | \"Feb\" | \"Mar\" | \"Apr\" | \"May(short)\" | \"Jun\" | \"Jul\" | \"Aug\" | \"Sep\" | \"Oct\" | \"Nov\" | \"Dec\";\ntype Weekdays = \"Sunday\" | \"Monday\" | \"Tuesday\" | \"Wednesday\" | \"Thursday\" | \"Friday\" | \"Saturday\";\ntype ShortWeekdays = \"Sun\" | \"Mon\" | \"Tue\" | \"Wed\" | \"Thu\" | \"Fri\" | \"Sat\";\n\nexport class DateFormatter extends Entity {\n\tdeclare public _settings: IDateFormatterSettings;\n\tdeclare public _privateSettings: IDateFormatterPrivate;\n\n\tprotected _setDefaults() {\n\t\t// Defaults\n\t\tthis._setDefault(\"capitalize\", true);\n\t\tthis._setDefault(\"dateFormat\", \"yyyy-MM-dd\");\n\n\t\tsuper._setDefaults();\n\t}\n\n\tpublic _beforeChanged() {\n\t\tsuper._beforeChanged();\n\t}\n\n\tpublic format(source: any, format?: string | Intl.DateTimeFormatOptions): string {\n\n\t\t// Locale?\n\t\t// TODO\n\n\t\t// No format passed in or it's empty\n\t\tif (typeof format === \"undefined\" || format === \"\") {\n\t\t\tformat = this.get(\"dateFormat\", \"yyyy-MM-dd\");\n\t\t}\n\n\t\t// Init return value\n\t\tlet formatted;\n\n\t\t// Cast?\n\t\t// TODO: decide if we need to cast\n\t\tlet date: Date = source;\n\n\t\t// Is it a built-in format or Intl.DateTimeFormat\n\t\tif ($type.isObject(format)) {\n\n\t\t\ttry {\n\t\t\t\tconst locales = this.get(\"intlLocales\");\n\t\t\t\tif (locales) {\n\t\t\t\t\treturn new Intl.DateTimeFormat(locales, <Intl.DateTimeFormatOptions>format).format(date);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn new Intl.DateTimeFormat(undefined, <Intl.DateTimeFormatOptions>format).format(date);\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\treturn \"Invalid\";\n\t\t\t}\n\n\t\t}\n\n\t\t// get format info (it will also deal with parser caching)\n\t\tlet info = this.parseFormat(format);\n\n\t\t// Should we apply custom time zone?\n\t\tconst timezone = this._root.timezone;\n\t\tif (timezone && !this._root.utc) {\n\t\t\tdate = timezone.convertLocal(date);\n\t\t}\n\n\n\t\t// Check if it's a valid date\n\t\tif (!$type.isNumber(date.getTime())) {\n\t\t\t// TODO translation\n\t\t\t//return this._t(\"Invalid date\");\n\t\t\treturn \"Invalid date\";\n\t\t}\n\n\t\t// Apply format\n\t\tformatted = this.applyFormat(date, info);\n\n\t\t// Capitalize\n\t\tif (this.get(\"capitalize\")) {\n\t\t\tformatted = formatted.replace(\n\t\t\t\t/^.{1}/, formatted.substr(0, 1).toUpperCase()\n\t\t\t);\n\t\t}\n\n\t\t// We're done\n\t\treturn formatted;\n\t}\n\n\t/**\n\t * Applies format to Date.\n\t *\n\t * @param date      Date object\n\t * @param info      Parsed format information\n\t * @return Formatted date string\n\t */\n\tprotected applyFormat(date: Date, info: DateFormatInfo): string {\n\n\t\t// Init return value\n\t\tlet res = info.template;\n\n\t\t// Get values\n\t\tlet fullYear: number,\n\t\t\tmonth: number,\n\t\t\tweekday: number,\n\t\t\tday: number,\n\t\t\thours: number,\n\t\t\tminutes: number,\n\t\t\tseconds: number,\n\t\t\tmilliseconds: number,\n\t\t\toffset: number = date.getTimezoneOffset(),\n\t\t\ttimestamp: number = date.getTime();\n\t\tif (this._root.utc) {\n\t\t\tfullYear = date.getUTCFullYear();\n\t\t\tmonth = date.getUTCMonth();\n\t\t\tweekday = date.getUTCDay();\n\t\t\tday = date.getUTCDate();\n\t\t\thours = date.getUTCHours();\n\t\t\tminutes = date.getUTCMinutes();\n\t\t\tseconds = date.getUTCSeconds();\n\t\t\tmilliseconds = date.getUTCMilliseconds();\n\t\t}\n\t\telse {\n\t\t\tfullYear = date.getFullYear();\n\t\t\tmonth = date.getMonth();\n\t\t\tweekday = date.getDay();\n\t\t\tday = date.getDate();\n\t\t\thours = date.getHours();\n\t\t\tminutes = date.getMinutes();\n\t\t\tseconds = date.getSeconds();\n\t\t\tmilliseconds = date.getMilliseconds();\n\t\t}\n\n\t\t// Go through each part and format/replace it in template\n\t\tfor (let i = 0, len = info.parts.length; i < len; i++) {\n\t\t\tlet value: string = \"\";\n\t\t\tswitch (info.parts[i]) {\n\n\t\t\t\tcase \"G\":\n\t\t\t\t\tvalue = this._t(\n\t\t\t\t\t\tfullYear < 0\n\t\t\t\t\t\t\t? \"_era_bc\"\n\t\t\t\t\t\t\t: \"_era_ad\"\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"yyyy\":\n\t\t\t\t\tvalue = Math.abs(fullYear).toString();\n\t\t\t\t\tif (fullYear < 0) {\n\t\t\t\t\t\tvalue += this._t(\"_era_bc\");\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"yyy\":\n\t\t\t\tcase \"yy\":\n\t\t\t\tcase \"y\":\n\t\t\t\t\tvalue = Math.abs(fullYear).toString().substr(-info.parts[i].length);\n\t\t\t\t\tif (fullYear < 0) {\n\t\t\t\t\t\tvalue += this._t(\"_era_bc\");\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"YYYY\":\n\t\t\t\tcase \"YYY\":\n\t\t\t\tcase \"YY\":\n\t\t\t\tcase \"Y\":\n\t\t\t\t\tlet week = $utils.getWeek(date);\n\t\t\t\t\tlet year = fullYear;\n\t\t\t\t\tif (week == 1 && (weekday > 4)) {\n\t\t\t\t\t\tyear--;\n\t\t\t\t\t}\n\t\t\t\t\tif (info.parts[i] == \"YYYY\") {\n\t\t\t\t\t\tvalue = Math.abs(year).toString();\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tvalue = Math.abs(year).toString().substr(-info.parts[i].length);\n\t\t\t\t\t}\n\t\t\t\t\tif (year < 0) {\n\t\t\t\t\t\tvalue += this._t(\"_era_bc\");\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"u\":\n\t\t\t\t\t// @todo\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"q\":\n\t\t\t\t\tvalue = \"\" + Math.ceil((date.getMonth() + 1) / 3);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"MMMMM\":\n\t\t\t\t\tvalue = this._t(this._getMonth(month)).substr(0, 1);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"MMMM\":\n\t\t\t\t\tvalue = this._t(this._getMonth(month));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"MMM\":\n\t\t\t\t\tvalue = this._t(this._getShortMonth(month));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"MM\":\n\t\t\t\t\tvalue = $utils.padString(month + 1, 2, \"0\");\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"M\":\n\t\t\t\t\tvalue = (month + 1).toString();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"ww\":\n\t\t\t\t\tvalue = $utils.padString($utils.getWeek(date, this._root.utc), 2, \"0\");\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"w\":\n\t\t\t\t\tvalue = $utils.getWeek(date, this._root.utc).toString();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"W\":\n\t\t\t\t\tvalue = $utils.getMonthWeek(date, this._root.utc).toString();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"dd\":\n\t\t\t\t\tvalue = $utils.padString(day, 2, \"0\");\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"d\":\n\t\t\t\t\tvalue = day.toString();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"DD\":\n\t\t\t\tcase \"DDD\":\n\t\t\t\t\tvalue = $utils.padString($utils.getYearDay(date, this._root.utc).toString(), info.parts[i].length, \"0\");\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"D\":\n\t\t\t\t\tvalue = $utils.getYearDay(date, this._root.utc).toString();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"F\":\n\t\t\t\t\t// @todo\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"g\":\n\t\t\t\t\t// @todo\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"t\":\n\t\t\t\t\tvalue = this._root.language.translateFunc(\"_dateOrd\").call(this, day);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"E\":\n\t\t\t\t\tvalue = (weekday || 7).toString();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"EE\":\n\t\t\t\t\tvalue = $utils.padString((weekday || 7).toString(), 2, \"0\");\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"EEE\":\n\t\t\t\tcase \"eee\":\n\t\t\t\t\tvalue = this._t(this._getShortWeekday(weekday));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"EEEE\":\n\t\t\t\tcase \"eeee\":\n\t\t\t\t\tvalue = this._t(this._getShortWeekday(weekday));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"EEEEE\":\n\t\t\t\tcase \"eeeee\":\n\t\t\t\t\tvalue = this._t(this._getShortWeekday(weekday)).substr(0, 1);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"e\":\n\t\t\t\tcase \"ee\":\n\t\t\t\t\tvalue = (weekday - (this._root.locale.firstDayOfWeek || 1) + 1).toString();\n\t\t\t\t\tif (info.parts[i] == \"ee\") {\n\t\t\t\t\t\tvalue = $utils.padString(value, 2, \"0\");\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"a\":\n\t\t\t\t\tif (hours >= 12) {\n\t\t\t\t\t\tvalue = this._t(\"PM\");\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tvalue = this._t(\"AM\");\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"aa\":\n\t\t\t\t\tif (hours >= 12) {\n\t\t\t\t\t\tvalue = this._t(\"P.M.\");\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tvalue = this._t(\"A.M.\");\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"aaa\":\n\t\t\t\t\tif (hours >= 12) {\n\t\t\t\t\t\tvalue = this._t(\"P\");\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tvalue = this._t(\"A\");\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"h\":\n\t\t\t\t\tvalue = $utils.get12Hours(hours).toString();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"hh\":\n\t\t\t\t\tvalue = $utils.padString($utils.get12Hours(hours), 2, \"0\");\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"H\":\n\t\t\t\t\tvalue = hours.toString();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"HH\":\n\t\t\t\t\tvalue = $utils.padString(hours, 2, \"0\");\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"K\":\n\t\t\t\t\tvalue = $utils.get12Hours(hours, 0).toString();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"KK\":\n\t\t\t\t\tvalue = $utils.padString($utils.get12Hours(hours, 0), 2, \"0\");\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"k\":\n\t\t\t\t\tvalue = (hours + 1).toString();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"kk\":\n\t\t\t\t\tvalue = $utils.padString(hours + 1, 2, \"0\");\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"m\":\n\t\t\t\t\tvalue = minutes.toString();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"mm\":\n\t\t\t\t\tvalue = $utils.padString(minutes, 2, \"0\");\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"s\":\n\t\t\t\t\tvalue = seconds.toString();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"ss\":\n\t\t\t\t\tvalue = $utils.padString(seconds, 2, \"0\");\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"S\":\n\t\t\t\tcase \"SS\":\n\t\t\t\tcase \"SSS\":\n\t\t\t\t\tvalue = Math.round((milliseconds / 1000) * Math.pow(10, info.parts[i].length)).toString();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"x\":\n\t\t\t\t\tvalue = timestamp.toString();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"n\":\n\t\t\t\tcase \"nn\":\n\t\t\t\tcase \"nnn\":\n\t\t\t\t\tvalue = $utils.padString(milliseconds, info.parts[i].length, \"0\");\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"z\":\n\t\t\t\t\tvalue = $utils.getTimeZone(date, false, false, this._root.utc);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"zz\":\n\t\t\t\t\tvalue = $utils.getTimeZone(date, true, false, this._root.utc);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"zzz\":\n\t\t\t\t\tvalue = $utils.getTimeZone(date, false, true, this._root.utc);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"zzzz\":\n\t\t\t\t\tvalue = $utils.getTimeZone(date, true, true, this._root.utc);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"Z\":\n\t\t\t\tcase \"ZZ\":\n\t\t\t\t\tlet tz = Math.abs(offset) / 60;\n\t\t\t\t\tlet tzh = Math.floor(tz);\n\t\t\t\t\tlet tzm = tz * 60 - tzh * 60;\n\n\t\t\t\t\tif (this._root.utc) {\n\t\t\t\t\t\ttzh = 0;\n\t\t\t\t\t\ttzm = 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (info.parts[i] == \"Z\") {\n\t\t\t\t\t\tvalue = \"GMT\";\n\t\t\t\t\t\tvalue += offset > 0 ? \"-\" : \"+\";\n\t\t\t\t\t\tvalue += $utils.padString(tzh, 2) + \":\" + $utils.padString(tzm, 2);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tvalue = offset > 0 ? \"-\" : \"+\";\n\t\t\t\t\t\tvalue += $utils.padString(tzh, 2) + $utils.padString(tzm, 2);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"i\":\n\t\t\t\t\tvalue = date.toISOString();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"I\":\n\t\t\t\t\tvalue = date.toUTCString();\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t\tres = res.replace($type.PLACEHOLDER, value);\n\t\t}\n\n\t\treturn res;\n\t}\n\n\t/**\n\t * Parses format into structured infromation.\n\t *\n\t * @param format Format template\n\t */\n\tprotected parseFormat(format: string): DateFormatInfo {\n\n\t\t// Check cache\n\t\t// TODO: implement caching of the parsed format\n\n\t\t// Init format parse info holder\n\t\tlet info: DateFormatInfo = {\n\t\t\t\"template\": \"\",\n\t\t\t\"parts\": <any>[]\n\t\t};\n\n\t\t// Let TextFormatter split into chunks\n\t\tlet chunks = TextFormatter.chunk(format, true);\n\t\tfor (let i: number = 0; i < chunks.length; i++) {\n\t\t\tlet chunk = chunks[i];\n\n\t\t\tif (chunk.type === \"value\") {\n\n\t\t\t\t// Just \"Date\"?\n\t\t\t\tif (chunk.text.match(/^date$/i)) {\n\t\t\t\t\tlet dateFormat = this.get(\"dateFormat\", \"yyyy-MM-dd\");\n\t\t\t\t\tif (!$type.isString(dateFormat)) {\n\t\t\t\t\t\tdateFormat = \"yyyy-MM-dd\";\n\t\t\t\t\t}\n\t\t\t\t\tchunk.text = dateFormat;\n\t\t\t\t}\n\n\t\t\t\t// Find all possible parts\n\t\t\t\tlet matches = chunk.text.match(/G|yyyy|yyy|yy|y|YYYY|YYY|YY|Y|u|q|MMMMM|MMMM|MMM|MM|M|ww|w|W|dd|d|DDD|DD|D|F|g|EEEEE|EEEE|EEE|EE|E|eeeee|eeee|eee|ee|e|aaa|aa|a|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|SSS|SS|S|A|zzzz|zzz|zz|z|ZZ|Z|t|x|nnn|nn|n|i|I/g);\n\n\t\t\t\t// Found?\n\t\t\t\tif (matches) {\n\n\t\t\t\t\t// Populate template\n\t\t\t\t\tfor (let x = 0; x < matches.length; x++) {\n\t\t\t\t\t\tinfo.parts.push(matches[x]);\n\t\t\t\t\t\tchunk.text = chunk.text.replace(matches[x], $type.PLACEHOLDER);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Apply to template\n\t\t\tinfo.template += chunk.text;\n\t\t}\n\n\t\t// Save cache\n\t\t// TODO\n\n\t\treturn info;\n\t}\n\n\tprotected _months(): Months[] {\n\t\treturn [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n\t}\n\n\tprotected _getMonth(index: number): Months {\n\t\treturn this._months()[index];\n\t}\n\n\tprotected _shortMonths(): ShortMonths[] {\n\t\treturn [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May(short)\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n\t}\n\n\tprotected _getShortMonth(index: number): ShortMonths {\n\t\treturn this._shortMonths()[index];\n\t}\n\n\tprotected _weekdays(): Weekdays[] {\n\t\treturn [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\n\t}\n\n\tprotected _getWeekday(index: number): Weekdays {\n\t\treturn this._weekdays()[index];\n\t}\n\n\tprotected _shortWeekdays(): ShortWeekdays[] {\n\t\treturn [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n\t}\n\n\tprotected _getShortWeekday(index: number): ShortWeekdays {\n\t\treturn this._shortWeekdays()[index];\n\t}\n\n\tpublic parse(source: any, format: string): Date {\n\n\t\t// Is it already a Date\n\t\tif (source instanceof Date) {\n\t\t\treturn source;\n\t\t}\n\n\t\t// Is it a numeric timestamp\n\t\tif ($type.isNumber(source)) {\n\t\t\treturn new Date(source);\n\t\t}\n\n\t\t// No? Let's check if it's string, and try converting to it if nec\n\t\tif (!$type.isString(source)) {\n\t\t\tsource = source.toString();\n\t\t}\n\n\t\t// Init return value\n\t\tlet res: Date;\n\n\t\t// Init RegEx for parsing\n\t\tlet reg: string = \"\";\n\n\t\t// Clean format\n\t\tformat = $utils.cleanFormat(format);\n\n\t\t// Clip format to length of the source string\n\t\tformat = format.substr(0, source.length);\n\n\t\t// Parse format\n\t\tlet info = this.parseFormat(format);\n\n\t\t// Init parsed items holder\n\t\tlet parsedIndexes = {\n\t\t\t\"year\": -1,\n\t\t\t\"year3\": -1,\n\t\t\t\"year2\": -1,\n\t\t\t\"year1\": -1,\n\t\t\t\"month\": -1,\n\t\t\t\"monthShort\": -1,\n\t\t\t\"monthLong\": -1,\n\t\t\t\"weekdayShort\": -1,\n\t\t\t\"weekdayLong\": -1,\n\t\t\t\"day\": -1,\n\t\t\t\"yearDay\": -1,\n\t\t\t\"week\": -1,\n\t\t\t\"hourBase0\": -1,\n\t\t\t\"hour12Base0\": -1,\n\t\t\t\"hourBase1\": -1,\n\t\t\t\"hour12Base1\": -1,\n\t\t\t\"minute\": -1,\n\t\t\t\"second\": -1,\n\t\t\t\"millisecond\": -1,\n\t\t\t\"millisecondDigits\": -1,\n\t\t\t\"am\": -1,\n\t\t\t\"zone\": -1,\n\t\t\t\"timestamp\": -1,\n\t\t\t\"iso\": -1\n\t\t};\n\n\t\t// Init values\n\t\tlet resValues = {\n\t\t\t\"year\": 1970,\n\t\t\t\"month\": 0,\n\t\t\t\"day\": 1,\n\t\t\t\"hour\": 0,\n\t\t\t\"minute\": 0,\n\t\t\t\"second\": 0,\n\t\t\t\"millisecond\": 0,\n\t\t\t\"timestamp\": <any>null,\n\t\t\t\"offset\": 0,\n\t\t\t\"utc\": this._root.utc\n\t\t}\n\n\t\t// Index adjuster\n\t\tlet indexAdjust: number = 0;\n\t\tlet index: number = 0;\n\n\t\t// Iterate through all of the parts\n\t\tfor (let i: number = 0; i < info.parts.length; i++) {\n\n\t\t\t// Set current match index\n\t\t\tindex = i + indexAdjust + 1;\n\n\t\t\tswitch (info.parts[i]) {\n\n\t\t\t\tcase \"yyyy\":\n\t\t\t\tcase \"YYYY\":\n\t\t\t\t\treg += \"([0-9]{4})\";\n\t\t\t\t\tparsedIndexes.year = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"yyy\":\n\t\t\t\tcase \"YYY\":\n\t\t\t\t\treg += \"([0-9]{3})\";\n\t\t\t\t\tparsedIndexes.year3 = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"yy\":\n\t\t\t\tcase \"YY\":\n\t\t\t\t\treg += \"([0-9]{2})\";\n\t\t\t\t\tparsedIndexes.year2 = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"y\":\n\t\t\t\tcase \"Y\":\n\t\t\t\t\treg += \"([0-9]{1})\";\n\t\t\t\t\tparsedIndexes.year1 = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"MMMM\":\n\t\t\t\t\treg += \"(\" + this.getStringList(this._months()).join(\"|\") + \")\";\n\t\t\t\t\tparsedIndexes.monthLong = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"MMM\":\n\t\t\t\t\treg += \"(\" + this.getStringList(this._shortMonths()).join(\"|\") + \")\";\n\t\t\t\t\tparsedIndexes.monthShort = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"MM\":\n\t\t\t\tcase \"M\":\n\t\t\t\t\treg += \"([0-9]{2}|[0-9]{1})\";\n\t\t\t\t\tparsedIndexes.month = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"ww\":\n\t\t\t\tcase \"w\":\n\t\t\t\t\treg += \"([0-9]{2}|[0-9]{1})\";\n\t\t\t\t\tparsedIndexes.week = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"dd\":\n\t\t\t\tcase \"d\":\n\t\t\t\t\treg += \"([0-9]{2}|[0-9]{1})\";\n\t\t\t\t\tparsedIndexes.day = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"DDD\":\n\t\t\t\tcase \"DD\":\n\t\t\t\tcase \"D\":\n\t\t\t\t\treg += \"([0-9]{3}|[0-9]{2}|[0-9]{1})\";\n\t\t\t\t\tparsedIndexes.yearDay = index;\n\t\t\t\t\tbreak;\n\n\n\t\t\t\tcase \"dddd\":\n\t\t\t\t\treg += \"(\" + this.getStringList(this._weekdays()).join(\"|\") + \")\";\n\t\t\t\t\tparsedIndexes.weekdayLong = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"ddd\":\n\t\t\t\t\treg += \"(\" + this.getStringList(this._shortWeekdays()).join(\"|\") + \")\";\n\t\t\t\t\tparsedIndexes.weekdayShort = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"aaa\":\n\t\t\t\tcase \"aa\":\n\t\t\t\tcase \"a\":\n\t\t\t\t\t// TODO: fix (escape regex)\n\t\t\t\t\treg += \"(\" + this.getStringList([\"AM\", \"PM\", \"A\\.M\\.\", \"P\\.M\\.\", \"A\", \"P\"]).join(\"|\") + \")\";\n\t\t\t\t\tparsedIndexes.am = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"hh\":\n\t\t\t\tcase \"h\":\n\t\t\t\t\treg += \"([0-9]{2}|[0-9]{1})\";\n\t\t\t\t\tparsedIndexes.hour12Base1 = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"HH\":\n\t\t\t\tcase \"H\":\n\t\t\t\t\treg += \"([0-9]{2}|[0-9]{1})\";\n\t\t\t\t\tparsedIndexes.hourBase0 = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"KK\":\n\t\t\t\tcase \"K\":\n\t\t\t\t\treg += \"([0-9]{2}|[0-9]{1})\";\n\t\t\t\t\tparsedIndexes.hour12Base0 = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"kk\":\n\t\t\t\tcase \"k\":\n\t\t\t\t\treg += \"([0-9]{2}|[0-9]{1})\";\n\t\t\t\t\tparsedIndexes.hourBase1 = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"mm\":\n\t\t\t\tcase \"m\":\n\t\t\t\t\treg += \"([0-9]{2}|[0-9]{1})\";\n\t\t\t\t\tparsedIndexes.minute = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"ss\":\n\t\t\t\tcase \"s\":\n\t\t\t\t\treg += \"([0-9]{2}|[0-9]{1})\";\n\t\t\t\t\tparsedIndexes.second = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"SSS\":\n\t\t\t\tcase \"SS\":\n\t\t\t\tcase \"S\":\n\t\t\t\t\treg += \"([0-9]{3}|[0-9]{2}|[0-9]{1})\";\n\t\t\t\t\tparsedIndexes.millisecond = index;\n\t\t\t\t\tparsedIndexes.millisecondDigits = info.parts[i].length;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"nnn\":\n\t\t\t\tcase \"nn\":\n\t\t\t\tcase \"n\":\n\t\t\t\t\treg += \"([0-9]{3}|[0-9]{2}|[0-9]{1})\";\n\t\t\t\t\tparsedIndexes.millisecond = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"x\":\n\t\t\t\t\treg += \"([0-9]{1,})\";\n\t\t\t\t\tparsedIndexes.timestamp = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"Z\":\n\t\t\t\t\treg += \"GMT([-+]+[0-9]{2}:[0-9]{2})\";\n\t\t\t\t\tparsedIndexes.zone = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"ZZ\":\n\t\t\t\t\treg += \"([\\\\-+]+[0-9]{2}[0-9]{2})\";\n\t\t\t\t\tparsedIndexes.zone = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"i\":\n\t\t\t\t\treg += \"([0-9]{4})-?([0-9]{2})-?([0-9]{2})T?([0-9]{2}):?([0-9]{2}):?([0-9]{2})\\\\.?([0-9]{0,3})([zZ]|[+\\\\-][0-9]{2}:?[0-9]{2}|$)\";\n\t\t\t\t\tparsedIndexes.iso = index;\n\t\t\t\t\tindexAdjust += 7;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"G\":\n\t\t\t\tcase \"YYYY\":\n\t\t\t\tcase \"YYY\":\n\t\t\t\tcase \"YY\":\n\t\t\t\tcase \"Y\":\n\t\t\t\tcase \"MMMMM\":\n\t\t\t\tcase \"W\":\n\t\t\t\tcase \"EEEEE\":\n\t\t\t\tcase \"EEEE\":\n\t\t\t\tcase \"EEE\":\n\t\t\t\tcase \"EE\":\n\t\t\t\tcase \"E\":\n\t\t\t\tcase \"eeeee\":\n\t\t\t\tcase \"eeee\":\n\t\t\t\tcase \"eee\":\n\t\t\t\tcase \"ee\":\n\t\t\t\tcase \"e\":\n\t\t\t\tcase \"zzzz\":\n\t\t\t\tcase \"zzz\":\n\t\t\t\tcase \"zz\":\n\t\t\t\tcase \"z\":\n\t\t\t\tcase \"t\":\n\t\t\t\t\t// Ignore\n\t\t\t\t\tindexAdjust--;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treg += \"[^0-9]*\";\n\t\t}\n\n\t\t// Try matching\n\t\tlet regex = new RegExp(reg);\n\t\tlet matches: RegExpMatchArray = source.match(regex);\n\n\t\tif (matches) {\n\t\t\t// Populate the date object\n\n\t\t\t// Full year\n\t\t\tif (parsedIndexes.year > -1) {\n\t\t\t\tresValues.year = parseInt(matches[parsedIndexes.year]);\n\t\t\t}\n\n\t\t\t// 3-digit year\n\t\t\tif (parsedIndexes.year3 > -1) {\n\t\t\t\tlet val = parseInt(matches[parsedIndexes.year3]);\n\t\t\t\tval += 1000;\n\t\t\t\tresValues.year = val;\n\t\t\t}\n\n\t\t\t// 2-digit year\n\t\t\tif (parsedIndexes.year2 > -1) {\n\t\t\t\tlet val = parseInt(matches[parsedIndexes.year2]);\n\t\t\t\tif (val > 50) {\n\t\t\t\t\tval += 1000;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tval += 2000;\n\t\t\t\t}\n\t\t\t\tresValues.year = val;\n\t\t\t}\n\n\t\t\t// 1-digit year\n\t\t\tif (parsedIndexes.year1 > -1) {\n\t\t\t\tlet val = parseInt(matches[parsedIndexes.year1]);\n\t\t\t\tval = Math.floor((new Date().getFullYear()) / 10) * 10 + val;\n\t\t\t\tresValues.year = val;\n\t\t\t}\n\n\t\t\t// Full month\n\t\t\tif (parsedIndexes.monthLong > -1) {\n\t\t\t\tresValues.month = this.resolveMonth(<any>matches[parsedIndexes.monthLong]);\n\t\t\t}\n\n\t\t\t// Short month\n\t\t\tif (parsedIndexes.monthShort > -1) {\n\t\t\t\tresValues.month = this.resolveShortMonth(<any>matches[parsedIndexes.monthShort]);\n\t\t\t}\n\n\t\t\t// Numeric month\n\t\t\tif (parsedIndexes.month > -1) {\n\t\t\t\tresValues.month = parseInt(matches[parsedIndexes.month]) - 1;\n\t\t\t}\n\n\t\t\t// Weekday\n\t\t\t// @todo\n\n\t\t\t// Week\n\t\t\tif ((parsedIndexes.week > -1) && (parsedIndexes.day === -1)) {\n\t\t\t\t// We parse weeks ONLY if day is not explicitly set\n\t\t\t\t// TODO: this needs work\n\t\t\t\t// (but maybe later - I can hardly imagine anyone passing their dates in weeks)\n\t\t\t\tresValues.month = 0;\n\t\t\t\tresValues.day = $utils.getDayFromWeek(\n\t\t\t\t\tparseInt(matches[parsedIndexes.week]),\n\t\t\t\t\tresValues.year,\n\t\t\t\t\t1,\n\t\t\t\t\tthis._root.utc\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Day\n\t\t\tif (parsedIndexes.day > -1) {\n\t\t\t\tresValues.day = parseInt(matches[parsedIndexes.day]);\n\t\t\t}\n\n\t\t\t// Year day\n\t\t\tif (parsedIndexes.yearDay > -1) {\n\t\t\t\tresValues.month = 0;\n\t\t\t\tresValues.day = parseInt(matches[parsedIndexes.yearDay]);\n\t\t\t}\n\n\t\t\t// 24 Hour (0-23)\n\t\t\tif (parsedIndexes.hourBase0 > -1) {\n\t\t\t\tresValues.hour = parseInt(matches[parsedIndexes.hourBase0]);\n\t\t\t}\n\n\t\t\t// 24 Hour (1-24)\n\t\t\tif (parsedIndexes.hourBase1 > -1) {\n\t\t\t\tresValues.hour = parseInt(matches[parsedIndexes.hourBase1]) - 1;\n\t\t\t}\n\n\t\t\t// 12 Hour (0-11)\n\t\t\tif (parsedIndexes.hour12Base0 > -1) {\n\t\t\t\tlet val = parseInt(matches[parsedIndexes.hour12Base0]);\n\t\t\t\tif (val == 11) {\n\t\t\t\t\tval = 0;\n\t\t\t\t}\n\t\t\t\tif ((parsedIndexes.am > -1) && !this.isAm(matches[parsedIndexes.am])) {\n\t\t\t\t\tval += 12;\n\t\t\t\t}\n\t\t\t\tresValues.hour = val;\n\t\t\t}\n\n\t\t\t// 12 Hour (1-12)\n\t\t\tif (parsedIndexes.hour12Base1 > -1) {\n\t\t\t\tlet val = parseInt(matches[parsedIndexes.hour12Base1]);\n\t\t\t\tif (val == 12) {\n\t\t\t\t\tval = 0;\n\t\t\t\t}\n\t\t\t\tif ((parsedIndexes.am > -1) && !this.isAm(matches[parsedIndexes.am])) {\n\t\t\t\t\tval += 12;\n\t\t\t\t}\n\t\t\t\tresValues.hour = val;\n\t\t\t}\n\n\t\t\t// Minute\n\t\t\tif (parsedIndexes.minute > -1) {\n\t\t\t\tresValues.minute = parseInt(matches[parsedIndexes.minute]);\n\t\t\t}\n\n\t\t\t// Second\n\t\t\tif (parsedIndexes.second > -1) {\n\t\t\t\tresValues.second = parseInt(matches[parsedIndexes.second]);\n\t\t\t}\n\n\t\t\t// Millisecond\n\t\t\tif (parsedIndexes.millisecond > -1) {\n\t\t\t\tlet val = parseInt(matches[parsedIndexes.millisecond]);\n\t\t\t\tif (parsedIndexes.millisecondDigits == 2) {\n\t\t\t\t\tval *= 10;\n\t\t\t\t}\n\t\t\t\telse if (parsedIndexes.millisecondDigits == 1) {\n\t\t\t\t\tval *= 100;\n\t\t\t\t}\n\t\t\t\tresValues.millisecond = val;\n\t\t\t}\n\n\t\t\t// Timestamp\n\t\t\tif (parsedIndexes.timestamp > -1) {\n\t\t\t\tresValues.timestamp = parseInt(matches[parsedIndexes.timestamp]);\n\n\t\t\t\tconst ts = new Date(resValues.timestamp);\n\t\t\t\tresValues.year = ts.getUTCFullYear();\n\t\t\t\tresValues.month = ts.getUTCMonth();\n\t\t\t\tresValues.day = ts.getUTCDate();\n\t\t\t\tresValues.hour = ts.getUTCHours();\n\t\t\t\tresValues.minute = ts.getUTCMinutes();\n\t\t\t\tresValues.second = ts.getUTCSeconds();\n\t\t\t\tresValues.millisecond = ts.getUTCMilliseconds();\n\t\t\t}\n\n\t\t\t// Adjust time zone\n\t\t\tif (parsedIndexes.zone > -1) {\n\t\t\t\tresValues.offset = this.resolveTimezoneOffset(new Date(resValues.year, resValues.month, resValues.day), matches[parsedIndexes.zone]);\n\t\t\t}\n\n\t\t\t// ISO\n\t\t\tif (parsedIndexes.iso > -1) {\n\n\t\t\t\tresValues.year = $type.toNumber(matches[parsedIndexes.iso + 0]);\n\t\t\t\tresValues.month = $type.toNumber(matches[parsedIndexes.iso + 1]) - 1;\n\t\t\t\tresValues.day = $type.toNumber(matches[parsedIndexes.iso + 2]);\n\t\t\t\tresValues.hour = $type.toNumber(matches[parsedIndexes.iso + 3]);\n\t\t\t\tresValues.minute = $type.toNumber(matches[parsedIndexes.iso + 4]);\n\t\t\t\tresValues.second = $type.toNumber(matches[parsedIndexes.iso + 5]);\n\t\t\t\tresValues.millisecond = $type.toNumber(matches[parsedIndexes.iso + 6]);\n\n\t\t\t\tif (matches[parsedIndexes.iso + 7] == \"Z\" || matches[parsedIndexes.iso + 7] == \"z\") {\n\t\t\t\t\tresValues.utc = true;\n\t\t\t\t}\n\t\t\t\telse if (matches[parsedIndexes.iso + 7] != \"\") {\n\t\t\t\t\tresValues.offset = this.resolveTimezoneOffset(new Date(resValues.year, resValues.month, resValues.day), matches[parsedIndexes.iso + 7]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Create Date object\n\t\t\tif (resValues.utc) {\n\t\t\t\tres = new Date(Date.UTC(\n\t\t\t\t\tresValues.year,\n\t\t\t\t\tresValues.month,\n\t\t\t\t\tresValues.day,\n\t\t\t\t\tresValues.hour,\n\t\t\t\t\tresValues.minute,\n\t\t\t\t\tresValues.second,\n\t\t\t\t\tresValues.millisecond\n\t\t\t\t));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tres = new Date(\n\t\t\t\t\tresValues.year,\n\t\t\t\t\tresValues.month,\n\t\t\t\t\tresValues.day,\n\t\t\t\t\tresValues.hour,\n\t\t\t\t\tresValues.minute + resValues.offset,\n\t\t\t\t\tresValues.second,\n\t\t\t\t\tresValues.millisecond\n\t\t\t\t);\n\t\t\t}\n\n\t\t}\n\t\telse {\n\t\t\t// Didn't match anything\n\t\t\t// Let's try dropping it into Date constructor and hope for the best\n\t\t\tres = new Date(source);\n\t\t}\n\n\t\treturn res;\n\t}\n\n\tprotected resolveTimezoneOffset(date: Date, zone: string): number {\n\t\tlet value = zone.match(/([+\\-]?)([0-9]{2}):?([0-9]{2})/);\n\t\tif (value) {\n\t\t\tlet match = zone.match(/([+\\-]?)([0-9]{2}):?([0-9]{2})/)!;\n\t\t\tlet dir = match[1];\n\t\t\tlet hour = match[2];\n\t\t\tlet minute = match[3];\n\t\t\tlet offset = parseInt(hour) * 60 + parseInt(minute);\n\n\t\t\t// Adjust offset\n\t\t\t// Making it negative does not seem to make sense, but it's right\n\t\t\t// because of how JavaScript calculates GMT offsets\n\t\t\tif (dir == \"+\") {\n\t\t\t\toffset *= -1;\n\t\t\t}\n\n\t\t\t// Check the difference in offset\n\t\t\tlet originalOffset = (date || new Date()).getTimezoneOffset();\n\t\t\tlet diff = offset - originalOffset;\n\t\t\treturn diff;\n\t\t}\n\t\treturn 0;\n\t}\n\n\t/**\n\t * Resolves month name (i.e. \"December\") into a month number (11).\n\t *\n\t * @param value  Month name\n\t * @return Month number\n\t */\n\tprotected resolveMonth(value: Months): number {\n\n\t\t// Let's try English first\n\t\tlet month: number = this._months().indexOf(value);\n\t\tif (month > -1) {\n\t\t\treturn month;\n\t\t}\n\n\t\t// Try the translation\n\t\tif (!this._root.language.isDefault()) {\n\t\t\tmonth = this._root.language.translateAll(this._months()).indexOf(value);\n\t\t\tif (month > -1) {\n\t\t\t\treturn month\n\t\t\t}\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\t/**\n\t * Resolves short month name (i.e. \"Dec\") into a month number.\n\t *\n\t * @param value  Short month name\n\t * @return Month number\n\t */\n\tprotected resolveShortMonth(value: ShortMonths): number {\n\n\t\t// Let's try English first\n\t\tlet month: number = this._shortMonths().indexOf(value);\n\t\tif (month > -1) {\n\t\t\treturn month;\n\t\t}\n\n\t\t// Maybe long month (workaround for May)\n\t\tmonth = this._months().indexOf(<any>value);\n\t\tif (month > -1) {\n\t\t\treturn month;\n\t\t}\n\n\t\t// Try the translation\n\t\tif (this._root.language && !this._root.language.isDefault()) {\n\t\t\tmonth = this._root.language.translateAll(this._shortMonths()).indexOf(value);\n\t\t\tif (month > -1) {\n\t\t\t\treturn month\n\t\t\t}\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\t/**\n\t * Checks if passed in string represents AM/PM notation in many of its\n\t * versions.\n\t *\n\t * @param value  Source string\n\t * @return Is it AM/PM?\n\t */\n\tprotected isAm(value: string): boolean {\n\t\tlet list = this.getStringList([\"AM\", \"A.M.\", \"A\"]);\n\t\treturn list.indexOf(value.toUpperCase()) > -1;\n\t}\n\n\t/**\n\t * Translates list of strings.\n\t *\n\t * @param list  Source strings\n\t * @return Translated strings\n\t */\n\tprotected getStringList(list: Array<keyof ILocaleSettings>): Array<string> {\n\t\tlet res: string[] = [];\n\t\tfor (let i: number = 0; i < list.length; i++) {\n\t\t\t// translate?\n\t\t\tif (this._root.language) {\n\t\t\t\tres.push($utils.escapeForRgex(this._t(list[i])));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tres.push($utils.escapeForRgex(list[i]));\n\t\t\t}\n\t\t}\n\t\treturn res;\n\t}\n\n}\n", "import type { TimeUnit } from \"./Time\";\r\n\r\nimport { Entity, IEntitySettings, IEntityPrivate } from \"./Entity\"\r\nimport { TextFormatter } from \"./TextFormatter\";\r\n\r\nimport * as $object from \"./Object\";\r\nimport * as $utils from \"./Utils\";\r\nimport * as $type from \"./Type\";\r\n\r\n\r\nexport interface IDurationFormatterSettings extends IEntitySettings {\r\n\r\n\t/**\r\n\t * A universal duration format to use wherever number needs to be formatted\r\n\t * as a duration.\r\n\t */\r\n\tdurationFormat?: string;\r\n\r\n\t/**\r\n\t * A base value. Any number below it will be considered \"negative\".\r\n\t *\r\n\t * @default 0\r\n\t */\r\n\tnegativeBase?: number;\r\n\r\n\t/**\r\n\t * Identifies what values are used in duration.\r\n\t *\r\n\t * Available options: `\"millisecond\"`, `\"second\"` (default), `\"minute\"`, `\"hour\"`, `\"day\"`, `\"week\"`, `\"month\"`, and `\"year\"`.\r\n\t *\r\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-durations/#Base_unit} for more info\r\n\t * @default \"second\"\r\n\t */\r\n\tbaseUnit?: TimeUnit;\r\n\r\n\t/**\r\n\t * Time unit dependent duration formats.\r\n\t *\r\n\t * Used be [[DurationAxis]].\r\n\t */\r\n\tdurationFormats?: Partial<Record<TimeUnit, Partial<Record<TimeUnit, string>>>>;\r\n\r\n\t/**\r\n\t * An array of data fields that hold duration values and should be formatted\r\n\t * with a [[DurationFormatter]].\r\n\t *\r\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/data-placeholders/#Formatting_placeholders} for more info\r\n\t */\r\n\tdurationFields?: string[];\r\n\r\n}\r\n\r\nexport interface IDurationFormatterPrivate extends IEntityPrivate {\r\n}\r\n\r\n/**\r\n * A class used to format numberic values as time duration.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-durations/} for more info\r\n */\r\nexport class DurationFormatter extends Entity {\r\n\tdeclare public _settings: IDurationFormatterSettings;\r\n\tdeclare public _privateSettings: IDurationFormatterPrivate;\r\n\r\n\tprotected _setDefaults() {\r\n\t\tconst dmillisecond = \"_duration_millisecond\";\r\n\t\tconst dsecond = \"_duration_second\";\r\n\t\tconst dminute = \"_duration_minute\";\r\n\t\tconst dhour = \"_duration_hour\";\r\n\t\tconst dday = \"_duration_day\";\r\n\t\tconst dweek = \"_duration_week\";\r\n\t\tconst dmonth = \"_duration_month\";\r\n\t\tconst dyear = \"_duration_year\";\r\n\r\n\t\tconst asecond = \"_second\";\r\n\t\tconst aminute = \"_minute\";\r\n\t\tconst ahour = \"_hour\";\r\n\t\tconst aday = \"_day\";\r\n\t\tconst aweek = \"_week\";\r\n\t\tconst amonth = \"_week\";\r\n\t\tconst ayear = \"_year\";\r\n\r\n\t\t// Defaults\r\n\t\tthis._setDefault(\"negativeBase\", 0);\r\n\t\tthis._setDefault(\"baseUnit\", \"second\");\r\n\t\tthis._setDefault(\"durationFormats\", {\r\n\t\t\t\"millisecond\": {\r\n\t\t\t\t\"millisecond\": this._t(dmillisecond),\r\n\t\t\t\t\"second\": this._t((dmillisecond + asecond) as any),\r\n\t\t\t\t\"minute\": this._t((dmillisecond + aminute) as any),\r\n\t\t\t\t\"hour\": this._t((dmillisecond + ahour) as any),\r\n\t\t\t\t\"day\": this._t((dmillisecond + aday) as any),\r\n\t\t\t\t\"week\": this._t((dmillisecond + aweek) as any),\r\n\t\t\t\t\"month\": this._t((dmillisecond + amonth) as any),\r\n\t\t\t\t\"year\": this._t((dmillisecond + ayear) as any)\r\n\t\t\t},\r\n\t\t\t\"second\": {\r\n\t\t\t\t\"second\": this._t((dsecond) as any),\r\n\t\t\t\t\"minute\": this._t((dsecond + aminute) as any),\r\n\t\t\t\t\"hour\": this._t((dsecond + ahour) as any),\r\n\t\t\t\t\"day\": this._t((dsecond + aday) as any),\r\n\t\t\t\t\"week\": this._t((dsecond + aweek) as any),\r\n\t\t\t\t\"month\": this._t((dsecond + amonth) as any),\r\n\t\t\t\t\"year\": this._t((dsecond + ayear) as any)\r\n\t\t\t},\r\n\t\t\t\"minute\": {\r\n\t\t\t\t\"minute\": this._t((dminute) as any),\r\n\t\t\t\t\"hour\": this._t((dminute + ahour) as any),\r\n\t\t\t\t\"day\": this._t((dminute + aday) as any),\r\n\t\t\t\t\"week\": this._t((dminute + aweek) as any),\r\n\t\t\t\t\"month\": this._t((dminute + amonth) as any),\r\n\t\t\t\t\"year\": this._t((dminute + ayear) as any)\r\n\t\t\t},\r\n\t\t\t\"hour\": {\r\n\t\t\t\t\"hour\": this._t((dhour) as any),\r\n\t\t\t\t\"day\": this._t((dhour + aday) as any),\r\n\t\t\t\t\"week\": this._t((dhour + aweek) as any),\r\n\t\t\t\t\"month\": this._t((dhour + amonth) as any),\r\n\t\t\t\t\"year\": this._t((dhour + ayear) as any)\r\n\t\t\t},\r\n\t\t\t\"day\": {\r\n\t\t\t\t\"day\": this._t((dday) as any),\r\n\t\t\t\t\"week\": this._t((dday + aweek) as any),\r\n\t\t\t\t\"month\": this._t((dday + amonth) as any),\r\n\t\t\t\t\"year\": this._t((dday + ayear) as any)\r\n\t\t\t},\r\n\t\t\t\"week\": {\r\n\t\t\t\t\"week\": this._t((dweek) as any),\r\n\t\t\t\t\"month\": this._t((dweek + amonth) as any),\r\n\t\t\t\t\"year\": this._t((dweek + ayear) as any)\r\n\t\t\t},\r\n\t\t\t\"month\": {\r\n\t\t\t\t\"month\": this._t((dmonth) as any),\r\n\t\t\t\t\"year\": this._t((dmonth + ayear) as any)\r\n\t\t\t},\r\n\t\t\t\"year\": {\r\n\t\t\t\t\"year\": this._t(dyear)\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tsuper._setDefaults();\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Collection of aliases for units.\r\n\t */\r\n\tprotected _unitAliases: { [index: string]: string } = {\r\n\t\t\"Y\": \"y\",\r\n\t\t\"D\": \"d\",\r\n\t\t\"H\": \"h\",\r\n\t\t\"K\": \"h\",\r\n\t\t\"k\": \"h\",\r\n\t\t\"n\": \"S\"\r\n\t};\r\n\r\n\tpublic _beforeChanged() {\r\n\t\tsuper._beforeChanged();\r\n\t}\r\n\r\n\t/**\r\n\t * Formats the number as duration.\r\n\t *\r\n\t * For example `1000` (base unit seconds) would be converted to `16:40` as in\r\n\t * 16 minutes and 40 seconds.\r\n\t *\r\n\t * @param value   Value to format\r\n\t * @param format  Format to apply\r\n\t * @param base    Override base unit\r\n\t * @return Formatted number\r\n\t */\r\n\tpublic format(value: number | string, format?: string, base?: TimeUnit): string {\r\n\r\n\t\t// no base unit?\r\n\t\tlet baseUnit = base || this.get(\"baseUnit\");\r\n\r\n\t\t// no format passed in or empty\r\n\t\tif (typeof format === \"undefined\" || format === \"\") {\r\n\t\t\tif (this.get(\"durationFormat\") != null) {\r\n\t\t\t\tformat = this.get(\"durationFormat\");\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tformat = this.getFormat($type.toNumber(value), undefined, baseUnit);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Clean format\r\n\t\tformat = $utils.cleanFormat(format!);\r\n\r\n\t\t// get format info (it will also deal with parser caching)\r\n\t\tlet info = this.parseFormat(format, baseUnit);\r\n\r\n\t\t// cast to number just in case\r\n\t\t// TODO: maybe use better casting\r\n\t\tlet source: number = Number(value);\r\n\r\n\t\t// format and replace the number\r\n\t\tlet details;\r\n\t\tif (source > this.get(\"negativeBase\")) {\r\n\t\t\tdetails = info.positive;\r\n\t\t}\r\n\t\telse if (source < this.get(\"negativeBase\")) {\r\n\t\t\tdetails = info.negative;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdetails = info.zero;\r\n\t\t}\r\n\r\n\r\n\t\t// Format\r\n\t\tlet formatted = this.applyFormat(source, details);\r\n\r\n\t\t// Apply color?\r\n\t\tif (details.color !== \"\") {\r\n\t\t\tformatted = \"[\" + details.color + \"]\" + formatted + \"[/]\";\r\n\t\t}\r\n\r\n\t\treturn formatted;\r\n\t}\r\n\r\n\t/**\r\n\t * Parses supplied format into structured object which can be used to format\r\n\t * the number.\r\n\t *\r\n\t * @param format  Format string, i.e. \"#,###.00\"\r\n\t * @param base    Override base unit\r\n\t * @return Parsed information\r\n\t */\r\n\tprotected parseFormat(format: string, base?: TimeUnit): any {\r\n\r\n\t\t// Check cache\r\n\t\t// TODO\r\n\t\t// let cached = this.getCache(format);\r\n\t\t// if (cached != null) {\r\n\t\t// \treturn cached;\r\n\t\t// }\r\n\r\n\t\t// no base unit?\r\n\t\tlet baseUnit = base || this.get(\"baseUnit\");\r\n\r\n\t\t// Initialize duration parsing info\r\n\t\tlet info = {\r\n\t\t\t\"positive\": {\r\n\t\t\t\t\"color\": \"\",\r\n\t\t\t\t\"template\": \"\",\r\n\t\t\t\t\"parts\": <any>[],\r\n\t\t\t\t\"source\": \"\",\r\n\t\t\t\t\"baseUnit\": baseUnit,\r\n\t\t\t\t\"parsed\": false,\r\n\t\t\t\t\"absolute\": false\r\n\t\t\t},\r\n\t\t\t\"negative\": {\r\n\t\t\t\t\"color\": \"\",\r\n\t\t\t\t\"template\": \"\",\r\n\t\t\t\t\"parts\": <any>[],\r\n\t\t\t\t\"source\": \"\",\r\n\t\t\t\t\"baseUnit\": baseUnit,\r\n\t\t\t\t\"parsed\": false,\r\n\t\t\t\t\"absolute\": false\r\n\t\t\t},\r\n\t\t\t\"zero\": {\r\n\t\t\t\t\"color\": \"\",\r\n\t\t\t\t\"template\": \"\",\r\n\t\t\t\t\"parts\": <any>[],\r\n\t\t\t\t\"source\": \"\",\r\n\t\t\t\t\"baseUnit\": baseUnit,\r\n\t\t\t\t\"parsed\": false,\r\n\t\t\t\t\"absolute\": false\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// Escape double vertical bars (that mean display one vertical bar)\r\n\t\tformat = format.replace(\"||\", $type.PLACEHOLDER2);\r\n\r\n\t\t// Split it up and deal with different formats\r\n\t\tlet parts = format.split(\"|\");\r\n\t\tinfo.positive.source = parts[0];\r\n\r\n\t\tif (typeof parts[2] === \"undefined\") {\r\n\t\t\tinfo.zero = info.positive;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tinfo.zero.source = parts[2];\r\n\t\t}\r\n\r\n\t\tif (typeof parts[1] === \"undefined\") {\r\n\t\t\tinfo.negative = info.positive;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tinfo.negative.source = parts[1];\r\n\t\t}\r\n\r\n\t\t// Parse each\r\n\t\t$object.each(info, (_part, item) => {\r\n\t\t\t// Already parsed\r\n\t\t\tif (item.parsed) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Check cached\r\n\t\t\t// TODO\r\n\t\t\t// if (typeof this.getCache(item.source) !== \"undefined\") {\r\n\t\t\t// \tinfo[part] = this.getCache(item.source);\r\n\t\t\t// \treturn;\r\n\t\t\t// }\r\n\r\n\t\t\t// Begin parsing\r\n\t\t\tlet partFormat: string = item.source;\r\n\r\n\t\t\t// Check for [] directives\r\n\t\t\tlet dirs: string[] | null = [];\r\n\t\t\tdirs = item.source.match(/^\\[([^\\]]*)\\]/);\r\n\t\t\tif (dirs && dirs.length && dirs[0] !== \"\") {\r\n\t\t\t\tpartFormat = item.source.substr(dirs[0].length);\r\n\t\t\t\titem.color = dirs[1];\r\n\t\t\t}\r\n\r\n\r\n\t\t\t// Let TextFormatter split into chunks\r\n\t\t\tlet chunks = TextFormatter.chunk(partFormat, true);\r\n\t\t\tfor (let i: number = 0; i < chunks.length; i++) {\r\n\t\t\t\tlet chunk = chunks[i];\r\n\r\n\t\t\t\t// replace back double vertical bar\r\n\t\t\t\tchunk.text = chunk.text.replace($type.PLACEHOLDER2, \"|\");\r\n\r\n\t\t\t\tif (chunk.type === \"value\") {\r\n\r\n\t\t\t\t\t// Just \"Duration\"?\r\n\t\t\t\t\t// if (chunk.text.toLowerCase() === \"duration\") {\r\n\t\t\t\t\t// \tchunk.text = durationFormat;\r\n\t\t\t\t\t// }\r\n\r\n\t\t\t\t\t// Check for \"a\" (absolute) modifier\r\n\t\t\t\t\tif (chunk.text.match(/[yYMdDwhHKkmsSn]+a/)) {\r\n\t\t\t\t\t\titem.absolute = true;\r\n\t\t\t\t\t\tchunk.text = chunk.text.replace(/([yYMdDwhHKkmsSn]+)a/, \"$1\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Find all possible parts\r\n\t\t\t\t\tlet matches = chunk.text.match(/y+|Y+|M+|d+|D+|w+|h+|H+|K+|k+|m+|s+|S+|n+/g);\r\n\r\n\t\t\t\t\tif (matches) {\r\n\t\t\t\t\t\t// Populate template\r\n\t\t\t\t\t\tfor (let x = 0; x < matches.length; x++) {\r\n\t\t\t\t\t\t\t// Is it an alias?\r\n\t\t\t\t\t\t\tif (matches[x] == null) {\r\n\t\t\t\t\t\t\t\tmatches[x] = this._unitAliases[matches[x]];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\titem.parts.push(matches[x]);\r\n\t\t\t\t\t\t\tchunk.text = chunk.text.replace(matches[x], $type.PLACEHOLDER);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Apply to template\r\n\t\t\t\titem.template += chunk.text;\r\n\t\t\t}\r\n\r\n\t\t\t// Apply style formatting\r\n\t\t\t//item.template = TextFormatter.format(item.template, this.outputFormat);\r\n\r\n\t\t\t// Save cache\r\n\t\t\t// TODO\r\n\t\t\t//this.setCache(item.source, item);\r\n\r\n\t\t\t// Mark this as parsed\r\n\t\t\titem.parsed = true;\r\n\t\t});\r\n\r\n\t\t// Save cache (the whole thing)\r\n\t\t// TODO\r\n\t\t//this.setCache(format, info);\r\n\r\n\t\treturn info;\r\n\t}\r\n\r\n\t/**\r\n\t * Applies parsed format to a numeric value.\r\n\t *\r\n\t * @param value    Value\r\n\t * @param details  Parsed format as returned by {parseFormat}\r\n\t * @return Formatted duration\r\n\t */\r\n\tprotected applyFormat(value: number, details: any): string {\r\n\r\n\t\t// Use absolute values\r\n\t\tlet negative = !details.absolute && (value < this.get(\"negativeBase\"));\r\n\t\tvalue = Math.abs(value);\r\n\r\n\t\t// Recalculate to milliseconds\r\n\t\tlet tstamp = this.toTimeStamp(value, details.baseUnit);\r\n\r\n\t\t// Init return value\r\n\t\tlet res = details.template;\r\n\r\n\t\t// Iterate through duration parts\r\n\t\tfor (let i = 0, len = details.parts.length; i < len; i++) {\r\n\r\n\t\t\t// Gather the part\r\n\t\t\tlet part = details.parts[i];\r\n\t\t\tlet unit = this._toTimeUnit(part.substr(0, 1));\r\n\t\t\tlet digits = part.length;\r\n\r\n\t\t\t// Calculate current unit value\r\n\t\t\tlet ints = Math.floor(tstamp / this._getUnitValue(unit!));\r\n\t\t\tres = res.replace($type.PLACEHOLDER, $utils.padString(ints, digits, \"0\"));\r\n\r\n\t\t\t// Reduce timestamp\r\n\t\t\ttstamp -= ints * this._getUnitValue(unit!);\r\n\t\t}\r\n\r\n\t\t// Reapply negative sign\r\n\t\tif (negative) {\r\n\t\t\tres = \"-\" + res;\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * Converts numeric value to timestamp in milliseconds.\r\n\t *\r\n\t * @param value     A source value\r\n\t * @param baseUnit  Base unit the source value is in: \"q\", \"s\", \"i\", \"h\", \"d\", \"w\", \"m\", \"y\"\r\n\t * @return Value representation as a timestamp in milliseconds\r\n\t */\r\n\tpublic toTimeStamp(value: number, baseUnit: TimeUnit): number {\r\n\t\treturn value * this._getUnitValue(baseUnit);\r\n\t}\r\n\r\n\tprotected _toTimeUnit(code: string): TimeUnit | undefined {\r\n\t\tswitch (code) {\r\n\t\t\tcase \"S\":\r\n\t\t\t\treturn \"millisecond\";\r\n\t\t\tcase \"s\":\r\n\t\t\t\treturn \"second\";\r\n\t\t\tcase \"m\":\r\n\t\t\t\treturn \"minute\";\r\n\t\t\tcase \"h\":\r\n\t\t\t\treturn \"hour\";\r\n\t\t\tcase \"d\":\r\n\t\t\t\treturn \"day\";\r\n\t\t\tcase \"w\":\r\n\t\t\t\treturn \"week\";\r\n\t\t\tcase \"M\":\r\n\t\t\t\treturn \"month\";\r\n\t\t\tcase \"y\":\r\n\t\t\t\treturn \"year\";\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t * Returns appropriate default format for the value.\r\n\t *\r\n\t * If `maxValue` is sepcified, it will use that value to determine the time\r\n\t * unit for the format.\r\n\t *\r\n\t * For example if your `baseUnit` is `\"second\"` and you pass in `10`, you\r\n\t * will get `\"10\"`.\r\n\t *\r\n\t * However, you might want it to be formatted in the context of bigger scale,\r\n\t * say 10 minutes (600 seconds). If you pass in `600` as `maxValue`, all\r\n\t * values, including small ones will use format with minutes, e.g.:\r\n\t * `00:10`, `00:50`, `12: 30`, etc.\r\n\t *\r\n\t * @param value     Value to format\r\n\t * @param maxValue  Maximum value to be used to determine format\r\n\t * @param baseUnit  Base unit of the value\r\n\t * @return Format\r\n\t */\r\n\tpublic getFormat(value: number, maxValue?: number, baseUnit?: TimeUnit): string {\r\n\r\n\t\t// Is format override set?\r\n\t\tif (this.get(\"durationFormat\") != null) {\r\n\t\t\treturn this.get(\"durationFormat\")!;\r\n\t\t}\r\n\r\n\t\t// Get base unit\r\n\t\tif (!baseUnit) {\r\n\t\t\tbaseUnit = this.get(\"baseUnit\");\r\n\t\t}\r\n\r\n\t\tif (maxValue != null && value != maxValue) {\r\n\t\t\tvalue = Math.abs(value);\r\n\t\t\tmaxValue = Math.abs(maxValue);\r\n\t\t\tlet maxUnit = this.getValueUnit(Math.max(value, maxValue), baseUnit);\r\n\t\t\t//let diffUnit = this.getValueUnit(Math.abs(maxValue - value), baseUnit);\r\n\t\t\t//console.log(maxUnit, diffUnit);\r\n\t\t\treturn (<any>this.get(\"durationFormats\"))[baseUnit!][maxUnit!];\r\n\t\t}\r\n\t\telse {\r\n\t\t\tlet unit = this.getValueUnit(value, baseUnit);\r\n\t\t\treturn (<any>this.get(\"durationFormats\"))[baseUnit!][unit!];\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns value's closest denominator time unit, e.g 100 seconds is\r\n\t * `\"minute\"`, while 59 seconds would still be `second`.\r\n\t *\r\n\t * @param value     Source duration value\r\n\t * @param baseUnit  Base unit\r\n\t * @return Denominator\r\n\t */\r\n\tpublic getValueUnit(value: number, baseUnit?: TimeUnit): TimeUnit | undefined {\r\n\r\n\t\t// Get base unit\r\n\t\tif (!baseUnit) {\r\n\t\t\tbaseUnit = this.get(\"baseUnit\");\r\n\t\t}\r\n\r\n\t\t// Convert to milliseconds\r\n\t\tlet currentUnit: any;\r\n\t\tlet ms = this.getMilliseconds(value, baseUnit);\r\n\t\t$object.eachContinue(this._getUnitValues(), (key, val) => {\r\n\t\t\tif (key == baseUnit || currentUnit) {\r\n\t\t\t\tlet num = ms / val;\r\n\t\t\t\tif (num <= 1) {\r\n\t\t\t\t\tif (!currentUnit) {\r\n\t\t\t\t\t\tcurrentUnit = key;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tcurrentUnit = key;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\treturn currentUnit;\r\n\t}\r\n\r\n\t/**\r\n\t * Converts value to milliseconds according to `baseUnit`.\r\n\t *\r\n\t * @param value     Source duration value\r\n\t * @param baseUnit  Base unit\r\n\t * @return Value in milliseconds\r\n\t */\r\n\tpublic getMilliseconds(value: number, baseUnit?: TimeUnit): number {\r\n\r\n\t\t// Get base unit\r\n\t\tif (!baseUnit) {\r\n\t\t\tbaseUnit = this.get(\"baseUnit\");\r\n\t\t}\r\n\r\n\t\treturn value * this._getUnitValue(baseUnit!);\r\n\t}\r\n\r\n\tprotected _getUnitValue(timeUnit: TimeUnit): number {\r\n\t\treturn this._getUnitValues()[timeUnit];\r\n\t}\r\n\r\n\tprotected _getUnitValues(): any {\r\n\t\treturn {\r\n\t\t\t\"millisecond\": 1,\r\n\t\t\t\"second\": 1000,\r\n\t\t\t\"minute\": 60000,\r\n\t\t\t\"hour\": 3600000,\r\n\t\t\t\"day\": 86400000,\r\n\t\t\t\"week\": 604800000,\r\n\t\t\t\"month\": 2592000000,\r\n\t\t\t\"year\": 31536000000,\r\n\t\t};\r\n\t}\r\n\r\n}\r\n", "/**\n * amCharts 5 locale\n * \n * Locale: en\n * Language: International English\n * Author: Martynas Majeris\n *\n * Follow instructions in [on this page](https://www.amcharts.com/docs/v5/tutorials/creating-translations/) to make corrections or add new translations.\n *\n * ---\n * Edit but leave the header section above this line. You can remove any\n * subsequent comment sections.\n * ---\n *\n * Use this file as a template to create translations. Leave the key part in\n * English intact. Fill the value with a translation.\n *\n * Empty string means no translation, so default \"International English\"\n * will be used.\n *\n * If you need the translation to literally be an empty string, use `null`\n * instead.\n *\n * IMPORTANT:\n * When translating make good effort to keep the translation length\n * at least the same chartcount as the English, especially for short prompts.\n *\n * Having significantly longer prompts may distort the actual charts.\n *\n * NOTE:\n * Some prompts - like months or weekdays - come in two versions: full and\n * shortened.\n *\n * If there's no official shortened version of these in your language, and it\n * would not be possible to invent such short versions that don't seem weird\n * to native speakers of that language, fill those with the same as full\n * version.\n *\n * PLACEHOLDERS:\n * Some prompts have placeholders like \"%1\". Those will be replaced by actual\n * values during translation and should be retained in the translated prompts.\n *\n * Placeholder positions may be changed to better suit structure of the\n * sentence.\n *\n * For example \"From %1 to %2\", when actually used will replace \"%1\" with an\n * actual value representing range start, and \"%2\" will be replaced by end\n * value.\n *\n * E.g. in a Scrollbar for Value axis \"From %1 to %2\" will become\n * \"From 100 to 200\". You may translate \"From\" and \"to\", as well as re-arrange\n * the order of the prompt itself, but make sure the \"%1\" and \"%2\" remain, in\n * places where they will make sense.\n *\n * Save the file as language_LOCALE, i.e. `en_GB.ts`, `fr_FR.ts`, etc.\n */\nexport default {\n\t\"firstDayOfWeek\": 1,\n\t\n\t// Number formatting options.\n\t// \n\t// Please check with the local standards which separator is accepted to be\n\t// used for separating decimals, and which for thousands.\n\t\"_decimalSeparator\": \".\",\n\t\"_thousandSeparator\": \",\",\n\n\t// Suffixes for numbers\n\t// When formatting numbers, big or small numers might be reformatted to\n\t// shorter version, by applying a suffix.\n\t// \n\t// For example, 1000000 might become \"1m\".\n\t// Or 1024 might become \"1KB\" if we're formatting byte numbers.\n\t// \n\t// This section defines such suffixes for all such cases.\n\t\"_big_number_suffix_3\": \"k\",\n\t\"_big_number_suffix_6\": \"M\",\n\t\"_big_number_suffix_9\": \"G\",\n\t\"_big_number_suffix_12\": \"T\",\n\t\"_big_number_suffix_15\": \"P\",\n\t\"_big_number_suffix_18\": \"E\",\n\t\"_big_number_suffix_21\": \"Z\",\n\t\"_big_number_suffix_24\": \"Y\",\n\n\t\"_small_number_suffix_3\": \"m\",\n\t\"_small_number_suffix_6\": \"\u03BC\",\n\t\"_small_number_suffix_9\": \"n\",\n\t\"_small_number_suffix_12\": \"p\",\n\t\"_small_number_suffix_15\": \"f\",\n\t\"_small_number_suffix_18\": \"a\",\n\t\"_small_number_suffix_21\": \"z\",\n\t\"_small_number_suffix_24\": \"y\",\n\n\t\"_byte_suffix_B\": \"B\",\n\t\"_byte_suffix_KB\": \"KB\",\n\t\"_byte_suffix_MB\": \"MB\",\n\t\"_byte_suffix_GB\": \"GB\",\n\t\"_byte_suffix_TB\": \"TB\",\n\t\"_byte_suffix_PB\": \"PB\",\n\n\t// Default date formats for various periods.\n\t// \n\t// This should reflect official or de facto formatting universally accepted\n\t// in the country translation is being made for\n\t// Available format codes here:\n\t// https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/#Format_codes\n\t// \n\t// This will be used when formatting date/time for particular granularity,\n\t// e.g. \"_date_hour\" will be shown whenever we need to show time as hours.\n\t// \n\t// \"date\" is used as in default date format when showing standalone dates.\n\t\"_date\": \"yyyy-MM-dd\",\n\t\"_date_millisecond\": \"mm:ss SSS\",\n\t\"_date_millisecond_full\": \"HH:mm:ss SSS\",\n\t\"_date_second\": \"HH:mm:ss\",\n\t\"_date_second_full\": \"HH:mm:ss\",\n\t\"_date_minute\": \"HH:mm\",\n\t\"_date_minute_full\": \"HH:mm - MMM dd, yyyy\",\n\t\"_date_hour\": \"HH:mm\",\n\t\"_date_hour_full\": \"HH:mm - MMM dd, yyyy\",\n\t\"_date_day\": \"MMM dd\",\n\t\"_date_day_full\": \"MMM dd, yyyy\",\n\t\"_date_week\": \"ww\",\n\t\"_date_week_full\": \"MMM dd, yyyy\",\n\t\"_date_month\": \"MMM\",\n\t\"_date_month_full\": \"MMM, yyyy\",\n\t\"_date_year\": \"yyyy\",\n\n\t// Default duration formats for various base units.\n\t// \n\t// This will be used by DurationFormatter to format numeric values into\n\t// duration.\n\t// \n\t// Notice how each duration unit comes in several versions. This is to ensure\n\t// that each base unit is shown correctly.\n\t// \n\t// For example, if we have baseUnit set to \"second\", meaning our duration is\n\t// in seconds.\n\t// \n\t// If we pass in `50` to formatter, it will know that we have just 50 seconds\n\t// (less than a minute) so it will use format in `\"_duration_second\"` (\"ss\"),\n\t// and the formatted result will be in like `\"50\"`.\n\t// \n\t// If we pass in `70`, which is more than a minute, the formatter will switch\n\t// to `\"_duration_second_minute\"` (\"mm:ss\"), resulting in \"01:10\" formatted\n\t// text.\n\t// \n\t// Available codes here:\n\t// https://www.amcharts.com/docs/v4/concepts/formatters/formatting-duration/#Available_Codes\n\t\"_duration_millisecond\": \"SSS\",\n\t\"_duration_millisecond_second\": \"ss.SSS\",\n\t\"_duration_millisecond_minute\": \"mm:ss SSS\",\n\t\"_duration_millisecond_hour\": \"hh:mm:ss SSS\",\n\t\"_duration_millisecond_day\": \"d'd' mm:ss SSS\",\n\t\"_duration_millisecond_week\": \"d'd' mm:ss SSS\",\n\t\"_duration_millisecond_month\": \"M'm' dd'd' mm:ss SSS\",\n\t\"_duration_millisecond_year\": \"y'y' MM'm' dd'd' mm:ss SSS\",\n\n\t\"_duration_second\": \"ss\",\n\t\"_duration_second_minute\": \"mm:ss\",\n\t\"_duration_second_hour\": \"hh:mm:ss\",\n\t\"_duration_second_day\": \"d'd' hh:mm:ss\",\n\t\"_duration_second_week\": \"d'd' hh:mm:ss\",\n\t\"_duration_second_month\": \"M'm' dd'd' hh:mm:ss\",\n\t\"_duration_second_year\": \"y'y' MM'm' dd'd' hh:mm:ss\",\n\n\t\"_duration_minute\": \"mm\",\n\t\"_duration_minute_hour\": \"hh:mm\",\n\t\"_duration_minute_day\": \"d'd' hh:mm\",\n\t\"_duration_minute_week\": \"d'd' hh:mm\",\n\t\"_duration_minute_month\": \"M'm' dd'd' hh:mm\",\n\t\"_duration_minute_year\": \"y'y' MM'm' dd'd' hh:mm\",\n\n\t\"_duration_hour\": \"hh'h'\",\n\t\"_duration_hour_day\": \"d'd' hh'h'\",\n\t\"_duration_hour_week\": \"d'd' hh'h'\",\n\t\"_duration_hour_month\": \"M'm' dd'd' hh'h'\",\n\t\"_duration_hour_year\": \"y'y' MM'm' dd'd' hh'h'\",\n\n\t\"_duration_day\": \"d'd'\",\n\t\"_duration_day_week\": \"d'd'\",\n\t\"_duration_day_month\": \"M'm' dd'd'\",\n\t\"_duration_day_year\": \"y'y' MM'm' dd'd'\",\n\n\t\"_duration_week\": \"w'w'\",\n\t\"_duration_week_month\": \"w'w'\",\n\t\"_duration_week_year\": \"w'w'\",\n\n\t\"_duration_month\": \"M'm'\",\n\t\"_duration_month_year\": \"y'y' MM'm'\",\n\n\t\"_duration_year\": \"y'y'\",\n\n\t// Era translations\n\t\"_era_ad\": \"AD\",\n\t\"_era_bc\": \"BC\",\n\n\t// Day part, used in 12-hour formats, e.g. 5 P.M.\n\t// Please note that these come in 3 variants:\n\t// * one letter (e.g. \"A\")\n\t// * two letters (e.g. \"AM\")\n\t// * two letters with dots (e.g. \"A.M.\")\n\t// \n\t// All three need to to be translated even if they are all the same. Some\n\t// users might use one, some the other.\n\t\"A\": \"\",\n\t\"P\": \"\",\n\t\"AM\": \"\",\n\t\"PM\": \"\",\n\t\"A.M.\": \"\",\n\t\"P.M.\": \"\",\n\n\t// Date-related stuff.\n\t// \n\t// When translating months, if there's a difference, use the form which is\n\t// best for a full date, e.g. as you would use it in \"2018 January 1\".\n\t// \n\t// Note that May is listed twice. This is because in English May is the same\n\t// in both long and short forms, while in other languages it may not be the\n\t// case. Translate \"May\" to full word, while \"May(short)\" to shortened\n\t// version.\n\t// \n\t// Should month names and weekdays be capitalized or not?\n\t// \n\t// Rule of thumb is this: if the names should always be capitalized,\n\t// regardless of name position within date (\"January\", \"21st January 2018\",\n\t// etc.) use capitalized names. Otherwise enter all lowercase.\n\t// \n\t// The date formatter will automatically capitalize names if they are the\n\t// first (or only) word in resulting date.\n\t\"January\": \"\",\n\t\"February\": \"\",\n\t\"March\": \"\",\n\t\"April\": \"\",\n\t\"May\": \"\",\n\t\"June\": \"\",\n\t\"July\": \"\",\n\t\"August\": \"\",\n\t\"September\": \"\",\n\t\"October\": \"\",\n\t\"November\": \"\",\n\t\"December\": \"\",\n\t\"Jan\": \"\",\n\t\"Feb\": \"\",\n\t\"Mar\": \"\",\n\t\"Apr\": \"\",\n\t\"May(short)\": \"May\",\n\t\"Jun\": \"\",\n\t\"Jul\": \"\",\n\t\"Aug\": \"\",\n\t\"Sep\": \"\",\n\t\"Oct\": \"\",\n\t\"Nov\": \"\",\n\t\"Dec\": \"\",\n\n\t// Weekdays.\n\t\"Sunday\": \"\",\n\t\"Monday\": \"\",\n\t\"Tuesday\": \"\",\n\t\"Wednesday\": \"\",\n\t\"Thursday\": \"\",\n\t\"Friday\": \"\",\n\t\"Saturday\": \"\",\n\t\"Sun\": \"\",\n\t\"Mon\": \"\",\n\t\"Tue\": \"\",\n\t\"Wed\": \"\",\n\t\"Thu\": \"\",\n\t\"Fri\": \"\",\n\t\"Sat\": \"\",\n\n\t// Date ordinal function.\n\t// \n\t// This is used when adding number ordinal when formatting days in dates.\n\t// \n\t// E.g. \"January 1st\", \"February 2nd\".\n\t// \n\t// The function accepts day number, and returns a string to be added to the\n\t// day, like in default English translation, if we pass in 2, we will receive\n\t// \"nd\" back.\n\t\"_dateOrd\": function(day: number): string {\n\t\tlet res = \"th\";\n\t\tif ((day < 11) || (day > 13)) {\n\t\t\tswitch (day % 10) {\n\t\t\t\tcase 1:\n\t\t\t\t\tres = \"st\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\tres = \"nd\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\tres = \"rd\"\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn res;\n\t},\n\n\t// Various chart controls.\n\t// Shown as a tooltip on zoom out button.\n\t\"Zoom Out\": \"\",\n\n\t// Timeline buttons\n\t\"Play\": \"\",\n\t\"Stop\": \"\",\n\n\t// Chart's Legend screen reader title.\n\t\"Legend\": \"\",\n\n\t// Legend's item screen reader indicator.\n\t\"Press ENTER to toggle\": \"\",\n\n\t// Shown when the chart is busy loading something.\n\t\"Loading\": \"\",\n\n\t// Shown as the first button in the breadcrumb navigation, e.g.:\n\t// Home > First level > ...\n\t\"Home\": \"\",\n\n\t// Chart types.\n\t// Those are used as default screen reader titles for the main chart element\n\t// unless developer has set some more descriptive title.\n\t\"Chart\": \"\",\n\t\"Serial chart\": \"\",\n\t\"X/Y chart\": \"\",\n\t\"Pie chart\": \"\",\n\t\"Gauge chart\": \"\",\n\t\"Radar chart\": \"\",\n\t\"Sankey diagram\": \"\",\n\t\"Flow diagram\": \"\",\n\t\"Chord diagram\": \"\",\n\t\"TreeMap chart\": \"\",\n\t\"Force directed tree\": \"\",\n\t\"Sliced chart\": \"\",\n\n\t// Series types.\n\t// Used to name series by type for screen readers if they do not have their\n\t// name set.\n\t\"Series\": \"\",\n\t\"Candlestick Series\": \"\",\n\t\"OHLC Series\": \"\",\n\t\"Column Series\": \"\",\n\t\"Line Series\": \"\",\n\t\"Pie Slice Series\": \"\",\n\t\"Funnel Series\": \"\",\n\t\"Pyramid Series\": \"\",\n\t\"X/Y Series\": \"\",\n\n\t// Map-related stuff.\n\t\"Map\": \"\",\n\t\"Press ENTER to zoom in\": \"\",\n\t\"Press ENTER to zoom out\": \"\",\n\t\"Use arrow keys to zoom in and out\": \"\",\n\t\"Use plus and minus keys on your keyboard to zoom in and out\": \"\",\n\n\t// Export-related stuff.\n\t// These prompts are used in Export menu labels.\n\t// \n\t// \"Export\" is the top-level menu item.\n\t// \n\t// \"Image\", \"Data\", \"Print\" as second-level indicating type of export\n\t// operation.\n\t// \n\t// Leave actual format untranslated, unless you absolutely know that they\n\t// would convey more meaning in some other way.\n\t\"Export\": \"\",\n\t\"Image\": \"\",\n\t\"Data\": \"\",\n\t\"Print\": \"\",\n\t\"Press ENTER or use arrow keys to navigate\": \"\",\n\t\"Press ENTER to open\": \"\",\n\t\"Press ENTER to print.\": \"\",\n\t\"Press ENTER to export as %1.\": \"\",\n\t\"(Press ESC to close this message)\": \"\",\n\t\"Image Export Complete\": \"\",\n\t\"Export operation took longer than expected. Something might have gone wrong.\": \"\",\n\t\"Saved from\": \"\",\n\t\"PNG\": \"\",\n\t\"JPG\": \"\",\n\t\"GIF\": \"\",\n\t\"SVG\": \"\",\n\t\"PDF\": \"\",\n\t\"JSON\": \"\",\n\t\"CSV\": \"\",\n\t\"XLSX\": \"\",\n\t\"HTML\": \"\",\n\n\t// Scrollbar-related stuff.\n\t// \n\t// Scrollbar is a control which can zoom and pan the axes on the chart.\n\t// \n\t// Each scrollbar has two grips: left or right (for horizontal scrollbar) or\n\t// upper and lower (for vertical one).\n\t// \n\t// Prompts change in relation to whether Scrollbar is vertical or horizontal.\n\t// \n\t// The final section is used to indicate the current range of selection.\n\t\"Use TAB to select grip buttons or left and right arrows to change selection\": \"\",\n\t\"Use left and right arrows to move selection\": \"\",\n\t\"Use left and right arrows to move left selection\": \"\",\n\t\"Use left and right arrows to move right selection\": \"\",\n\t\"Use TAB select grip buttons or up and down arrows to change selection\": \"\",\n\t\"Use up and down arrows to move selection\": \"\",\n\t\"Use up and down arrows to move lower selection\": \"\",\n\t\"Use up and down arrows to move upper selection\": \"\",\n\t\"From %1 to %2\": \"\",\n\t\"From %1\": \"\",\n\t\"To %1\": \"\",\n\n\t// Data loader-related.\n\t\"No parser available for file: %1\": \"\",\n\t\"Error parsing file: %1\": \"\",\n\t\"Unable to load file: %1\": \"\",\n\t\"Invalid date\": \"\",\n\n\t// Common actions\n\t\"Close\": \"\",\n\t\"Minimize\": \"\"\n\n};", "import { Entity, IEntitySettings, IEntityPrivate } from \"./Entity\"\nimport * as $array from \"./Array\"\nimport en from \"../../../locales/en\";\n\n/**\n * Defines properties that exist for the locale.\n *\n * @ignore\n */\nexport interface ILocaleSettings {\n\t\"firstDayOfWeek\"?: number,\n\n\t// number formatter related\n\t\"_decimalSeparator\"?: string;\n\t\"_thousandSeparator\"?: string;\n\n\t\"_big_number_suffix_3\"?: string;\n\t\"_big_number_suffix_6\"?: string;\n\t\"_big_number_suffix_9\"?: string;\n\t\"_big_number_suffix_12\"?: string;\n\t\"_big_number_suffix_15\"?: string;\n\t\"_big_number_suffix_18\"?: string;\n\t\"_big_number_suffix_21\"?: string;\n\t\"_big_number_suffix_24\"?: string;\n\n\t\"_small_number_suffix_24\"?: string;\n\t\"_small_number_suffix_21\"?: string;\n\t\"_small_number_suffix_18\"?: string;\n\t\"_small_number_suffix_15\"?: string;\n\t\"_small_number_suffix_12\"?: string;\n\t\"_small_number_suffix_9\"?: string;\n\t\"_small_number_suffix_6\"?: string;\n\t\"_small_number_suffix_3\"?: string;\n\n\t\"_byte_suffix_B\"?: string;\n\t\"_byte_suffix_KB\"?: string;\n\t\"_byte_suffix_MB\"?: string;\n\t\"_byte_suffix_GB\"?: string;\n\t\"_byte_suffix_TB\"?: string;\n\t\"_byte_suffix_PB\"?: string;\n\n\t// Default date formats for various periods\n\t\"_date\"?: string;\n\t\"_date_millisecond\"?: string;\n\t\"_date_millisecond_full\"?: string;\n\t\"_date_second\"?: string;\n\t\"_date_second_full\"?: string;\n\t\"_date_minute\"?: string;\n\t\"_date_minute_full\"?: string;\n\t\"_date_hour\"?: string;\n\t\"_date_hour_full\"?: string;\n\t\"_date_day\"?: string;\n\t\"_date_day_full\"?: string;\n\t\"_date_week\"?: string;\n\t\"_date_week_full\"?: string;\n\t\"_date_month\"?: string;\n\t\"_date_month_full\"?: string;\n\t\"_date_year\"?: string;\n\n\t// Default duration formats for various base units\n\t\"_duration_millisecond\"?: string;\n\t\"_duration_millisecond_second\"?: string;\n\t\"_duration_millisecond_minute\"?: string;\n\t\"_duration_millisecond_hour\"?: string;\n\t\"_duration_millisecond_day\"?: string;\n\t\"_duration_millisecond_week\"?: string;\n\t\"_duration_millisecond_month\"?: string;\n\t\"_duration_millisecond_year\"?: string;\n\n\t\"_duration_second\"?: string;\n\t\"_duration_second_minute\"?: string;\n\t\"_duration_second_hour\"?: string;\n\t\"_duration_second_day\"?: string;\n\t\"_duration_second_week\"?: string;\n\t\"_duration_second_month\"?: string;\n\t\"_duration_second_year\"?: string;\n\n\t\"_duration_minute\"?: string;\n\t\"_duration_minute_hour\"?: string;\n\t\"_duration_minute_day\"?: string;\n\t\"_duration_minute_week\"?: string;\n\t\"_duration_minute_month\"?: string;\n\t\"_duration_minute_year\"?: string;\n\n\t\"_duration_hour\"?: string;\n\t\"_duration_hour_day\"?: string;\n\t\"_duration_hour_week\"?: string;\n\t\"_duration_hour_month\"?: string;\n\t\"_duration_hour_year\"?: string;\n\n\t\"_duration_day\"?: string;\n\t\"_duration_day_week\"?: string;\n\t\"_duration_day_month\"?: string;\n\t\"_duration_day_year\"?: string;\n\n\t\"_duration_week\"?: string;\n\t\"_duration_week_month\"?: string;\n\t\"_duration_week_year\"?: string;\n\n\t\"_duration_month\"?: string;\n\t\"_duration_month_year\"?: string;\n\n\t\"_duration_year\"?: string;\n\n\t// Era\n\t\"_era_ad\"?: string;\n\t\"_era_bc\"?: string;\n\n\t// Period\n\t\"A\"?: string;\n\t\"P\"?: string;\n\t\"AM\"?: string;\n\t\"PM\"?: string;\n\t\"A.M.\"?: string;\n\t\"P.M.\"?: string;\n\n\t// Dates\n\t\"January\"?: string;\n\t\"February\"?: string;\n\t\"March\"?: string;\n\t\"April\"?: string;\n\t\"May\"?: string;\n\t\"June\"?: string;\n\t\"July\"?: string;\n\t\"August\"?: string;\n\t\"September\"?: string;\n\t\"October\"?: string;\n\t\"November\"?: string;\n\t\"December\"?: string;\n\t\"Jan\"?: string;\n\t\"Feb\"?: string;\n\t\"Mar\"?: string;\n\t\"Apr\"?: string;\n\t\"May(short)\"?: string;\n\t\"Jun\"?: string;\n\t\"Jul\"?: string;\n\t\"Aug\"?: string;\n\t\"Sep\"?: string;\n\t\"Oct\"?: string;\n\t\"Nov\"?: string;\n\t\"Dec\"?: string;\n\t\"Sunday\"?: string;\n\t\"Monday\"?: string;\n\t\"Tuesday\"?: string;\n\t\"Wednesday\"?: string;\n\t\"Thursday\"?: string;\n\t\"Friday\"?: string;\n\t\"Saturday\"?: string;\n\t\"Sun\"?: string;\n\t\"Mon\"?: string;\n\t\"Tue\"?: string;\n\t\"Wed\"?: string;\n\t\"Thu\"?: string;\n\t\"Fri\"?: string;\n\t\"Sat\"?: string;\n\n\t// Chart elements\n\t\"Zoom Out\"?: string;\n\t\"Play\"?: string;\n\t\"Stop\"?: string;\n\t\"Legend\"?: string;\n\t\"Press ENTER to toggle\"?: string;\n\t\"Loading\"?: string;\n\t\"%1 shown\"?: string;\n\t\"%1 hidden\"?: string;\n\n\t// Chart types\n\t\"Chart\"?: string;\n\t\"Serial chart\"?: string;\n\t\"X/Y chart\"?: string;\n\t\"Pie chart\"?: string;\n\t\"Sunburst chart\"?: string;\n\t\"Gauge chart\"?: string;\n\t\"Radar chart\"?: string;\n\t\"Sankey diagram\"?: string;\n\t\"Flow diagram\"?: string;\n\t\"Chord diagram\"?: string;\n\t\"TreeMap chart\"?: string;\n\t\"Force directed tree\"?: string;\n\t\"Sliced chart\"?: string;\n\n\t// Series types\n\t\"Series\"?: string;\n\t\"Candlestick Series\"?: string;\n\t\"OHLC Series\"?: string;\n\t\"Column Series\"?: string;\n\t\"Line Series\"?: string;\n\t\"Pie Slice Series\"?: string;\n\t\"Funnel Series\"?: string;\n\t\"Pyramid Series\"?: string;\n\t\"X/Y Series\"?: string;\n\n\t// Map-related\n\t\"Map\"?: string;\n\t\"Press ENTER to zoom in\"?: string;\n\t\"Press ENTER to zoom out\"?: string;\n\t\"Use arrow keys to zoom in and out\"?: string;\n\t\"Use plus and minus keys on your keyboard to zoom in and out\"?: string;\n\t\"Home\"?: string;\n\t\"Zoom level changed to %1\"?: string;\n\n\t// Export-related\n\t\"Export\"?: string;\n\t\"Image\"?: string;\n\t\"Data\"?: string;\n\t\"Print\"?: string;\n\t\"Press ENTER or use arrow keys to navigate\"?: string;\n\t\"Press ENTER to open\"?: string;\n\t\"Press ENTER to print.\"?: string;\n\t\"Press ENTER to export as %1.\"?: string;\n\t\"(Press ESC to close this message)\"?: string;\n\t\"Image Export Complete\"?: string;\n\t\"Export operation took longer than expected. Something might have gone wrong.\"?: string;\n\t\"Saved from\"?: string;\n\t\"PNG\"?: string;\n\t\"JPG\"?: string;\n\t\"GIF\"?: string;\n\t\"SVG\"?: string;\n\t\"PDF\"?: string;\n\t\"JSON\"?: string;\n\t\"CSV\"?: string;\n\t\"XLSX\"?: string;\n\t\"HTML\"?: string;\n\n\t// Scrollbar-related\n\t\"Use TAB to select grip buttons or left and right arrows to change selection\"?: string;\n\t\"Use left and right arrows to move selection\"?: string;\n\t\"Use left and right arrows to move left selection\"?: string;\n\t\"Use left and right arrows to move right selection\"?: string;\n\t\"Use TAB select grip buttons or up and down arrows to change selection\"?: string;\n\t\"Use up and down arrows to move selection\"?: string;\n\t\"Use up and down arrows to move lower selection\"?: string;\n\t\"Use up and down arrows to move upper selection\"?: string;\n\t\"From %1 to %2\"?: string;\n\t\"From %1\"?: string;\n\t\"To %1\"?: string;\n\n\t// Data loader-related\n\t\"No parser available for file: %1\"?: string;\n\t\"Error parsing file: %1\"?: string;\n\t\"Unable to load file: %1\"?: string;\n\t\"Invalid date\"?: string;\n\n\t// Common actions\n\t\"Close\"?: string;\n\t\"Minimize\"?: string;\n\n\t\"Venn Series\"?: string;\n\t\"Venn Diagram\"?: string;\n}\n\n/**\n * Defines functions that exist for the locale.\n *\n * @ignore\n */\nexport interface ILocaleFunctions {\n\t// ordinal function\n\t\"_dateOrd\": (day: number) => string;\n}\n\n/**\n * Defines all of the defaults for locale properties.\n * @ignore\n */\nexport interface ILocaleDefault extends ILocaleSettings, ILocaleFunctions { }\n\n/**\n * Defines locale interface.\n *\n * @ignore\n */\nexport interface ILocale extends Partial<ILocaleDefault> { };\n\nexport interface ILanguageSettings extends IEntitySettings {\n}\n\nexport interface ILanguagePrivate extends IEntityPrivate {\n\n\t/**\n\t * A locale for International English (default).\n\t */\n\tdefaultLocale: ILocale;\n\n}\n\nexport class Language extends Entity {\n\tdeclare public _settings: ILanguageSettings;\n\tdeclare public _privateSettings: ILanguagePrivate;\n\n\tprotected _setDefaults() {\n\t\tthis.setPrivate(\"defaultLocale\", en);\n\t\tsuper._setDefaults();\n\t}\n\n\tpublic translate<Key extends keyof ILocaleSettings>(prompt: Key, locale?: ILocale, ...rest: Array<string>): string {\n\n\t\t// Get langauge\n\t\tif (!locale) {\n\t\t\tlocale = this._root.locale || this.getPrivate(\"defaultLocale\");\n\t\t}\n\n\t\t// Init translation\n\t\tlet translation: string = prompt;\n\t\tlet value = locale[prompt];\n\n\t\t// Try to look for the translation\n\t\tif (value === null) {\n\t\t\ttranslation = \"\";\n\t\t}\n\t\telse if (value != null) {\n\t\t\t// It might be an empty string\n\t\t\tif (value) {\n\t\t\t\ttranslation = <string>value!;\n\t\t\t}\n\t\t}\n\t\telse if (locale !== this.getPrivate(\"defaultLocale\")) {\n\t\t\t// Try to look in default language\n\t\t\treturn this.translate(prompt, this.getPrivate(\"defaultLocale\"), ...rest);\n\t\t}\n\n\t\t// Replace %1, %2, etc params\n\t\tif (rest.length) {\n\t\t\tfor (let len = rest.length, i = 0; i < len; ++i) {\n\t\t\t\ttranslation = translation.split(\"%\" + (i + 1)).join(rest[i]);\n\t\t\t}\n\t\t}\n\n\t\t// Return the translation\n\t\treturn translation;\n\t}\n\n\tpublic translateAny(prompt: string, locale?: ILocale, ...rest: Array<string>): string {\n\t\treturn this.translate(<any>prompt, locale, ...rest);\n\t}\n\n\tpublic setTranslationAny(prompt: string, translation: string, locale?: ILocale): void {\n\t\tconst localeTarget = locale || this._root.locale;\n\t\t(<any>localeTarget)[prompt] = translation;\n\t}\n\n\tpublic translateEmpty<Key extends keyof ILocaleSettings>(prompt: Key, locale?: ILocale, ...rest: Array<string>): string {\n\t\tlet translation = this.translate(prompt, locale, ...rest);\n\t\treturn translation == prompt ? \"\" : translation;\n\t}\n\n\tpublic translateFunc<Key extends keyof ILocaleFunctions>(prompt: Key, locale?: ILocale): ILocaleFunctions[Key] {\n\n\t\tif ((<any>this._root.locale)[prompt]) {\n\t\t\treturn (<any>this._root.locale)[prompt];\n\t\t}\n\n\t\t// Try to look in default language\n\t\tif (locale !== this.getPrivate(\"defaultLocale\")) {\n\t\t\treturn this.translateFunc(prompt, this.getPrivate(\"defaultLocale\"));\n\t\t}\n\n\t\t// Fail - return empty function\n\t\treturn (): string => {\n\t\t\treturn \"\";\n\t\t};\n\t}\n\n\tpublic translateAll<Key extends keyof ILocaleSettings>(list: Array<Key>, locale?: ILocale): Array<string> {\n\t\t// Translate all items in the list\n\t\tif (!this.isDefault()) {\n\t\t\treturn $array.map(list, (x) => this.translate(x, locale));\n\n\t\t} else {\n\t\t\treturn list;\n\t\t}\n\t}\n\n\t/**\n\t * Returns `true` if the currently selected locale is a default locale.\n\t *\n\t * @return `true` if locale is default; `false` if it is not.\n\t */\n\tpublic isDefault(): boolean {\n\t\treturn this.getPrivate(\"defaultLocale\") === this._root.locale;\n\t}\n\n}\n", "/**\n * Modified from Pixi:\n *\n * The MIT License\n *\n * Copyright (c) 2013-2017 Mathew Groves, Chad Engler\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\nimport type { IPoint } from \"./IPoint\";\n\n/**\n * @ignore\n */\nexport class Matrix {\n\tpublic a: number;\n\tpublic b: number;\n\tpublic c: number;\n\tpublic d: number;\n\tpublic tx: number;\n\tpublic ty: number;\n\n\tconstructor(a = 1, b = 0, c = 0, d = 1, tx = 0, ty = 0) {\n\t\tthis.a = a;\n\t\tthis.b = b;\n\t\tthis.c = c;\n\t\tthis.d = d;\n\t\tthis.tx = tx;\n\t\tthis.ty = ty;\n\t}\n\n\t/**\n\t * Sets the matrix based on all the available properties\n\t */\n\tsetTransform(x: number, y: number, pivotX: number, pivotY: number, rotation: number, scale: number = 1): void {\n\t\tthis.a = Math.cos(rotation) * scale;\n\t\tthis.b = Math.sin(rotation) * scale;\n\t\tthis.c = -Math.sin(rotation) * scale;\n\t\tthis.d = Math.cos(rotation) * scale;\n\t\tthis.tx = x - ((pivotX * this.a) + (pivotY * this.c));\n\t\tthis.ty = y - ((pivotX * this.b) + (pivotY * this.d));\n\t}\n\n\t/**\n\t * Get a new position with the current transformation applied.\n\t * Can be used to go from a child's coordinate space to the world coordinate space. (e.g. rendering)\n\t */\n\tapply(origin: IPoint): IPoint {\n\t\treturn {\n\t\t\tx: (this.a * origin.x) + (this.c * origin.y) + this.tx,\n\t\t\ty: (this.b * origin.x) + (this.d * origin.y) + this.ty\n\t\t};\n\t}\n\n\t/**\n\t * Get a new position with the inverse of the current transformation applied.\n\t * Can be used to go from the world coordinate space to a child's coordinate space. (e.g. input)\n\t */\n\tapplyInverse(origin: IPoint): IPoint {\n\t\tconst id = 1 / ((this.a * this.d) + (this.c * -this.b));\n\n\t\treturn {\n\t\t\tx: (this.d * id * origin.x) + (-this.c * id * origin.y) + (((this.ty * this.c) - (this.tx * this.d)) * id),\n\t\t\ty: (this.a * id * origin.y) + (-this.b * id * origin.x) + (((-this.ty * this.a) + (this.tx * this.b)) * id)\n\t\t};\n\t}\n\n\t/**\n\t * Appends the given Matrix to this Matrix.\n\t */\n\tappend(matrix: Matrix): void {\n\t\tconst a1 = this.a;\n\t\tconst b1 = this.b;\n\t\tconst c1 = this.c;\n\t\tconst d1 = this.d;\n\t\tthis.a = (matrix.a * a1) + (matrix.b * c1);\n\t\tthis.b = (matrix.a * b1) + (matrix.b * d1);\n\t\tthis.c = (matrix.c * a1) + (matrix.d * c1);\n\t\tthis.d = (matrix.c * b1) + (matrix.d * d1);\n\t\tthis.tx = (matrix.tx * a1) + (matrix.ty * c1) + this.tx;\n\t\tthis.ty = (matrix.tx * b1) + (matrix.ty * d1) + this.ty;\n\t}\n\n\t/**\n\t * Prepends the given Matrix to this Matrix.\n\t */\n\tprepend(matrix: Matrix): void {\n\t\tconst tx1 = this.tx;\n\t\tif (matrix.a !== 1 || matrix.b !== 0 || matrix.c !== 0 || matrix.d !== 1) {\n\t\t\tconst a1 = this.a;\n\t\t\tconst c1 = this.c;\n\t\t\tthis.a = (a1 * matrix.a) + (this.b * matrix.c);\n\t\t\tthis.b = (a1 * matrix.b) + (this.b * matrix.d);\n\t\t\tthis.c = (c1 * matrix.a) + (this.d * matrix.c);\n\t\t\tthis.d = (c1 * matrix.b) + (this.d * matrix.d);\n\t\t}\n\t\tthis.tx = (tx1 * matrix.a) + (this.ty * matrix.c) + matrix.tx;\n\t\tthis.ty = (tx1 * matrix.b) + (this.ty * matrix.d) + matrix.ty;\n\t}\n\n\t/**\n\t * Copies the other matrix's properties into this matrix\n\t */\n\tcopyFrom(matrix: Matrix): void {\n\t\tthis.a = matrix.a;\n\t\tthis.b = matrix.b;\n\t\tthis.c = matrix.c;\n\t\tthis.d = matrix.d;\n\t\tthis.tx = matrix.tx;\n\t\tthis.ty = matrix.ty;\n\t}\n}\n\n", "var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar TAU = Math.PI * 2;\n\nvar mapToEllipse = function mapToEllipse(_ref, rx, ry, cosphi, sinphi, centerx, centery) {\n  var x = _ref.x,\n      y = _ref.y;\n\n  x *= rx;\n  y *= ry;\n\n  var xp = cosphi * x - sinphi * y;\n  var yp = sinphi * x + cosphi * y;\n\n  return {\n    x: xp + centerx,\n    y: yp + centery\n  };\n};\n\nvar approxUnitArc = function approxUnitArc(ang1, ang2) {\n  // If 90 degree circular arc, use a constant\n  // as derived from http://spencermortensen.com/articles/bezier-circle\n  var a = ang2 === 1.5707963267948966 ? 0.551915024494 : ang2 === -1.5707963267948966 ? -0.551915024494 : 4 / 3 * Math.tan(ang2 / 4);\n\n  var x1 = Math.cos(ang1);\n  var y1 = Math.sin(ang1);\n  var x2 = Math.cos(ang1 + ang2);\n  var y2 = Math.sin(ang1 + ang2);\n\n  return [{\n    x: x1 - y1 * a,\n    y: y1 + x1 * a\n  }, {\n    x: x2 + y2 * a,\n    y: y2 - x2 * a\n  }, {\n    x: x2,\n    y: y2\n  }];\n};\n\nvar vectorAngle = function vectorAngle(ux, uy, vx, vy) {\n  var sign = ux * vy - uy * vx < 0 ? -1 : 1;\n\n  var dot = ux * vx + uy * vy;\n\n  if (dot > 1) {\n    dot = 1;\n  }\n\n  if (dot < -1) {\n    dot = -1;\n  }\n\n  return sign * Math.acos(dot);\n};\n\nvar getArcCenter = function getArcCenter(px, py, cx, cy, rx, ry, largeArcFlag, sweepFlag, sinphi, cosphi, pxp, pyp) {\n  var rxsq = Math.pow(rx, 2);\n  var rysq = Math.pow(ry, 2);\n  var pxpsq = Math.pow(pxp, 2);\n  var pypsq = Math.pow(pyp, 2);\n\n  var radicant = rxsq * rysq - rxsq * pypsq - rysq * pxpsq;\n\n  if (radicant < 0) {\n    radicant = 0;\n  }\n\n  radicant /= rxsq * pypsq + rysq * pxpsq;\n  radicant = Math.sqrt(radicant) * (largeArcFlag === sweepFlag ? -1 : 1);\n\n  var centerxp = radicant * rx / ry * pyp;\n  var centeryp = radicant * -ry / rx * pxp;\n\n  var centerx = cosphi * centerxp - sinphi * centeryp + (px + cx) / 2;\n  var centery = sinphi * centerxp + cosphi * centeryp + (py + cy) / 2;\n\n  var vx1 = (pxp - centerxp) / rx;\n  var vy1 = (pyp - centeryp) / ry;\n  var vx2 = (-pxp - centerxp) / rx;\n  var vy2 = (-pyp - centeryp) / ry;\n\n  var ang1 = vectorAngle(1, 0, vx1, vy1);\n  var ang2 = vectorAngle(vx1, vy1, vx2, vy2);\n\n  if (sweepFlag === 0 && ang2 > 0) {\n    ang2 -= TAU;\n  }\n\n  if (sweepFlag === 1 && ang2 < 0) {\n    ang2 += TAU;\n  }\n\n  return [centerx, centery, ang1, ang2];\n};\n\nvar arcToBezier = function arcToBezier(_ref2) {\n  var px = _ref2.px,\n      py = _ref2.py,\n      cx = _ref2.cx,\n      cy = _ref2.cy,\n      rx = _ref2.rx,\n      ry = _ref2.ry,\n      _ref2$xAxisRotation = _ref2.xAxisRotation,\n      xAxisRotation = _ref2$xAxisRotation === undefined ? 0 : _ref2$xAxisRotation,\n      _ref2$largeArcFlag = _ref2.largeArcFlag,\n      largeArcFlag = _ref2$largeArcFlag === undefined ? 0 : _ref2$largeArcFlag,\n      _ref2$sweepFlag = _ref2.sweepFlag,\n      sweepFlag = _ref2$sweepFlag === undefined ? 0 : _ref2$sweepFlag;\n\n  var curves = [];\n\n  if (rx === 0 || ry === 0) {\n    return [];\n  }\n\n  var sinphi = Math.sin(xAxisRotation * TAU / 360);\n  var cosphi = Math.cos(xAxisRotation * TAU / 360);\n\n  var pxp = cosphi * (px - cx) / 2 + sinphi * (py - cy) / 2;\n  var pyp = -sinphi * (px - cx) / 2 + cosphi * (py - cy) / 2;\n\n  if (pxp === 0 && pyp === 0) {\n    return [];\n  }\n\n  rx = Math.abs(rx);\n  ry = Math.abs(ry);\n\n  var lambda = Math.pow(pxp, 2) / Math.pow(rx, 2) + Math.pow(pyp, 2) / Math.pow(ry, 2);\n\n  if (lambda > 1) {\n    rx *= Math.sqrt(lambda);\n    ry *= Math.sqrt(lambda);\n  }\n\n  var _getArcCenter = getArcCenter(px, py, cx, cy, rx, ry, largeArcFlag, sweepFlag, sinphi, cosphi, pxp, pyp),\n      _getArcCenter2 = _slicedToArray(_getArcCenter, 4),\n      centerx = _getArcCenter2[0],\n      centery = _getArcCenter2[1],\n      ang1 = _getArcCenter2[2],\n      ang2 = _getArcCenter2[3];\n\n  // If 'ang2' == 90.0000000001, then `ratio` will evaluate to\n  // 1.0000000001. This causes `segments` to be greater than one, which is an\n  // unecessary split, and adds extra points to the bezier curve. To alleviate\n  // this issue, we round to 1.0 when the ratio is close to 1.0.\n\n\n  var ratio = Math.abs(ang2) / (TAU / 4);\n  if (Math.abs(1.0 - ratio) < 0.0000001) {\n    ratio = 1.0;\n  }\n\n  var segments = Math.max(Math.ceil(ratio), 1);\n\n  ang2 /= segments;\n\n  for (var i = 0; i < segments; i++) {\n    curves.push(approxUnitArc(ang1, ang2));\n    ang1 += ang2;\n  }\n\n  return curves.map(function (curve) {\n    var _mapToEllipse = mapToEllipse(curve[0], rx, ry, cosphi, sinphi, centerx, centery),\n        x1 = _mapToEllipse.x,\n        y1 = _mapToEllipse.y;\n\n    var _mapToEllipse2 = mapToEllipse(curve[1], rx, ry, cosphi, sinphi, centerx, centery),\n        x2 = _mapToEllipse2.x,\n        y2 = _mapToEllipse2.y;\n\n    var _mapToEllipse3 = mapToEllipse(curve[2], rx, ry, cosphi, sinphi, centerx, centery),\n        x = _mapToEllipse3.x,\n        y = _mapToEllipse3.y;\n\n    return { x1: x1, y1: y1, x2: x2, y2: y2, x: x, y: y };\n  });\n};\n\nexport default arcToBezier;", "/** @ignore *//** */\n\nimport {\n\tIRenderer, IContainer, IDisplayObject, IGraphics, IRendererEvents,\n\tIText, ITextStyle, IRadialText, IPicture, IRendererEvent, ILayer, ICanvasOptions, BlendMode, IPointerEvent, Id\n} from \"./Renderer\";\nimport type { IBounds } from \"../../util/IBounds\";\nimport type { IPoint } from \"../../util/IPoint\";\nimport { Color } from \"../../util/Color\";\nimport { Matrix } from \"../../util/Matrix\";\nimport { Percent, percent } from \"../../util/Percent\";\n//import { Throttler } from \"../../util/Throttler\";\nimport { ArrayDisposer, Disposer, DisposerClass, IDisposer, CounterDisposer, MultiDisposer } from \"../../util/Disposer\";\nimport { TextFormatter, ITextChunk } from \"../../util/TextFormatter\";\nimport * as $utils from \"../../util/Utils\";\nimport * as $array from \"../../util/Array\";\nimport * as $object from \"../../util/Object\";\nimport * as $type from \"../../util/Type\";\nimport * as $math from \"../../util/Math\";\nimport arcToBezier from 'svg-arc-to-cubic-bezier';\n\n\n/**\n * @ignore\n */\nfunction checkArgs(name: string, actual: number, expected: number) {\n\tif (actual !== expected) {\n\t\tthrow new Error(\"Required \" + expected + \" arguments for \" + name + \" but got \" + actual);\n\t}\n}\n\n/**\n * @ignore\n */\nfunction checkMinArgs(name: string, actual: number, expected: number) {\n\tif (actual < expected) {\n\t\tthrow new Error(\"Required at least \" + expected + \" arguments for \" + name + \" but got \" + actual);\n\t}\n}\n\n/**\n * @ignore\n */\nfunction checkEvenArgs(name: string, actual: number, expected: number) {\n\tcheckMinArgs(name, actual, expected);\n\n\tif ((actual % expected) !== 0) {\n\t\tthrow new Error(\"Arguments for \" + name + \" must be in pairs of \" + expected);\n\t}\n}\n\n/**\n * @ignore\n */\nfunction assertBinary(value: number): 0 | 1 {\n\tif (value === 0 || value === 1) {\n\t\treturn value;\n\n\t} else {\n\t\tthrow new Error(\"Flag must be 0 or 1\");\n\t}\n}\n\n//  1 -> 0xffffff * (2 / 2)\n//  2 -> 0xffffff * (1 / 2)\n//\n//  3 -> 0xffffff * (3 / 4)\n//  4 -> 0xffffff * (1 / 4)\n//\n//  5 -> 0xffffff * (7 / 8)\n//  6 -> 0xffffff * (5 / 8)\n//  7 -> 0xffffff * (3 / 8)\n//  8 -> 0xffffff * (1 / 8)\n//\n//  9 -> 0xffffff * (15 / 16)\n// 10 -> 0xffffff * (13 / 16)\n// 11 -> 0xffffff * (11 / 16)\n// 12 -> 0xffffff *  (9 / 16)\n// 13 -> 0xffffff *  (7 / 16)\n// 14 -> 0xffffff *  (5 / 16)\n// 15 -> 0xffffff *  (3 / 16)\n// 16 -> 0xffffff *  (1 / 16)\n// @todo remove this old color distribution algo if the new one pans out\n// function distributeIdBAK(id: number): number {\n// \tif (id === 1) {\n// \t\treturn 0x000001;\n\n// \t} else {\n// \t\t// Finds the closest power of 2\n// \t\tconst base = Math.pow(2, Math.ceil(Math.log(id) / Math.log(2)));\n\n// \t\t// Translates the id into an odd fraction index\n// \t\tconst index = ((base - id) * 2) + 1;\n\n// \t\t// TODO is Math.round correct ?\n// \t\treturn Math.round(0xffffff * (index / base));\n// \t}\n// }\n\n/**\n * Function by smeans:\n * https://lowcode.life/generating-unique-contrasting-colors-in-javascript/\n * @ignore\n */\nfunction distributeId(id: number): number {\n\tconst rgb = [0, 0, 0];\n\tfor (let i = 0; i < 24; i++) {\n\t\trgb[i % 3] <<= 1;\n\t\trgb[i % 3] |= id & 0x01;\n\t\tid >>= 1;\n\t}\n\treturn (rgb[2] | 0) + (rgb[1] << 8) + (rgb[0] << 16);\n}\n\n/**\n * @ignore\n */\nfunction eachTargets(hitTarget: CanvasDisplayObject, f: (target: CanvasDisplayObject) => boolean): void {\n\tfor (; ;) {\n\t\tif (hitTarget.interactive) {\n\t\t\tif (!f(hitTarget)) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (hitTarget._parent) {\n\t\t\thitTarget = hitTarget._parent;\n\n\t\t} else {\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\n// TODO feature detection for mouse/touch/pointer\n/**\n * @ignore\n */\nfunction onPointerEvent(element: EventTarget, name: string, f: (event: Array<IPointerEvent>) => void): IDisposer {\n\treturn $utils.addEventListener(element, $utils.getRendererEvent(name), (event: MouseEvent | TouchEvent) => {\n\t\tlet touches = (<any>event).touches;\n\t\tif (touches) {\n\t\t\tif (touches.length == 0) {\n\t\t\t\ttouches = (<any>event).changedTouches;\n\t\t\t}\n\n\t\t\tf($array.copy(<TouchList>touches));\n\n\t\t} else {\n\t\t\tf([<MouseEvent>event]);\n\t\t}\n\t});\n}\n\n/**\n * @ignore\n */\nfunction isTainted(image: HTMLImageElement): boolean {\n\tconst canvas = document.createElement(\"canvas\");\n\tcanvas.width = 1;\n\tcanvas.height = 1;\n\tconst context = canvas.getContext(\"2d\")!;\n\tcontext.drawImage(image, 0, 0, 1, 1);\n\n\ttry {\n\t\tcontext.getImageData(0, 0, 1, 1);\n\t\treturn false;\n\t}\n\tcatch (err) {\n\t\tconsole.warn(\"Image \\\"\" + image.src + \"\\\" is loaded from different host and is not covered by CORS policy. For more information about the implications read here: https://www.amcharts.com/docs/v5/concepts/cors\");\n\t\treturn true;\n\t}\n}\n\n/**\n * This is needed to workaround a bug in iOS which causes it to not GC canvas elements.\n *\n * @ignore\n */\nfunction clearCanvas(view: HTMLCanvasElement) {\n\tview.width = 0;\n\tview.height = 0;\n\tview.style.width = \"0px\";\n\tview.style.height = \"0px\";\n}\n\n/**\n * @ignore\n */\nexport class CanvasPivot implements IPoint {\n\tprotected _x: number = 0;\n\tprotected _y: number = 0;\n\n\tget x(): number {\n\t\treturn this._x;\n\t}\n\n\tget y(): number {\n\t\treturn this._y;\n\t}\n\n\tset x(value: number) {\n\t\tthis._x = value;\n\t}\n\n\tset y(value: number) {\n\t\tthis._y = value;\n\t}\n}\n\n/**\n * @ignore\n */\nexport class CanvasDisplayObject extends DisposerClass implements IDisplayObject, IDisposer {\n\tpublic _layer?: CanvasLayer;\n\n\tpublic mask: CanvasGraphics | null = null;\n\tpublic visible: boolean = true;\n\tpublic exportable?: boolean = true;\n\tpublic interactive: boolean = false;\n\tpublic inactive: boolean = false;\n\tpublic wheelable: boolean = false;\n\tpublic cancelTouch: boolean = false;\n\tpublic isMeasured: boolean = false;\n\tpublic buttonMode: boolean = false;\n\tpublic alpha: number = 1;\n\tpublic compoundAlpha: number = 1;\n\tpublic angle: number = 0;\n\tpublic scale: number = 1;\n\tpublic x: number = 0;\n\tpublic y: number = 0;\n\tpublic pivot: CanvasPivot = new CanvasPivot();\n\n\tpublic filter?: string;\n\n\tpublic cursorOverStyle?: string;\n\tpublic _replacedCursorStyle?: string;\n\n\tpublic _localMatrix: Matrix = new Matrix();\n\tpublic _matrix: Matrix = new Matrix();\n\t// TODO can this be replaced with _localMatrix ?\n\tprotected _uMatrix: Matrix = new Matrix();\n\n\tprotected _renderer: CanvasRenderer;\n\tpublic _parent: CanvasContainer | undefined;\n\n\tprotected _localBounds: IBounds | undefined;\n\tprotected _bounds: IBounds | undefined;\n\tpublic _colorId: string | undefined;\n\n\tconstructor(renderer: CanvasRenderer) {\n\t\tsuper();\n\t\tthis._renderer = renderer;\n\t}\n\n\tprotected _dispose(): void {\n\t\tthis._renderer._removeObject(this);\n\t}\n\n\tpublic getCanvas(): HTMLCanvasElement {\n\t\treturn this.getLayer().view;\n\t}\n\n\tpublic getLayer(): CanvasLayer {\n\t\tlet self: CanvasDisplayObject = this;\n\n\t\tfor (; ;) {\n\t\t\tif (self._layer) {\n\t\t\t\treturn self._layer;\n\n\t\t\t} else if (self._parent) {\n\t\t\t\tself = self._parent;\n\n\t\t\t} else {\n\t\t\t\treturn this._renderer.defaultLayer;\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic setLayer(order: number | undefined, visible: boolean = true): void {\n\t\tif (order == null) {\n\t\t\tthis._layer = undefined;\n\n\t\t} else {\n\t\t\tthis._layer = this._renderer.getLayer(order, visible);\n\t\t\tthis._layer.visible = visible;\n\t\t\tif (this._parent) {\n\t\t\t\tthis._parent.registerChildLayer(this._layer);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic markDirtyLayer(): void {\n\t\tthis.getLayer().dirty = true;\n\t}\n\n\tpublic clear(): void {\n\t\tthis.invalidateBounds();\n\t}\n\n\tpublic invalidateBounds(): void {\n\t\tthis._localBounds = undefined;\n\t}\n\n\tpublic _addBounds(_bounds: IBounds): void { }\n\n\tprotected _getColorId(): string {\n\t\tif (this._colorId === undefined) {\n\t\t\tthis._colorId = this._renderer.paintId(this);\n\t\t}\n\n\t\treturn this._colorId;\n\t}\n\n\tprotected _isInteractive(): boolean {\n\t\treturn this.inactive == false && (this.interactive || this._renderer._forceInteractive > 0);\n\t}\n\n\tprotected _isInteractiveMask(): boolean {\n\t\treturn this._isInteractive();\n\t}\n\n\tpublic contains(child: CanvasDisplayObject): boolean {\n\t\tfor (; ;) {\n\t\t\tif (child === this) {\n\t\t\t\treturn true;\n\n\t\t\t} else if (child._parent) {\n\t\t\t\tchild = child._parent;\n\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\n\ttoGlobal(point: IPoint): IPoint {\n\t\treturn this._matrix.apply(point);\n\t}\n\n\ttoLocal(point: IPoint): IPoint {\n\t\treturn this._matrix.applyInverse(point);\n\t}\n\n\tpublic getLocalMatrix(): Matrix {\n\t\tthis._uMatrix.setTransform(0, 0, this.pivot.x, this.pivot.y, this.angle * Math.PI / 180, this.scale);\n\t\treturn this._uMatrix;\n\t}\n\n\tgetLocalBounds(): IBounds {\n\t\tif (!this._localBounds) {\n\n\t\t\tconst bn = 10000000;\n\t\t\tthis._localBounds = {\n\t\t\t\tleft: bn,\n\t\t\t\ttop: bn,\n\t\t\t\tright: -bn,\n\t\t\t\tbottom: -bn\n\t\t\t};\n\n\t\t\tthis._addBounds(this._localBounds);\n\t\t}\n\t\treturn this._localBounds;\n\t}\n\n\tgetAdjustedBounds(bounds: IBounds): IBounds {\n\t\tthis._setMatrix();\n\n\t\tconst matrix = this.getLocalMatrix();\n\n\t\tconst p0 = matrix.apply({ x: bounds.left, y: bounds.top });\n\t\tconst p1 = matrix.apply({ x: bounds.right, y: bounds.top });\n\t\tconst p2 = matrix.apply({ x: bounds.right, y: bounds.bottom });\n\t\tconst p3 = matrix.apply({ x: bounds.left, y: bounds.bottom });\n\n\t\treturn {\n\t\t\tleft: Math.min(p0.x, p1.x, p2.x, p3.x),\n\t\t\ttop: Math.min(p0.y, p1.y, p2.y, p3.y),\n\t\t\tright: Math.max(p0.x, p1.x, p2.x, p3.x),\n\t\t\tbottom: Math.max(p0.y, p1.y, p2.y, p3.y)\n\t\t}\n\t}\n\n\ton<C, Key extends keyof IRendererEvents>(key: Key, callback: (this: C, event: IRendererEvents[Key]) => void, context?: C): IDisposer {\n\t\tif (this.interactive) {\n\t\t\treturn this._renderer._addEvent(this, key, callback, context);\n\n\t\t} else {\n\t\t\treturn new Disposer(() => { });\n\t\t}\n\t}\n\n\tpublic _setMatrix(): void {\n\t\t// TODO only calculate this if it has actually changed\n\t\tthis._localMatrix.setTransform(\n\t\t\tthis.x,\n\t\t\tthis.y,\n\t\t\tthis.pivot.x,\n\t\t\tthis.pivot.y,\n\t\t\t// Converts degrees to radians\n\t\t\tthis.angle * Math.PI / 180,\n\t\t\tthis.scale\n\t\t);\n\n\t\tthis._matrix.copyFrom(this._localMatrix);\n\n\t\tif (this._parent) {\n\t\t\t// TODO only calculate this if it has actually changed\n\t\t\tthis._matrix.prepend(this._parent._matrix);\n\t\t}\n\t}\n\n\tpublic _transform(context: CanvasRenderingContext2D, resolution: number): void {\n\t\tconst m = this._matrix;\n\t\tcontext.setTransform(\n\t\t\tm.a * resolution,\n\t\t\tm.b * resolution,\n\t\t\tm.c * resolution,\n\t\t\tm.d * resolution,\n\t\t\tm.tx * resolution,\n\t\t\tm.ty * resolution\n\t\t);\n\t}\n\n\tpublic render(parentLayer: CanvasLayer): void {\n\t\tif (this.visible && (this.exportable !== false || !this._renderer._omitTainted)) {\n\t\t\tthis._setMatrix();\n\n\t\t\tconst resolution = this._renderer.resolution;\n\n\t\t\tconst layers = this._renderer.layers;\n\t\t\tconst ghostContext = this._renderer._ghostContext;\n\n\t\t\tconst mask = this.mask;\n\t\t\tif (mask) {\n\t\t\t\tmask._setMatrix();\n\t\t\t}\n\n\t\t\t// TODO improve this\n\t\t\t$array.each(layers, (layer) => {\n\t\t\t\tif (layer) {\n\t\t\t\t\tconst context = layer.context;\n\t\t\t\t\tcontext.save();\n\n\t\t\t\t\t// We must apply the mask before we transform the element\n\t\t\t\t\tif (mask) {\n\t\t\t\t\t\tmask._transform(context, layer.scale || resolution);\n\t\t\t\t\t\tmask._runPath(context);\n\t\t\t\t\t\tcontext.clip();\n\t\t\t\t\t}\n\n\t\t\t\t\tcontext.globalAlpha = this.compoundAlpha * this.alpha;\n\n\t\t\t\t\tthis._transform(context, layer.scale || resolution);\n\n\t\t\t\t\tif (this.filter) {\n\t\t\t\t\t\tcontext.filter = this.filter;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tghostContext.save();\n\n\t\t\t// We must apply the mask before we transform the element\n\t\t\tif (mask && this._isInteractiveMask()) {\n\t\t\t\tmask._transform(ghostContext, resolution);\n\t\t\t\tmask._runPath(ghostContext);\n\t\t\t\tghostContext.clip();\n\t\t\t}\n\n\t\t\tthis._transform(ghostContext, resolution);\n\n\t\t\tthis._render(parentLayer);\n\n\t\t\tghostContext.restore();\n\n\t\t\t$array.each(layers, (layer) => {\n\t\t\t\tif (layer) {\n\t\t\t\t\tlayer.context.restore();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tprotected _render(parentLayer: CanvasLayer): void {\n\t\tif (this.exportable === false) {\n\t\t\tconst layer = this._layer || parentLayer;\n\t\t\tlayer.tainted = true;\n\t\t}\n\t}\n\n\thovering(): boolean {\n\t\treturn this._renderer._hovering.has(this);\n\t}\n\n\tdragging(): boolean {\n\t\treturn this._renderer._dragging.some((x) => x.value === this);\n\t}\n\n\tpublic dispose() {\n\t\tthis.getLayer().dirty = true;\n\t}\n\n\tpublic shouldCancelTouch(): boolean {\n\t\tconst renderer = this._renderer;\n\t\tif (renderer.tapToActivate && !renderer._touchActive) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this.cancelTouch) {\n\t\t\treturn true;\n\t\t}\n\t\telse if (this._parent) {\n\t\t\treturn this._parent.shouldCancelTouch();\n\t\t}\n\t\treturn false;\n\t}\n\n}\n\n/**\n * @ignore\n */\nexport class CanvasContainer extends CanvasDisplayObject implements IContainer {\n\tpublic interactiveChildren: boolean = true;\n\tprivate _childLayers?: CanvasLayer[];\n\n\tprotected _children: Array<CanvasDisplayObject> = [];\n\n\tprotected _isInteractiveMask(): boolean {\n\t\treturn this.interactiveChildren || super._isInteractiveMask();\n\t}\n\n\taddChild(child: CanvasDisplayObject): void {\n\t\tchild._parent = this;\n\t\tthis._children.push(child);\n\t\tif (child._layer) {\n\t\t\tthis.registerChildLayer(child._layer);\n\t\t}\n\t}\n\n\taddChildAt(child: CanvasDisplayObject, index: number): void {\n\t\tchild._parent = this;\n\t\tthis._children.splice(index, 0, child);\n\t\tif (child._layer) {\n\t\t\tthis.registerChildLayer(child._layer);\n\t\t}\n\t}\n\n\tremoveChild(child: CanvasDisplayObject): void {\n\t\tchild._parent = undefined;\n\t\t$array.removeFirst(this._children, child);\n\t}\n\n\tprotected _render(parentLayer: CanvasLayer): void {\n\t\tsuper._render(parentLayer);\n\n\t\tconst renderer = this._renderer;\n\n\t\tif (this.interactive && this.interactiveChildren) {\n\t\t\t++renderer._forceInteractive;\n\t\t}\n\n\t\tconst layer = this._layer || parentLayer;\n\n\t\t$array.each(this._children, (child) => {\n\t\t\tchild.compoundAlpha = this.compoundAlpha * this.alpha;\n\t\t\tchild.render(layer);\n\t\t});\n\n\t\tif (this.interactive && this.interactiveChildren) {\n\t\t\t--renderer._forceInteractive;\n\t\t}\n\t}\n\n\tregisterChildLayer(layer: CanvasLayer): void {\n\t\tif (!this._childLayers) {\n\t\t\tthis._childLayers = [];\n\t\t}\n\t\t$array.pushOne(this._childLayers, layer);\n\t\tif (this._parent) {\n\t\t\tthis._parent.registerChildLayer(layer);\n\t\t}\n\t}\n\n\tpublic markDirtyLayer(deep: boolean = false): void {\n\t\tsuper.markDirtyLayer();\n\t\tif (deep && this._childLayers) {\n\t\t\t$array.each(this._childLayers, (layer) => layer.dirty = true);\n\t\t}\n\t}\n\n\tpublic dispose() {\n\t\tsuper.dispose();\n\t\tif (this._childLayers) {\n\t\t\t$array.each(this._childLayers, (layer) => {\n\t\t\t\tlayer.dirty = true;\n\t\t\t});\n\t\t}\n\t}\n}\n\n/**\n * @ignore\n */\nfunction setPoint(bounds: IBounds, point: IPoint): void {\n\tbounds.left = Math.min(bounds.left, point.x);\n\tbounds.top = Math.min(bounds.top, point.y);\n\tbounds.right = Math.max(bounds.right, point.x);\n\tbounds.bottom = Math.max(bounds.bottom, point.y);\n}\n\n/**\n * @ignore\n */\nabstract class Op {\n\tpublic colorize(_context: CanvasRenderingContext2D, _forceColor: string | undefined): void { }\n\n\tpublic path(_context: CanvasRenderingContext2D): void { }\n\n\tpublic addBounds(_bounds: IBounds): void { }\n}\n\n/**\n * @ignore\n */\nclass BeginFill extends Op {\n\tconstructor(public color: string | CanvasGradient | CanvasPattern) { super(); }\n\n\tpublic colorize(context: CanvasRenderingContext2D, forceColor: string | undefined): void {\n\t\tif (forceColor !== undefined) {\n\t\t\tcontext.fillStyle = forceColor;\n\n\t\t} else {\n\t\t\tcontext.fillStyle = this.color;\n\t\t}\n\t}\n}\n\n/**\n * @ignore\n */\nclass EndFill extends Op {\n\tconstructor(public clearShadow: boolean) { super(); }\n\tpublic colorize(context: CanvasRenderingContext2D, _forceColor: string | undefined): void {\n\t\tcontext.fill();\n\t\tif (this.clearShadow) {\n\t\t\tcontext.shadowColor = \"\";\n\t\t\tcontext.shadowBlur = 0;\n\t\t\tcontext.shadowOffsetX = 0;\n\t\t\tcontext.shadowOffsetY = 0;\n\t\t}\n\t}\n}\n\n/**\n * @ignore\n */\nclass EndStroke extends Op {\n\tpublic colorize(context: CanvasRenderingContext2D, _forceColor: string | undefined): void {\n\t\tcontext.stroke();\n\t}\n}\n\n/**\n * @ignore\n */\nclass LineStyle extends Op {\n\tconstructor(public width: number, public color: string | CanvasGradient | CanvasPattern, public lineJoin?: \"miter\" | \"round\" | \"bevel\") { super(); }\n\n\tpublic colorize(context: CanvasRenderingContext2D, forceColor: string | undefined): void {\n\t\tif (forceColor !== undefined) {\n\t\t\tcontext.strokeStyle = forceColor;\n\n\t\t} else {\n\t\t\tcontext.strokeStyle = this.color;\n\t\t}\n\n\t\tcontext.lineWidth = this.width;\n\t\tif(this.lineJoin){\n\t\t\tcontext.lineJoin = this.lineJoin;\n\t\t}\n\t}\n}\n\n/**\n * @ignore\n */\nclass LineDash extends Op {\n\tconstructor(public dash: number[]) { super(); }\n\n\tpublic colorize(context: CanvasRenderingContext2D, _forceColor: string | undefined): void {\n\t\tcontext.setLineDash(this.dash);\n\t}\n}\n\n/**\n * @ignore\n */\nclass LineDashOffset extends Op {\n\tconstructor(public dashOffset: number) { super(); }\n\n\tpublic colorize(context: CanvasRenderingContext2D, _forceColor: string | undefined): void {\n\t\tcontext.lineDashOffset = this.dashOffset;\n\t}\n}\n\n/**\n * @ignore\n */\nclass DrawRect extends Op {\n\tconstructor(public x: number, public y: number, public width: number, public height: number) { super(); }\n\n\tpublic path(context: CanvasRenderingContext2D): void {\n\t\tcontext.rect(this.x, this.y, this.width, this.height);\n\t}\n\n\tpublic addBounds(bounds: IBounds): void {\n\t\tconst l = this.x;\n\t\tconst t = this.y;\n\t\tconst r = l + this.width;\n\t\tconst b = t + this.height;\n\n\t\tsetPoint(bounds, { x: l, y: t });\n\t\tsetPoint(bounds, { x: r, y: t });\n\t\tsetPoint(bounds, { x: l, y: b });\n\t\tsetPoint(bounds, { x: r, y: b });\n\t}\n}\n\n/**\n * @ignore\n */\nclass DrawCircle extends Op {\n\tconstructor(public x: number, public y: number, public radius: number) { super(); }\n\n\tpublic path(context: CanvasRenderingContext2D): void {\n\t\tcontext.moveTo(this.x + this.radius, this.y);\n\t\tcontext.arc(this.x, this.y, this.radius, 0, 2 * Math.PI);\n\t}\n\n\t// TODO handle skewing and rotation\n\tpublic addBounds(bounds: IBounds): void {\n\t\tsetPoint(bounds, { x: this.x - this.radius, y: this.y - this.radius });\n\t\tsetPoint(bounds, { x: this.x + this.radius, y: this.y + this.radius });\n\t}\n}\n\n/**\n * @ignore\n */\nclass DrawEllipse extends Op {\n\tconstructor(public x: number, public y: number, public radiusX: number, public radiusY: number) { super(); }\n\n\tpublic path(context: CanvasRenderingContext2D): void {\n\t\tcontext.ellipse(0, 0, this.radiusX, this.radiusY, 0, 0, Math.PI * 2);\n\t}\n\n\t// TODO handle skewing and rotation\n\tpublic addBounds(bounds: IBounds): void {\n\t\tsetPoint(bounds, { x: this.x - this.radiusX, y: this.y - this.radiusY });\n\t\tsetPoint(bounds, { x: this.x + this.radiusX, y: this.y + this.radiusY });\n\t}\n}\n\n/**\n * @ignore\n */\nclass Arc extends Op {\n\tconstructor(\n\t\tpublic cx: number,\n\t\tpublic cy: number,\n\t\tpublic radius: number,\n\t\tpublic startAngle: number,\n\t\tpublic endAngle: number,\n\t\tpublic anticlockwise: boolean,\n\t) { super(); }\n\n\tpublic path(context: CanvasRenderingContext2D): void {\n\t\tif (this.radius > 0) {\n\t\t\tcontext.arc(this.cx, this.cy, this.radius, this.startAngle, this.endAngle, this.anticlockwise);\n\t\t}\n\t}\n\n\tpublic addBounds(bounds: IBounds): void {\n\t\tlet arcBounds = $math.getArcBounds(this.cx, this.cy, this.startAngle * $math.DEGREES, this.endAngle * $math.DEGREES, this.radius);\n\t\tsetPoint(bounds, { x: arcBounds.left, y: arcBounds.top });\n\t\tsetPoint(bounds, { x: arcBounds.right, y: arcBounds.bottom });\n\t}\n}\n\n/**\n * @ignore\n */\nclass ArcTo extends Op {\n\tconstructor(\n\t\tpublic x1: number,\n\t\tpublic y1: number,\n\t\tpublic x2: number,\n\t\tpublic y2: number,\n\t\tpublic radius: number,\n\t) { super(); }\n\n\tpublic path(context: CanvasRenderingContext2D): void {\n\t\tif (this.radius > 0) {\n\t\t\tcontext.arcTo(this.x1, this.y1, this.x2, this.y2, this.radius);\n\t\t}\n\t}\n\n\t// TODO: add points\n\tpublic addBounds(_bounds: IBounds): void {\n\t\t/*\n\t\t// not finished\n\t\thttps://math.stackexchange.com/questions/1781438/finding-the-center-of-a-circle-given-two-points-and-a-radius-algebraically\n\n\t\tif (prevPoint) {\n\t\t\tlet x1 = prevPoint.x;\n\t\t\tlet y1 = prevPoint.y;\n\t\t\tlet x2 = this.x2;\n\t\t\tlet y2 = this.y2;\n\t\t\tlet r = this.radius;\n\n\t\t\tlet xa = (x2 - x1) / 2;\n\t\t\tlet ya = (y2 - y1) / 2;\n\n\t\t\tlet x0 = x1 + xa;\n\t\t\tlet y0 = y1 + ya;\n\n\t\t\tlet a = Math.hypot(xa, ya);\n\t\t\tlet b = Math.sqrt(r * r - a * a);\n\n\t\t\tlet cx = x0 + b * ya / a;\n\t\t\tlet cy = y0 - b * xa / a;\n\n\t\t\tconsole.log(cx, cy);\n\t\t}*/\n\t}\n}\n\n/**\n * @ignore\n */\nclass LineTo extends Op {\n\tconstructor(public x: number, public y: number) { super(); }\n\n\tpublic path(context: CanvasRenderingContext2D): void {\n\t\tcontext.lineTo(this.x, this.y);\n\t}\n\n\tpublic addBounds(bounds: IBounds): void {\n\t\tsetPoint(bounds, { x: this.x, y: this.y });\n\t}\n}\n\n/**\n * @ignore\n */\nclass MoveTo extends Op {\n\tconstructor(public x: number, public y: number) { super(); }\n\n\tpublic path(context: CanvasRenderingContext2D): void {\n\t\tcontext.moveTo(this.x, this.y);\n\t}\n\n\tpublic addBounds(bounds: IBounds): void {\n\t\tsetPoint(bounds, { x: this.x, y: this.y });\n\t}\n}\n\n/**\n * @ignore\n */\nclass ClosePath extends Op {\n\tpublic path(context: CanvasRenderingContext2D): void {\n\t\tcontext.closePath();\n\t}\n}\n\n/**\n * @ignore\n */\nclass BezierCurveTo extends Op {\n\tconstructor(\n\t\tpublic cpX: number,\n\t\tpublic cpY: number,\n\t\tpublic cpX2: number,\n\t\tpublic cpY2: number,\n\t\tpublic toX: number,\n\t\tpublic toY: number,\n\t) { super(); }\n\n\tpublic path(context: CanvasRenderingContext2D): void {\n\t\tcontext.bezierCurveTo(this.cpX, this.cpY, this.cpX2, this.cpY2, this.toX, this.toY);\n\t}\n\n\t// TODO: OK?\n\tpublic addBounds(bounds: IBounds): void {\n\t\tsetPoint(bounds, { x: this.cpX, y: this.cpY });\n\t\tsetPoint(bounds, { x: this.cpX2, y: this.cpY2 });\n\t\tsetPoint(bounds, { x: this.toX, y: this.toY });\n\t}\n}\n\n/**\n * @ignore\n */\nclass QuadraticCurveTo extends Op {\n\tconstructor(\n\t\tpublic cpX: number,\n\t\tpublic cpY: number,\n\t\tpublic toX: number,\n\t\tpublic toY: number,\n\t) { super(); }\n\n\tpublic path(context: CanvasRenderingContext2D): void {\n\t\tcontext.quadraticCurveTo(this.cpX, this.cpY, this.toX, this.toY);\n\t}\n\n\t// TODO: OK?\n\tpublic addBounds(bounds: IBounds): void {\n\t\tsetPoint(bounds, { x: this.cpX, y: this.cpY });\n\t\tsetPoint(bounds, { x: this.toX, y: this.toY });\n\t}\n}\n\n/**\n * @ignore\n */\nclass Shadow extends Op {\n\tconstructor(\n\t\tpublic color: string,\n\t\tpublic blur: number,\n\t\tpublic offsetX: number,\n\t\tpublic offsetY: number,\n\t\tpublic opacity?: number\n\t) { super(); }\n\n\tpublic colorize(context: CanvasRenderingContext2D, _forceColor: string | undefined): void {\n\t\tif (this.opacity) {\n\t\t\tcontext.fillStyle = this.color;\n\t\t}\n\t\tcontext.shadowColor = this.color;\n\t\tcontext.shadowBlur = this.blur;\n\t\tcontext.shadowOffsetX = this.offsetX;\n\t\tcontext.shadowOffsetY = this.offsetY;\n\t}\n}\n\n\n/**\n * @ignore\n */\nexport class CanvasGraphics extends CanvasDisplayObject implements IGraphics {\n\tprotected _operations: Array<Op> = [];\n\n\tpublic blendMode: BlendMode = BlendMode.NORMAL;\n\n\tprotected _hasShadows: boolean = false;\n\tprotected _fillAlpha?: number;\n\tprotected _strokeAlpha?: number;\n\n\tclear(): void {\n\t\tsuper.clear();\n\t\tthis._operations.length = 0;\n\t}\n\n\tprotected _pushOp(op: Op): void {\n\t\tthis._operations.push(op);\n\t}\n\n\tbeginFill(color?: Color | CanvasGradient | CanvasPattern, alpha: number = 1): void {\n\t\tthis._fillAlpha = alpha;\n\t\tif (color) {\n\t\t\tif (color instanceof Color) {\n\t\t\t\tthis._pushOp(new BeginFill(color.toCSS(alpha)));\n\n\t\t\t} else {\n\t\t\t\tthis.isMeasured = true;\n\t\t\t\tthis._pushOp(new BeginFill(color));\n\t\t\t}\n\t\t} else {\n\t\t\tthis._pushOp(new BeginFill(\"rgba(0, 0, 0, \" + alpha + \")\"));\n\t\t}\n\t}\n\n\tendFill(): void {\n\t\tthis._pushOp(new EndFill(this._hasShadows));\n\t}\n\n\tendStroke(): void {\n\t\tthis._pushOp(new EndStroke());\n\t}\n\n\tlineStyle(width: number = 0, color?: Color | CanvasGradient | CanvasPattern, alpha: number = 1, lineJoin?: \"miter\" | \"round\" | \"bevel\"): void {\n\t\tthis._strokeAlpha = alpha;\n\t\tif (color) {\n\t\t\tif (color instanceof Color) {\n\t\t\t\tthis._pushOp(new LineStyle(width, color.toCSS(alpha), lineJoin));\n\t\t\t} else {\n\t\t\t\tthis._pushOp(new LineStyle(width, color, lineJoin));\n\t\t\t}\n\t\t} else {\n\t\t\tthis._pushOp(new LineStyle(width, \"rgba(0, 0, 0, \" + alpha + \")\", lineJoin));\n\t\t}\n\t}\n\n\tsetLineDash(dash?: number[]): void {\n\t\tthis._pushOp(new LineDash(dash ? dash : []));\n\t}\n\n\tsetLineDashOffset(dashOffset: number = 0): void {\n\t\tthis._pushOp(new LineDashOffset(dashOffset));\n\t}\n\n\tdrawRect(x: number, y: number, width: number, height: number): void {\n\t\tthis._pushOp(new DrawRect(x, y, width, height));\n\t}\n\n\tdrawCircle(x: number, y: number, radius: number): void {\n\t\tthis._pushOp(new DrawCircle(x, y, radius));\n\t}\n\n\tdrawEllipse(x: number, y: number, radiusX: number, radiusY: number): void {\n\t\tthis._pushOp(new DrawEllipse(x, y, radiusX, radiusY));\n\t}\n\n\tarc(cx: number, cy: number, radius: number, startAngle: number, endAngle: number, anticlockwise: boolean = false): void {\n\t\tthis._pushOp(new Arc(cx, cy, radius, startAngle, endAngle, anticlockwise));\n\t}\n\n\tarcTo(x1: number, y1: number, x2: number, y2: number, radius: number): void {\n\t\tthis._pushOp(new ArcTo(x1, y1, x2, y2, radius));\n\t}\n\n\tlineTo(x: number, y: number): void {\n\t\tthis._pushOp(new LineTo(x, y));\n\t}\n\n\tmoveTo(x: number, y: number): void {\n\t\tthis._pushOp(new MoveTo(x, y));\n\t}\n\n\tbezierCurveTo(cpX: number, cpY: number, cpX2: number, cpY2: number, toX: number, toY: number): void {\n\t\tthis._pushOp(new BezierCurveTo(cpX, cpY, cpX2, cpY2, toX, toY));\n\t}\n\n\tquadraticCurveTo(cpX: number, cpY: number, toX: number, toY: number): void {\n\t\tthis._pushOp(new QuadraticCurveTo(cpX, cpY, toX, toY));\n\t}\n\n\tclosePath(): void {\n\t\tthis._pushOp(new ClosePath());\n\t}\n\n\tshadow(color: Color, blur: number = 0, offsetX: number = 0, offsetY: number = 0, opacity?: number): void {\n\t\tthis._hasShadows = true;\n\t\tthis._pushOp(new Shadow(opacity ? color.toCSS(opacity) : color.toCSS(this._fillAlpha || this._strokeAlpha), blur, offsetX, offsetY));\n\t}\n\n\t// https://svgwg.org/svg2-draft/paths.html#DProperty\n\t// TODO better error checking\n\tsvgPath(path: string): void {\n\t\tlet x = 0;\n\t\tlet y = 0;\n\t\tlet cpx: number | null = null;\n\t\tlet cpy: number | null = null;\n\t\tlet qcpx: number | null = null;\n\t\tlet qcpy: number | null = null;\n\n\t\tconst SEGMENTS_REGEXP = /([MmZzLlHhVvCcSsQqTtAa])([^MmZzLlHhVvCcSsQqTtAa]*)/g;\n\t\tconst ARGS_REGEXP = /[\\u0009\\u0020\\u000A\\u000C\\u000D]*([\\+\\-]?[0-9]*\\.?[0-9]+(?:[eE][\\+\\-]?[0-9]+)?)[\\u0009\\u0020\\u000A\\u000C\\u000D]*,?/g;\n\n\t\tlet match;\n\n\t\twhile ((match = SEGMENTS_REGEXP.exec(path)) !== null) {\n\t\t\tconst name = match[1];\n\t\t\tconst rest = match[2];\n\n\t\t\tconst args = [];\n\n\t\t\twhile ((match = ARGS_REGEXP.exec(rest)) !== null) {\n\t\t\t\targs.push(+match[1]);\n\t\t\t}\n\n\t\t\t// Reset control point\n\t\t\tif (name !== \"S\" && name !== \"s\" && name !== \"C\" && name !== \"c\") {\n\t\t\t\tcpx = null;\n\t\t\t\tcpy = null;\n\t\t\t}\n\n\t\t\t// Reset control point\n\t\t\tif (name !== \"Q\" && name !== \"q\" && name !== \"T\" && name !== \"t\") {\n\t\t\t\tqcpx = null;\n\t\t\t\tqcpy = null;\n\t\t\t}\n\n\t\t\tswitch (name) {\n\t\t\t\tcase \"M\":\n\t\t\t\t\tcheckEvenArgs(name, args.length, 2);\n\t\t\t\t\tx = args[0];\n\t\t\t\t\ty = args[1];\n\t\t\t\t\tthis.moveTo(x, y);\n\n\t\t\t\t\tfor (let i = 2; i < args.length; i += 2) {\n\t\t\t\t\t\tx = args[i];\n\t\t\t\t\t\ty = args[i + 1];\n\t\t\t\t\t\tthis.lineTo(x, y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"m\":\n\t\t\t\t\tcheckEvenArgs(name, args.length, 2);\n\t\t\t\t\tx += args[0];\n\t\t\t\t\ty += args[1];\n\t\t\t\t\tthis.moveTo(x, y);\n\n\t\t\t\t\tfor (let i = 2; i < args.length; i += 2) {\n\t\t\t\t\t\tx += args[i];\n\t\t\t\t\t\ty += args[i + 1];\n\t\t\t\t\t\tthis.lineTo(x, y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"L\":\n\t\t\t\t\tcheckEvenArgs(name, args.length, 2);\n\t\t\t\t\tfor (let i = 0; i < args.length; i += 2) {\n\t\t\t\t\t\tx = args[i];\n\t\t\t\t\t\ty = args[i + 1];\n\t\t\t\t\t\tthis.lineTo(x, y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"l\":\n\t\t\t\t\tcheckEvenArgs(name, args.length, 2);\n\t\t\t\t\tfor (let i = 0; i < args.length; i += 2) {\n\t\t\t\t\t\tx += args[i];\n\t\t\t\t\t\ty += args[i + 1];\n\t\t\t\t\t\tthis.lineTo(x, y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"H\":\n\t\t\t\t\tcheckMinArgs(name, args.length, 1);\n\t\t\t\t\tfor (let i = 0; i < args.length; ++i) {\n\t\t\t\t\t\tx = args[i];\n\t\t\t\t\t\tthis.lineTo(x, y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"h\":\n\t\t\t\t\tcheckMinArgs(name, args.length, 1);\n\t\t\t\t\tfor (let i = 0; i < args.length; ++i) {\n\t\t\t\t\t\tx += args[i];\n\t\t\t\t\t\tthis.lineTo(x, y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"V\":\n\t\t\t\t\tcheckMinArgs(name, args.length, 1);\n\t\t\t\t\tfor (let i = 0; i < args.length; ++i) {\n\t\t\t\t\t\ty = args[i];\n\t\t\t\t\t\tthis.lineTo(x, y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"v\":\n\t\t\t\t\tcheckMinArgs(name, args.length, 1);\n\t\t\t\t\tfor (let i = 0; i < args.length; ++i) {\n\t\t\t\t\t\ty += args[i];\n\t\t\t\t\t\tthis.lineTo(x, y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"C\":\n\t\t\t\t\tcheckEvenArgs(name, args.length, 6);\n\t\t\t\t\tfor (let i = 0; i < args.length; i += 6) {\n\t\t\t\t\t\tconst x1 = args[i];\n\t\t\t\t\t\tconst y1 = args[i + 1];\n\t\t\t\t\t\tcpx = args[i + 2];\n\t\t\t\t\t\tcpy = args[i + 3];\n\t\t\t\t\t\tx = args[i + 4];\n\t\t\t\t\t\ty = args[i + 5];\n\t\t\t\t\t\tthis.bezierCurveTo(x1, y1, cpx, cpy, x, y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"c\":\n\t\t\t\t\tcheckEvenArgs(name, args.length, 6);\n\t\t\t\t\tfor (let i = 0; i < args.length; i += 6) {\n\t\t\t\t\t\tconst x1 = args[i] + x;\n\t\t\t\t\t\tconst y1 = args[i + 1] + y;\n\t\t\t\t\t\tcpx = args[i + 2] + x;\n\t\t\t\t\t\tcpy = args[i + 3] + y;\n\t\t\t\t\t\tx += args[i + 4];\n\t\t\t\t\t\ty += args[i + 5];\n\t\t\t\t\t\tthis.bezierCurveTo(x1, y1, cpx, cpy, x, y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"S\":\n\t\t\t\t\tcheckEvenArgs(name, args.length, 4);\n\t\t\t\t\tif (cpx === null || cpy === null) {\n\t\t\t\t\t\tcpx = x;\n\t\t\t\t\t\tcpy = y;\n\t\t\t\t\t}\n\t\t\t\t\tfor (let i = 0; i < args.length; i += 4) {\n\t\t\t\t\t\tconst x1 = 2 * x - cpx;\n\t\t\t\t\t\tconst y1 = 2 * y - cpy;\n\t\t\t\t\t\tcpx = args[i];\n\t\t\t\t\t\tcpy = args[i + 1];\n\t\t\t\t\t\tx = args[i + 2];\n\t\t\t\t\t\ty = args[i + 3];\n\t\t\t\t\t\tthis.bezierCurveTo(x1, y1, cpx, cpy, x, y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"s\":\n\t\t\t\t\tcheckEvenArgs(name, args.length, 4);\n\t\t\t\t\tif (cpx === null || cpy === null) {\n\t\t\t\t\t\tcpx = x;\n\t\t\t\t\t\tcpy = y;\n\t\t\t\t\t}\n\t\t\t\t\tfor (let i = 0; i < args.length; i += 4) {\n\t\t\t\t\t\tconst x1 = 2 * x - cpx;\n\t\t\t\t\t\tconst y1 = 2 * y - cpy;\n\t\t\t\t\t\tcpx = args[i] + x;\n\t\t\t\t\t\tcpy = args[i + 1] + y;\n\t\t\t\t\t\tx += args[i + 2];\n\t\t\t\t\t\ty += args[i + 3];\n\t\t\t\t\t\tthis.bezierCurveTo(x1, y1, cpx, cpy, x, y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"Q\":\n\t\t\t\t\tcheckEvenArgs(name, args.length, 4);\n\t\t\t\t\tfor (let i = 0; i < args.length; i += 4) {\n\t\t\t\t\t\tqcpx = args[i];\n\t\t\t\t\t\tqcpy = args[i + 1];\n\t\t\t\t\t\tx = args[i + 2];\n\t\t\t\t\t\ty = args[i + 3];\n\t\t\t\t\t\tthis.quadraticCurveTo(qcpx, qcpy, x, y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"q\":\n\t\t\t\t\tcheckEvenArgs(name, args.length, 4);\n\t\t\t\t\tfor (let i = 0; i < args.length; i += 4) {\n\t\t\t\t\t\tqcpx = args[i] + x;\n\t\t\t\t\t\tqcpy = args[i + 1] + y;\n\t\t\t\t\t\tx += args[i + 2];\n\t\t\t\t\t\ty += args[i + 3];\n\t\t\t\t\t\tthis.quadraticCurveTo(qcpx, qcpy, x, y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"T\":\n\t\t\t\t\tcheckEvenArgs(name, args.length, 2);\n\t\t\t\t\tif (qcpx === null || qcpy === null) {\n\t\t\t\t\t\tqcpx = x;\n\t\t\t\t\t\tqcpy = y;\n\t\t\t\t\t}\n\t\t\t\t\tfor (let i = 0; i < args.length; i += 2) {\n\t\t\t\t\t\tqcpx = 2 * x - qcpx;\n\t\t\t\t\t\tqcpy = 2 * y - qcpy;\n\t\t\t\t\t\tx = args[i];\n\t\t\t\t\t\ty = args[i + 1];\n\t\t\t\t\t\tthis.quadraticCurveTo(qcpx, qcpy, x, y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"t\":\n\t\t\t\t\tcheckEvenArgs(name, args.length, 2);\n\t\t\t\t\tif (qcpx === null || qcpy === null) {\n\t\t\t\t\t\tqcpx = x;\n\t\t\t\t\t\tqcpy = y;\n\t\t\t\t\t}\n\t\t\t\t\tfor (let i = 0; i < args.length; i += 2) {\n\t\t\t\t\t\tqcpx = 2 * x - qcpx;\n\t\t\t\t\t\tqcpy = 2 * y - qcpy;\n\t\t\t\t\t\tx += args[i];\n\t\t\t\t\t\ty += args[i + 1];\n\t\t\t\t\t\tthis.quadraticCurveTo(qcpx, qcpy, x, y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"A\":\n\t\t\t\tcase \"a\":\n\t\t\t\t\tconst relative = (name === \"a\");\n\n\t\t\t\t\tcheckEvenArgs(name, args.length, 7);\n\n\t\t\t\t\tfor (let i = 0; i < args.length; i += 7) {\n\t\t\t\t\t\tlet cx = args[i + 5];\n\t\t\t\t\t\tlet cy = args[i + 6];\n\n\t\t\t\t\t\tif (relative) {\n\t\t\t\t\t\t\tcx += x;\n\t\t\t\t\t\t\tcy += y;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst bs = arcToBezier({\n\t\t\t\t\t\t\tpx: x,\n\t\t\t\t\t\t\tpy: y,\n\t\t\t\t\t\t\trx: args[i],\n\t\t\t\t\t\t\try: args[i + 1],\n\t\t\t\t\t\t\txAxisRotation: args[i + 2],\n\t\t\t\t\t\t\tlargeArcFlag: assertBinary(args[i + 3]),\n\t\t\t\t\t\t\tsweepFlag: assertBinary(args[i + 4]),\n\t\t\t\t\t\t\tcx,\n\t\t\t\t\t\t\tcy,\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t$array.each(bs, (b) => {\n\t\t\t\t\t\t\tthis.bezierCurveTo(b.x1, b.y1, b.x2, b.y2, b.x, b.y);\n\t\t\t\t\t\t\tx = b.x;\n\t\t\t\t\t\t\ty = b.y;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Z\":\n\t\t\t\tcase \"z\":\n\t\t\t\t\tcheckArgs(name, args.length, 0);\n\t\t\t\t\tthis.closePath();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\n\tpublic _runPath(context: CanvasRenderingContext2D): void {\n\t\tcontext.beginPath();\n\n\t\t$array.each(this._operations, (op) => {\n\t\t\top.path(context);\n\t\t});\n\t}\n\n\tprotected _render(parentLayer: CanvasLayer): void {\n\t\tsuper._render(parentLayer);\n\n\t\tconst layer = this._layer || parentLayer;\n\n\t\tconst layerDirty = layer.dirty;\n\t\tconst interactive = this._isInteractive();\n\n\t\tif (layerDirty || interactive) {\n\n\t\t\tconst context = layer.context;\n\t\t\tconst ghostContext = this._renderer._ghostContext;\n\n\t\t\tif (layerDirty) {\n\t\t\t\tcontext.globalCompositeOperation = this.blendMode;\n\n\t\t\t\tcontext.beginPath();\n\t\t\t}\n\n\t\t\tlet color: string | undefined;\n\n\t\t\tif (interactive) {\n\t\t\t\tghostContext.beginPath();\n\t\t\t\tcolor = this._getColorId();\n\t\t\t}\n\n\t\t\t$array.each(this._operations, (op) => {\n\t\t\t\tif (layerDirty) {\n\t\t\t\t\top.path(context);\n\t\t\t\t\top.colorize(context, undefined);\n\t\t\t\t}\n\n\t\t\t\tif (interactive) {\n\t\t\t\t\top.path(ghostContext);\n\t\t\t\t\top.colorize(ghostContext, color);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tpublic renderDetached(context: CanvasRenderingContext2D): void {\n\t\tif (this.visible) {\n\t\t\tthis._setMatrix();\n\n\t\t\tcontext.save();\n\n\t\t\t// We must apply the mask before we transform the element\n\t\t\tconst mask = this.mask;\n\t\t\tif (mask) {\n\t\t\t\tmask._setMatrix();\n\t\t\t\tmask._transform(context, 1);\n\t\t\t\tmask._runPath(context);\n\t\t\t\tcontext.clip();\n\t\t\t}\n\n\t\t\t// TODO handle compoundAlpha somehow ?\n\t\t\tcontext.globalAlpha = this.compoundAlpha * this.alpha;\n\n\t\t\tthis._transform(context, 1);\n\n\t\t\tif (this.filter) {\n\t\t\t\tcontext.filter = this.filter;\n\t\t\t}\n\n\t\t\tcontext.globalCompositeOperation = this.blendMode;\n\n\t\t\tcontext.beginPath();\n\n\t\t\t$array.each(this._operations, (op) => {\n\t\t\t\top.path(context);\n\t\t\t\top.colorize(context, undefined);\n\t\t\t});\n\n\t\t\tcontext.restore();\n\t\t}\n\t}\n\n\tpublic _addBounds(bounds: IBounds): void {\n\t\tif (this.visible && this.isMeasured) {\n\t\t\t$array.each(this._operations, (op) => {\n\t\t\t\top.addBounds(bounds);\n\t\t\t});\n\t\t}\n\t}\n}\n\n/**\n * @ignore\n */\ninterface ILineChunk {\n\tstyle: string | undefined,\n\tfill: Color | undefined,\n\ttext: string,\n\twidth: number,\n\theight: number,\n\tleft: number,\n\tright: number,\n\tascent: number,\n\toffsetX: number,\n\toffsetY: number,\n\ttextDecoration: string | undefined,\n\tverticalAlign?: \"baseline\" | \"sub\" | \"super\"\n}\n\n/**\n * @ignore\n */\ninterface ILine {\n\toffsetY: number,\n\tascent: number,\n\twidth: number,\n\theight: number,\n\tleft: number,\n\tright: number,\n\ttextChunks: Array<ILineChunk>,\n}\n\n/**\n * @ignore\n */\nexport class CanvasText extends CanvasDisplayObject implements IText {\n\tpublic text: string;\n\tpublic style: CanvasTextStyle;\n\tpublic resolution: number = 1;\n\n\tprotected _textInfo: Array<ILine> | undefined;\n\tprotected _textVisible: boolean = true;\n\tprotected _originalScale?: number = 1;\n\n\tconstructor(renderer: CanvasRenderer, text: string, style: CanvasTextStyle) {\n\t\tsuper(renderer);\n\t\tthis.text = text;\n\t\tthis.style = style;\n\t}\n\n\tpublic invalidateBounds(): void {\n\t\tsuper.invalidateBounds();\n\t\tthis._textInfo = undefined;\n\t}\n\n\tprivate _shared(context: CanvasRenderingContext2D) {\n\t\tif (this.style.textAlign) {\n\t\t\tcontext.textAlign = this.style.textAlign;\n\t\t}\n\n\t\tif (this.style.direction) {\n\t\t\tcontext.direction = this.style.direction;\n\t\t}\n\n\t\tif (this.style.textBaseline) {\n\t\t\tcontext.textBaseline = this.style.textBaseline;\n\t\t}\n\n\t}\n\n\tprotected _prerender(layer: CanvasLayer, ignoreGhost = false, ignoreFontWeight = false): void {\n\t\tsuper._render(layer);\n\n\t\tconst context = layer.context;\n\t\tconst ghostContext = this._renderer._ghostContext;\n\n\t\t// Font style\n\n\t\tconst style = this.style;\n\t\tlet fontStyle = this._getFontStyle(undefined, ignoreFontWeight);\n\n\t\tcontext.font = fontStyle;\n\t\tif (this._isInteractive() && !ignoreGhost) {\n\t\t\tghostContext.font = fontStyle;\n\t\t}\n\n\t\t// Other parameters\n\t\tif (style.fill) {\n\t\t\tif (style.fill instanceof Color) {\n\t\t\t\tcontext.fillStyle = style.fill.toCSS();\n\t\t\t} else {\n\t\t\t\tcontext.fillStyle = style.fill;\n\t\t\t}\n\t\t}\n\n\t\tif (style.shadowColor) {\n\t\t\tlayer.context.shadowColor = style.shadowColor.toCSS(style.shadowOpacity || 1);\n\t\t}\n\t\tif (style.shadowBlur) {\n\t\t\tlayer.context.shadowBlur = style.shadowBlur;\n\t\t}\n\t\tif (style.shadowOffsetX) {\n\t\t\tlayer.context.shadowOffsetX = style.shadowOffsetX;\n\t\t}\n\t\tif (style.shadowOffsetY) {\n\t\t\tlayer.context.shadowOffsetY = style.shadowOffsetY;\n\t\t}\n\n\t\tthis._shared(context);\n\n\t\tif (this._isInteractive() && !ignoreGhost) {\n\t\t\tghostContext.fillStyle = this._getColorId();\n\t\t\tthis._shared(ghostContext);\n\t\t}\n\t}\n\n\tprotected _getFontStyle(style2?: ITextStyle, ignoreFontWeight = false): string {\n\n\t\t// Process defaults\n\t\tconst style = this.style;\n\t\tlet fontStyle: string[] = [];\n\n\t\tif (style2 && style2.fontVariant) {\n\t\t\tfontStyle.push(style2.fontVariant);\n\t\t}\n\t\telse if (style.fontVariant) {\n\t\t\tfontStyle.push(style.fontVariant);\n\t\t}\n\n\t\tif (!ignoreFontWeight) {\n\t\t\tif (style2 && style2.fontWeight) {\n\t\t\t\tfontStyle.push(style2.fontWeight);\n\t\t\t}\n\t\t\telse if (style.fontWeight) {\n\t\t\t\tfontStyle.push(style.fontWeight);\n\t\t\t}\n\t\t}\n\n\t\tif (style2 && style2.fontStyle) {\n\t\t\tfontStyle.push(style2.fontStyle);\n\t\t}\n\t\telse if (style.fontStyle) {\n\t\t\tfontStyle.push(style.fontStyle);\n\t\t}\n\n\t\tif (style2 && style2.fontSize) {\n\t\t\tif ($type.isNumber(style2.fontSize)) {\n\t\t\t\tstyle2.fontSize = style2.fontSize + \"px\";\n\t\t\t}\n\t\t\tfontStyle.push(style2.fontSize);\n\t\t}\n\t\telse if (style.fontSize) {\n\t\t\tif ($type.isNumber(style.fontSize)) {\n\t\t\t\tstyle.fontSize = style.fontSize + \"px\";\n\t\t\t}\n\t\t\tfontStyle.push(style.fontSize);\n\t\t}\n\n\t\tif (style2 && style2.fontFamily) {\n\t\t\tfontStyle.push(style2.fontFamily);\n\t\t}\n\t\telse if (style.fontFamily) {\n\t\t\tfontStyle.push(style.fontFamily);\n\t\t}\n\t\telse if (fontStyle.length) {\n\t\t\tfontStyle.push(\"Arial\");\n\t\t}\n\n\t\treturn fontStyle.join(\" \");\n\t}\n\n\tprotected _render(parentLayer: CanvasLayer): void {\n\t\tconst layer = this._layer || parentLayer;\n\n\t\t// We need measurements in order to properly position text for alignment\n\t\tif (!this._textInfo) {\n\t\t\tthis._measure(layer);\n\t\t}\n\n\t\tif (this._textVisible) {\n\n\t\t\tconst interactive = this._isInteractive();\n\t\t\tconst context = layer.context;\n\t\t\tconst layerDirty = layer.dirty;\n\t\t\tconst ghostContext = this._renderer._ghostContext;\n\n\t\t\tcontext.save();\n\t\t\tghostContext.save();\n\t\t\tthis._prerender(layer);\n\n\t\t\t// const lines = this.text.toString().replace(/\\r/g, \"\").split(/\\n/);\n\t\t\t// const x = this._localBounds && (this._localBounds.left < 0) ? Math.abs(this._localBounds.left) : 0;\n\n\t\t\t// Process text info produced by _measure()\n\t\t\t$array.each(this._textInfo!, (line, _index) => {\n\t\t\t\t$array.each(line.textChunks, (chunk, _index) => {\n\n\t\t\t\t\t// Set style\n\t\t\t\t\tif (chunk.style) {\n\t\t\t\t\t\tcontext.save();\n\t\t\t\t\t\tghostContext.save();\n\n\t\t\t\t\t\tcontext.font = chunk.style;\n\t\t\t\t\t\tif (this._isInteractive()) {\n\t\t\t\t\t\t\tghostContext.font = chunk.style;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (chunk.fill) {\n\t\t\t\t\t\tcontext.save();\n\t\t\t\t\t\tcontext.fillStyle = chunk.fill.toCSS();\n\t\t\t\t\t\t// Color does not affect ghostContext so we not set it\n\t\t\t\t\t}\n\n\t\t\t\t\t// Draw text\n\t\t\t\t\tif (layerDirty) {\n\t\t\t\t\t\tcontext.fillText(chunk.text, chunk.offsetX, line.offsetY + chunk.offsetY);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Draw underline\n\t\t\t\t\tif (chunk.textDecoration == \"underline\" || chunk.textDecoration == \"line-through\") {\n\n\t\t\t\t\t\tlet thickness = 1;\n\t\t\t\t\t\tlet offset = 1;\n\t\t\t\t\t\tlet fontSize = chunk.height;\n\n\t\t\t\t\t\tlet offsetX = chunk.offsetX;\n\t\t\t\t\t\tswitch (this.style.textAlign) {\n\t\t\t\t\t\t\tcase \"right\":\n\t\t\t\t\t\t\tcase \"end\":\n\t\t\t\t\t\t\t\toffsetX -= chunk.width;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"center\":\n\t\t\t\t\t\t\t\toffsetX -= chunk.width / 2;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (chunk.style) {\n\t\t\t\t\t\t\tconst format = TextFormatter.getTextStyle(chunk.style);\n\t\t\t\t\t\t\tswitch (format.fontWeight) {\n\t\t\t\t\t\t\t\tcase \"bolder\":\n\t\t\t\t\t\t\t\tcase \"bold\":\n\t\t\t\t\t\t\t\tcase \"700\":\n\t\t\t\t\t\t\t\tcase \"800\":\n\t\t\t\t\t\t\t\tcase \"900\":\n\t\t\t\t\t\t\t\t\tthickness = 2;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (fontSize) {\n\t\t\t\t\t\t\toffset = fontSize / 20;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet y: number;\n\n\t\t\t\t\t\tif (chunk.textDecoration == \"line-through\") {\n\t\t\t\t\t\t\ty = thickness + line.offsetY + chunk.offsetY - chunk.height / 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\ty = thickness + offset * 1.5 + line.offsetY + chunk.offsetY;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcontext.save();\n\t\t\t\t\t\tcontext.beginPath();\n\t\t\t\t\t\tif (chunk.fill) {\n\t\t\t\t\t\t\tcontext.strokeStyle = chunk.fill.toCSS();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (this.style.fill && this.style.fill instanceof Color) {\n\t\t\t\t\t\t\tcontext.strokeStyle = this.style.fill.toCSS();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontext.lineWidth = thickness * offset;\n\t\t\t\t\t\tcontext.moveTo(offsetX, y);\n\t\t\t\t\t\tcontext.lineTo(offsetX + chunk.width, y);\n\t\t\t\t\t\tcontext.stroke();\n\t\t\t\t\t\tcontext.restore();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (interactive && this.interactive) {\n\t\t\t\t\t\t// Draw text in ghost canvas ONLY if it is set as interactive\n\t\t\t\t\t\t// explicitly. This way we avoid hit test anomalies caused by anti\n\t\t\t\t\t\t// aliasing of text.\n\t\t\t\t\t\tghostContext.fillText(chunk.text, chunk.offsetX, line.offsetY + chunk.offsetY);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (chunk.fill) {\n\t\t\t\t\t\tcontext.restore();\n\t\t\t\t\t\t// Color does not affect ghostContext so we not set it\n\t\t\t\t\t}\n\n\t\t\t\t\t// Reset style\n\t\t\t\t\tif (chunk.style) {\n\t\t\t\t\t\tcontext.restore();\n\t\t\t\t\t\tghostContext.restore();\n\t\t\t\t\t}\n\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tcontext.restore();\n\t\t\tghostContext.restore();\n\t\t}\n\t}\n\n\tpublic _addBounds(bounds: IBounds): void {\n\t\tif (this.visible && this.isMeasured) {\n\t\t\t//if (this._textVisible) {\n\t\t\tconst x = this._measure(this.getLayer());\n\t\t\tsetPoint(bounds, { x: x.left, y: x.top });\n\t\t\tsetPoint(bounds, { x: x.right, y: x.bottom });\n\t\t\t//}\n\t\t}\n\t}\n\n\tpublic _measure(layer: CanvasLayer): IBounds {\n\t\tconst context = layer.context;\n\t\tconst ghostContext = this._renderer._ghostContext;\n\t\tconst rtl = this.style.direction == \"rtl\";\n\n\t\t// Reset text info\n\t\tthis._textInfo = [];\n\n\t\t// Init\n\t\tconst oversizedBehavior = this.style.oversizedBehavior;\n\t\tconst maxWidth = this.style.maxWidth!;\n\n\t\tconst truncate = $type.isNumber(maxWidth) && oversizedBehavior == \"truncate\";\n\t\tconst wrap = $type.isNumber(maxWidth) && oversizedBehavior == \"wrap\";\n\n\t\t// Pre-render\n\t\tcontext.save();\n\t\tghostContext.save();\n\t\tthis._prerender(layer, true, true);\n\n\t\t// Get default font metrix\n\t\tconst refText = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 \";\n\n\t\t// Split up text into lines\n\t\tconst lines = this.text.toString().replace(/\\r/g, \"\").split(/\\n/);\n\t\tlet styleRestored = true;\n\t\tlet minX = 0;\n\t\tlet maxX = 0;\n\n\t\t// Iterate through the lines\n\t\tlet offsetY = 0;\n\t\tlet currentStyle: string | undefined;\n\t\t$array.each(lines, (line, _index) => {\n\n\t\t\t// Split up line into format/value chunks\n\t\t\tlet chunks: ITextChunk[];\n\t\t\tif (line == \"\") {\n\t\t\t\tchunks = [{\n\t\t\t\t\ttype: \"value\",\n\t\t\t\t\ttext: \"\"\n\t\t\t\t}];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tchunks = TextFormatter.chunk(line, false, this.style.ignoreFormatting);\n\t\t\t}\n\n\t\t\twhile (chunks.length > 0) {\n\n\t\t\t\t// Init line object\n\t\t\t\tlet lineInfo: ILine = {\n\t\t\t\t\toffsetY: offsetY,\n\t\t\t\t\tascent: 0,\n\t\t\t\t\twidth: 0,\n\t\t\t\t\theight: 0,\n\t\t\t\t\tleft: 0,\n\t\t\t\t\tright: 0,\n\t\t\t\t\ttextChunks: []\n\t\t\t\t};\n\n\t\t\t\t// Measure reference text\n\t\t\t\tconst metrics = this._measureText(refText, context);\n\n\t\t\t\tconst height = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;\n\t\t\t\tlineInfo.height = height;\n\t\t\t\tlineInfo.ascent = metrics.actualBoundingBoxAscent;\n\n\t\t\t\tlet currentFormat: string;\n\t\t\t\tlet currentDecoration: string | undefined = this.style.textDecoration;\n\t\t\t\tlet currentFill: Color | undefined;\n\t\t\t\tlet currentChunkWidth: number | undefined;\n\t\t\t\tlet skipFurtherText = false;\n\t\t\t\tlet firstTextChunk = true;\n\t\t\t\tlet leftoverChunks: Array<ITextChunk> = [];\n\t\t\t\tlet currentVerticalAlign: \"baseline\" | \"sub\" | \"super\" | undefined;\n\t\t\t\t//let offsetX = 0;\n\t\t\t\t//let chunk;\n\n\t\t\t\t//while(chunk = chunks.shift()) {\n\t\t\t\t$array.eachContinue(chunks, (chunk, index) => {\n\n\t\t\t\t\t// Format chunk\n\t\t\t\t\tif (chunk.type == \"format\") {\n\t\t\t\t\t\tif (chunk.text == \"[/]\") {\n\t\t\t\t\t\t\tif (!styleRestored) {\n\t\t\t\t\t\t\t\tcontext.restore();\n\t\t\t\t\t\t\t\tghostContext.restore();\n\t\t\t\t\t\t\t\tstyleRestored = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcurrentFill = undefined;\n\t\t\t\t\t\t\tcurrentStyle = undefined;\n\t\t\t\t\t\t\tcurrentChunkWidth = undefined;\n\t\t\t\t\t\t\tcurrentDecoration = this.style.textDecoration;\n\t\t\t\t\t\t\tcurrentVerticalAlign = undefined\n\t\t\t\t\t\t\tcurrentFormat = chunk.text;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\n\t\t\t\t\t\t\tif (!styleRestored) {\n\t\t\t\t\t\t\t\tcontext.restore();\n\t\t\t\t\t\t\t\tghostContext.restore();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet format = TextFormatter.getTextStyle(chunk.text);\n\t\t\t\t\t\t\tconst fontStyle = this._getFontStyle(format);\n\t\t\t\t\t\t\tcontext.save();\n\t\t\t\t\t\t\tghostContext.save();\n\t\t\t\t\t\t\tcontext.font = fontStyle;\n\t\t\t\t\t\t\tcurrentStyle = fontStyle;\n\t\t\t\t\t\t\tcurrentFormat = chunk.text;\n\t\t\t\t\t\t\tif (format.textDecoration) {\n\t\t\t\t\t\t\t\tcurrentDecoration = format.textDecoration;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (format.fill) {\n\t\t\t\t\t\t\t\tcurrentFill = <Color>format.fill;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif ((<any>format).width) {\n\t\t\t\t\t\t\t\tcurrentChunkWidth = $type.toNumber((<any>format).width);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (format.verticalAlign) {\n\t\t\t\t\t\t\t\tcurrentVerticalAlign = format.verticalAlign;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tstyleRestored = false;\n\n\t\t\t\t\t\t\t// Measure reference text after change of format\n\t\t\t\t\t\t\tconst metrics = this._measureText(refText, context);\n\t\t\t\t\t\t\tconst height = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;\n\t\t\t\t\t\t\tif (height > lineInfo.height) {\n\t\t\t\t\t\t\t\tlineInfo.height = height;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (metrics.actualBoundingBoxAscent > lineInfo.ascent) {\n\t\t\t\t\t\t\t\tlineInfo.ascent = metrics.actualBoundingBoxAscent;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Text chunk\n\t\t\t\t\telse if (chunk.type == \"value\" && !skipFurtherText) {\n\n\t\t\t\t\t\t// Measure\n\t\t\t\t\t\tconst metrics = this._measureText(chunk.text, context);\n\t\t\t\t\t\tlet chunkWidth = metrics.actualBoundingBoxLeft + metrics.actualBoundingBoxRight;\n\n\t\t\t\t\t\t// Check for fit\n\t\t\t\t\t\tif (truncate) {\n\n\t\t\t\t\t\t\t// Break words?\n\t\t\t\t\t\t\tlet breakWords = firstTextChunk || this.style.breakWords || false;\n\n\t\t\t\t\t\t\t// Measure ellipsis and check if it fits\n\t\t\t\t\t\t\tconst ellipsis = this.style.ellipsis || \"\";\n\t\t\t\t\t\t\tconst ellipsisMetrics = this._measureText(ellipsis, context);\n\t\t\t\t\t\t\tconst ellipsisWidth = ellipsisMetrics.actualBoundingBoxLeft + ellipsisMetrics.actualBoundingBoxRight;\n\n\t\t\t\t\t\t\t// Check fit\n\t\t\t\t\t\t\tif ((lineInfo.width + chunkWidth) > maxWidth) {\n\t\t\t\t\t\t\t\tconst excessWidth = maxWidth - lineInfo.width - ellipsisWidth;\n\t\t\t\t\t\t\t\tchunk.text = this._truncateText(context, chunk.text, excessWidth, breakWords);\n\t\t\t\t\t\t\t\tchunk.text += ellipsis;\n\t\t\t\t\t\t\t\tskipFurtherText = true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (wrap) {\n\t\t\t\t\t\t\t// Check fit\n\t\t\t\t\t\t\tif ((lineInfo.width + chunkWidth) > maxWidth) {\n\t\t\t\t\t\t\t\tconst excessWidth = maxWidth - lineInfo.width;\n\t\t\t\t\t\t\t\tconst tmpText = this._truncateText(context, chunk.text, excessWidth, false, firstTextChunk);\n\n\t\t\t\t\t\t\t\tif (tmpText == \"\") {\n\t\t\t\t\t\t\t\t\t// Unable to fit a single letter - hide the whole label\n\t\t\t\t\t\t\t\t\tthis._textVisible = true;\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//skipFurtherText = true;\n\n\t\t\t\t\t\t\t\t//Add remaining chunks for the next line\n\t\t\t\t\t\t\t\tleftoverChunks = chunks.slice(index + 1);\n\n\t\t\t\t\t\t\t\t//Add remaining text of current chunk if it was forced-cut\n\t\t\t\t\t\t\t\tif ($utils.trim(tmpText) != $utils.trim(chunk.text)) {\n\t\t\t\t\t\t\t\t\tleftoverChunks.unshift({\n\t\t\t\t\t\t\t\t\t\ttype: \"value\",\n\t\t\t\t\t\t\t\t\t\ttext: chunk.text.substr(tmpText.length)\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tif (currentFormat) {\n\t\t\t\t\t\t\t\t\t\tleftoverChunks.unshift({\n\t\t\t\t\t\t\t\t\t\t\ttype: \"format\",\n\t\t\t\t\t\t\t\t\t\t\ttext: currentFormat\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Set current chunk (truncated)\n\t\t\t\t\t\t\t\tchunk.text = $utils.trim(tmpText);\n\n\t\t\t\t\t\t\t\tchunks = [];\n\t\t\t\t\t\t\t\tskipFurtherText = true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Chunk width?\n\t\t\t\t\t\tlet leftBoundMod = 1;\n\t\t\t\t\t\tlet rightBoundMod = 1;\n\t\t\t\t\t\tif (currentStyle && currentChunkWidth && (currentChunkWidth > chunkWidth)) {\n\t\t\t\t\t\t\t// increase horizontal bounding boxes accordingly\n\t\t\t\t\t\t\tconst boundsMod = chunkWidth / currentChunkWidth\n\t\t\t\t\t\t\tswitch (this.style.textAlign) {\n\t\t\t\t\t\t\t\tcase \"right\":\n\t\t\t\t\t\t\t\tcase \"end\":\n\t\t\t\t\t\t\t\t\tleftBoundMod = boundsMod;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase \"center\":\n\t\t\t\t\t\t\t\t\tleftBoundMod = boundsMod;\n\t\t\t\t\t\t\t\t\trightBoundMod = boundsMod;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\trightBoundMod = boundsMod;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tchunkWidth = currentChunkWidth;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst chunkHeight = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;\n\n\n\t\t\t\t\t\tif (chunkHeight > lineInfo.height) {\n\t\t\t\t\t\t\tlineInfo.height = chunkHeight;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (metrics.actualBoundingBoxAscent > lineInfo.ascent) {\n\t\t\t\t\t\t\tlineInfo.ascent = metrics.actualBoundingBoxAscent;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlineInfo.width += chunkWidth;\n\t\t\t\t\t\tlineInfo.left += metrics.actualBoundingBoxLeft / leftBoundMod;\n\t\t\t\t\t\tlineInfo.right += metrics.actualBoundingBoxRight / rightBoundMod;\n\t\t\t\t\t\tlineInfo.textChunks.push({\n\t\t\t\t\t\t\tstyle: currentStyle,\n\t\t\t\t\t\t\tfill: currentFill,\n\t\t\t\t\t\t\ttext: chunk.text,\n\t\t\t\t\t\t\twidth: chunkWidth,\n\t\t\t\t\t\t\theight: chunkHeight,\n\t\t\t\t\t\t\tleft: metrics.actualBoundingBoxLeft,\n\t\t\t\t\t\t\tright: metrics.actualBoundingBoxRight,\n\t\t\t\t\t\t\tascent: metrics.actualBoundingBoxAscent,\n\t\t\t\t\t\t\toffsetX: 0,\n\t\t\t\t\t\t\toffsetY: 0,\n\t\t\t\t\t\t\ttextDecoration: currentDecoration,\n\t\t\t\t\t\t\tverticalAlign: currentVerticalAlign\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t//offsetX += chunkWidth;\n\n\t\t\t\t\t\tfirstTextChunk = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif (leftoverChunks) {\n\t\t\t\t\t\t//return false;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t\t//}\n\t\t\t\t});\n\n\t\t\t\tif (this.style.lineHeight instanceof Percent) {\n\t\t\t\t\tlineInfo.height *= this.style.lineHeight.value;\n\t\t\t\t\tlineInfo.ascent *= this.style.lineHeight.value;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tlineInfo.height *= this.style.lineHeight || 1.2;\n\t\t\t\t\tlineInfo.ascent *= this.style.lineHeight || 1.2;\n\t\t\t\t}\n\n\t\t\t\tif (minX < lineInfo.left) {\n\t\t\t\t\tminX = lineInfo.left;\n\t\t\t\t}\n\n\t\t\t\tif (maxX < lineInfo.right) {\n\t\t\t\t\tmaxX = lineInfo.right;\n\t\t\t\t}\n\n\t\t\t\tthis._textInfo!.push(lineInfo);\n\n\t\t\t\t//lineInfo.offsetY += lineInfo.ascent;\n\t\t\t\toffsetY += lineInfo.height;\n\n\t\t\t\t// Reset chunks so that it can proceed to the next line\n\t\t\t\tchunks = leftoverChunks || [];\n\t\t\t}\n\n\t\t});\n\n\t\tif (!styleRestored) {\n\t\t\tcontext.restore();\n\t\t\tghostContext.restore();\n\t\t}\n\n\t\t// Adjust chunk internal offsets\n\t\t$array.each(this._textInfo, (lineInfo, _index: number) => {\n\t\t\tlet currentChunkOffset = 0\n\t\t\t$array.each(lineInfo.textChunks, (chunk) => {\n\t\t\t\tchunk.offsetX = currentChunkOffset + chunk.left - lineInfo.left;\n\t\t\t\tchunk.offsetY += lineInfo.height - lineInfo.height * (this.style.baselineRatio || 0.19);\n\t\t\t\tcurrentChunkOffset += chunk.width;\n\n\t\t\t\tif (chunk.verticalAlign) {\n\t\t\t\t\tswitch (chunk.verticalAlign) {\n\t\t\t\t\t\tcase \"super\":\n\t\t\t\t\t\t\tchunk.offsetY -= lineInfo.height / 2 - chunk.height / 2;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"sub\":\n\t\t\t\t\t\t\tchunk.offsetY += chunk.height / 2;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tconst bounds = {\n\t\t\tleft: rtl ? -maxX : -minX,\n\t\t\ttop: 0,\n\t\t\tright: rtl ? minX : maxX,\n\t\t\tbottom: offsetY,\n\t\t};\n\n\n\t\t// We need to fit?\n\t\tif (oversizedBehavior !== \"none\") {\n\t\t\tconst ratio = this._fitRatio(bounds);\n\t\t\tif (ratio < 1) {\n\t\t\t\tif (oversizedBehavior == \"fit\") {\n\t\t\t\t\tif ($type.isNumber(this.style.minScale) && (ratio < this.style.minScale)) {\n\t\t\t\t\t\tthis._textVisible = false;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (!this._originalScale || this._originalScale == 1) {\n\t\t\t\t\t\t\tthis._originalScale = this.scale;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.scale = ratio;\n\t\t\t\t\t\tthis._textVisible = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (oversizedBehavior == \"hide\") {\n\t\t\t\t\tthis._textVisible = false;\n\t\t\t\t}\n\t\t\t\telse {\n\n\t\t\t\t\tswitch (this.style.textAlign) {\n\t\t\t\t\t\tcase \"right\":\n\t\t\t\t\t\tcase \"end\":\n\t\t\t\t\t\t\tbounds.left = -maxWidth;\n\t\t\t\t\t\t\tbounds.right = 0;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"center\":\n\t\t\t\t\t\t\tbounds.left = -maxWidth / 2;\n\t\t\t\t\t\t\tbounds.right = maxWidth / 2;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tbounds.left = 0;\n\t\t\t\t\t\t\tbounds.right = maxWidth;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.scale = this._originalScale || 1;\n\t\t\t\t\tthis._originalScale = undefined;\n\t\t\t\t\tthis._textVisible = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.scale = this._originalScale || 1;\n\t\t\t\tthis._originalScale = undefined;\n\t\t\t\tthis._textVisible = true;\n\t\t\t}\n\t\t}\n\n\t\tcontext.restore();\n\t\tghostContext.restore();\n\n\t\treturn bounds;\n\t}\n\n\tprotected _fitRatio(bounds: IBounds): number {\n\t\tconst maxW = this.style.maxWidth;\n\t\tconst maxH = this.style.maxHeight;\n\t\tif (!$type.isNumber(maxW) && !$type.isNumber(maxH)) {\n\t\t\treturn 1;\n\t\t}\n\t\tconst w = bounds.right - bounds.left;\n\t\tconst h = bounds.bottom - bounds.top;\n\t\treturn Math.min(maxW! / w || 1, maxH! / h || 1);\n\t}\n\n\tprotected _truncateText(context: CanvasRenderingContext2D, text: string, maxWidth: number, breakWords: boolean = false, fallbackBreakWords: boolean = true): string {\n\t\tlet width: number;\n\t\tdo {\n\t\t\tif (breakWords) {\n\t\t\t\ttext = text.slice(0, -1);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlet tmp = text.replace(/[^,;:!?\\\\\\/\\s]+[,;:!?\\\\\\/\\s]*$/g, \"\");\n\t\t\t\tif (tmp == \"\" && fallbackBreakWords) {\n\t\t\t\t\tbreakWords = true;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ttext = tmp;\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst metrics = this._measureText(text, context);\n\t\t\twidth = metrics.actualBoundingBoxLeft + metrics.actualBoundingBoxRight;\n\t\t} while ((width > maxWidth) && text != \"\");\n\t\treturn text;\n\t}\n\n\tprotected _measureText(text: string, context: CanvasRenderingContext2D): TextMetrics {\n\t\tlet metrics = context.measureText(text);\n\t\tlet fakeMetrics: any = {};\n\t\tif (metrics.actualBoundingBoxAscent == null) {\n\t\t\tconst div = document.createElement(\"div\");\n\t\t\tdiv.innerText = text;\n\t\t\tdiv.style.visibility = \"hidden\";\n\t\t\tdiv.style.position = \"absolute\";\n\t\t\tdiv.style.top = \"-1000000px;\"\n\t\t\tdiv.style.fontFamily = this.style.fontFamily || \"\";\n\t\t\tdiv.style.fontSize = this.style.fontSize + \"\";\n\t\t\tdocument.body.appendChild(div);\n\t\t\tconst bbox = div.getBoundingClientRect();\n\t\t\tdocument.body.removeChild(div);\n\t\t\tconst h = bbox.height;\n\t\t\tconst w = metrics.width;\n\t\t\tlet left = 0;\n\t\t\tlet right = w;\n\n\t\t\tfakeMetrics = {\n\t\t\t\tactualBoundingBoxAscent: h,\n\t\t\t\tactualBoundingBoxDescent: 0,\n\t\t\t\tactualBoundingBoxLeft: left,\n\t\t\t\tactualBoundingBoxRight: right,\n\t\t\t\tfontBoundingBoxAscent: h,\n\t\t\t\tfontBoundingBoxDescent: 0,\n\t\t\t\twidth: w\n\t\t\t}\n\t\t\t//return fake;\n\t\t}\n\t\telse {\n\t\t\tfakeMetrics = {\n\t\t\t\tactualBoundingBoxAscent: metrics.actualBoundingBoxAscent,\n\t\t\t\tactualBoundingBoxDescent: metrics.actualBoundingBoxDescent,\n\t\t\t\tactualBoundingBoxLeft: metrics.actualBoundingBoxLeft,\n\t\t\t\tactualBoundingBoxRight: metrics.actualBoundingBoxRight,\n\t\t\t\tfontBoundingBoxAscent: metrics.actualBoundingBoxAscent,\n\t\t\t\tfontBoundingBoxDescent: metrics.actualBoundingBoxDescent,\n\t\t\t\twidth: metrics.width\n\t\t\t}\n\t\t}\n\n\t\tconst w = metrics.width;\n\t\tswitch (this.style.textAlign) {\n\t\t\tcase \"right\":\n\t\t\tcase \"end\":\n\t\t\t\tfakeMetrics.actualBoundingBoxLeft = w;\n\t\t\t\tfakeMetrics.actualBoundingBoxRight = 0;\n\t\t\t\tbreak;\n\t\t\tcase \"center\":\n\t\t\t\tfakeMetrics.actualBoundingBoxLeft = w / 2;\n\t\t\t\tfakeMetrics.actualBoundingBoxRight = w / 2;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tfakeMetrics.actualBoundingBoxLeft = 0;\n\t\t\t\tfakeMetrics.actualBoundingBoxRight = w;\n\t\t}\n\n\t\treturn fakeMetrics;\n\t}\n\n}\n\n/**\n * @ignore\n */\nexport class CanvasTextStyle implements ITextStyle {\n\t//public wordWrapWidth: number = 100;\n\tpublic fill?: Color | CanvasGradient | CanvasPattern;\n\tpublic textAlign?: \"start\" | \"end\" | \"left\" | \"right\" | \"center\";\n\tpublic fontFamily?: string;\n\tpublic fontSize?: string | number;\n\tpublic fontWeight?: 'normal' | 'bold' | 'bolder' | 'lighter' | '100' | '200' | '300' | '400' | '500' | '600' | '700' | '800' | '900'\n\tpublic fontStyle?: 'normal' | 'italic' | 'oblique';\n\tpublic fontVariant?: \"normal\" | \"small-caps\";\n\tpublic textDecoration?: \"underline\" | \"line-through\";\n\tpublic shadowColor?: Color | null;\n\tpublic shadowBlur?: number;\n\tpublic shadowOffsetX?: number;\n\tpublic shadowOffsetY?: number;\n\tpublic shadowOpacity?: number;\n\t// leading?: number;\n\t// letterSpacing?: number;\n\tpublic lineHeight?: number | Percent = percent(120);\n\tpublic baselineRatio?: number = 0.19;\n\t// padding?: number;\n\t// stroke?: number;\n\t// strokeThickness?: number;\n\t// trim?: number;\n\t// wordWrap?: boolean;\n\tpublic direction?: \"ltr\" | \"rtl\";\n\tpublic textBaseline?: \"top\" | \"hanging\" | \"middle\" | \"alphabetic\" | \"ideographic\" | \"bottom\";\n\tpublic oversizedBehavior?: \"none\" | \"hide\" | \"fit\" | \"wrap\" | \"truncate\" = \"none\";\n\tpublic breakWords?: boolean = false;\n\tpublic ellipsis?: string = \"\u2026\";\n\tpublic maxWidth?: number;\n\tpublic maxHeight?: number;\n\tpublic minScale?: number;\n\tpublic ignoreFormatting?: boolean = false;\n}\n\n/**\n * @ignore\n */\nexport class CanvasRadialText extends CanvasText implements IRadialText {\n\tpublic textType?: \"regular\" | \"circular\" | \"radial\" | \"aligned\" | \"adjusted\" = \"circular\";\n\tpublic radius?: number;\n\tpublic startAngle?: number;\n\tpublic inside?: boolean = false;\n\tpublic orientation?: \"inward\" | \"outward\" | \"auto\" = \"auto\";\n\tpublic kerning?: number = 0;\n\n\tprivate _textReversed: boolean = false;\n\n\tpublic _render(parentLayer: CanvasLayer): void {\n\t\tswitch (this.textType) {\n\t\t\tcase \"circular\":\n\t\t\t\tthis._renderCircular(parentLayer);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tsuper._render(parentLayer);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tpublic _renderCircular(parentLayer: CanvasLayer): void {\n\t\tconst layer = this._layer || parentLayer;\n\n\t\tthis._prerender(layer);\n\n\t\tconst interactive = this._isInteractive();\n\t\tconst context = layer.context;\n\t\tconst layerDirty = layer.dirty;\n\t\tconst ghostContext = this._renderer._ghostContext;\n\n\t\t// Savepoint\n\t\tcontext.save();\n\t\tif (interactive) {\n\t\t\tghostContext.save();\n\t\t}\n\n\t\t// Init\n\t\tlet radius = (this.radius || 0);\n\t\tlet startAngle = (this.startAngle || 0);\n\t\tlet deltaAngle = 0;\n\t\tlet orientation = this.orientation;\n\t\tlet inward = orientation == \"auto\" ? \"auto\" : orientation == \"inward\";\n\t\tconst inside = this.inside;\n\t\tconst align = this.style.textAlign || \"left\";\n\t\tconst kerning = this.kerning || 0;\n\t\tlet clockwise = align == \"left\" ? 1 : -1;\n\t\tconst shouldReverse = !this._textReversed;\n\n\t\t// We need measurements in order to properly position text for alignment\n\t\tif (!this._textInfo) {\n\t\t\tthis._measure(layer);\n\t\t}\n\n\t\t// Check if we need to invert the whole stuff\n\t\tif (inward == \"auto\") {\n\t\t\t// Calc max angle so we know whether we need to flip it\n\t\t\tlet maxAngle = 0;\n\t\t\tlet midAngle = 0;\n\t\t\t$array.each(this._textInfo!, (line, _index) => {\n\t\t\t\tconst deltaAngle = startAngle + (line.width / (radius - line.height)) / 2 * -clockwise;\n\t\t\t\tif (deltaAngle > maxAngle) {\n\t\t\t\t\tmaxAngle = deltaAngle;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (align == \"left\") {\n\t\t\t\tmidAngle = (maxAngle + deltaAngle / 2) * $math.DEGREES;\n\t\t\t}\n\t\t\telse if (align == \"right\") {\n\t\t\t\tmidAngle = (maxAngle - deltaAngle / 2) * $math.DEGREES;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tmidAngle = startAngle * $math.DEGREES;\n\t\t\t}\n\t\t\tmidAngle = $math.normalizeAngle(midAngle);\n\t\t\tinward = (midAngle >= 270) || (midAngle <= 90);\n\t\t}\n\n\t\tif (inward == true && shouldReverse) {\n\t\t\tthis._textInfo!.reverse();\n\t\t\tthis._textReversed = true;\n\t\t}\n\n\t\t// if ((inward == false && align == \"left\") || (inward == true && align == \"right\")) {\n\t\t// \tclockwise *= -1;\n\t\t// }\n\n\t\t// Process text info produced by _measure()\n\t\t$array.each(this._textInfo!, (line, _index) => {\n\n\t\t\tconst textHeight = line.height;\n\n\t\t\t// Adjust radius (for `inside = false`)\n\t\t\t// Radius adjustment for `inside = false` is below the line calculation\n\t\t\tif (!inside) {\n\t\t\t\tradius += textHeight;\n\t\t\t}\n\n\t\t\t// Reverse letters if we're painting them counter-clockwise\n\t\t\tif (((clockwise == -1 && inward) || (clockwise == 1 && !inward)) && shouldReverse) {\n\t\t\t\tline.textChunks.reverse();\n\t\t\t}\n\n\t\t\t// Init angles\n\t\t\tlet lineStartAngle = startAngle;\n\t\t\tdeltaAngle = 0;\n\n\t\t\t// Adjust for center-align\n\t\t\tif (align == \"center\") {\n\t\t\t\tlineStartAngle += (line.width / (radius - textHeight)) / 2 * -clockwise;\n\t\t\t\tdeltaAngle = lineStartAngle - startAngle;\n\t\t\t}\n\n\t\t\t// if (inward == \"auto\") {\n\t\t\t// \tlet midAngle;\n\t\t\t// \tif (align == \"left\") {\n\t\t\t// \t\tmidAngle = (lineStartAngle + deltaAngle / 2) * $math.DEGREES;\n\t\t\t// \t}\n\t\t\t// \telse if () {\n\t\t\t// \t\tmidAngle = (lineStartAngle - deltaAngle / 2) * $math.DEGREES;\n\t\t\t// \t}\n\t\t\t// \tinward = (midAngle >= 270) || (midAngle <= 90);\n\t\t\t// }\n\n\t\t\t// Rotate letters if they are facing outward\n\t\t\tlineStartAngle += (Math.PI * (inward ? 0 : 1)); // Rotate 180 if outward\n\n\t\t\t// Savepoint\n\t\t\tcontext.save();\n\t\t\tif (interactive) {\n\t\t\t\tghostContext.save();\n\t\t\t}\n\n\t\t\t// Assume starting angle\n\t\t\tcontext.rotate(lineStartAngle);\n\t\t\tif (interactive) {\n\t\t\t\tghostContext.rotate(lineStartAngle);\n\t\t\t}\n\n\t\t\tlet angleShift = 0;\n\t\t\t$array.each(line.textChunks, (chunk, _index) => {\n\n\t\t\t\t// Draw the letter\n\t\t\t\tconst char = chunk.text;\n\t\t\t\tconst charWidth = chunk.width;\n\n\t\t\t\t// Rotate half a letter\n\t\t\t\tangleShift = (charWidth / 2) / (radius - textHeight) * clockwise;\n\t\t\t\tcontext.rotate(angleShift);\n\t\t\t\tif (interactive) {\n\t\t\t\t\tghostContext.rotate(angleShift);\n\t\t\t\t}\n\n\t\t\t\t// Set style\n\t\t\t\tif (chunk.style) {\n\t\t\t\t\tcontext.save();\n\t\t\t\t\tghostContext.save();\n\n\t\t\t\t\tcontext.font = chunk.style;\n\t\t\t\t\tif (interactive) {\n\t\t\t\t\t\tghostContext.font = chunk.style;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (chunk.fill) {\n\t\t\t\t\tcontext.save();\n\t\t\t\t\tcontext.fillStyle = chunk.fill.toCSS();\n\t\t\t\t\t// Color does not affect ghostContext so we not set it\n\t\t\t\t}\n\n\t\t\t\t// Center letters\n\t\t\t\tcontext.textBaseline = \"middle\";\n\t\t\t\tcontext.textAlign = \"center\";\n\t\t\t\tif (interactive) {\n\t\t\t\t\tghostContext.textBaseline = \"middle\";\n\t\t\t\t\tghostContext.textAlign = \"center\";\n\t\t\t\t}\n\n\t\t\t\t// Plop the letter\n\t\t\t\tif (layerDirty) {\n\t\t\t\t\tcontext.fillText(char, 0, (inward ? 1 : -1) * (0 - radius + textHeight / 2));\n\t\t\t\t}\n\t\t\t\tif (interactive) {\n\t\t\t\t\tghostContext.fillText(char, 0, (inward ? 1 : -1) * (0 - radius + textHeight / 2));\n\t\t\t\t}\n\n\t\t\t\tif (chunk.fill) {\n\t\t\t\t\tcontext.restore();\n\t\t\t\t\t// Color does not affect ghostContext so we not set it\n\t\t\t\t}\n\n\t\t\t\t// Reset style\n\t\t\t\tif (chunk.style) {\n\t\t\t\t\tcontext.restore();\n\t\t\t\t\tghostContext.restore();\n\t\t\t\t}\n\n\t\t\t\t// Rotate half a letter and add spacing\n\t\t\t\tangleShift = (charWidth / 2 + kerning) / (radius - textHeight) * clockwise;\n\t\t\t\tcontext.rotate(angleShift);\n\t\t\t\tif (interactive) {\n\t\t\t\t\tghostContext.rotate(angleShift);\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\t// Restore angle\n\t\t\tcontext.restore();\n\t\t\tif (interactive) {\n\t\t\t\tghostContext.restore();\n\t\t\t}\n\n\t\t\t// Adjust radius (for `inside = true`)\n\t\t\tif (inside) {\n\t\t\t\tradius -= textHeight;\n\t\t\t}\n\n\t\t});\n\n\t\t// Restore\n\t\tcontext.restore();\n\t\tif (interactive) {\n\t\t\tghostContext.restore();\n\t\t}\n\t}\n\n\tpublic _measure(layer: CanvasLayer): IBounds {\n\t\tswitch (this.textType) {\n\t\t\tcase \"circular\":\n\t\t\t\treturn this._measureCircular(layer);\n\t\t\tdefault:\n\t\t\t\treturn super._measure(layer);\n\t\t}\n\t}\n\n\tpublic _measureCircular(layer: CanvasLayer): IBounds {\n\t\tconst context = layer.context;\n\t\tconst ghostContext = this._renderer._ghostContext;\n\t\tconst rtl = this.style.direction == \"rtl\";\n\n\t\t// Reset text info\n\t\tthis._textInfo = [];\n\t\tthis._textReversed = false;\n\n\t\t// Pre-render\n\t\tcontext.save();\n\t\tghostContext.save();\n\t\tthis._prerender(layer, true);\n\n\t\t// Split up text into lines\n\t\tconst lines = this.text.toString().replace(/\\r/g, \"\").split(/\\n/);\n\t\tlet styleRestored = true;\n\n\t\t// Iterate through the lines\n\t\tlet offsetY = 0;\n\t\t$array.each(lines, (line, _index) => {\n\n\t\t\t// Split up line into format/value chunks\n\t\t\tlet chunks = TextFormatter.chunk(line, false, this.style.ignoreFormatting);\n\n\t\t\t// Init line object\n\t\t\tlet lineInfo: ILine = {\n\t\t\t\toffsetY: offsetY,\n\t\t\t\tascent: 0,\n\t\t\t\twidth: 0,\n\t\t\t\theight: 0,\n\t\t\t\tleft: 0,\n\t\t\t\tright: 0,\n\t\t\t\ttextChunks: []\n\t\t\t};\n\n\t\t\tlet currentStyle: string | undefined;\n\t\t\tlet currentFill: Color | undefined;\n\t\t\tlet currentChunkWidth: number | undefined;\n\n\t\t\t//while(chunk = chunks.shift()) {\n\t\t\t$array.each(chunks, (chunk, _index) => {\n\n\t\t\t\t// Format chunk\n\t\t\t\tif (chunk.type == \"format\") {\n\t\t\t\t\tif (chunk.text == \"[/]\") {\n\t\t\t\t\t\tif (!styleRestored) {\n\t\t\t\t\t\t\tcontext.restore();\n\t\t\t\t\t\t\tghostContext.restore();\n\t\t\t\t\t\t\tstyleRestored = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcurrentFill = undefined;\n\t\t\t\t\t\tcurrentStyle = undefined;\n\t\t\t\t\t\tcurrentChunkWidth = undefined;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tlet format = TextFormatter.getTextStyle(chunk.text);\n\t\t\t\t\t\tconst fontStyle = this._getFontStyle(format);\n\t\t\t\t\t\tcontext.save();\n\t\t\t\t\t\tghostContext.save();\n\t\t\t\t\t\tcontext.font = fontStyle;\n\t\t\t\t\t\tcurrentStyle = fontStyle;\n\t\t\t\t\t\tif (format.fill) {\n\t\t\t\t\t\t\tcurrentFill = <Color>format.fill;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ((<any>format).width) {\n\t\t\t\t\t\t\tcurrentChunkWidth = $type.toNumber((<any>format).width);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstyleRestored = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Text format\n\t\t\t\telse if (chunk.type == \"value\") {\n\n\t\t\t\t\t// Measure each letter\n\t\t\t\t\tconst chars = chunk.text.match(/./ug) || [];\n\t\t\t\t\tif (rtl) {\n\t\t\t\t\t\tchars.reverse();\n\t\t\t\t\t}\n\t\t\t\t\tfor (let i = 0; i < chars.length; i++) {\n\n\t\t\t\t\t\tconst char = chars[i];\n\n\t\t\t\t\t\t// Measure\n\t\t\t\t\t\tconst metrics = this._measureText(char, context);\n\t\t\t\t\t\tlet chunkWidth = metrics.width;\n\n\t\t\t\t\t\t// Chunk width?\n\t\t\t\t\t\tif (currentStyle && currentChunkWidth && (currentChunkWidth > chunkWidth)) {\n\t\t\t\t\t\t\tchunkWidth = currentChunkWidth;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst chunkHeight = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;\n\t\t\t\t\t\tif (chunkHeight > lineInfo.height) {\n\t\t\t\t\t\t\tlineInfo.height = chunkHeight;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (metrics.actualBoundingBoxAscent > lineInfo.ascent) {\n\t\t\t\t\t\t\tlineInfo.ascent = metrics.actualBoundingBoxAscent;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlineInfo.width += chunkWidth;\n\t\t\t\t\t\tlineInfo.left += metrics.actualBoundingBoxLeft;\n\t\t\t\t\t\tlineInfo.right += metrics.actualBoundingBoxRight;\n\t\t\t\t\t\tlineInfo.textChunks.push({\n\t\t\t\t\t\t\tstyle: currentStyle,\n\t\t\t\t\t\t\tfill: currentFill,\n\t\t\t\t\t\t\ttext: char,\n\t\t\t\t\t\t\twidth: chunkWidth,\n\t\t\t\t\t\t\theight: chunkHeight + metrics.actualBoundingBoxDescent,\n\t\t\t\t\t\t\tleft: metrics.actualBoundingBoxLeft,\n\t\t\t\t\t\t\tright: metrics.actualBoundingBoxRight,\n\t\t\t\t\t\t\tascent: metrics.actualBoundingBoxAscent,\n\t\t\t\t\t\t\toffsetX: 0,\n\t\t\t\t\t\t\toffsetY: chunkHeight,\n\t\t\t\t\t\t\ttextDecoration: undefined\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (rtl) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (this.style.lineHeight instanceof Percent) {\n\t\t\t\tlineInfo.height *= this.style.lineHeight.value;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlineInfo.height *= this.style.lineHeight || 1.2;\n\t\t\t}\n\n\t\t\tthis._textInfo!.push(lineInfo);\n\n\t\t\t//lineInfo.offsetY += lineInfo.ascent;\n\t\t\toffsetY += lineInfo.height;\n\n\n\t\t});\n\n\t\tif (!styleRestored) {\n\t\t\tcontext.restore();\n\t\t\tghostContext.restore();\n\t\t}\n\n\t\t// Adjust chunk internal offsets\n\t\t$array.each(this._textInfo, (lineInfo) => {\n\t\t\t$array.each(lineInfo.textChunks, (chunk) => {\n\t\t\t\tchunk.offsetY += Math.round((lineInfo.height - chunk.height + (lineInfo.ascent - chunk.ascent)) / 2);\n\t\t\t});\n\t\t});\n\n\t\tcontext.restore();\n\t\tghostContext.restore();\n\n\t\treturn {\n\t\t\tleft: 0,\n\t\t\ttop: 0,\n\t\t\tright: 0,\n\t\t\tbottom: 0,\n\t\t};\n\t}\n\n}\n\n/**\n * @ignore\n */\nexport class CanvasImage extends CanvasDisplayObject implements IPicture {\n\tpublic width: number | undefined;\n\tpublic height: number | undefined;\n\tpublic image: HTMLImageElement | undefined;\n\tpublic tainted?: boolean;\n\n\tpublic shadowColor?: Color;\n\tpublic shadowBlur?: number;\n\tpublic shadowOffsetX?: number;\n\tpublic shadowOffsetY?: number;\n\tpublic shadowOpacity?: number;\n\n\tprotected _imageMask: HTMLCanvasElement | undefined;\n\n\tconstructor(renderer: CanvasRenderer, image: HTMLImageElement | undefined) {\n\t\tsuper(renderer);\n\t\tthis.image = image;\n\t}\n\n\tprotected _dispose(): void {\n\t\tsuper._dispose();\n\n\t\tif (this._imageMask) {\n\t\t\tclearCanvas(this._imageMask);\n\t\t}\n\t}\n\n\tgetLocalBounds(): IBounds {\n\t\tif (!this._localBounds) {\n\n\n\t\t\tlet w = 0;\n\t\t\tlet h = 0;\n\n\t\t\tif (this.width) {\n\t\t\t\tw = this.width;\n\t\t\t}\n\t\t\tif (this.height) {\n\t\t\t\th = this.height;\n\t\t\t}\n\n\t\t\tthis._localBounds = {\n\t\t\t\tleft: 0,\n\t\t\t\ttop: 0,\n\t\t\t\tright: w,\n\t\t\t\tbottom: h\n\t\t\t};\n\n\t\t\tthis._addBounds(this._localBounds);\n\t\t}\n\t\treturn this._localBounds;\n\t}\n\n\tprotected _render(parentLayer: CanvasLayer): void {\n\t\tsuper._render(parentLayer);\n\n\t\tif (this.image) {\n\t\t\tconst layer = this._layer || parentLayer;\n\n\t\t\tif (this.tainted === undefined) {\n\t\t\t\tthis.tainted = isTainted(this.image);\n\t\t\t\tlayer.tainted = true;\n\t\t\t}\n\n\t\t\tif (this.tainted && this._renderer._omitTainted) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (layer.dirty) {\n\n\t\t\t\tif (this.shadowColor) {\n\t\t\t\t\tlayer.context.shadowColor = this.shadowColor.toCSS(this.shadowOpacity || 1);\n\t\t\t\t}\n\t\t\t\tif (this.shadowBlur) {\n\t\t\t\t\tlayer.context.shadowBlur = this.shadowBlur;\n\t\t\t\t}\n\t\t\t\tif (this.shadowOffsetX) {\n\t\t\t\t\tlayer.context.shadowOffsetX = this.shadowOffsetX;\n\t\t\t\t}\n\t\t\t\tif (this.shadowOffsetY) {\n\t\t\t\t\tlayer.context.shadowOffsetY = this.shadowOffsetY;\n\t\t\t\t}\n\n\t\t\t\t// TODO should this round ?\n\t\t\t\tconst width = this.width || this.image.naturalWidth;\n\t\t\t\tconst height = this.height || this.image.naturalHeight;\n\n\t\t\t\tlayer.context.drawImage(this.image, 0, 0, width, height);\n\t\t\t}\n\n\t\t\tif (this.interactive && this._isInteractive()) {\n\t\t\t\tconst mask = this._getMask(this.image);\n\n\t\t\t\tthis._renderer._ghostContext.drawImage(mask, 0, 0);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic clear(): void {\n\t\tsuper.clear();\n\t\tthis.image = undefined;\n\t\tthis._imageMask = undefined;\n\t}\n\n\tprotected _getMask(image: HTMLImageElement): HTMLCanvasElement {\n\t\tif (this._imageMask === undefined) {\n\t\t\t// TODO should this round ?\n\t\t\tconst width = this.width || image.naturalWidth;\n\t\t\tconst height = this.height || image.naturalHeight;\n\n\t\t\t// We need to create a second canvas because destination-in clears out the entire canvas\n\t\t\tconst canvas = document.createElement(\"canvas\");\n\t\t\tcanvas.width = width;\n\t\t\tcanvas.height = height;\n\n\t\t\tconst context = canvas.getContext(\"2d\")!;\n\n\t\t\tcontext.imageSmoothingEnabled = false;\n\n\t\t\tcontext.fillStyle = this._getColorId();\n\t\t\tcontext.fillRect(0, 0, width, height);\n\n\t\t\tif (!isTainted(image)) {\n\t\t\t\tcontext.globalCompositeOperation = \"destination-in\";\n\t\t\t\tcontext.drawImage(image, 0, 0, width, height);\n\t\t\t}\n\n\t\t\tthis._imageMask = canvas;\n\t\t}\n\n\t\treturn this._imageMask;\n\t}\n\n}\n\n/**\n * @ignore\n */\nexport class CanvasRendererEvent<A> implements IRendererEvent<A> {\n\tpublic id: Id;\n\tpublic simulated: boolean = false;\n\tpublic native: boolean = true;\n\n\tconstructor(public event: A, public point: IPoint, public bbox: DOMRect) {\n\t\tif ($utils.supports(\"touchevents\") && event instanceof Touch) {\n\t\t\tthis.id = event.identifier;\n\n\t\t} else {\n\t\t\tthis.id = null;\n\t\t}\n\t}\n}\n\n/**\n * @ignore\n */\ninterface Event<Key extends keyof IRendererEvents> {\n\tobject: CanvasDisplayObject;\n\tcontext: unknown;\n\tcallback: (event: IRendererEvents[Key]) => void;\n\tdisposed: boolean;\n}\n\n/**\n * @ignore\n */\ninterface Events<Key extends keyof IRendererEvents> {\n\tdisposer: IDisposer;\n\tcallbacks: Array<Event<Key>>;\n\tdispatching: boolean;\n\tcleanup: boolean;\n}\n\n/**\n * @ignore\n */\nexport class CanvasRenderer extends ArrayDisposer implements IRenderer, IDisposer {\n\tpublic view: HTMLElement = document.createElement(\"div\");\n\tprotected _layerDom: HTMLElement = document.createElement(\"div\");\n\n\tpublic layers: Array<CanvasLayer> = [];\n\tpublic _dirtyLayers: Array<CanvasLayer> = [];\n\tpublic defaultLayer: CanvasLayer = this.getLayer(0);\n\n\tprotected _ghostView: HTMLCanvasElement;\n\tpublic _ghostContext: CanvasRenderingContext2D;\n\n\tprotected _patternCanvas: HTMLCanvasElement = document.createElement(\"canvas\");\n\tprotected _patternContext: CanvasRenderingContext2D = this._patternCanvas.getContext(\"2d\")!;\n\n\tprotected _width: number = 0;\n\tprotected _height: number = 0;\n\n\tprotected _clientWidth: number = 0;\n\tprotected _clientHeight: number = 0;\n\n\tpublic resolution: number;\n\tpublic interactionsEnabled: boolean = true;\n\n\tprotected _listeners: { [key: string]: CounterDisposer } = {};\n\tprotected _events: { [Key in keyof IRendererEvents]?: Events<Key> } = {};\n\n\tprotected _colorId: number = 0;\n\tprotected _colorMap: { [color: string]: CanvasDisplayObject } = {};\n\n\tpublic _forceInteractive: number = 0;\n\tpublic _omitTainted: boolean = false;\n\n\t// TODO this should store the Id as well\n\tpublic _hovering: Set<CanvasDisplayObject> = new Set();\n\tpublic _dragging: Array<{ id: Id, value: CanvasDisplayObject }> = [];\n\tpublic _mousedown: Array<{ id: Id, value: CanvasDisplayObject }> = [];\n\n\tprotected _lastPointerMoveEvent: { events: Array<IPointerEvent>, native: boolean } | undefined;\n\n\tpublic tapToActivate: boolean = false;\n\tpublic tapToActivateTimeout: number = 3000;\n\tpublic _touchActive: boolean = false;\n\tprotected _touchActiveTimeout?: number;\n\n\t/*protected _mouseMoveThrottler: Throttler = new Throttler(() => {\n\t\tthis._dispatchGlobalMousemove(this._lastPointerMoveEvent.event, this._lastPointerMoveEvent.native);\n\t});\n\t*/\n\n\tconstructor(resolution?: number) {\n\t\tsuper();\n\n\t\tif (resolution == null) {\n\t\t\tthis.resolution = window.devicePixelRatio;\n\t\t} else {\n\t\t\tthis.resolution = resolution;\n\t\t}\n\n\t\tthis.view.style.position = \"absolute\";\n\t\tthis.view.appendChild(this._layerDom);\n\n\t\tthis._disposers.push(new Disposer(() => {\n\t\t\t$object.each(this._events, (_key, events) => {\n\t\t\t\tevents.disposer.dispose();\n\t\t\t});\n\n\t\t\t$array.each(this.layers, (layer) => {\n\t\t\t\tclearCanvas(layer.view);\n\n\t\t\t\tif (layer.exportableView) {\n\t\t\t\t\tclearCanvas(layer.exportableView);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tclearCanvas(this._ghostView);\n\t\t\tclearCanvas(this._patternCanvas);\n\t\t}));\n\n\t\t// @todo : do the same for ghost\n\t\tthis._ghostView = document.createElement(\"canvas\");\n\t\tthis._ghostContext = this._ghostView.getContext(\"2d\", { alpha: false })!;\n\t\tthis._ghostContext.imageSmoothingEnabled = false;\n\n\t\tthis._ghostView.style.position = \"absolute\";\n\t\tthis._ghostView.style.top = \"0px\";\n\t\tthis._ghostView.style.left = \"0px\";\n\n\t\tthis._disposers.push($utils.addEventListener(this._ghostView, \"click\", (originalEvent: MouseEvent) => {\n\t\t\tconst event = this.getEvent(originalEvent);\n\t\t\tconst target = this._getHitTarget(event.point, event.bbox);\n\t\t\tconsole.debug(target);\n\t\t}));\n\n\t\t// Monitor for possible pixel ratio changes (when page is zoomed)\n\t\tthis._disposers.push($utils.addEventListener(window, \"resize\", (_ev) => {\n\t\t\tif (resolution == null) {\n\t\t\t\tthis.resolution = window.devicePixelRatio;\n\t\t\t}\n\t\t}));\n\n\t\t// We need this in order top prevent default touch gestures when dragging\n\t\t// draggable elements\n\t\tif ($utils.supports(\"touchevents\")) {\n\t\t\tconst listener = (ev: any) => {\n\t\t\t\tif (this._dragging.length !== 0) {\n\t\t\t\t\t$array.eachContinue(this._dragging, (item) => {\n\t\t\t\t\t\tif (item.value.shouldCancelTouch()) {\n\t\t\t\t\t\t\tev.preventDefault();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// If touch down happends, delay touch out\n\t\t\t\tif (this._touchActiveTimeout) {\n\t\t\t\t\tthis._delayTouchDeactivate();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis._disposers.push($utils.addEventListener(window, \"touchstart\", listener, { passive: false }));\n\t\t\tthis._disposers.push($utils.addEventListener(this.view, \"touchstart\", listener, { passive: false }));\n\n\t\t\tthis._disposers.push($utils.addEventListener(this.view, \"touchmove\", () => {\n\t\t\t\t// If touch is moving, delay touch out\n\t\t\t\tif (this._touchActiveTimeout) {\n\t\t\t\t\tthis._delayTouchDeactivate();\n\t\t\t\t}\n\t\t\t}, { passive: true }));\n\n\t\t\tthis._disposers.push($utils.addEventListener(window, \"click\", (_ev: any) => {\n\t\t\t\tthis._touchActive = false;\n\t\t\t}, { passive: true }));\n\n\t\t\tthis._disposers.push($utils.addEventListener(this.view, \"click\", (_ev: any) => {\n\t\t\t\twindow.setTimeout(() => {\n\t\t\t\t\tthis._touchActive = true;\n\t\t\t\t\tthis._delayTouchDeactivate();\n\t\t\t\t}, 100);\n\t\t\t}, { passive: true }));\n\n\t\t}\n\n\t\t// Prevent scrolling of the window when hovering on \"wheelable\" object\n\t\tif ($utils.supports(\"wheelevents\")) {\n\t\t\tthis._disposers.push($utils.addEventListener(this.view, \"wheel\", (ev) => {\n\t\t\t\tlet prevent = false;\n\t\t\t\tthis._hovering.forEach((obj) => {\n\t\t\t\t\tif (obj.wheelable) {\n\t\t\t\t\t\tprevent = true;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (prevent) {\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t}\n\t\t\t}, { passive: false }));\n\t\t}\n\n\t}\n\n\tprotected _delayTouchDeactivate(): void {\n\t\tif (this._touchActiveTimeout) {\n\t\t\tclearTimeout(this._touchActiveTimeout);\n\t\t}\n\t\tif (this.tapToActivateTimeout > 0) {\n\t\t\tthis._touchActiveTimeout = window.setTimeout(() => {\n\t\t\t\tthis._touchActive = false;\n\t\t\t}, this.tapToActivateTimeout);\n\t\t}\n\t}\n\n\tpublic get debugGhostView(): boolean {\n\t\treturn !!this._ghostView.parentNode;\n\t}\n\n\tpublic set debugGhostView(value: boolean) {\n\t\tif (value) {\n\t\t\tif (!this._ghostView.parentNode) {\n\t\t\t\tthis.view.appendChild(this._ghostView);\n\t\t\t}\n\n\t\t} else {\n\t\t\tif (this._ghostView.parentNode) {\n\t\t\t\tthis._ghostView.parentNode.removeChild(this._ghostView);\n\t\t\t}\n\t\t}\n\t}\n\n\tcreateLinearGradient(x1: number, y1: number, x2: number, y2: number): CanvasGradient {\n\t\treturn this.defaultLayer.context.createLinearGradient(x1, y1, x2, y2);\n\t}\n\n\tcreateRadialGradient(x1: number, y1: number, radius1: number, x2: number, y2: number, radius2: number): CanvasGradient {\n\t\treturn this.defaultLayer.context.createRadialGradient(x1, y1, radius1, x2, y2, radius2);\n\t}\n\n\tcreatePattern(graphics: CanvasGraphics, background: CanvasGraphics, repetition: string, width: number, height: number): CanvasPattern {\n\t\t// const patternCanvas = document.createElement(\"canvas\");\n\t\t// const patternContext = patternCanvas.getContext(\"2d\")!;\n\t\t// patternCanvas.width = width;\n\t\t// patternCanvas.height = height;\n\t\t// if (fill) {\n\t\t// \tpatternContext.fillStyle = fill.toCSS();\n\t\t// \tpatternContext.fillRect(0, 0, patternCanvas.width, patternCanvas.height);\n\t\t// }\n\n\t\t// const layer = {\n\t\t// \tview: patternCanvas,\n\t\t// \tcontext: patternContext,\n\t\t// \tvisible: true,\n\t\t// \torder: 0,\n\t\t// \twidth: width,\n\t\t// \theight: height,\n\t\t// \tdirty: true\n\t\t// };\n\n\t\t// // patternContext.arc(0, 0, 50, 0, .5 * Math.PI);\n\t\t// // patternContext.stroke();\n\n\t\t// image.targetLayer = layer;\n\t\t// image.render(layer);\n\n\t\t//this._layerDom.appendChild(patternCanvas);\n\n\t\tthis._patternCanvas.width = width;\n\t\tthis._patternCanvas.height = height;\n\n\t\tthis._patternContext.clearRect(0, 0, width, height);\n\n\t\t// patternCanvas.style.width = width * this.resolution + \"px\";\n\t\t// patternCanvas.style.height = height * this.resolution + \"px\";\n\n\t\tbackground.renderDetached(this._patternContext);\n\t\tgraphics.renderDetached(this._patternContext);\n\n\t\treturn this._patternContext.createPattern(this._patternCanvas, repetition)!;\n\t}\n\n\tmakeContainer(): CanvasContainer {\n\t\treturn new CanvasContainer(this);\n\t}\n\n\tmakeGraphics(): CanvasGraphics {\n\t\treturn new CanvasGraphics(this);\n\t}\n\n\tmakeText(text: string, style: CanvasTextStyle): CanvasText {\n\t\treturn new CanvasText(this, text, style);\n\t}\n\n\tmakeTextStyle(): CanvasTextStyle {\n\t\treturn new CanvasTextStyle();\n\t}\n\n\tmakeRadialText(text: string, style: CanvasTextStyle): CanvasRadialText {\n\t\treturn new CanvasRadialText(this, text, style);\n\t}\n\n\tmakePicture(image: HTMLImageElement | undefined): CanvasImage {\n\t\treturn new CanvasImage(this, image);\n\t}\n\n\tresize(width: number, height: number): void {\n\t\tthis._clientWidth = width;\n\t\tthis._clientHeight = height;\n\t\tthis._width = Math.floor(width * this.resolution);\n\t\tthis._height = Math.floor(height * this.resolution);\n\n\t\t$array.each(this.layers, (layer) => {\n\t\t\tif (layer) {\n\t\t\t\tlayer.dirty = true;\n\n\t\t\t\tif (layer.width != null) {\n\t\t\t\t\tlayer.view.width = layer.width;\n\t\t\t\t\tlayer.view.style.width = layer.width + \"px\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tlayer.view.width = this._width;\n\t\t\t\t\tlayer.view.style.width = width + \"px\";\n\t\t\t\t}\n\n\t\t\t\tif (layer.height != null) {\n\t\t\t\t\tlayer.view.height = layer.height;\n\t\t\t\t\tlayer.view.style.height = layer.height + \"px\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tlayer.view.height = this._height;\n\t\t\t\t\tlayer.view.style.height = height + \"px\";\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// @todo: do the same for ghost canvases\n\t\tthis._ghostView.width = this._width;\n\t\tthis._ghostView.height = this._height;\n\t\tthis._ghostView.style.width = width + \"px\";\n\t\tthis._ghostView.style.height = height + \"px\";\n\n\t\tthis.view.style.width = width + \"px\";\n\t\tthis.view.style.height = height + \"px\";\n\t}\n\n\tprivate createDetachedLayer(): CanvasLayer {\n\t\tconst view = document.createElement(\"canvas\");\n\t\tconst context = view.getContext(\"2d\")!;\n\t\tconst layer = {\n\t\t\tview: view,\n\t\t\tcontext: context,\n\t\t\torder: 0,\n\t\t\tvisible: true,\n\t\t\twidth: undefined,\n\t\t\theight: undefined,\n\t\t\tdirty: true,\n\t\t\ttainted: false\n\t\t};\n\n\t\tview.style.position = \"absolute\";\n\t\tview.style.top = \"0px\";\n\t\tview.style.left = \"0px\";\n\n\t\treturn layer;\n\t}\n\n\tgetLayerByOrder(order: number): CanvasLayer | undefined {\n\t\tconst layers = this.layers;\n\t\tconst length = layers.length;\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tconst layer = layers[i];\n\t\t\tif (layer.order == order) {\n\t\t\t\treturn layer;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetLayer(order: number, visible: boolean = true): CanvasLayer {\n\t\tlet existingLayer = this.getLayerByOrder(order);\n\t\tif (existingLayer) {\n\t\t\treturn existingLayer;\n\t\t}\n\n\t\tconst layer = this.createDetachedLayer();\n\t\tlayer.order = order;\n\t\tlayer.visible = visible;\n\n\t\tif (layer.visible && this._width) {\n\t\t\tlayer.view.width = this._width;\n\t\t\tlayer.view.style.width = this._clientWidth + \"px\";\n\t\t\tlayer.view.height = this._height;\n\t\t\tlayer.view.style.height = this._clientHeight + \"px\";\n\t\t}\n\n\t\tconst layers = this.layers;\n\n\t\tlayers.push(layer);\n\n\t\tlayers.sort((a, b) => {\n\t\t\tif (a.order > b.order) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\telse if (a.order < b.order) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\n\t\tconst length = layers.length;\n\t\tconst layerIndex = $array.indexOf(layers, layer);\n\t\tlet next;\n\n\t\tfor (let i = layerIndex + 1; i < length; i++) {\n\t\t\tif (layers[i].visible) {\n\t\t\t\tnext = layers[i];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (layer.visible) {\n\t\t\tif (next === undefined) {\n\t\t\t\tthis._layerDom.appendChild(layer.view);\n\n\t\t\t} else {\n\t\t\t\tthis._layerDom.insertBefore(layer.view, next.view);\n\t\t\t}\n\t\t}\n\n\t\treturn layer;\n\t}\n\n\trender(root: CanvasDisplayObject): void {\n\n\t\tthis._dirtyLayers.length = 0;\n\n\t\t$array.each(this.layers, (layer) => {\n\t\t\tif (layer) {\n\t\t\t\tif (layer.dirty && layer.visible) {\n\t\t\t\t\tconst context = layer.context;\n\n\t\t\t\t\tthis._dirtyLayers.push(layer);\n\n\t\t\t\t\tcontext.save();\n\t\t\t\t\tcontext.clearRect(0, 0, this._width, this._height);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis._ghostContext.save();\n\t\t//this._ghostContext.clearRect(0, 0, this._width, this._height);\n\t\t//this._ghostContext.beginPath();\n\t\tthis._ghostContext.fillStyle = '#000';\n\t\tthis._ghostContext.fillRect(0, 0, this._width, this._height);\n\n\t\troot.render(this.defaultLayer);\n\n\t\tthis._ghostContext.restore();\n\n\t\t//setTimeout(() => {\n\n\t\t// Remove this after the Chrome bug is fixed:\n\t\t// https://bugs.chromium.org/p/chromium/issues/detail?id=1279394\n\t\t$array.each(this.layers, (layer) => {\n\t\t\tif (layer) {\n\t\t\t\tconst context = layer.context;\n\t\t\t\tcontext.beginPath();\n\t\t\t\tcontext.moveTo(0, 0);\n\t\t\t\tcontext.stroke();\n\t\t\t}\n\t\t});\n\n\t\t$array.each(this._dirtyLayers, (layer) => {\n\t\t\tlayer.context.restore();\n\t\t\tlayer.dirty = false;\n\t\t});\n\t\t//}, 100)\n\n\t\tif (this._hovering.size && this._lastPointerMoveEvent) {\n\t\t\t//this._mouseMoveThrottler.run();\n\t\t\tconst native = this._lastPointerMoveEvent.native;\n\n\t\t\t$array.each(this._lastPointerMoveEvent.events, (event) => {\n\t\t\t\tthis._dispatchGlobalMousemove(event, native);\n\t\t\t});\n\t\t}\n\t}\n\n\tpaintId(obj: CanvasDisplayObject): string {\n\t\tconst id = distributeId(++this._colorId);\n\t\tconst color = Color.fromHex(id).toCSS();\n\t\tthis._colorMap[color] = obj;\n\t\treturn color;\n\t}\n\n\t_removeObject(obj: CanvasDisplayObject): void {\n\t\tif (obj._colorId !== undefined) {\n\t\t\tdelete this._colorMap[obj._colorId];\n\t\t}\n\t}\n\n\t// protected _identifyObjectByColor(colorId: number): CanvasDisplayObject | undefined {\n\t// \treturn this._colorMap[colorId];\n\t// }\n\n\tpublic getEvent<A extends IPointerEvent>(originalEvent: A, adjustPoint: boolean = true): CanvasRendererEvent<A> {\n\t\tconst bbox: DOMRect = adjustPoint ? this.view.getBoundingClientRect() : new DOMRect(0, 0, 0, 0);\n\n\t\treturn new CanvasRendererEvent(\n\t\t\toriginalEvent,\n\t\t\t(originalEvent.clientX || originalEvent.clientY ? {\n\t\t\t\tx: originalEvent.clientX - (originalEvent.clientX ? bbox.left : 0),\n\t\t\t\ty: originalEvent.clientY - (originalEvent.clientY ? bbox.top : 0),\n\t\t\t} : {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0\n\t\t\t}),\n\t\t\tbbox,\n\t\t);\n\t}\n\n\t_getHitTarget(point: IPoint, bbox: DOMRect): CanvasDisplayObject | undefined | false {\n\t\tif (point.x < 0 || point.x > bbox.width || point.y < 0 || point.y > bbox.height) {\n\t\t\treturn;\n\t\t}\n\t\telse {\n\t\t\tconst pixel = this._ghostContext.getImageData(\n\t\t\t\t// TODO should this round ?\n\t\t\t\tMath.round((point.x / bbox.width) * this._width),\n\t\t\t\tMath.round((point.y / bbox.height) * this._height),\n\t\t\t\t1,\n\t\t\t\t1\n\t\t\t);\n\n\t\t\tif (pixel.data[0] === 0 && pixel.data[1] === 0 && pixel.data[2] === 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst colorId = Color.fromRGB(pixel.data[0], pixel.data[1], pixel.data[2]).toCSS();\n\t\t\tconst hit = this._colorMap[colorId];\n\n\t\t\treturn hit;\n\t\t}\n\t}\n\n\t_withEvents<Key extends keyof IRendererEvents>(key: Key, f: (events: Events<Key>) => void): void {\n\t\tconst events = this._events[key] as Events<Key> | undefined;\n\n\t\tif (events !== undefined) {\n\t\t\tevents.dispatching = true;\n\n\t\t\ttry {\n\t\t\t\tf(events);\n\n\t\t\t} finally {\n\t\t\t\tevents.dispatching = false;\n\n\t\t\t\tif (events.cleanup) {\n\t\t\t\t\tevents.cleanup = false;\n\n\t\t\t\t\t$array.keepIf(events.callbacks, (callback) => {\n\t\t\t\t\t\treturn !callback.disposed;\n\t\t\t\t\t});\n\n\t\t\t\t\tif (events.callbacks.length === 0) {\n\t\t\t\t\t\tevents.disposer.dispose();\n\t\t\t\t\t\tdelete this._events[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_dispatchEventAll<Key extends keyof IRendererEvents>(key: Key, event: IRendererEvents[Key]): void {\n\t\tif (!this.interactionsEnabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._withEvents(key, (events) => {\n\t\t\t$array.each(events.callbacks, (callback) => {\n\t\t\t\tif (!callback.disposed) {\n\t\t\t\t\tcallback.callback.call(callback.context, event);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\t_dispatchEvent<Key extends keyof IRendererEvents>(key: Key, target: CanvasDisplayObject, event: IRendererEvents[Key]): boolean {\n\t\tif (!this.interactionsEnabled) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet dispatched = false;\n\n\t\tthis._withEvents(key, (events) => {\n\t\t\t$array.each(events.callbacks, (callback) => {\n\t\t\t\tif (!callback.disposed && callback.object === target) {\n\t\t\t\t\tcallback.callback.call(callback.context, event);\n\t\t\t\t\tdispatched = true;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\treturn dispatched;\n\t}\n\n\t_dispatchMousedown(originalEvent: IPointerEvent): void {\n\n\t\tconst button = (<PointerEvent>originalEvent).button;\n\t\tif (button != 0 && button != 2 && button != 1 && button !== undefined) {\n\t\t\t// Ignore non-primary mouse buttons\n\t\t\treturn;\n\t\t}\n\n\t\tconst event = this.getEvent(originalEvent);\n\t\tconst target = this._getHitTarget(event.point, event.bbox);\n\n\n\t\tif (target) {\n\t\t\tconst id = event.id;\n\n\t\t\tlet dragged = false;\n\n\t\t\teachTargets(target, (obj) => {\n\t\t\t\tconst info = { id: id, value: obj };\n\n\t\t\t\tthis._mousedown.push(info);\n\n\t\t\t\tif (!dragged && this._dispatchEvent(\"pointerdown\", obj, event)) {\n\t\t\t\t\t// Only dispatch the first element which matches\n\t\t\t\t\tdragged = true;\n\n\t\t\t\t\tconst has = this._dragging.some((x) => {\n\t\t\t\t\t\treturn x.value === obj && x.id === id;\n\t\t\t\t\t});\n\n\t\t\t\t\tif (!has) {\n\t\t\t\t\t\tthis._dragging.push(info);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t});\n\t\t}\n\t}\n\n\t_dispatchGlobalMousemove(originalEvent: IPointerEvent, native: boolean): void {\n\t\tconst event = this.getEvent(originalEvent);\n\n\t\tconst target = this._getHitTarget(event.point, event.bbox);\n\t\tevent.native = native;\n\n\t\tif (target) {\n\t\t\tthis._hovering.forEach((obj) => {\n\t\t\t\tif (!obj.contains(target)) {\n\t\t\t\t\tthis._hovering.delete(obj);\n\t\t\t\t\tif (obj.cursorOverStyle) {\n\t\t\t\t\t\t$utils.setStyle(document.body, \"cursor\", obj._replacedCursorStyle!);\n\t\t\t\t\t}\n\t\t\t\t\tthis._dispatchEvent(\"pointerout\", obj, event);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (event.native) {\n\t\t\t\teachTargets(target, (obj) => {\n\t\t\t\t\tif (!this._hovering.has(obj)) {\n\t\t\t\t\t\tthis._hovering.add(obj);\n\t\t\t\t\t\tif (obj.cursorOverStyle) {\n\t\t\t\t\t\t\tobj._replacedCursorStyle = $utils.getStyle(document.body, \"cursor\");\n\t\t\t\t\t\t\t$utils.setStyle(document.body, \"cursor\", obj.cursorOverStyle);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._dispatchEvent(\"pointerover\", obj, event);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t//} else if (target === false) {\n\t\t} else {\n\t\t\tthis._hovering.forEach((obj) => {\n\t\t\t\tif (obj.cursorOverStyle) {\n\t\t\t\t\t$utils.setStyle(document.body, \"cursor\", obj._replacedCursorStyle!);\n\t\t\t\t}\n\t\t\t\tthis._dispatchEvent(\"pointerout\", obj, event);\n\t\t\t});\n\n\t\t\tthis._hovering.clear();\n\t\t}\n\t\tthis._dispatchEventAll(\"globalpointermove\", event);\n\t}\n\n\t_dispatchGlobalMouseup(originalEvent: IPointerEvent, native: boolean): void {\n\t\tconst event = this.getEvent(originalEvent);\n\t\tevent.native = native;\n\t\t//const target = this._getHitTarget(event.point);\n\t\tthis._dispatchEventAll(\"globalpointerup\", event);\n\t}\n\n\t_dispatchDragMove(originalEvent: IPointerEvent): void {\n\t\tif (this._dragging.length !== 0) {\n\t\t\tconst event = this.getEvent(originalEvent);\n\t\t\tconst id = event.id;\n\n\t\t\tthis._dragging.forEach((obj) => {\n\t\t\t\tif (obj.id === id) {\n\t\t\t\t\tthis._dispatchEvent(\"pointermove\", obj.value, event);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t_dispatchDragEnd(originalEvent: IPointerEvent): void {\n\t\tconst button = (<PointerEvent>originalEvent).button;\n\t\tlet clickevent: \"click\" | \"rightclick\" | \"middleclick\";\n\t\tif (button == 0 || button === undefined) {\n\t\t\tclickevent = \"click\";\n\t\t}\n\t\telse if (button == 2) {\n\t\t\tclickevent = \"rightclick\";\n\t\t}\n\t\telse if (button == 1) {\n\t\t\tclickevent = \"middleclick\";\n\t\t}\n\t\telse {\n\t\t\t// Ignore non-primary mouse buttons\n\t\t\treturn;\n\t\t}\n\n\t\tconst event = this.getEvent(originalEvent);\n\t\tconst id = event.id;\n\n\t\tif (this._mousedown.length !== 0) {\n\t\t\tconst target = this._getHitTarget(event.point, event.bbox);\n\n\t\t\tif (target) {\n\t\t\t\tthis._mousedown.forEach((obj) => {\n\t\t\t\t\tif (obj.id === id && obj.value.contains(target)) {\n\t\t\t\t\t\tthis._dispatchEvent(clickevent, obj.value, event);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis._mousedown.length = 0;\n\t\t}\n\n\t\tif (this._dragging.length !== 0) {\n\t\t\tthis._dragging.forEach((obj) => {\n\t\t\t\tif (obj.id === id) {\n\t\t\t\t\tthis._dispatchEvent(\"pointerup\", obj.value, event);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis._dragging.length = 0;\n\t\t}\n\t}\n\n\t_dispatchDoubleClick(originalEvent: IPointerEvent): void {\n\t\tconst event = this.getEvent(originalEvent);\n\t\tconst target = this._getHitTarget(event.point, event.bbox);\n\n\t\tif (target) {\n\t\t\teachTargets(target, (obj) => {\n\t\t\t\tif (this._dispatchEvent(\"dblclick\", obj, event)) {\n\t\t\t\t\treturn false;\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t_dispatchWheel(originalEvent: WheelEvent): void {\n\t\tconst event = this.getEvent(originalEvent);\n\t\tconst target = this._getHitTarget(event.point, event.bbox);\n\n\t\tif (target) {\n\t\t\teachTargets(target, (obj) => {\n\t\t\t\tif (this._dispatchEvent(\"wheel\", obj, event)) {\n\t\t\t\t\treturn false;\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t_makeSharedEvent(key: string, f: () => IDisposer): IDisposer {\n\t\tif (this._listeners[key] === undefined) {\n\t\t\tconst listener = f();\n\n\t\t\tthis._listeners[key] = new CounterDisposer(() => {\n\t\t\t\tdelete this._listeners[key];\n\t\t\t\tlistener.dispose();\n\t\t\t});\n\t\t}\n\n\t\treturn this._listeners[key].increment();\n\t}\n\n\t_onPointerEvent(name: string, f: (event: Array<IPointerEvent>, native: boolean) => void): IDisposer {\n\t\tlet native = false;\n\t\tlet timer: number | null = null;\n\n\t\tfunction clear() {\n\t\t\ttimer = null;\n\t\t\tnative = false;\n\t\t}\n\n\t\treturn new MultiDisposer([\n\t\t\tnew Disposer(() => {\n\t\t\t\tif (timer !== null) {\n\t\t\t\t\tclearTimeout(timer);\n\t\t\t\t}\n\n\t\t\t\tclear();\n\t\t\t}),\n\n\t\t\t$utils.addEventListener(this.view, $utils.getRendererEvent(name), (_) => {\n\t\t\t\tnative = true;\n\n\t\t\t\tif (timer !== null) {\n\t\t\t\t\tclearTimeout(timer);\n\t\t\t\t}\n\n\t\t\t\ttimer = window.setTimeout(clear, 0);\n\t\t\t}),\n\n\t\t\tonPointerEvent(window, name, (ev) => {\n\t\t\t\tif (timer !== null) {\n\t\t\t\t\tclearTimeout(timer);\n\t\t\t\t\ttimer = null;\n\t\t\t\t}\n\n\t\t\t\tf(ev, native);\n\n\t\t\t\tnative = false;\n\t\t\t}),\n\t\t]);\n\t}\n\n\t// This ensures that only a single DOM event is added (e.g. only a single mousemove event listener)\n\t_initEvent(key: keyof IRendererEvents): IDisposer | undefined {\n\t\tswitch (key) {\n\t\t\tcase \"globalpointermove\":\n\t\t\tcase \"pointerover\":\n\t\t\tcase \"pointerout\":\n\t\t\t\treturn this._makeSharedEvent(\"pointermove\", () => {\n\t\t\t\t\tconst listener = (events: Array<IPointerEvent>, native: boolean) => {\n\t\t\t\t\t\tthis._lastPointerMoveEvent = { events, native };\n\n\t\t\t\t\t\t$array.each(events, (event) => {\n\t\t\t\t\t\t\tthis._dispatchGlobalMousemove(event, native);\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\n\t\t\t\t\treturn new MultiDisposer([\n\t\t\t\t\t\tthis._onPointerEvent(\"pointerdown\", listener),\n\t\t\t\t\t\tthis._onPointerEvent(\"pointermove\", listener),\n\t\t\t\t\t]);\n\t\t\t\t});\n\t\t\tcase \"globalpointerup\":\n\t\t\t\treturn this._makeSharedEvent(\"pointerup\", () => {\n\t\t\t\t\tvar mouseup = this._onPointerEvent(\"pointerup\", (events, native) => {\n\t\t\t\t\t\t$array.each(events, (event) => {\n\t\t\t\t\t\t\tthis._dispatchGlobalMouseup(event, native);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis._lastPointerMoveEvent = { events, native };\n\t\t\t\t\t});\n\n\t\t\t\t\tvar pointercancel = this._onPointerEvent(\"pointercancel\", (events, native) => {\n\t\t\t\t\t\t$array.each(events, (event) => {\n\t\t\t\t\t\t\tthis._dispatchGlobalMouseup(event, native);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis._lastPointerMoveEvent = { events, native };\n\t\t\t\t\t});\n\n\t\t\t\t\treturn new Disposer(() => {\n\t\t\t\t\t\tmouseup.dispose();\n\t\t\t\t\t\tpointercancel.dispose();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\tcase \"click\":\n\t\t\tcase \"rightclick\":\n\t\t\tcase \"middleclick\":\n\t\t\tcase \"pointerdown\":\n\t\t\t/*\n\t\t\t\treturn this._makeSharedEvent(\"pointerdown\", () => {\n\t\t\t\t\treturn this._onPointerEvent(\"pointerdown\", (event, native) => {\n\t\t\t\t\t\tthis._lastPointerMoveEvent = { event, native };\n\t\t\t\t\t\tthis._dispatchMousedown(event)\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t*/\n\t\t\tcase \"pointermove\":\n\t\t\tcase \"pointerup\":\n\t\t\t\treturn this._makeSharedEvent(\"pointerdown\", () => {\n\t\t\t\t\t//const throttler = new Throttler();\n\n\t\t\t\t\tconst mousedown = onPointerEvent(this.view, \"pointerdown\", (events) => {\n\t\t\t\t\t\t$array.each(events, (ev) => {\n\t\t\t\t\t\t\tthis._dispatchMousedown(ev);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\t// TODO handle throttling properly for multitouch\n\t\t\t\t\tconst mousemove = this._onPointerEvent(\"pointermove\", (ev: Array<IPointerEvent>) => {\n\t\t\t\t\t\t//throttler.throttle(() => {\n\t\t\t\t\t\t$array.each(ev, (ev) => {\n\t\t\t\t\t\t\tthis._dispatchDragMove(ev);\n\t\t\t\t\t\t});\n\t\t\t\t\t\t//});\n\t\t\t\t\t});\n\n\t\t\t\t\tconst mouseup = this._onPointerEvent(\"pointerup\", (ev: Array<IPointerEvent>) => {\n\t\t\t\t\t\t$array.each(ev, (ev) => {\n\t\t\t\t\t\t\tthis._dispatchDragEnd(ev);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tconst pointercancel = this._onPointerEvent(\"pointercancel\", (ev: Array<IPointerEvent>) => {\n\t\t\t\t\t\t$array.each(ev, (ev) => {\n\t\t\t\t\t\t\tthis._dispatchDragEnd(ev);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\treturn new Disposer(() => {\n\t\t\t\t\t\tmousedown.dispose();\n\t\t\t\t\t\tmousemove.dispose();\n\t\t\t\t\t\tmouseup.dispose();\n\t\t\t\t\t\tpointercancel.dispose();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\tcase \"dblclick\":\n\t\t\t\treturn this._makeSharedEvent(\"dblclick\", () => {\n\t\t\t\t\treturn this._onPointerEvent(\"dblclick\", (ev) => {\n\t\t\t\t\t\t$array.each(ev, (ev) => {\n\t\t\t\t\t\t\tthis._dispatchDoubleClick(ev);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\tcase \"wheel\":\n\t\t\t\treturn this._makeSharedEvent(\"wheel\", () => {\n\t\t\t\t\treturn $utils.addEventListener(window, $utils.getRendererEvent(\"wheel\"), (event: WheelEvent) => {\n\t\t\t\t\t\tthis._dispatchWheel(event);\n\t\t\t\t\t}, { passive: false });\n\t\t\t\t});\n\t\t}\n\t}\n\n\t_addEvent<C, Key extends keyof IRendererEvents>(object: CanvasDisplayObject, key: Key, callback: (this: C, event: IRendererEvents[Key]) => void, context?: C): IDisposer {\n\t\tlet events: Events<Key> | undefined = this._events[key] as any;\n\n\t\tif (events === undefined) {\n\t\t\tevents = this._events[key] = {\n\t\t\t\tdisposer: this._initEvent(key)!,\n\t\t\t\tcallbacks: [],\n\t\t\t\tdispatching: false,\n\t\t\t\tcleanup: false,\n\t\t\t};\n\t\t}\n\n\t\tconst listener = { object, context, callback, disposed: false };\n\n\t\tevents!.callbacks.push(listener);\n\n\t\treturn new Disposer(() => {\n\t\t\tlistener.disposed = true;\n\n\t\t\tif (events!.dispatching) {\n\t\t\t\tevents!.cleanup = true;\n\n\t\t\t} else {\n\t\t\t\t$array.removeFirst(events!.callbacks, listener);\n\n\t\t\t\tif (events!.callbacks.length === 0) {\n\t\t\t\t\tevents!.disposer.dispose();\n\t\t\t\t\tdelete this._events[key];\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic getCanvas(root: CanvasDisplayObject, options?: ICanvasOptions): HTMLCanvasElement {\n\n\t\t// Make sure everything is rendered\n\t\tthis.render(root);\n\n\t\tif (!options) {\n\t\t\toptions = {};\n\t\t}\n\n\t\tlet scale: number = this.resolution;\n\n\t\t// Check if we need to scale\n\t\tif (options.minWidth && (options.minWidth > this._width)) {\n\t\t\tlet minScale = options.minWidth / this._width;\n\t\t\tif (minScale > scale) {\n\t\t\t\tscale = minScale * this.resolution;\n\t\t\t}\n\t\t}\n\n\t\tif (options.minHeight && (options.minHeight > this._height)) {\n\t\t\tlet minScale = options.minHeight / this._height;\n\t\t\tif (minScale > scale) {\n\t\t\t\tscale = minScale * this.resolution;\n\t\t\t}\n\t\t}\n\n\t\tif (options.maxWidth && (options.maxWidth < this._width)) {\n\t\t\tlet maxScale = options.maxWidth / this._width;\n\t\t\tif (maxScale < scale) {\n\t\t\t\tscale = maxScale * this.resolution;\n\t\t\t}\n\t\t}\n\n\t\tif (options.maxHeight && (options.maxHeight > this._height)) {\n\t\t\tlet maxScale = options.maxHeight / this._height;\n\t\t\tif (maxScale < scale) {\n\t\t\t\tscale = maxScale * this.resolution;\n\t\t\t}\n\t\t}\n\n\t\t// Check if we need to compensate for pixel ratio\n\t\tif (options.maintainPixelRatio) {\n\t\t\tscale /= this.resolution;\n\t\t}\n\n\t\t// Init list canvases to remove from DOM after export\n\t\tconst canvases: HTMLCanvasElement[] = [];\n\n\t\t// Set up new canvas for export\n\t\tlet forceRender = false;\n\t\tlet canvasWidth = this._width;\n\t\tlet canvasHeight = this._height;\n\t\tconst canvas = document.createElement(\"canvas\");\n\t\tif (scale != this.resolution) {\n\t\t\tforceRender = true;\n\t\t\tcanvasWidth = this._width * scale / this.resolution;\n\t\t\tcanvasHeight = this._height * scale / this.resolution;\n\t\t}\n\n\t\tcanvas.width = canvasWidth;\n\t\tcanvas.height = canvasHeight;\n\n\t\t// Add to DOM so it inherits CSS\n\t\tcanvas.style.position = \"fixed\";\n\t\tcanvas.style.top = \"-10000px\";\n\t\tthis.view.appendChild(canvas);\n\t\tcanvases.push(canvas);\n\n\t\t// Context\n\t\tconst context = canvas.getContext(\"2d\")!;\n\n\t\tlet width = 0;\n\t\tlet height = 0;\n\t\tlet needRerender = false;\n\n\t\t$array.each(this.layers, (layer) => {\n\t\t\tif (layer && layer.visible) {\n\t\t\t\tif (layer.tainted || forceRender) {\n\t\t\t\t\tneedRerender = true;\n\n\t\t\t\t\tlayer.exportableView = layer.view;\n\t\t\t\t\tlayer.exportableContext = layer.context;\n\n\t\t\t\t\tlayer.view = document.createElement(\"canvas\");\n\n\t\t\t\t\t// Add to DOM so it inherits CSS\n\t\t\t\t\tthis.view.style.position = \"fixed\";\n\t\t\t\t\tthis.view.style.top = \"-10000px\";\n\t\t\t\t\tthis.view.appendChild(layer.view);\n\t\t\t\t\tcanvases.push(layer.view);\n\n\t\t\t\t\tlayer.view.width = canvasWidth;\n\t\t\t\t\tlayer.view.height = canvasHeight;\n\n\t\t\t\t\tlayer.context = layer.view.getContext(\"2d\")!;\n\n\t\t\t\t\tlayer.dirty = true;\n\t\t\t\t\tlayer.scale = scale;\n\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (needRerender) {\n\t\t\tthis._omitTainted = true;\n\t\t\tthis.render(root);\n\t\t\tthis._omitTainted = false;\n\t\t}\n\n\t\t$array.each(this.layers, (layer) => {\n\t\t\tif (layer && layer.visible) {\n\n\t\t\t\t// Layer is fine. Just plop it into our target canvas\n\t\t\t\tcontext.drawImage(layer.view, 0, 0);\n\n\t\t\t\t// Restore layer original canvas\n\t\t\t\tif (layer.exportableView) {\n\t\t\t\t\tlayer.view = layer.exportableView;\n\t\t\t\t\tlayer.exportableView = undefined;\n\t\t\t\t}\n\n\t\t\t\tif (layer.exportableContext) {\n\t\t\t\t\tlayer.context = layer.exportableContext;\n\t\t\t\t\tlayer.exportableContext = undefined;\n\t\t\t\t}\n\n\t\t\t\tif (width < layer.view.clientWidth) {\n\t\t\t\t\twidth = layer.view.clientWidth;\n\t\t\t\t}\n\t\t\t\tif (height < layer.view.clientHeight) {\n\t\t\t\t\theight = layer.view.clientHeight;\n\t\t\t\t}\n\n\t\t\t\tlayer.scale = undefined;\n\t\t\t}\n\t\t});\n\n\t\tcanvas.style.width = width + \"px\";\n\t\tcanvas.style.height = height + \"px\";\n\n\t\t$array.each(canvases, (canvas) => {\n\t\t\tthis.view.style.position = \"\";\n\t\t\tthis.view.style.top = \"\";\n\t\t\tthis.view.removeChild(canvas);\n\t\t})\n\n\t\treturn canvas;\n\t}\n\n}\n\n/**\n * @ignore\n */\nexport interface CanvasLayer extends ILayer {\n\tview: HTMLCanvasElement;\n\tcontext: CanvasRenderingContext2D;\n\ttainted?: boolean;\n\texportableView?: HTMLCanvasElement;\n\texportableContext?: CanvasRenderingContext2D;\n\tscale?: number;\n}\n", "import type { IAnimation } from \"./util/Animation\";\nimport type { Entity } from \"./util/Entity\";\nimport type { Sprite } from \"./render/Sprite\";\nimport type { Theme } from \"./Theme\";\nimport type { IPoint } from \"./util/IPoint\";\nimport type { IRenderer, IPointerEvent } from \"./render/backend/Renderer\";\nimport type { Timezone } from \"./util/Timezone\";\n\nimport { Container } from \"./render/Container\";\nimport { Text } from \"./render/Text\";\nimport { HorizontalLayout } from \"./render/HorizontalLayout\";\nimport { VerticalLayout } from \"./render/VerticalLayout\";\nimport { GridLayout } from \"./render/GridLayout\";\nimport { IDisposer, Disposer } from \"./util/Disposer\";\nimport { ResizeSensor } from \"./util/ResizeSensor\";\nimport { InterfaceColors } from \"./util/InterfaceColors\";\nimport { Graphics } from \"./render/Graphics\";\nimport { Rectangle } from \"./render/Rectangle\";\nimport { Tooltip } from \"./render/Tooltip\";\nimport { NumberFormatter } from \"./util/NumberFormatter\";\nimport { DateFormatter } from \"./util/DateFormatter\";\nimport { DurationFormatter } from \"./util/DurationFormatter\";\nimport { ILocale, Language } from \"./util/Language\";\nimport { Events, EventDispatcher } from \"./util/EventDispatcher\";\nimport { DefaultTheme } from \"../themes/DefaultTheme\";\nimport { CanvasRenderer } from \"./render/backend/CanvasRenderer\";\nimport { p100, percent } from \"./util/Percent\";\nimport { color } from \"./util/Color\";\nimport { populateString } from \"./util/PopulateString\";\nimport { registry } from \"./Registry\";\n\nimport * as $order from \"./util/Order\";\nimport * as $array from \"./util/Array\";\nimport * as $object from \"./util/Object\";\nimport * as $utils from \"./util/Utils\";\nimport * as $type from \"./util/Type\";\n\n\nimport en from \"../../locales/en\";\n\n\nfunction rAF(fps: number | undefined, callback: (currentTime: number) => void): void {\n\tif (fps == null) {\n\t\trequestAnimationFrame(callback);\n\n\t} else {\n\t\tsetTimeout(() => {\n\t\t\trequestAnimationFrame(callback);\n\t\t}, 1000 / fps);\n\t}\n}\n\n\n/**\n * @ignore\n */\ninterface IParent extends Entity {\n\t_prepareChildren(): void;\n\t_updateChildren(): void;\n}\n\ninterface IBounds extends Entity {\n\tdepth(): number;\n\t_updateBounds(): void;\n}\n\n\nexport interface IRootEvents {\n\tframestarted: {\n\t\ttimestamp: number;\n\t};\n\tframeended: {\n\t\ttimestamp: number;\n\t};\n}\n\n\nexport interface IRootSettings {\n\tuseSafeResolution?: boolean;\n}\n\n\n// TODO implement Disposer\n/**\n * Root element of the chart.\n *\n * @see {@link https://www.amcharts.com/docs/v5/getting-started/#Root_element} for more info\n */\nexport class Root implements IDisposer {\n\n\t/**\n\t * A reference to original chart container (div element).\n\t */\n\tpublic dom: HTMLElement;\n\tpublic _inner: HTMLElement;\n\n\tprotected _isDirty: boolean = false;\n\tprotected _isDirtyParents: boolean = false;\n\tprotected _dirty: { [id: number]: Entity } = {};\n\tprotected _dirtyParents: { [id: number]: IParent } = {};\n\tprotected _dirtyBounds: { [id: number]: IBounds } = {};\n\tprotected _dirtyPositions: { [id: number]: Sprite } = {};\n\n\tprotected _ticker: ((currentTime: number) => void) | null = null;\n\tprotected _tickers: Array<(currentTime: number) => void> = [];\n\n\t/**\n\t * Root's event dispatcher.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/events/} for more info\n\t */\n\tpublic events: EventDispatcher<Events<this, IRootEvents>> = new EventDispatcher();\n\n\t/**\n\t * @ignore\n\t * @todo needs description\n\t */\n\tpublic animationTime: number | null = null;\n\n\tprivate _animations: Array<IAnimation> = [];\n\n\tpublic _renderer: IRenderer;\n\n\tpublic _rootContainer!: Container;\n\n\t/**\n\t * Main content container.\n\t */\n\tpublic container!: Container;\n\n\t/**\n\t * A [[Container]] used to display tooltips in.\n\t */\n\tpublic tooltipContainer!: Container\n\n\tpublic _tooltip!: Tooltip;\n\n\t// Locale-related\n\n\t/**\n\t * @ignore\n\t */\n\tpublic language: Language = Language.new(this, {});\n\n\t/**\n\t * Locale used by the chart.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/locales/}\n\t */\n\tpublic locale: ILocale = en;\n\n\t// Date-time related\n\n\t/**\n\t * Use UTC when formatting date/time.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/#UTC_and_time_zones} for more info\n\t */\n\tpublic utc: boolean = false;\n\n\t/**\n\t * If set, will format date/time in specific time zone.\n\t *\n\t * The value should be named time zone, e.g.:\n\t * `\"America/Vancouver\"`, `\"Australia/Sydney\"`, `\"UTC\"`.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/getting-started/root-element/#Time_zone} for more info\n\t * @since 5.1.0\n\t */\n\tpublic timezone?: Timezone;\n\n\t/**\n\t * The maximum FPS that the Root will run at.\n\t *\n\t * If `undefined` it will run at the highest FPS.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/getting-started/root-element/#Performance} for more info\n\t */\n\tpublic fps: number | undefined;\n\n\t/**\n\t * Number formatter.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-numbers/} for more info\n\t */\n\tpublic numberFormatter: NumberFormatter = NumberFormatter.new(this, {});\n\n\t/**\n\t * Date/time formatter.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/} for more info\n\t */\n\tpublic dateFormatter: DateFormatter = DateFormatter.new(this, {});\n\n\t/**\n\t * Duration formatter.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/} for more info\n\t */\n\tpublic durationFormatter: DurationFormatter = DurationFormatter.new(this, {});\n\n\n\t// Accessibility\n\n\t/**\n\t * Global tab index for using for the whole chart\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/accessibility/} for more info\n\t */\n\tpublic tabindex: number = 0;\n\n\t//@todo maybe make this better\n\tprotected _tabindexes: Sprite[] = [];\n\n\tprotected _focusElementDirty: boolean = false;\n\tprotected _focusElementContainer: HTMLDivElement | undefined;\n\tprotected _focusedSprite: Sprite | undefined;\n\tprotected _isShift: boolean | undefined;\n\tprotected _keyboardDragPoint: IPoint | undefined;\n\tprotected _tooltipElementContainer: HTMLDivElement | undefined;\n\tprotected _readerAlertElement: HTMLDivElement | undefined;\n\n\tpublic _logo?: Container;\n\n\t/**\n\t * Used for dynamically-created CSS and JavaScript with strict source policies.\n\t */\n\tpublic nonce?: string;\n\n\t/**\n\t * Special color set to be used for various controls.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/#Interface_colors} for more info\n\t */\n\tpublic interfaceColors: InterfaceColors;\n\n\t/**\n\t * An instance of vertical layout object that can be used to set `layout` setting\n\t * of a [[Container]].\n\t *\n\t * @default VerticalLayout.new()\n\t */\n\tpublic verticalLayout: VerticalLayout = VerticalLayout.new(this, {});\n\n\t/**\n\t * An instance of horizontal layout object that can be used to set `layout` setting\n\t * of a [[Container]].\n\t *\n\t * @default HorizontalLayout.new()\n\t */\n\tpublic horizontalLayout: VerticalLayout = HorizontalLayout.new(this, {});\n\n\t/**\n\t * An instance of grid layout object that can be used to set `layout` setting\n\t * of a [[Container]].\n\t *\n\t * @default VerticalLayout.new()\n\t */\n\tpublic gridLayout: VerticalLayout = GridLayout.new(this, {});\n\n\t/**\n\t * Indicates whether chart should resized automatically when parent container\n\t * width and/or height changes.\n\t *\n\t * If disabled (`autoResize = false`) you can make the chart resize manually\n\t * by calling root element's `resize()` method.\n\t */\n\tpublic autoResize: boolean = true;\n\n\tprotected _fontHash: string = \"\";\n\n\tprotected _isDisposed: boolean = false;\n\tprotected _disposers: Array<IDisposer> = [];\n\n\tprotected _resizeSensorDisposer?: IDisposer;\n\n\tpublic _tooltips: Array<Tooltip> = [];\n\n\tprotected _htmlElementContainer: HTMLDivElement | undefined;\n\tprotected _htmlEnabledContainers: Container[] = [];\n\n\tprotected constructor(id: string | HTMLElement, settings: IRootSettings = {}, isReal: boolean) {\n\n\t\tif (!isReal) {\n\t\t\tthrow new Error(\"You cannot use `new Class()`, instead use `Class.new()`\");\n\t\t}\n\n\t\tif (settings.useSafeResolution == null) {\n\t\t\tsettings.useSafeResolution = true;\n\t\t}\n\n\t\tlet resolution;\n\n\t\tif (settings.useSafeResolution) {\n\t\t\tresolution = $utils.getSafeResolution();\n\t\t}\n\n\t\tthis._renderer = new CanvasRenderer(resolution);\n\n\t\tlet dom: HTMLElement | null;\n\n\t\tif (id instanceof HTMLElement) {\n\t\t\tdom = id;\n\t\t}\n\t\telse {\n\t\t\tdom = document.getElementById(id);\n\t\t}\n\n\t\t$array.each(registry.rootElements, (root) => {\n\t\t\tif (root.dom === dom) {\n\t\t\t\tthrow new Error(\"You cannot have multiple Roots on the same DOM node\");\n\t\t\t}\n\t\t});\n\n\t\tthis.interfaceColors = InterfaceColors.new(this, {});\n\n\t\tif (dom === null) {\n\t\t\tthrow new Error(\"Could not find HTML element with id `\" + id + \"`\");\n\t\t}\n\n\t\tthis.dom = dom;\n\n\t\tlet inner: HTMLDivElement = document.createElement(\"div\");\n\t\tinner.style.position = \"relative\";\n\t\tinner.style.height = \"100%\";\n\t\tdom.appendChild(inner);\n\n\t\tthis._inner = inner;\n\n\t\tthis._updateComputedStyles();\n\n\t\tregistry.rootElements.push(this);\n\t}\n\n\tpublic static new(id: string | HTMLElement, settings?: IRootSettings): Root {\n\t\tconst root = new Root(id, settings, true);\n\t\troot._init();\n\t\treturn root;\n\t}\n\n\tpublic moveDOM(id: string | HTMLElement): void {\n\t\tlet dom: HTMLElement | null;\n\n\t\tif (id instanceof HTMLElement) {\n\t\t\tdom = id;\n\t\t}\n\t\telse {\n\t\t\tdom = document.getElementById(id);\n\t\t}\n\n\t\tif (dom) {\n\t\t\twhile (this.dom.childNodes.length > 0) {\n\t\t\t\tdom.appendChild(this.dom.childNodes[0]);\n\t\t\t}\n\t\t\tthis.dom = dom;\n\t\t\tthis._initResizeSensor();\n\t\t\tthis.resize();\n\t\t}\n\n\t}\n\n\n\tprotected _handleLogo(): void {\n\t\tif (this._logo) {\n\t\t\tconst w = this.dom.offsetWidth;\n\t\t\tconst h = this.dom.offsetHeight;\n\t\t\tif ((w <= 150) || (h <= 60)) {\n\t\t\t\tthis._logo.hide();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis._logo.show();\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic _showBranding(): void {\n\t\tif (!this._logo) {\n\t\t\tconst logo = this.tooltipContainer.children.push(Container.new(this, {\n\t\t\t\tinteractive: true,\n\t\t\t\tinteractiveChildren: false,\n\t\t\t\tposition: \"absolute\",\n\t\t\t\tsetStateOnChildren: true,\n\t\t\t\tpaddingTop: 9,\n\t\t\t\tpaddingRight: 9,\n\t\t\t\tpaddingBottom: 9,\n\t\t\t\tpaddingLeft: 9,\n\t\t\t\tscale: .6,\n\t\t\t\ty: percent(100),\n\t\t\t\tcenterY: p100,\n\t\t\t\ttooltipText: \"Created using amCharts 5\",\n\t\t\t\ttooltipX: p100,\n\t\t\t\tcursorOverStyle: \"pointer\",\n\t\t\t\tbackground: Rectangle.new(this, {\n\t\t\t\t\tfill: color(0x474758),\n\t\t\t\t\tfillOpacity: 0,\n\t\t\t\t\ttooltipY: 5\n\t\t\t\t})\n\t\t\t}));\n\n\t\t\tconst tooltip = Tooltip.new(this, {\n\t\t\t\tpointerOrientation: \"horizontal\",\n\t\t\t\tpaddingTop: 4,\n\t\t\t\tpaddingRight: 7,\n\t\t\t\tpaddingBottom: 4,\n\t\t\t\tpaddingLeft: 7\n\t\t\t});\n\t\t\ttooltip.label.setAll({\n\t\t\t\tfontSize: 12\n\t\t\t});\n\t\t\ttooltip.get(\"background\")!.setAll({\n\t\t\t\tfill: this.interfaceColors.get(\"background\"),\n\t\t\t\tstroke: this.interfaceColors.get(\"grid\"),\n\t\t\t\tstrokeOpacity: 0.3\n\t\t\t})\n\t\t\tlogo.set(\"tooltip\", tooltip);\n\n\t\t\tlogo.events.on(\"click\", () => {\n\t\t\t\twindow.open(\"https://www.amcharts.com/\", \"_blank\");\n\t\t\t});\n\n\t\t\tlogo.states.create(\"hover\", {});\n\n\t\t\tconst m = logo.children.push(Graphics.new(this, {\n\t\t\t\tstroke: color(0xcccccc),\n\t\t\t\tstrokeWidth: 3,\n\t\t\t\tsvgPath: \"M5 25 L13 25h13.6c3.4 0 6 0 10.3-4.3s5.2-12 8.6-12c3.4 0 4.3 8.6 7.7 8.6M83.4 25H79.8c-3.4 0-6 0-10.3-4.3s-5.2-12-8.6-12-4.3 8.6-7.7 8.6\"\n\t\t\t}));\n\n\t\t\tm.states.create(\"hover\", { stroke: color(0x3CABFF) });\n\n\t\t\tconst a = logo.children.push(Graphics.new(this, {\n\t\t\t\tstroke: color(0x888888),\n\t\t\t\tstrokeWidth: 3,\n\t\t\t\tsvgPath: \"M83.4 25h-31C37 25 39.5 4.4 28.4 4.4S18.9 24.2 4.3 25H0\"\n\t\t\t}));\n\n\t\t\ta.states.create(\"hover\", { stroke: color(0x474758) });\n\n\t\t\t//logo.set(\"tooltip\", this._tooltip);\n\t\t\t//logo.setPrivate(\"tooltipTarget\", logo.get(\"background\"));\n\t\t\tthis._logo = logo;\n\n\t\t\tthis._handleLogo();\n\t\t}\n\t}\n\n\tprotected _init(): void {\n\t\tconst renderer = this._renderer;\n\t\tconst rootContainer = Container.new(this, { visible: true, width: this.dom.clientWidth, height: this.dom.clientHeight });\n\t\tthis._rootContainer = rootContainer;\n\t\tthis._rootContainer._defaultThemes.push(DefaultTheme.new(this));\n\n\t\tconst container = rootContainer.children.push(Container.new(this, { visible: true, width: p100, height: p100 }));\n\t\tthis.container = container;\n\n\t\trenderer.resize(this.dom.clientWidth, this.dom.clientHeight);\n\n\t\t//@todo: better appendChild - refer\n\t\tthis._inner.appendChild(renderer.view);\n\n\t\t// TODO: TMP TMP TMP for testing only, remove\n\t\t//document.body.appendChild((<any>renderer)._ghostView);\n\n\t\tthis._initResizeSensor();\n\n\t\t// HTML content holder\n\t\tthis._htmlElementContainer = document.createElement(\"div\");\n\t\tthis._htmlElementContainer.style.overflow = \"hidden\";\n\t\tthis._inner.appendChild(this._htmlElementContainer);\n\n\t\t// Create element which is used to make announcements to screen reader\n\t\tconst readerAlertElement = document.createElement(\"div\");\n\t\treaderAlertElement.setAttribute(\"role\", \"alert\");\n\t\treaderAlertElement.style.zIndex = \"-100000\";\n\t\treaderAlertElement.style.opacity = \"0\";\n\t\treaderAlertElement.style.position = \"absolute\";\n\t\treaderAlertElement.style.top = \"0\";\n\t\tthis._readerAlertElement = readerAlertElement;\n\t\tthis._inner.appendChild(this._readerAlertElement);\n\n\t\tconst focusElementContainer = document.createElement(\"div\");\n\t\tfocusElementContainer.style.position = \"absolute\";\n\t\tfocusElementContainer.style.pointerEvents = \"none\";\n\t\tfocusElementContainer.style.top = \"0px\";\n\t\tfocusElementContainer.style.left = \"0px\";\n\t\tfocusElementContainer.style.overflow = \"hidden\";\n\t\tfocusElementContainer.style.width = this.dom.clientWidth + \"px\";\n\t\tfocusElementContainer.style.height = this.dom.clientHeight + \"px\";\n\n\t\tfocusElementContainer.setAttribute(\"role\", \"application\");\n\n\t\t$utils.setInteractive(focusElementContainer, false);\n\t\tthis._focusElementContainer = focusElementContainer;\n\t\tthis._inner.appendChild(this._focusElementContainer);\n\n\t\tthis._tooltipElementContainer = document.createElement(\"div\");\n\t\tthis._inner.appendChild(this._tooltipElementContainer);\n\n\t\t// Add keyboard events for accessibility, e.g. simulating drag with arrow\n\t\t// keys and click with ENTER\n\t\tif ($utils.supports(\"keyboardevents\")) {\n\n\t\t\tthis._disposers.push($utils.addEventListener(window, \"keydown\", (ev: KeyboardEvent) => {\n\t\t\t\tif (ev.keyCode == 16) {\n\t\t\t\t\tthis._isShift = true;\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tthis._disposers.push($utils.addEventListener(window, \"keyup\", (ev: KeyboardEvent) => {\n\t\t\t\tif (ev.keyCode == 16) {\n\t\t\t\t\tthis._isShift = false;\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tthis._disposers.push($utils.addEventListener(focusElementContainer, \"keydown\", (ev: KeyboardEvent) => {\n\t\t\t\tconst focusedSprite = this._focusedSprite;\n\t\t\t\tif (focusedSprite) {\n\t\t\t\t\tif (ev.keyCode == 27) {\n\t\t\t\t\t\t// ESC pressed - lose current focus\n\t\t\t\t\t\t$utils.blur();\n\t\t\t\t\t\tthis._focusedSprite = undefined;\n\t\t\t\t\t}\n\t\t\t\t\tlet dragOffsetX = 0;\n\t\t\t\t\tlet dragOffsetY = 0;\n\t\t\t\t\t// TODO: figure out if using bogus MouseEvent is fine, or it will\n\t\t\t\t\t// fail on some platforms\n\t\t\t\t\tswitch (ev.keyCode) {\n\t\t\t\t\t\tcase 13:\n\t\t\t\t\t\t\tev.preventDefault();\n\t\t\t\t\t\t\tconst downEvent = renderer.getEvent(new MouseEvent(\"click\"));\n\t\t\t\t\t\t\tfocusedSprite.events.dispatch(\"click\", {\n\t\t\t\t\t\t\t\ttype: \"click\",\n\t\t\t\t\t\t\t\toriginalEvent: downEvent.event,\n\t\t\t\t\t\t\t\tpoint: downEvent.point,\n\t\t\t\t\t\t\t\tsimulated: true,\n\t\t\t\t\t\t\t\ttarget: focusedSprite\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\tcase 37:\n\t\t\t\t\t\t\tdragOffsetX = -6;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 39:\n\t\t\t\t\t\t\tdragOffsetX = 6;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 38:\n\t\t\t\t\t\t\tdragOffsetY = -6;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 40:\n\t\t\t\t\t\t\tdragOffsetY = 6;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (dragOffsetX != 0 || dragOffsetY != 0) {\n\t\t\t\t\t\tev.preventDefault();\n\n\t\t\t\t\t\tif (!focusedSprite.isDragging()) {\n\t\t\t\t\t\t\t// Start dragging\n\t\t\t\t\t\t\tthis._keyboardDragPoint = {\n\t\t\t\t\t\t\t\tx: 0,\n\t\t\t\t\t\t\t\ty: 0\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst downEvent = renderer.getEvent(new MouseEvent(\"mousedown\", {\n\t\t\t\t\t\t\t\tclientX: 0,\n\t\t\t\t\t\t\t\tclientY: 0\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\t\tif (focusedSprite.events.isEnabled(\"pointerdown\")) {\n\t\t\t\t\t\t\t\tfocusedSprite.events.dispatch(\"pointerdown\", {\n\t\t\t\t\t\t\t\t\ttype: \"pointerdown\",\n\t\t\t\t\t\t\t\t\toriginalEvent: downEvent.event,\n\t\t\t\t\t\t\t\t\tpoint: downEvent.point,\n\t\t\t\t\t\t\t\t\tsimulated: true,\n\t\t\t\t\t\t\t\t\ttarget: focusedSprite\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t// Move focus marker\n\t\t\t\t\t\t\t//this._positionFocusElement(focusedSprite);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Move incrementally\n\t\t\t\t\t\tconst dragPoint = this._keyboardDragPoint!;\n\t\t\t\t\t\tdragPoint.x += dragOffsetX;\n\t\t\t\t\t\tdragPoint.y += dragOffsetY;\n\t\t\t\t\t\tconst moveEvent = renderer.getEvent(new MouseEvent(\"mousemove\", {\n\t\t\t\t\t\t\tclientX: dragPoint.x,\n\t\t\t\t\t\t\tclientY: dragPoint.y\n\t\t\t\t\t\t}), false);\n\n\t\t\t\t\t\tif (focusedSprite.events.isEnabled(\"globalpointermove\")) {\n\t\t\t\t\t\t\tfocusedSprite.events.dispatch(\"globalpointermove\", {\n\t\t\t\t\t\t\t\ttype: \"globalpointermove\",\n\t\t\t\t\t\t\t\toriginalEvent: moveEvent.event,\n\t\t\t\t\t\t\t\tpoint: moveEvent.point,\n\t\t\t\t\t\t\t\tsimulated: true,\n\t\t\t\t\t\t\t\ttarget: focusedSprite\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tthis._disposers.push($utils.addEventListener(focusElementContainer, \"keyup\", (ev: KeyboardEvent) => {\n\t\t\t\tif (this._focusedSprite) {\n\t\t\t\t\tconst focusedSprite = this._focusedSprite;\n\t\t\t\t\tconst keyCode = ev.keyCode;\n\t\t\t\t\tswitch (keyCode) {\n\t\t\t\t\t\tcase 37:\n\t\t\t\t\t\tcase 39:\n\t\t\t\t\t\tcase 38:\n\t\t\t\t\t\tcase 40:\n\t\t\t\t\t\t\tif (focusedSprite.isDragging()) {\n\t\t\t\t\t\t\t\t// Simulate drag stop\n\t\t\t\t\t\t\t\tconst dragPoint = this._keyboardDragPoint!;\n\t\t\t\t\t\t\t\tconst upEvent = renderer.getEvent(new MouseEvent(\"mouseup\", {\n\t\t\t\t\t\t\t\t\tclientX: dragPoint.x,\n\t\t\t\t\t\t\t\t\tclientY: dragPoint.y\n\t\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\t\t\tif (focusedSprite.events.isEnabled(\"globalpointerup\")) {\n\t\t\t\t\t\t\t\t\tfocusedSprite.events.dispatch(\"globalpointerup\", {\n\t\t\t\t\t\t\t\t\t\ttype: \"globalpointerup\",\n\t\t\t\t\t\t\t\t\t\toriginalEvent: upEvent.event,\n\t\t\t\t\t\t\t\t\t\tpoint: upEvent.point,\n\t\t\t\t\t\t\t\t\t\tsimulated: true,\n\t\t\t\t\t\t\t\t\t\ttarget: focusedSprite\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//this._positionFocusElement(focusedSprite);\n\t\t\t\t\t\t\t\tthis._keyboardDragPoint = undefined;\n\t\t\t\t\t\t\t\t// @todo dispatch mouseup event instead of calling dragStop?\n\t\t\t\t\t\t\t\t// this._dispatchEvent(\"globalpointerup\", target, upEvent);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (focusedSprite.get(\"focusableGroup\")) {\n\t\t\t\t\t\t\t\t// Find next item in focusable group\n\t\t\t\t\t\t\t\tconst group = focusedSprite.get(\"focusableGroup\");\n\t\t\t\t\t\t\t\tconst items = this._tabindexes.filter(item => item.get(\"focusableGroup\") == group);\n\t\t\t\t\t\t\t\tlet index = items.indexOf(focusedSprite);\n\t\t\t\t\t\t\t\tconst lastIndex = items.length - 1;\n\t\t\t\t\t\t\t\tindex += (keyCode == 39 || keyCode == 40) ? 1 : -1;\n\t\t\t\t\t\t\t\tif (index < 0) {\n\t\t\t\t\t\t\t\t\tindex = lastIndex;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if (index > lastIndex) {\n\t\t\t\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t$utils.focus(items[index].getPrivate(\"focusElement\")!.dom);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\n\t\tthis._startTicker();\n\t\tthis.setThemes([]);\n\n\t\tthis._addTooltip();\n\n\t\tif (!this._hasLicense()) {\n\t\t\tthis._showBranding();\n\t\t}\n\t}\n\n\tprivate _initResizeSensor(): void {\n\t\tif (this._resizeSensorDisposer) {\n\t\t\tthis._resizeSensorDisposer.dispose();\n\t\t}\n\t\tthis._resizeSensorDisposer = new ResizeSensor(this.dom, () => {\n\t\t\tif (this.autoResize) {\n\t\t\t\tthis.resize();\n\t\t\t}\n\t\t});\n\t\tthis._disposers.push(this._resizeSensorDisposer);\n\t}\n\n\t/**\n\t * If automatic resizing of char is disabled (`root.autoResize = false`), it\n\t * can be resized manually by calling this method.\n\t */\n\tpublic resize(): void {\n\t\tconst dom = this.dom;\n\t\tconst w = dom.clientWidth;\n\t\tconst h = dom.clientHeight;\n\t\tif (w > 0 && h > 0) {\n\t\t\tconst htmlElementContainer = this._htmlElementContainer!;\n\t\t\thtmlElementContainer.style.width = w + \"px\";\n\t\t\thtmlElementContainer.style.height = h + \"px\";\n\n\t\t\tconst focusElementContainer = this._focusElementContainer!;\n\t\t\tfocusElementContainer.style.width = w + \"px\";\n\t\t\tfocusElementContainer.style.height = h + \"px\";\n\n\t\t\tthis._renderer.resize(w, h);\n\n\t\t\tconst rootContainer = this._rootContainer;\n\n\t\t\trootContainer.setPrivate(\"width\", w);\n\t\t\trootContainer.setPrivate(\"height\", h);\n\t\t\tthis._render();\n\t\t\tthis._handleLogo();\n\t\t}\n\t}\n\n\tprivate _render() {\n\t\tthis._renderer.render(this._rootContainer._display);\n\n\t\tif (this._focusElementDirty) {\n\t\t\tthis._updateCurrentFocus();\n\t\t\tthis._focusElementDirty = false;\n\t\t}\n\t}\n\n\tprivate _runTickers(currentTime: number) {\n\t\t$array.each(this._tickers, (f) => {\n\t\t\tf(currentTime);\n\t\t});\n\t}\n\n\tprivate _runAnimations(currentTime: number) {\n\t\t$array.keepIf(this._animations, (animation) => {\n\t\t\treturn !animation._runAnimation(currentTime);\n\t\t});\n\t}\n\n\tprivate _runDirties() {\n\t\t//console.log(\"tick **************************************************************\");\n\t\tlet allParents: { [id: number]: IParent } = {};\n\n\t\twhile (this._isDirtyParents) {\n\t\t\t// This must be before calling _prepareChildren\n\t\t\tthis._isDirtyParents = false;\n\n\t\t\t$object.keys(this._dirtyParents).forEach((key) => {\n\t\t\t\tconst parent = this._dirtyParents[key];\n\n\t\t\t\tdelete this._dirtyParents[key];\n\n\t\t\t\tif (!parent.isDisposed()) {\n\t\t\t\t\tallParents[parent.uid] = parent;\n\t\t\t\t\tparent._prepareChildren();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t$object.keys(allParents).forEach((key) => {\n\t\t\tallParents[key]._updateChildren();\n\t\t});\n\n\t\tconst objects: Array<Entity> = [];\n\n\t\t//\t\tconsole.log(\"_beforeChanged\")\n\t\t$object.keys(this._dirty).forEach((key) => {\n\t\t\tconst entity = this._dirty[key];\n\n\t\t\tif (entity.isDisposed()) {\n\t\t\t\tdelete this._dirty[entity.uid];\n\n\t\t\t} else {\n\t\t\t\tobjects.push(entity);\n\t\t\t\tentity._beforeChanged();\n\t\t\t}\n\t\t});\n\n\t\t//\t\tconsole.log(\"_changed\")\n\t\tobjects.forEach((entity) => {\n\t\t\tentity._changed();\n\t\t\tdelete this._dirty[entity.uid];\n\t\t\tentity._clearDirty();\n\t\t});\n\n\t\tthis._isDirty = false;\n\n\t\tconst depths: { [id: number]: number } = {};\n\t\tconst bounds: Array<IBounds> = [];\n\n\t\t$object.keys(this._dirtyBounds).forEach((key) => {\n\t\t\tconst entity = this._dirtyBounds[key];\n\n\t\t\tdelete this._dirtyBounds[key];\n\n\t\t\tif (!entity.isDisposed()) {\n\t\t\t\tdepths[entity.uid] = entity.depth();\n\t\t\t\tbounds.push(entity);\n\t\t\t}\n\t\t});\n\n\t\t// High depth -> low depth\n\t\tbounds.sort((x, y) => {\n\t\t\treturn $order.compare(depths[y.uid], depths[x.uid]);\n\t\t});\n\n\t\t//\t\tconsole.log(\"_updateBounds\")\n\t\tbounds.forEach((entity) => {\n\t\t\tentity._updateBounds();\n\t\t});\n\n\t\t//\t\tconsole.log(\"_updatePosition\")\n\t\tconst dirtyPositions = this._dirtyPositions;\n\t\t$object.keys(dirtyPositions).forEach((key) => {\n\t\t\tconst sprite = dirtyPositions[key];\n\n\t\t\tdelete dirtyPositions[key];\n\n\t\t\tif (!sprite.isDisposed()) {\n\t\t\t\tsprite._updatePosition();\n\t\t\t}\n\t\t});\n\n\t\t//\t\tconsole.log(\"_afterChanged\")\n\t\tobjects.forEach((entity) => {\n\t\t\tentity._afterChanged();\n\t\t});\n\n\t}\n\n\tprivate _renderFrame(currentTime: number): boolean {\n\t\tif (this.events.isEnabled(\"framestarted\")) {\n\t\t\tthis.events.dispatch(\"framestarted\", {\n\t\t\t\ttype: \"framestarted\",\n\t\t\t\ttarget: this,\n\t\t\t\ttimestamp: currentTime,\n\t\t\t});\n\t\t}\n\n\t\tthis._checkComputedStyles();\n\t\tthis._runTickers(currentTime);\n\t\tthis._runAnimations(currentTime);\n\t\tthis._runDirties();\n\t\tthis._render();\n\t\tthis._positionHTMLElements();\n\n\t\tif (this.events.isEnabled(\"frameended\")) {\n\t\t\tthis.events.dispatch(\"frameended\", {\n\t\t\t\ttype: \"frameended\",\n\t\t\t\ttarget: this,\n\t\t\t\ttimestamp: currentTime,\n\t\t\t});\n\t\t}\n\n\n\t\treturn this._tickers.length === 0 &&\n\t\t\tthis._animations.length === 0 &&\n\t\t\t!this._isDirty;\n\t}\n\n\tprivate _runTicker(currentTime: number) {\n\t\tif (!this.isDisposed()) {\n\t\t\tthis.animationTime = currentTime;\n\n\t\t\tconst done = this._renderFrame(currentTime);\n\n\t\t\t// No more work to do\n\t\t\tif (done) {\n\t\t\t\tthis._ticker = null;\n\t\t\t\tthis.animationTime = null;\n\n\t\t\t} else {\n\t\t\t\trAF(this.fps, this._ticker!);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic _runTickerNow() {\n\t\tif (!this.isDisposed()) {\n\t\t\tfor (; ;) {\n\t\t\t\tconst currentTime = performance.now();\n\n\t\t\t\tthis.animationTime = currentTime;\n\n\t\t\t\tconst done = this._renderFrame(currentTime);\n\n\t\t\t\tif (done) {\n\t\t\t\t\tthis.animationTime = null;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _startTicker() {\n\t\tif (this._ticker === null) {\n\t\t\tthis.animationTime = null;\n\n\t\t\tthis._ticker = (currentTime) => {\n\t\t\t\tthis._runTicker(currentTime);\n\t\t\t};\n\n\t\t\trAF(this.fps, this._ticker!);\n\t\t}\n\t}\n\n\tpublic _addDirtyEntity(entity: Entity) {\n\t\tif (this._dirty[entity.uid] === undefined) {\n\t\t\tthis._isDirty = true;\n\t\t\tthis._dirty[entity.uid] = entity;\n\t\t\tthis._startTicker();\n\t\t}\n\t}\n\n\tpublic _addDirtyParent(parent: IParent) {\n\t\tif (this._dirtyParents[parent.uid] === undefined) {\n\t\t\tthis._isDirty = true;\n\t\t\tthis._isDirtyParents = true;\n\t\t\tthis._dirtyParents[parent.uid] = parent;\n\t\t\tthis._startTicker();\n\t\t}\n\t}\n\n\tpublic _addDirtyBounds(entity: IBounds) {\n\t\tif (this._dirtyBounds[entity.uid] === undefined) {\n\t\t\tthis._isDirty = true;\n\t\t\tthis._dirtyBounds[entity.uid] = entity;\n\t\t\tthis._startTicker();\n\t\t}\n\t}\n\n\tpublic _addDirtyPosition(sprite: Sprite) {\n\t\tif (this._dirtyPositions[sprite.uid] === undefined) {\n\t\t\tthis._isDirty = true;\n\t\t\tthis._dirtyPositions[sprite.uid] = sprite;\n\t\t\tthis._startTicker();\n\t\t}\n\t}\n\n\tpublic _addAnimation(animation: IAnimation) {\n\t\t// TODO use numeric id instead\n\t\tif (this._animations.indexOf(animation) === -1) {\n\t\t\tthis._animations.push(animation);\n\t\t\tthis._startTicker();\n\t\t}\n\t}\n\n\tpublic _markDirty() {\n\t\tthis._isDirty = true;\n\t}\n\n\tpublic _markDirtyRedraw() {\n\t\tthis.events.once(\"frameended\", () => {\n\t\t\tthis._isDirty = true;\n\t\t\tthis._startTicker();\n\t\t})\n\t}\n\n\tpublic eachFrame(f: (currentTime: number) => void): IDisposer {\n\t\tthis._tickers.push(f);\n\t\tthis._startTicker();\n\n\t\treturn new Disposer(() => {\n\t\t\t$array.removeFirst(this._tickers, f);\n\t\t});\n\t}\n\n\t/**\n\t * Returns width of the target container, in pixels.\n\t *\n\t * @return Width\n\t */\n\tpublic width(): number {\n\t\treturn this.dom.clientWidth;\n\t}\n\n\t/**\n\t * Returns height of the target container, in pixels.\n\t *\n\t * @return Height\n\t */\n\tpublic height(): number {\n\t\treturn this.dom.clientHeight;\n\t}\n\n\t/**\n\t * Disposes root and all the content in it.\n\t */\n\tpublic dispose(): void {\n\t\tif (!this._isDisposed) {\n\t\t\tthis._isDisposed = true;\n\n\t\t\tthis._rootContainer.dispose();\n\t\t\tthis._renderer.dispose();\n\t\t\tthis.horizontalLayout.dispose();\n\t\t\tthis.verticalLayout.dispose();\n\t\t\tthis.interfaceColors.dispose();\n\n\t\t\t$array.each(this._disposers, (x) => {\n\t\t\t\tx.dispose();\n\t\t\t});\n\n\t\t\tif (this._inner) {\n\t\t\t\t$utils.removeElement(this._inner);\n\t\t\t}\n\n\t\t\t$array.remove(registry.rootElements, this);\n\t\t}\n\t}\n\n\t/**\n\t * Returns `true` if root element is disposed.\n\t *\n\t * @return Disposed?\n\t */\n\tpublic isDisposed(): boolean {\n\t\treturn this._isDisposed;\n\t}\n\n\t/**\n\t * Triggers screen reader read out a message.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/accessibility/} for more info\n\t * @param  text  Alert text\n\t */\n\tpublic readerAlert(text: string): void {\n\t\tthis._readerAlertElement!.innerHTML = $utils.stripTags(text);\n\t}\n\n\t/**\n\t * Sets themes to be used for the chart.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/themes/} for more info\n\t * @param  themes  A list of themes\n\t */\n\tpublic setThemes(themes: Array<Theme>): void {\n\t\tthis._rootContainer.set(\"themes\", themes);\n\n\t\t// otherwise new themes are not applied\n\t\tconst tooltipContainer = this.tooltipContainer;\n\t\tif (tooltipContainer) {\n\t\t\ttooltipContainer._applyThemes();\n\t\t}\n\n\t\t// @todo review this\n\t\tconst interfaceColors = this.interfaceColors;\n\t\tif (interfaceColors) {\n\t\t\tinterfaceColors._applyThemes();\n\t\t}\n\t}\n\n\tprotected _addTooltip() {\n\t\tif (!this.tooltipContainer) {\n\t\t\tconst tooltipContainer = this._rootContainer.children.push(Container.new(this, { position: \"absolute\", isMeasured: false, width: p100, height: p100, layer: 30 }));\n\t\t\tthis.tooltipContainer = tooltipContainer;\n\n\t\t\tconst tooltip = Tooltip.new(this, {});\n\t\t\tthis.container.set(\"tooltip\", tooltip);\n\t\t\ttooltip.hide(0);\n\t\t\tthis._tooltip = tooltip;\n\t\t}\n\t}\n\n\t/**\n\t * Accesibility\n\t */\n\n\tpublic _registerTabindexOrder(target: Sprite): void {\n\t\tif (target.get(\"focusable\")) {\n\t\t\t$array.pushOne(this._tabindexes, target);\n\t\t}\n\t\telse {\n\t\t\t$array.remove(this._tabindexes, target);\n\t\t}\n\t\tthis._invalidateTabindexes();\n\t}\n\n\tpublic _unregisterTabindexOrder(target: Sprite): void {\n\t\t$array.remove(this._tabindexes, target);\n\t\tthis._invalidateTabindexes();\n\t}\n\n\tpublic _invalidateTabindexes(): void {\n\n\t\tthis._tabindexes.sort((a: Sprite, b: Sprite) => {\n\t\t\tconst aindex = a.get(\"tabindexOrder\", 0);\n\t\t\tconst bindex = b.get(\"tabindexOrder\", 0);\n\t\t\tif (aindex == bindex) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\telse if (aindex > bindex) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t});\n\n\t\tconst groups: Array<string | number> = [];\n\t\t$array.each(this._tabindexes, (item, index) => {\n\t\t\tif (!item.getPrivate(\"focusElement\")) {\n\t\t\t\tthis._makeFocusElement(index, item);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis._moveFocusElement(index, item);\n\t\t\t}\n\t\t\tconst group = item.get(\"focusableGroup\");\n\t\t\tif (group) {\n\t\t\t\tif (groups.indexOf(group) !== -1) {\n\t\t\t\t\t// Non-first element in the group, make it not directly focusable\n\t\t\t\t\titem.getPrivate(\"focusElement\")!.dom.setAttribute(\"tabindex\", \"-1\");\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tgroups.push(group);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t}\n\n\tpublic _updateCurrentFocus(): void {\n\t\tif (this._focusedSprite) {\n\t\t\tthis._decorateFocusElement(this._focusedSprite);\n\t\t\tthis._positionFocusElement(this._focusedSprite);\n\t\t}\n\t}\n\n\tpublic _decorateFocusElement(target: Sprite, focusElement?: HTMLDivElement): void {\n\n\t\t// Decorate with proper accessibility attributes\n\t\tif (!focusElement) {\n\t\t\tfocusElement = target.getPrivate(\"focusElement\")!.dom;\n\t\t}\n\n\t\tif (!focusElement) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (target.get(\"visible\") && target.get(\"role\") != \"tooltip\" && !target.isHidden()) {\n\t\t\tif (focusElement.getAttribute(\"tabindex\") != \"-1\") {\n\t\t\t\tfocusElement.setAttribute(\"tabindex\", \"\" + this.tabindex);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"tabindex\")\n\t\t}\n\n\t\tconst role = target.get(\"role\");\n\t\tif (role) {\n\t\t\tfocusElement.setAttribute(\"role\", role);\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"role\");\n\t\t}\n\n\t\tconst ariaLabel = target.get(\"ariaLabel\");\n\t\tif (ariaLabel) {\n\t\t\tconst label = populateString(target, ariaLabel);\n\t\t\tfocusElement.setAttribute(\"aria-label\", label);\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-label\");\n\t\t}\n\n\t\tconst ariaLive = target.get(\"ariaLive\");\n\t\tif (ariaLive) {\n\t\t\tfocusElement.setAttribute(\"aria-live\", ariaLive);\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-live\");\n\t\t}\n\n\t\tconst ariaChecked = target.get(\"ariaChecked\");\n\t\tif (ariaChecked != null) {\n\t\t\tfocusElement.setAttribute(\"aria-checked\", ariaChecked ? \"true\" : \"false\");\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-checked\");\n\t\t}\n\n\t\tif (target.get(\"ariaHidden\")) {\n\t\t\tfocusElement.setAttribute(\"aria-hidden\", \"hidden\");\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-hidden\");\n\t\t}\n\n\t\tconst ariaOrientation = target.get(\"ariaOrientation\");\n\t\tif (ariaOrientation) {\n\t\t\tfocusElement.setAttribute(\"aria-orientation\", ariaOrientation);\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-orientation\");\n\t\t}\n\n\t\tconst ariaValueNow = target.get(\"ariaValueNow\");\n\t\tif (ariaValueNow) {\n\t\t\tfocusElement.setAttribute(\"aria-valuenow\", ariaValueNow);\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-valuenow\");\n\t\t}\n\n\t\tconst ariaValueMin = target.get(\"ariaValueMin\");\n\t\tif (ariaValueMin) {\n\t\t\tfocusElement.setAttribute(\"aria-valuemin\", ariaValueMin);\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-valuemin\");\n\t\t}\n\n\t\tconst ariaValueMax = target.get(\"ariaValueMax\");\n\t\tif (ariaValueMax) {\n\t\t\tfocusElement.setAttribute(\"aria-valuemax\", ariaValueMax);\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-valuemax\");\n\t\t}\n\n\t\tconst ariaValueText = target.get(\"ariaValueText\");\n\t\tif (ariaValueText) {\n\t\t\tfocusElement.setAttribute(\"aria-valuetext\", ariaValueText);\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-valuetext\");\n\t\t}\n\n\t\tconst ariaControls = target.get(\"ariaControls\");\n\t\tif (ariaControls) {\n\t\t\tfocusElement.setAttribute(\"aria-controls\", ariaControls);\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-controls\");\n\t\t}\n\t}\n\n\tpublic _makeFocusElement(index: number, target: Sprite): void {\n\n\t\tif (target.getPrivate(\"focusElement\")) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Init\n\t\tconst focusElement = document.createElement(\"div\");\n\t\tif (target.get(\"role\") != \"tooltip\") {\n\t\t\tfocusElement.tabIndex = this.tabindex;\n\t\t}\n\t\tfocusElement.style.position = \"absolute\";\n\t\t$utils.setInteractive(focusElement, false);\n\n\t\tconst disposers: Array<IDisposer> = [];\n\n\t\ttarget.setPrivate(\"focusElement\", {\n\t\t\tdom: focusElement,\n\t\t\tdisposers,\n\t\t});\n\n\t\tthis._decorateFocusElement(target);\n\n\t\tdisposers.push($utils.addEventListener(focusElement, \"focus\", (ev: FocusEvent) => {\n\t\t\tthis._handleFocus(ev, index);\n\t\t}));\n\n\t\tdisposers.push($utils.addEventListener(focusElement, \"blur\", (ev: FocusEvent) => {\n\t\t\tthis._handleBlur(ev, index);\n\t\t}));\n\n\t\tthis._moveFocusElement(index, target);\n\n\t}\n\n\tpublic _removeFocusElement(target: Sprite): void {\n\t\t$array.remove(this._tabindexes, target);\n\t\tconst focusElement = target.getPrivate(\"focusElement\");\n\t\tif (focusElement) {\n\t\t\tconst container = this._focusElementContainer!;\n\t\t\tcontainer.removeChild(focusElement.dom);\n\t\t\t$array.each(focusElement.disposers, (x) => {\n\t\t\t\tx.dispose();\n\t\t\t});\n\t\t}\n\t}\n\n\tpublic _hideFocusElement(target: Sprite): void {\n\t\tconst focusElement = target.getPrivate(\"focusElement\")!;\n\t\tfocusElement.dom.style.display = \"none\";\n\t}\n\n\tprotected _moveFocusElement(index: number, target: Sprite): void {\n\n\t\t// Get container\n\t\tconst container = this._focusElementContainer!;\n\t\tconst focusElement = target.getPrivate(\"focusElement\")!.dom;\n\n\t\tif (focusElement === this._focusElementContainer!.children[index]) {\n\t\t\t// Nothing to do\n\t\t\treturn;\n\t\t}\n\n\t\tconst next = this._focusElementContainer!.children[index + 1];\n\t\tif (next) {\n\t\t\tcontainer.insertBefore(focusElement, next);\n\t\t}\n\t\telse {\n\t\t\tcontainer.append(focusElement);\n\t\t}\n\t}\n\n\tprotected _positionFocusElement(target: Sprite): void {\n\t\tconst bounds = target.globalBounds();\n\n\t\tconst width = bounds.right == bounds.left ? target.width() : bounds.right - bounds.left;\n\t\tconst height = bounds.top == bounds.bottom ? target.height() : bounds.bottom - bounds.top;\n\n\t\tconst focusElement = target.getPrivate(\"focusElement\")!.dom;\n\t\tfocusElement.style.top = (bounds.top - 2) + \"px\";\n\t\tfocusElement.style.left = (bounds.left - 2) + \"px\";\n\t\tfocusElement.style.width = (width + 4) + \"px\";\n\t\tfocusElement.style.height = (height + 4) + \"px\";\n\n\t}\n\n\tprotected _handleFocus(ev: FocusEvent, index: number): void {\n\t\t// Get element\n\t\tconst focused = this._tabindexes[index];\n\n\t\t// Jump over hidden elements\n\t\tif (!focused.isVisibleDeep()) {\n\t\t\tthis._focusNext(<HTMLDivElement>ev.target, this._isShift ? -1 : 1);\n\t\t\treturn;\n\t\t}\n\n\t\t// Size and position\n\t\tthis._positionFocusElement(focused);\n\t\t//this._decorateFocusElement(focused);\n\n\t\tthis._focusedSprite = focused;\n\n\t\tif (focused.events.isEnabled(\"focus\")) {\n\t\t\tfocused.events.dispatch(\"focus\", {\n\t\t\t\ttype: \"focus\",\n\t\t\t\toriginalEvent: ev,\n\t\t\t\ttarget: focused\n\t\t\t});\n\t\t}\n\t}\n\n\tprotected _focusNext(el: HTMLDivElement, direction: 1 | -1): void {\n\t\tvar focusableElements = Array.from(document.querySelectorAll([\n\t\t\t'a[href]',\n\t\t\t'area[href]',\n\t\t\t'button:not([disabled])',\n\t\t\t'details',\n\t\t\t'input:not([disabled])',\n\t\t\t'iframe:not([disabled])',\n\t\t\t'select:not([disabled])',\n\t\t\t'textarea:not([disabled])',\n\t\t\t'[contentEditable=\"\"]',\n\t\t\t'[contentEditable=\"true\"]',\n\t\t\t'[contentEditable=\"TRUE\"]',\n\t\t\t'[tabindex]:not([tabindex^=\"-\"])',\n\t\t\t//':not([disabled])'\n\t\t].join(',')));\n\n\t\tlet index = focusableElements.indexOf(el) + direction;\n\n\t\tif (index < 0) {\n\t\t\tindex = focusableElements.length - 1;\n\t\t}\n\t\telse if (index >= focusableElements.length) {\n\t\t\tindex = 0;\n\t\t}\n\n\t\t(<HTMLElement>focusableElements[index]).focus();\n\t}\n\n\tprotected _handleBlur(ev: FocusEvent, _index: number): void {\n\t\tconst focused = this._focusedSprite;\n\t\tif (focused && focused.events.isEnabled(\"blur\")) {\n\t\t\tfocused.events.dispatch(\"blur\", {\n\t\t\t\ttype: \"blur\",\n\t\t\t\toriginalEvent: ev,\n\t\t\t\ttarget: focused\n\t\t\t});\n\t\t}\n\t\tthis._focusedSprite = undefined;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic updateTooltip(target: Text): void {\n\t\tconst text = $utils.stripTags(target._getText());\n\t\tlet tooltipElement = target.getPrivate(\"tooltipElement\");\n\t\tif (target.get(\"role\") == \"tooltip\" && text != \"\") {\n\t\t\tif (!tooltipElement) {\n\t\t\t\ttooltipElement = this._makeTooltipElement(target);\n\t\t\t}\n\t\t\tif (tooltipElement.innerHTML != text) {\n\t\t\t\ttooltipElement.innerHTML = text!;\n\t\t\t}\n\t\t}\n\t\telse if (tooltipElement) {\n\t\t\ttooltipElement.remove();\n\t\t\ttarget.removePrivate(\"tooltipElement\");\n\t\t}\n\t}\n\n\tpublic _makeTooltipElement(target: Text): HTMLDivElement {\n\t\tconst container = this._tooltipElementContainer!;\n\t\tconst tooltipElement = document.createElement(\"div\");\n\t\ttooltipElement.style.position = \"absolute\";\n\t\ttooltipElement.style.opacity = \"0.0000001\";\n\n\t\t$utils.setInteractive(tooltipElement, false);\n\n\t\tthis._decorateFocusElement(target, tooltipElement);\n\t\tcontainer.append(tooltipElement);\n\t\ttarget.setPrivate(\"tooltipElement\", tooltipElement);\n\t\treturn tooltipElement;\n\t}\n\n\tpublic _invalidateAccessibility(target: Sprite): void {\n\t\tthis._focusElementDirty = true;\n\t\tconst focusElement = target.getPrivate(\"focusElement\");\n\t\tif (target.get(\"focusable\")) {\n\t\t\tif (focusElement) {\n\t\t\t\tthis._decorateFocusElement(target);\n\t\t\t\tthis._positionFocusElement(target);\n\t\t\t}\n\t\t\t// else {\n\t\t\t// \tthis._renderer._makeFocusElement(0, this);\n\t\t\t// }\n\t\t}\n\t\telse if (focusElement) {\n\t\t\tthis._removeFocusElement(target);\n\t\t}\n\t\t//this.updateCurrentFocus();\n\t}\n\n\t/**\n\t * Returns `true` if `target` is currently focused.\n\t *\n\t * @param   target  Target\n\t * @return          Focused?\n\t */\n\tpublic focused(target: Sprite): boolean {\n\t\treturn this._focusedSprite === target;\n\t}\n\n\t/**\n\t * Converts document coordinates to coordinates withing root element.\n\t *\n\t * @param   point  Document point\n\t * @return         Root point\n\t */\n\tpublic documentPointToRoot(point: IPoint): IPoint {\n\t\tconst bbox = this.dom.getBoundingClientRect();\n\t\treturn {\n\t\t\tx: point.x - bbox.left,\n\t\t\ty: point.y - bbox.top\n\t\t};\n\t}\n\n\t/**\n\t * Converts root coordinates to document\n\t *\n\t * @param   point  Document point\n\t * @return         Root point\n\t */\n\tpublic rootPointToDocument(point: IPoint): IPoint {\n\t\tconst bbox = this.dom.getBoundingClientRect();\n\t\treturn {\n\t\t\tx: point.x + bbox.left,\n\t\t\ty: point.y + bbox.top\n\t\t};\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic addDisposer<T extends IDisposer>(disposer: T): T {\n\t\tthis._disposers.push(disposer);\n\t\treturn disposer;\n\t}\n\n\tprotected _updateComputedStyles(): boolean {\n\t\tconst styles = window.getComputedStyle(this.dom);\n\t\tlet fontHash = \"\";\n\t\t$object.each(styles, (key, val) => {\n\t\t\tif ($type.isString(key) && key.match(/^font/)) {\n\t\t\t\tfontHash += val;\n\t\t\t}\n\t\t})\n\t\tconst changed = fontHash != this._fontHash;\n\t\tif (changed) {\n\t\t\tthis._fontHash = fontHash;\n\t\t}\n\t\treturn changed;\n\t}\n\n\tprotected _checkComputedStyles(): void {\n\t\tif (this._updateComputedStyles()) {\n\t\t\tthis._invalidateLabelBounds(this.container);\n\t\t}\n\t}\n\n\tprotected _invalidateLabelBounds(target: Sprite): void {\n\t\tif (target instanceof Container) {\n\t\t\ttarget.children.each((child) => {\n\t\t\t\tthis._invalidateLabelBounds(child);\n\t\t\t});\n\t\t}\n\t\telse if (target instanceof Text) {\n\t\t\ttarget.markDirtyBounds();\n\t\t}\n\t}\n\n\t/**\n\t * To all the clever heads out there. Yes, we did not make any attempts to\n\t * scramble this.\n\t *\n\t * This is a part of a tool meant for our users to manage their commercial\n\t * licenses for removal of amCharts branding from charts.\n\t *\n\t * The only legit way to do so is to purchase a commercial license for amCharts:\n\t * https://www.amcharts.com/online-store/\n\t *\n\t * Removing or altering this code, or disabling amCharts branding in any other\n\t * way is against the license and thus illegal.\n\t */\n\tprotected _hasLicense(): boolean {\n\t\tfor (let i = 0; i < registry.licenses.length; i++) {\n\t\t\tif (registry.licenses[i].match(/^AM5C.{5,}/i)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic _licenseApplied(): void {\n\t\tif (this._logo) {\n\t\t\tthis._logo.set(\"forceHidden\", true);\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic get debugGhostView(): boolean {\n\t\treturn this._renderer.debugGhostView;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic set debugGhostView(value: boolean) {\n\t\tthis._renderer.debugGhostView = value;\n\t}\n\n\t/**\n\t * Set this to `true` if you need chart to require first a tap onto it before\n\t * touch gesture related functionality like zoom/pan is turned on.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/getting-started/root-element/#Touch_related_options} for more info\n\t * @default false\n\t * @since 5.2.9\n\t * @param  value  Needs a tap to activate touch functions\n\t */\n\tpublic set tapToActivate(value: boolean) {\n\t\tthis._renderer.tapToActivate = value;\n\t}\n\n\t/**\n\t * @return Needs a tap to activate touch functions\n\t */\n\tpublic get tapToActivate(): boolean {\n\t\treturn this._renderer.tapToActivate;\n\t}\n\n\t/**\n\t * If `tapToActivate` is set to `true`, this setting will determine number\n\t * of milliseconds the chart will stay \"active\", before releasing the\n\t * controls back to the page.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/getting-started/root-element/#Touch_related_options} for more info\n\t * @default 3000\n\t * @since 5.2.9\n\t * @param  value  Timeout\n\t */\n\tpublic set tapToActivateTimeout(value: number) {\n\t\tthis._renderer.tapToActivateTimeout = value;\n\t}\n\n\t/**\n\t * @return Timeout\n\t */\n\tpublic get tapToActivateTimeout(): number {\n\t\treturn this._renderer.tapToActivateTimeout;\n\t}\n\n\tpublic _makeHTMLElement(target: Container): HTMLDivElement {\n\n\t\t// Get container\n\t\tconst container = this._htmlElementContainer!;\n\n\t\t// Init\n\t\tconst htmlElement = document.createElement(\"div\");\n\t\ttarget.setPrivate(\"htmlElement\", htmlElement);\n\n\t\t//htmlElement.tabIndex = this.tabindex;\n\t\thtmlElement.style.position = \"absolute\";\n\t\thtmlElement.style.overflow = \"auto\";\n\n\t\t// Translate events\n\t\tif (target.events.isEnabled(\"click\")) {\n\t\t\tthis._disposers.push($utils.addEventListener<PointerEvent | MouseEvent>(htmlElement, \"click\", (ev: IPointerEvent) => {\n\t\t\t\tconst downEvent = this._renderer.getEvent(ev);\n\t\t\t\ttarget.events.dispatch(\"click\", {\n\t\t\t\t\ttype: \"click\",\n\t\t\t\t\toriginalEvent: downEvent.event,\n\t\t\t\t\tpoint: downEvent.point,\n\t\t\t\t\tsimulated: false,\n\t\t\t\t\ttarget: target\n\t\t\t\t});\n\t\t\t}));\n\t\t}\n\n\t\tthis._positionHTMLElement(target);\n\n\t\tcontainer.append(htmlElement);\n\n\t\t$array.pushOne(this._htmlEnabledContainers, target);\n\n\t\treturn htmlElement;\n\t}\n\n\tpublic _positionHTMLElements(): void {\n\t\t$array.each(this._htmlEnabledContainers, (target) => {\n\t\t\tthis._positionHTMLElement(target);\n\t\t});\n\t}\n\n\tpublic _positionHTMLElement(target: Container): void {\n\t\tconst htmlElement = target.getPrivate(\"htmlElement\");\n\t\tif (htmlElement) {\n\n\t\t\t// Translate settings\n\t\t\tconst visualSettings = [\"paddingTop\", \"paddingRight\", \"paddingBottom\", \"paddingLeft\", \"minWidth\", \"minHeight\", \"maxWidth\", \"maxHeight\"];\n\t\t\t$array.each(visualSettings, (setting: any) => {\n\t\t\t\tconst value = target.get(setting);\n\t\t\t\tif (value) {\n\t\t\t\t\thtmlElement.style[setting] = value + \"px\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\thtmlElement.style[setting] = \"\";\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Deal with opacity\n\t\t\thtmlElement.style.opacity = target.compositeOpacity() + \"\";\n\n\t\t\t// Hide or show\n\t\t\tif (target.isVisibleDeep()) {\n\t\t\t\thtmlElement.style.display = \"block\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\thtmlElement.style.display = \"none\";\n\t\t\t}\n\n\t\t\t// Deal with position\n\t\t\tconst bounds = target.globalBounds();\n\t\t\thtmlElement.style.top = (bounds.top) + \"px\";\n\t\t\thtmlElement.style.left = (bounds.left) + \"px\";\n\n\t\t\t// Use width/height if those are set\n\t\t\tconst width = target.get(\"width\");\n\t\t\tconst height = target.get(\"height\");\n\n\t\t\tlet w: number = 0;\n\t\t\tlet h: number = 0;\n\n\t\t\tif (width) {\n\t\t\t\tw = target.width();\n\t\t\t}\n\n\t\t\tif (height) {\n\t\t\t\th = target.height();\n\t\t\t}\n\n\t\t\tif (!width || !height) {\n\t\t\t\thtmlElement.style.width = \"\";\n\t\t\t\thtmlElement.style.height = \"\";\n\t\t\t\tconst bbox = htmlElement.getBoundingClientRect();\n\t\t\t\tw = bbox.width;\n\t\t\t\th = bbox.height;\n\t\t\t\ttarget.setPrivate(\"minWidth\", w);\n\t\t\t\ttarget.setPrivate(\"minHeight\", h);\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttarget.removePrivate(\"minWidth\");\n\t\t\t\ttarget.removePrivate(\"minHeight\");\n\t\t\t}\n\n\t\t\tif (w > 0) {\n\t\t\t\thtmlElement.style.minWidth = (w) + \"px\";\n\t\t\t}\n\t\t\tif (h > 0) {\n\t\t\t\thtmlElement.style.minHeight = (h) + \"px\";\n\t\t\t}\n\n\t\t}\n\t}\n\n\tpublic _setHTMLContent(target: Container, html: string): void {\n\t\tlet htmlElement = target.getPrivate(\"htmlElement\");\n\t\tif (!htmlElement) {\n\t\t\thtmlElement = this._makeHTMLElement(target);\n\t\t}\n\t\tif (htmlElement.innerHTML != html) {\n\t\t\thtmlElement.innerHTML = html;\n\t\t}\n\t}\n\n\tpublic _removeHTMLContent(target: Container): void {\n\t\tlet htmlElement = target.getPrivate(\"htmlElement\");\n\t\tif (htmlElement) {\n\t\t\tthis._htmlElementContainer!.removeChild(htmlElement);\n\t\t}\n\t\t$array.remove(this._htmlEnabledContainers, target);\n\t}\n}", "import type { Root } from \"../Root\"\n\nimport { Entity, IEntitySettings, IEntityPrivate, IEntityEvents } from \"./Entity\";\nimport { StyleRule } from \"./Utils\"\nimport { MultiDisposer, IDisposer, CounterDisposer } from \"../../core/util/Disposer\";\n\nimport * as $utils from \"./Utils\"\n\n\n/**\n * @ignore\n */\nlet rules: CounterDisposer | undefined;\n\n/**\n * @ignore\n */\nfunction modalCSS(element: ShadowRoot | null, root: Root, _prefix?: string): IDisposer {\n\tconst ic = root.interfaceColors;\n\tconst active = ic.get(\"secondaryButton\")!.toCSS();\n\tconst text = ic.get(\"text\")!.toCSS();\n\tconst shadow = ic.get(\"alternativeBackground\")!.toCSS(0.45);\n\t//const altbg = ic.get(\"alternativeBackground\")!.toCSS();\n\n\tif (!rules) {\n\t\tconst disposer = new MultiDisposer([\n\n\t\t\tnew StyleRule(element, \".am5-modal\", {\n\t\t\t\t\"width\": \"100%\",\n\t\t\t\t\"height\": \"100%\",\n\t\t\t\t\"position\": \"absolute\",\n\t\t\t\t\"z-index\": \"100000\",\n\t\t\t\t\"top\": \"0\",\n\t\t\t\t\"left\": \"0\"\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-curtain\", {\n\t\t\t\t\"top\": \"0\",\n\t\t\t\t\"left\": \"0\",\n\t\t\t\t\"width\": \"100%\",\n\t\t\t\t\"height\": \"100%\",\n\t\t\t\t\"position\": \"absolute\",\n\t\t\t\t\"background\": ic.get(\"background\")!.toCSS(0.5),\n\t\t\t\t\"z-index\": \"100\"\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-wrapper\", {\n\t\t\t\t\"top\": \"0\",\n\t\t\t\t\"left\": \"0\",\n\t\t\t\t\"width\": \"100%\",\n\t\t\t\t\"height\": \"100%\",\n\t\t\t\t\"position\": \"absolute\",\n\t\t\t\t\"text-align\": \"center\",\n\t\t\t\t\"white-space\": \"nowrap\",\n\t\t\t\t\"background\": ic.get(\"background\")!.toCSS(0.5),\n\t\t\t\t\"z-index\": \"101\"\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-wrapper:before\", {\n\t\t\t\t\"content\": \"''\",\n\t\t\t\t\"display\": \"inline-block\",\n\t\t\t\t\"height\": \"100%\",\n\t\t\t\t\"vertical-align\": \"middle\",\n\t\t\t\t\"margin-right\": \"-0.25em\"\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-content\", {\n\t\t\t\t\"display\": \"inline-block\",\n\t\t\t\t\"padding\": \"1.2em\",\n\t\t\t\t\"vertical-align\": \"middle\",\n\t\t\t\t\"text-align\": \"left\",\n\t\t\t\t\"white-space\": \"normal\",\n\t\t\t\t\"background\": ic.get(\"background\")!.toCSS(),\n\t\t\t\t//\"border\": \"1px solid \" + ic.get(\"alternativeBackground\")!.toCSS(),\n\t\t\t\t\"border-radius\": \"4px\",\n\t\t\t\t\"-webkit-box-shadow\": \"0px 0px 36px 0px \" + shadow,\n\t\t\t\t\"box-shadow\": \"0px 0px 36px 0px \" + shadow,\n\t\t\t\t\"color\": text\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-content h1\", {\n\t\t\t\t\"font-size\": \"1em\",\n\t\t\t\t\"margin\": \"0 0 0.5em 0\"\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-table\", {\n\t\t\t\t\"display\": \"table\",\n\t\t\t\t\"margin\": \"1em 0\"\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-table-row\", {\n\t\t\t\t\"display\": \"table-row\"\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-table-heading\", {\n\t\t\t\t\"display\": \"table-heading\",\n\t\t\t\t\"padding\": \"3px 10px 3px 0\",\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-table-cell\", {\n\t\t\t\t\"display\": \"table-cell\",\n\t\t\t\t\"padding\": \"3px 0 3px 0\",\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-table-cell > *\", {\n\t\t\t\t\"vertical-align\": \"middle\"\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-content input[type=text], .am5-modal-content input[type=number], .am5-modal-content select\", {\n\t\t\t\t\"border\": \"1px solid \" + active,\n\t\t\t\t\"border-radius\": \"4px\",\n\t\t\t\t\"padding\": \"3px 5px\",\n\t\t\t\t\"margin\": \"2px\"\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-input-narrow\", {\n\t\t\t\t\"width\": \"50px\"\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-button\", {\n\t\t\t\t\"font-weight\": \"400\",\n\t\t\t\t\"color\": ic.get(\"secondaryButtonText\")!.toCSS(),\n\t\t\t\t\"line-height\": \"1.5\",\n\t\t\t\t\"text-align\": \"center\",\n\t\t\t\t\"text-decoration\": \"none\",\n\t\t\t\t\"vertical-align\": \"middle\",\n\t\t\t\t\"cursor\": \"pointer\",\n\t\t\t\t\"padding\": \"0.2em 0.8em\",\n\t\t\t\t\"font-size\": \"1em\",\n\t\t\t\t\"border-radius\": \"0.25em\",\n\t\t\t\t\"margin\": \"0 0.25em 0 0\",\n\t\t\t\t\"border\": \"1px solid \" + ic.get(\"secondaryButtonStroke\")!.toCSS(),\n\t\t\t\t\"background\": ic.get(\"secondaryButton\")!.toCSS()\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-button:hover\", {\n\t\t\t\t\"background\": ic.get(\"secondaryButtonHover\")!.toCSS()\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-button.am5-modal-primary\", {\n\t\t\t\t\"color\": ic.get(\"primaryButtonText\")!.toCSS(),\n\t\t\t\t\"border\": \"1px solid \" + ic.get(\"primaryButtonStroke\")!.toCSS(),\n\t\t\t\t\"background\": ic.get(\"primaryButton\")!.toCSS()\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-button.am5-modal-primary:hover\", {\n\t\t\t\t\"background\": ic.get(\"primaryButtonHover\")!.toCSS()\n\t\t\t}),\n\n\t\t]);\n\n\t\trules = new CounterDisposer(() => {\n\t\t\trules = undefined;\n\t\t\tdisposer.dispose();\n\t\t});\n\t}\n\n\treturn rules.increment();\n}\n\n\nexport interface IModalSettings extends IEntitySettings {\n\n\t/**\n\t * HTML content of the modal.\n\t */\n\tcontent?: string;\n\n\t/**\n\t * When modal is open, all interactions for the underlying chart will be\n\t * disabled.\n\t *\n\t * @default true\n\t * @since 5.2.11\n\t */\n\tdeactivateRoot?: boolean;\n\n}\n\nexport interface IModalPrivate extends IEntityPrivate {\n\tcontainer: HTMLDivElement;\n\tcurtain: HTMLDivElement;\n\twrapper: HTMLDivElement;\n\tcontent: HTMLDivElement;\n}\n\nexport interface IModalEvents extends IEntityEvents {\n\t\"opened\": {}\n\t\"closed\": {}\n\t\"cancelled\": {}\n}\n\n/**\n * Used to display a modal dialog with HTML content.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/modal-popups/} for more info\n */\nexport class Modal extends Entity {\n\tpublic static className: string = \"Modal\";\n\tpublic static classNames: Array<string> = Entity.classNames.concat([Modal.className]);\n\n\tdeclare public _settings: IModalSettings;\n\tdeclare public _privateSettings: IModalPrivate;\n\tdeclare public _events: IModalEvents;\n\n\t//protected _currentPass: number = 0;\n\n\tprotected _afterNew() {\n\t\t// Applying themes because this will not have parents\n\t\tsuper._afterNewApplyThemes();\n\n\t\t// Defaults\n\t\tthis._setRawDefault(\"deactivateRoot\", true);\n\n\t\t// Load CSS\n\t\tmodalCSS($utils.getShadowRoot(this._root.dom), this._root);\n\n\t\t// Create elements\n\t\tconst container = document.createElement(\"div\");\n\t\tcontainer.className = \"am5-modal\";\n\t\tcontainer.style.display = \"none\";\n\t\tthis.root._inner.appendChild(container);\n\t\tthis.setPrivate(\"container\", container);\n\n\t\tconst curtain = document.createElement(\"div\");\n\t\tcurtain.className = \"am5-modal-curtain\";\n\t\tcontainer.appendChild(curtain);\n\t\tthis.setPrivate(\"curtain\", curtain);\n\n\t\t$utils.addEventListener(curtain, \"click\", () => {\n\t\t\tthis.cancel();\n\t\t});\n\n\t\tconst wrapper = document.createElement(\"div\");\n\t\twrapper.className = \"am5-modal-wrapper\";\n\t\tcontainer.appendChild(wrapper);\n\t\tthis.setPrivate(\"wrapper\", wrapper);\n\n\t\tconst content = document.createElement(\"div\");\n\t\tcontent.className = \"am5-modal-content\";\n\t\twrapper.appendChild(content);\n\t\tthis.setPrivate(\"content\", content);\n\n\t\tconst html = this.get(\"content\");\n\t\tif (html) {\n\t\t\tcontent.innerHTML = html;\n\t\t}\n\n\t\t// Close on ESC\n\t\tif ($utils.supports(\"keyboardevents\")) {\n\t\t\tthis._disposers.push($utils.addEventListener(document, \"keydown\", (ev: KeyboardEvent) => {\n\t\t\t\tif (this.isOpen() && ev.keyCode == 27) {\n\t\t\t\t\tthis.cancel();\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t}\n\n\tpublic _beforeChanged() {\n\t\tsuper._beforeChanged();\n\n\t\tif (this.isDirty(\"content\")) {\n\t\t\tthis.getPrivate(\"content\").innerHTML = this.get(\"content\", \"\");\n\t\t}\n\t}\n\n\t/**\n\t * Returns `true` if modal is currently open.\n\t * \n\t * @return  Modal open?\n\t */\n\tpublic isOpen(): boolean {\n\t\treturn this.getPrivate(\"container\").style.display != \"none\";\n\t}\n\n\t/**\n\t * Opens modal.\n\t */\n\tpublic open(): void {\n\t\tthis.getPrivate(\"container\").style.display = \"block\";\n\t\tif (this.get(\"deactivateRoot\")) {\n\t\t\tthis._root._renderer.interactionsEnabled = false;\n\t\t}\n\t\tthis.events.dispatch(\"opened\", {\n\t\t\ttype: \"opened\",\n\t\t\ttarget: this\n\t\t});\n\t}\n\n\t/**\n\t * Closes modal.\n\t */\n\tpublic close(): void {\n\t\tthis.getPrivate(\"container\").style.display = \"none\";\n\t\tif (this.get(\"deactivateRoot\")) {\n\t\t\tthis._root._renderer.interactionsEnabled = true;\n\t\t}\n\t\tthis.events.dispatch(\"closed\", {\n\t\t\ttype: \"closed\",\n\t\t\ttarget: this\n\t\t});\n\t}\n\n\t/**\n\t * Closes modal and invokes `cancelled` event.\n\t */\n\tpublic cancel(): void {\n\t\tthis.getPrivate(\"container\").style.display = \"none\";\n\t\tif (this.get(\"deactivateRoot\")) {\n\t\t\tthis._root._renderer.interactionsEnabled = true;\n\t\t}\n\t\tthis.events.dispatch(\"cancelled\", {\n\t\t\ttype: \"cancelled\",\n\t\t\ttarget: this\n\t\t});\n\t}\n\n\t/**\n\t * Disposes modal.\n\t */\n\tpublic dispose() {\n\t\tsuper.dispose();\n\t\tthis.root.dom.removeChild(this.getPrivate(\"container\"));\n\t}\n\n}", "import { Entity, IEntitySettings, IEntityPrivate } from \"../../core/util/Entity\";\nimport type { Sprite } from \"../../core/render/Sprite\";\nimport type { Series } from \"../../core/render/Series\";\n\nexport interface IBulletSettings extends IEntitySettings {\n\n\t/**\n\t * Horizontal location within target element.\n\t *\n\t * 0 - left, 1 - right, or anything inbetweeen.\n\t */\n\tlocationX?: number;\n\n\t/**\n\t * Vertical location within target element.\n\t *\n\t * 0 - top, 1 - bottom, or anything inbetweeen.\n\t */\n\tlocationY?: number;\n\n\t/**\n\t * A visual element of the bullet.\n\t */\n\tsprite: Sprite;\n\n\t/**\n\t * If set to `true`, the bullet will redraw its `sprite` element whenever\n\t * anything in its parent series changes.\n\t *\n\t * @default false\n\t */\n\tdynamic?: boolean;\n\n\t/**\n\t * If set to `true`, the bullet will be automatically rotated to face\n\t * direction of line it is attached to.\n\t *\n\t * NOTE: Works only in  [[Flow]] and [[MapPointSeries]] (when [[MapPoint]] is\n\t * attached to a [[MapLine]]).\n\t *\n\t * @default false\n\t */\n\tautoRotate?: boolean;\n\n\t/**\n\t * If `autoRotate` is set to `true`, value of `autoRotateAngle` will be added\n\t * to the automatically-calculated angle.\n\t */\n\tautoRotateAngle?: number;\n\n}\n\nexport interface IBulletPrivate extends IEntityPrivate {\n\thidden?:boolean;\n}\n\n/**\n * A universal placeholder for bullet elements.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/bullets/} for more info\n */\nexport class Bullet extends Entity {\n\tpublic static className: string = \"Bullet\";\n\tpublic static classNames: Array<string> = Entity.classNames.concat([Bullet.className]);\n\n\tdeclare public _settings: IBulletSettings;\n\tdeclare public _privateSettings: IBulletPrivate;\n\n\t// used by MapPolygons where one data item can have multiple bullets of the same kind\n\tpublic _index?: number;\n\n\t/**\n\t * Target series object if it's a bullet for series.\n\t */\n\tpublic series: Series | undefined;\n\n\tprotected _afterNew() {\n\t\t// Applying themes because bullet will not have parent\n\t\tsuper._afterNewApplyThemes();\n\t}\n\n\tpublic _beforeChanged() {\n\t\tsuper._beforeChanged();\n\n\t\tif (this.isDirty(\"sprite\")) {\n\t\t\tconst sprite = this.get(\"sprite\");\n\t\t\tif (sprite) {\n\t\t\t\tsprite.setAll({ position: \"absolute\", role: \"figure\" });\n\t\t\t\tthis._disposers.push(sprite);\n\t\t\t}\n\t\t}\n\n\t\tif (this.isDirty(\"locationX\") || this.isDirty(\"locationY\")) {\n\t\t\tif (this.series) {\n\t\t\t\tthis.series._positionBullet(this);\n\t\t\t}\n\t\t}\n\t}\n}\n", "import { Graphics, IGraphicsSettings, IGraphicsPrivate } from \"./Graphics\";\n\nexport interface ICircleSettings extends IGraphicsSettings {\n\n\t/**\n\t * Circle radius in pixels.\n\t */\n\tradius?: number;\n\n}\n\nexport interface ICirclePrivate extends IGraphicsPrivate {\n}\n\n/**\n * Draws a circle.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\n * @important\n */\nexport class Circle extends Graphics {\n\n\tdeclare public _settings: ICircleSettings;\n\tdeclare public _privateSettings: ICirclePrivate;\n\n\tpublic static className: string = \"Circle\";\n\tpublic static classNames: Array<string> = Graphics.classNames.concat([Circle.className]);\n\n\tpublic _beforeChanged() {\n\t\tsuper._beforeChanged();\n\n\t\tif (this.isDirty(\"radius\")) {\n\t\t\tthis._clear = true;\n\t\t}\n\t}\n\n\tpublic _changed() {\n\t\tsuper._changed();\n\n\t\tif (this._clear) {\n\t\t\tthis._display.drawCircle(0, 0, this.get(\"radius\", 10));\n\t\t}\n\t}\n}\n", "import { Graphics, IGraphicsSettings, IGraphicsPrivate } from \"./Graphics\";\r\n\r\nexport interface IEllipseSettings extends IGraphicsSettings {\r\n\r\n\t/**\r\n\t * The ellipse's major-axis radius. Must be non-negative.\r\n\t */\r\n\r\n\tradiusX: number\r\n\r\n\t/**\r\n\t * The ellipse's minor-axis radius. Must be non-negative.\r\n\t */\r\n\tradiusY: number\r\n}\r\n\r\nexport interface IEllipsePrivate extends IGraphicsPrivate {\r\n}\r\n\r\n/**\r\n * Draws a Ellipse.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\r\n * @important\r\n */\r\nexport class Ellipse extends Graphics {\r\n\r\n\tdeclare public _settings: IEllipseSettings;\r\n\tdeclare public _privateSettings: IEllipsePrivate;\r\n\r\n\tpublic static className: string = \"Ellipse\";\r\n\tpublic static classNames: Array<string> = Graphics.classNames.concat([Ellipse.className]);\r\n\r\n\tpublic _beforeChanged() {\r\n\t\tsuper._beforeChanged();\r\n\r\n\t\tif (this.isDirty(\"radiusX\") || this.isDirty(\"radiusY\") || this.isDirty(\"rotation\")) {\r\n\t\t\tthis._clear = true;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic _changed() {\r\n\t\tsuper._changed();\r\n\r\n\t\tif (this._clear) {\r\n\t\t\tthis._display.drawEllipse(0, 0, Math.abs(this.get(\"radiusX\")), Math.abs(this.get(\"radiusY\")));\r\n\t\t}\r\n\t}\r\n}\r\n", "import { Graphics, IGraphicsSettings, IGraphicsPrivate } from \"./Graphics\";\r\nimport type { Percent } from \"../../core/util/Percent\";\r\nimport * as $utils from \"../../core/util/Utils\";\r\n\r\nexport interface IStarSettings extends IGraphicsSettings {\r\n\r\n\t/**\r\n\t * Star's radius in pixels.\r\n\t */\r\n\tradius?: number;\r\n\r\n\t/**\r\n\t * Star's inner radius in pixels.\r\n\t */\r\n\tinnerRadius?: number | Percent;\r\n\r\n\t/**\r\n\t * Number of spikes\r\n\t */\r\n\tspikes?: number;\r\n\r\n}\r\n\r\nexport interface IStarPrivate extends IGraphicsPrivate {\r\n}\r\n\r\n/**\r\n * Draws a Star.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\r\n * @important\r\n */\r\nexport class Star extends Graphics {\r\n\r\n\tdeclare public _settings: IStarSettings;\r\n\tdeclare public _privateSettings: IStarPrivate;\r\n\r\n\tpublic static className: string = \"Star\";\r\n\tpublic static classNames: Array<string> = Graphics.classNames.concat([Star.className]);\r\n\r\n\tpublic _beforeChanged() {\r\n\t\tsuper._beforeChanged();\r\n\r\n\t\tif (this.isDirty(\"radius\") || this.isDirty(\"innerRadius\") || this.isDirty(\"spikes\")) {\r\n\t\t\tthis._clear = true;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic _changed() {\r\n\t\tsuper._changed();\r\n\r\n\t\tif (this._clear) {\r\n\t\t\tconst display = this._display;\r\n\t\t\tconst r = this.get(\"radius\", 0);\r\n\t\t\tconst ir = $utils.relativeToValue(this.get(\"innerRadius\", 0), r);\r\n\t\t\tconst spikes = this.get(\"spikes\", 0);\r\n\t\t\tconst step = Math.PI / spikes;\r\n\t\t\tlet angle = Math.PI / 2 * 3;\r\n\r\n\t\t\tdisplay.moveTo(0, - r)\r\n\r\n\t\t\tfor (let i = 0; i < spikes; i++) {\r\n\t\t\t\tdisplay.lineTo(Math.cos(angle) * r, Math.sin(angle) * r)\r\n\t\t\t\tangle += step\r\n\r\n\t\t\t\tdisplay.lineTo(Math.cos(angle) * ir, Math.sin(angle) * ir)\r\n\t\t\t\tangle += step\r\n\t\t\t}\r\n\t\t\tdisplay.lineTo(0, -r)\r\n\t\t}\r\n\t}\r\n}\r\n", "import type { IBounds } from \"../../util/IBounds\"\nimport type { IGradient, IGradientStop } from \"../backend/Renderer\";\nimport type { Sprite } from \"../Sprite\";\n\nimport { Entity, IEntitySettings, IEntityPrivate } from \"../../util/Entity\"\n\n\nexport interface IGradientSettings extends IEntitySettings {\n\n\t/**\n\t * A list of color steps for the gradient.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/gradients/} for more info\n\t */\n\tstops?: Array<IGradientStop>;\n\n\t/**\n\t * Gradient target.\n\t */\n\ttarget?: Sprite;\n\n}\n\nexport interface IGradientPrivate extends IEntityPrivate {\n}\n\n/**\n * Base class for gradients.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/gradients/} for more info\n */\nexport abstract class Gradient extends Entity {\n\n\tdeclare public _settings: IGradientSettings;\n\tdeclare public _privateSettings: IGradientPrivate;\n\n\tpublic static className: string = \"Gradient\";\n\tpublic static classNames: Array<string> = Entity.classNames.concat([Gradient.className]);\n\n\tprotected _afterNew() {\n\t\t// Applying themes because gradient will not have parent\n\t\tsuper._afterNewApplyThemes();\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic getFill(_target: Sprite): IGradient {\n\t\treturn {\n\t\t\taddColorStop: (_offset: number, _color: string) => { }\n\t\t};\n\t}\n\n\tpublic _changed() {\n\t\tsuper._changed();\n\n\t\t//if (this.isDirty(\"target\") && this.get(\"target\")) {\n\t\t//\tthis.get(\"target\")!.events.on(\"boundschanged\", () => {\n\n\t\t//\t});\n\t\t//}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic getBounds(target: Sprite): IBounds {\n\t\tconst gradientTarget = this.get(\"target\");\n\t\tif (gradientTarget) {\n\t\t\tlet bounds = gradientTarget.globalBounds();\n\n\t\t\tconst p0 = target.toLocal({ x: bounds.left, y: bounds.top });\n\t\t\tconst p1 = target.toLocal({ x: bounds.right, y: bounds.top });\n\t\t\tconst p2 = target.toLocal({ x: bounds.right, y: bounds.bottom });\n\t\t\tconst p3 = target.toLocal({ x: bounds.left, y: bounds.bottom });\n\n\t\t\treturn {\n\t\t\t\tleft: Math.min(p0.x, p1.x, p2.x, p3.x),\n\t\t\t\ttop: Math.min(p0.y, p1.y, p2.y, p3.y),\n\t\t\t\tright: Math.max(p0.x, p1.x, p2.x, p3.x),\n\t\t\t\tbottom: Math.max(p0.y, p1.y, p2.y, p3.y)\n\t\t\t}\n\t\t}\n\t\treturn target._display.getLocalBounds();\n\t}\n\n}\n", "import type { IGradient } from \"../backend/Renderer\";\nimport type { Sprite } from \"../Sprite\";\n\nimport { Gradient, IGradientSettings, IGradientPrivate } from \"./Gradient\";\nimport { Color } from \"../../util/Color\";\n\nimport * as $array from \"../../util/Array\";\nimport * as $type from \"../../util/Type\";\nimport * as $math from \"../../util/Math\";\n\n\nexport interface ILinearGradientSettings extends IGradientSettings {\n\n\t/**\n\t * Gradient rotation, in degrees.\n\t *\n\t * @default 90\n\t */\n\trotation?: number;\n\n}\n\nexport interface ILinearGradientPrivate extends IGradientPrivate {\n}\n\n/**\n * Linear gradient.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/gradients/} for more info\n */\nexport class LinearGradient extends Gradient {\n\n\tdeclare public _settings: ILinearGradientSettings;\n\tdeclare public _privateSettings: ILinearGradientPrivate;\n\n\tpublic static className: string = \"LinearGradient\";\n\tpublic static classNames: Array<string> = Gradient.classNames.concat([LinearGradient.className]);\n\n\t/**\n\t * @ignore\n\t */\n\tpublic getFill(target: Sprite): IGradient {\n\t\tconst rotation = this.get(\"rotation\", 0);\n\t\tlet bounds = this.getBounds(target);\n\n\t\tlet l = bounds.left || 0;\n\t\tlet r = bounds.right || 0;\n\t\tlet t = bounds.top || 0;\n\t\tlet b = bounds.bottom || 0;\n\n\t\tlet cos = $math.cos(rotation);\n\t\tlet sin = $math.sin(rotation);\n\n\t\tlet w = cos * (r - l);\n\t\tlet h = sin * (b - t);\n\n\t\tlet longer = Math.max(w, h);\n\n\t\tconst gradient = this._root._renderer.createLinearGradient(\n\t\t\tl,\n\t\t\tt,\n\t\t\tl + longer * cos,\n\t\t\tt + longer * sin\n\t\t);\n\n\t\tconst stops = this.get(\"stops\")!;\n\t\tif (stops) {\n\t\t\tlet i = 0;\n\t\t\t$array.each(stops, (stop) => {\n\n\t\t\t\tlet offset = stop.offset;\n\n\t\t\t\tif (!$type.isNumber(offset)) {\n\t\t\t\t\toffset = i / (stops.length - 1);\n\t\t\t\t}\n\n\t\t\t\tlet opacity = stop.opacity;\n\n\t\t\t\tif (!$type.isNumber(opacity)) {\n\t\t\t\t\topacity = 1;\n\t\t\t\t}\n\n\t\t\t\tlet color = stop.color;\n\n\t\t\t\tif (color) {\n\n\t\t\t\t\tconst lighten = stop.lighten;\n\t\t\t\t\tif (lighten) {\n\t\t\t\t\t\tcolor = Color.lighten(color, lighten)\n\t\t\t\t\t}\n\n\t\t\t\t\tconst brighten = stop.brighten;\n\t\t\t\t\tif (brighten) {\n\t\t\t\t\t\tcolor = Color.brighten(color, brighten)\n\t\t\t\t\t}\n\n\t\t\t\t\tgradient.addColorStop(offset, 'rgba(' + color.r + ',' + color.g + ',' + color.b + ',' + opacity + ')');\n\t\t\t\t}\n\t\t\t\ti++;\n\t\t\t})\n\t\t}\n\t\treturn gradient;\n\t}\n}\n", "import type { IPoint } from \"../../core/util/IPoint\";\n\nimport { Container, IContainerSettings, IContainerPrivate } from \"./Container\";\nimport { Label } from \"../../core/render/Label\";\nimport { p100 } from \"../../core/util/Percent\";\nimport { RoundedRectangle } from \"../../core/render/RoundedRectangle\";\nimport { Template } from \"../../core/util/Template\";\nimport { ListTemplate } from \"../../core/util/List\";\nimport { Color } from \"../../core/util/Color\";\nimport { Tooltip } from \"../../core/render/Tooltip\";\nimport { LinearGradient } from \"../../core/render/gradients/LinearGradient\";\n\nimport * as $utils from \"../../core/util/Utils\";\nimport * as $type from \"../../core/util/Type\";\n\nexport interface IHeatLegendSettings extends IContainerSettings {\n\n\t/**\n\t * Starting (lowest value) color.\n\t */\n\tstartColor: Color;\n\n\t/**\n\t * Ending (highest value) color.\n\t */\n\tendColor: Color;\n\n\t/**\n\t * Start (lowest) value.\n\t */\n\tstartValue?: number;\n\n\t/**\n\t * End (highest) value.\n\t */\n\tendValue?: number;\n\n\t/**\n\t * Text for start label.\n\t */\n\tstartText?: string;\n\n\t/**\n\t * Text for end label.\n\t */\n\tendText?: string;\n\n\t/**\n\t * Number of steps\n\t *\n\t * @default 1\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/legend/heat-legend/#Gradient_or_steps} for more info\n\t */\n\tstepCount?: number;\n\n\t/**\n\t * Orientation of the heat legend.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/legend/heat-legend/#Orientation} for more info\n\t */\n\torientation: \"horizontal\" | \"vertical\";\n\n}\n\nexport interface IHeatLegendPrivate extends IContainerPrivate {\n}\n\n/**\n * Heat legend.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/legend/heat-legend/} for more info\n */\nexport class HeatLegend extends Container {\n\n\t/**\n\t * A [[Container]] that all labels are placed in.\n\t *\n\t * @default Container.new()\n\t */\n\tpublic readonly labelContainer: Container = this.children.push(Container.new(this._root, {}));\n\n\t/**\n\t * A [[Container]] that all markers are placed in.\n\t *\n\t * @default Container.new()\n\t */\n\tpublic readonly markerContainer: Container = this.children.push(Container.new(this._root, {}));\n\n\t/**\n\t * A start [[Label]].\n\t *\n\t * @default Label.new()\n\t */\n\tpublic readonly startLabel: Label = this.labelContainer.children.push(Label.new(this._root, { themeTags: [\"start\"] }));\n\n\t/**\n\t * An end [[Label]].\n\t *\n\t * @default Label.new()\n\t */\n\tpublic readonly endLabel: Label = this.labelContainer.children.push(Label.new(this._root, { themeTags: [\"end\"] }));\n\n\tpublic static className: string = \"HeatLegend\";\n\tpublic static classNames: Array<string> = Container.classNames.concat([HeatLegend.className]);\n\n\tdeclare public _settings: IHeatLegendSettings;\n\tdeclare public _privateSettings: IHeatLegendPrivate;\n\n\n\tprotected _afterNew() {\n\t\tthis._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"heatlegend\", this._settings.orientation]);\n\t\tsuper._afterNew();\n\t\tthis.set(\"tooltip\", Tooltip.new(this._root, {\n\t\t\tthemeTags: [\"heatlegend\"]\n\t\t}));\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeMarker(): RoundedRectangle {\n\t\tconst marker = this.markers.make();\n\t\tmarker.states.create(\"disabled\", {});\n\t\treturn marker;\n\t}\n\n\t/**\n\t * List of rectangle elements used for default legend markers.\n\t *\n\t * @default new ListTemplate<RoundedRectangle>\n\t */\n\tpublic readonly markers: ListTemplate<RoundedRectangle> = new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => RoundedRectangle._new(this._root, {\n\t\t\tthemeTags: $utils.mergeTags(this.markers.template.get(\"themeTags\", []), [this.get(\"orientation\"), \"heatlegend\", \"marker\"])\n\t\t}, [this.markers.template])\n\t);\n\n\n\t/**\n\t * Moves and shows tooltip at specific value.\n\t *\n\t * Can also specify optional text to show in tooltip, as well as the color.\n\t *\n\t * @param  value  Value\n\t * @param  text   Text\n\t * @param  color  Color\n\t */\n\tpublic showValue(value: number, text?: string, color?: Color) {\n\t\tconst tooltip = this.getTooltip();\n\t\tif (tooltip && $type.isNumber(value)) {\n\n\t\t\tconst startValue = this.get(\"startValue\", 0);\n\t\t\tconst endValue = this.get(\"endValue\", 1);\n\n\t\t\tconst c = (value - startValue) / (endValue - startValue);\n\t\t\tconst startColor = this.get(\"startColor\")!;\n\t\t\tconst endColor = this.get(\"endColor\")!;\n\n\t\t\tif (!text) {\n\t\t\t\ttext = this.getNumberFormatter().format(value);\n\t\t\t}\n\n\t\t\tif (!color) {\n\t\t\t\tcolor = Color.interpolate(c, startColor, endColor);\n\t\t\t}\n\n\t\t\ttooltip.label.set(\"text\", text);\n\t\t\tlet p:IPoint;\n\n\t\t\tif (this.get(\"orientation\") == \"vertical\") {\n\t\t\t\tp = this.markerContainer.toGlobal({ x: 0, y: this.innerHeight() * (1 - c) });\n\t\t\t}\n\t\t\telse {\n\t\t\t\tp = this.markerContainer.toGlobal({ x: this.innerWidth() * c, y: 0 });\n\t\t\t}\n\n\t\t\tlet background = tooltip.get(\"background\");\n\t\t\tif (background) {\n\t\t\t\tbackground.set(\"fill\", Color.interpolate(c, startColor, endColor))\n\t\t\t}\n\t\t\ttooltip.set(\"pointTo\", p);\n\t\t\ttooltip.show();\n\t\t}\n\t}\n\n\tpublic _prepareChildren() {\n\t\tsuper._prepareChildren();\n\n\t\tconst labelContainer = this.labelContainer;\n\t\tconst orientation = this.get(\"orientation\");\n\t\tconst startLabel = this.startLabel;\n\t\tconst endLabel = this.endLabel;\n\t\tconst tooltip = this.getTooltip();\n\n\t\tif (this.isDirty(\"orientation\")) {\n\t\t\tif (orientation == \"vertical\") {\n\t\t\t\tthis.markerContainer.setAll({ layout: this._root.verticalLayout, height: p100 });\n\t\t\t\tthis.set(\"layout\", this._root.horizontalLayout);\n\t\t\t\tstartLabel.setAll({ y: p100, x: undefined, centerY: p100, centerX: p100 });\n\t\t\t\tendLabel.setAll({ y: 0, x: undefined, centerY: 0, centerX: p100 });\n\t\t\t\tlabelContainer.setAll({ height: p100, width: undefined });\n\t\t\t\tif (tooltip) {\n\t\t\t\t\ttooltip.set(\"pointerOrientation\", \"horizontal\");\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.markerContainer.setAll({ layout: this._root.horizontalLayout, width: p100 });\n\t\t\t\tthis.set(\"layout\", this._root.verticalLayout);\n\t\t\t\tstartLabel.setAll({ x: 0, y: undefined, centerX: 0, centerY: 0 });\n\t\t\t\tendLabel.setAll({ x: p100, y: undefined, centerX: p100, centerY: 0 });\n\t\t\t\tlabelContainer.setAll({ width: p100, height: undefined });\n\t\t\t\tif (tooltip) {\n\t\t\t\t\ttooltip.set(\"pointerOrientation\", \"vertical\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.isDirty(\"stepCount\")) {\n\t\t\tconst stepCount = this.get(\"stepCount\", 1);\n\t\t\tconst startColor = this.get(\"startColor\")!;\n\t\t\tconst endColor = this.get(\"endColor\")!;\n\t\t\tthis.markerContainer.children.clear();\n\t\t\tif (stepCount > 1) {\n\t\t\t\tfor (let i = 0; i < stepCount; i++) {\n\t\t\t\t\tconst marker = this.makeMarker();\n\n\t\t\t\t\tif (orientation == \"vertical\") {\n\t\t\t\t\t\tthis.markerContainer.children.moveValue(marker, 0);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis.markerContainer.children.push(marker);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (startColor && endColor) {\n\t\t\t\t\t\tmarker.set(\"fill\", Color.interpolate(i / stepCount, startColor, endColor));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (stepCount == 1) {\n\t\t\t\tconst marker = this.makeMarker();\n\t\t\t\tthis.markerContainer.children.push(marker);\n\t\t\t\tconst gradient = LinearGradient.new(this._root, { stops: [{ color: startColor }, { color: endColor }] });\n\n\t\t\t\tif (orientation == \"vertical\") {\n\t\t\t\t\tgradient.set(\"rotation\", 90);\n\t\t\t\t\tlet stops = gradient.get(\"stops\");\n\t\t\t\t\tif (stops) {\n\t\t\t\t\t\tstops.reverse();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tgradient.set(\"rotation\", 0);\n\t\t\t\t}\n\t\t\t\tif (startColor && endColor) {\n\t\t\t\t\tmarker.set(\"fillGradient\", gradient);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.isDirty(\"startText\") || this.isDirty(\"startValue\")) {\n\t\t\tstartLabel.set(\"text\", this.get(\"startText\", this.getNumberFormatter().format(this.get(\"startValue\", 0))));\n\t\t}\n\n\t\tif (this.isDirty(\"endText\") || this.isDirty(\"endValue\")) {\n\t\t\tendLabel.set(\"text\", this.get(\"endText\", this.getNumberFormatter().format(this.get(\"endValue\", 1))))\n\t\t}\n\t}\n}\n", "import type { DataItem } from \"../../core/render/Component\";\nimport { Series, ISeriesSettings, ISeriesDataItem, ISeriesPrivate, ISeriesEvents } from \"./Series\";\nimport { Container } from \"../../core/render/Container\";\nimport { Label } from \"../../core/render/Label\";\nimport { RoundedRectangle } from \"../../core/render/RoundedRectangle\";\nimport { Template } from \"../../core/util/Template\";\nimport { ListTemplate } from \"../../core/util/List\";\nimport type { Entity, IEntitySettings } from \"../../core/util/Entity\";\nimport type { Color } from \"../../core/util/Color\";\nimport * as $utils from \"../../core/util/Utils\";\n\nexport interface ILegendDataItem extends ISeriesDataItem {\n\n\t/**\n\t * [[Container]] element holding all other legend item elements, labels,\n\t * markers, etc.\n\t */\n\titemContainer: Container;\n\n\t/**\n\t * Marker element.\n\t */\n\tmarker: Container;\n\n\t/**\n\t * Marker rectangle element.\n\t */\n\tmarkerRectangle: RoundedRectangle;\n\n\t/**\n\t * Label element.\n\t */\n\tlabel: Label;\n\n\t/**\n\t * Value label element.\n\t */\n\tvalueLabel: Label;\n\n\t/**\n\t * Marker fill color.\n\t */\n\tfill?: Color;\n\n\t/**\n\t * Marker stroke (outline) color.\n\t */\n\tstroke?: Color;\n\n\t/**\n\t * Name of the legend item.\n\t */\n\tname?: string;\n\n}\n\nexport interface ILegendItemSettings extends IEntitySettings {\n\tvisible?: boolean;\n}\n\n/**\n * @ignore\n */\nexport interface ILegendItem extends Entity {\n\t_settings: ILegendItemSettings;\n\tisHidden?: () => boolean;\n\tshow?: () => void;\n\thide?: () => void;\n\tcreateLegendMarker?: () => {}\n\tcomponent?: Series;\n\t// how to define that properties of dataItem should have legendDataItem?\n}\n\n//type ILegendDataItemSettings = { [K in keyof ILegendDataItem]?: string; };\n\nexport interface ILegendSettings extends ISeriesSettings {\n\n\t/**\n\t * If set to `true` the legend will not try to mimic appearance of the actual\n\t * item but rather show default square marker.\n\t *\n\t * @default false\n\t */\n\tuseDefaultMarker?: boolean;\n\n\t/**\n\t * A key to look up in data for a name of the data item.\n\t *\n\t */\n\tnameField?: string;\n\n\t/**\n\t * A key to look up in data for a fill of the data item.\n\t *\n\t */\n\tfillField?: string;\n\n\t/**\n\t * A key to look up in data for a stroke of the data item.\n\t *\n\t */\n\tstrokeField?: string;\n\n\t/**\n\t * Which legend item element will be clickable to toggle related chart item:\n\t * * `\"itemContainer\"` - the whole legend item (default).\n\t * * `\"marker\"` - legend item marker.\n\t * * `\"none\"` - disables toggling of legend item.\n\t *\n\t * @default \"itemContainer\"\n\t * @since 5.0.13\n\t */\n\tclickTarget?: \"itemContainer\" | \"marker\" | \"none\"\n\n}\n\nexport interface ILegendPrivate extends ISeriesPrivate {\n}\n\nexport interface ILegendEvents extends ISeriesEvents {\n\n}\n\n/**\n * A universal legend control.\n *\n * @important\n * @see {@link https://www.amcharts.com/docs/v5/concepts/legend/} for more info\n */\nexport class Legend extends Series {\n\tprotected _afterNew() {\n\t\tthis._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"legend\"]);\n\t\tthis.fields.push(\"name\", \"stroke\", \"fill\");\n\t\tsuper._afterNew();\n\t}\n\n\tpublic static className: string = \"Legend\";\n\tpublic static classNames: Array<string> = Series.classNames.concat([Legend.className]);\n\n\tdeclare public _settings: ILegendSettings;\n\tdeclare public _privateSettings: ILegendPrivate;\n\tdeclare public _dataItemSettings: ILegendDataItem;\n\tdeclare public _events: ILegendEvents;\n\n\n\t/**\n\t * List of all [[Container]] elements for legend items.\n\t *\n\t * @default new ListTemplate<Container>\n\t */\n\tpublic readonly itemContainers: ListTemplate<Container> = new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => Container._new(this._root, {\n\t\t\tthemeTags: $utils.mergeTags(this.itemContainers.template.get(\"themeTags\", []), [\"legend\", \"item\"]),\n\t\t\tthemeTagsSelf: $utils.mergeTags(this.itemContainers.template.get(\"themeTagsSelf\", []), [\"itemcontainer\"]),\n\t\t\tbackground: RoundedRectangle.new(this._root, {\n\t\t\t\tthemeTags: $utils.mergeTags(this.itemContainers.template.get(\"themeTags\", []), [\"legend\", \"item\", \"background\"]),\n\t\t\t\tthemeTagsSelf: $utils.mergeTags(this.itemContainers.template.get(\"themeTagsSelf\", []), [\"itemcontainer\"])\n\t\t\t})\n\t\t}, [this.itemContainers.template])\n\t);\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeItemContainer(dataItem: DataItem<this[\"_dataItemSettings\"]>): Container {\n\t\tconst itemContainer = this.children.push(this.itemContainers.make());\n\t\titemContainer._setDataItem(dataItem);\n\t\tthis.itemContainers.push(itemContainer);\n\t\titemContainer.states.create(\"disabled\", {});\n\t\treturn itemContainer;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeMarker(): Container {\n\t\tconst marker = this.markers.make();\n\t\tthis.markers.push(marker);\n\t\tmarker.states.create(\"disabled\", {});\n\t\treturn marker;\n\t}\n\n\t/**\n\t * List of legend marker elements.\n\t *\n\t * @default new ListTemplate<Container>\n\t */\n\tpublic readonly markers: ListTemplate<Container> = new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => Container._new(this._root, {\n\t\t\tthemeTags: $utils.mergeTags(this.markers.template.get(\"themeTags\", []), [\"legend\", \"marker\"])\n\t\t}, [this.markers.template])\n\t);\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeLabel(): Label {\n\t\tconst label = this.labels.make();\n\t\tlabel.states.create(\"disabled\", {});\n\t\treturn label;\n\t}\n\n\t/**\n\t * List of legend label elements.\n\t *\n\t * @default new ListTemplate<Label>\n\t */\n\tpublic readonly labels: ListTemplate<Label> = new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => Label._new(this._root, {\n\t\t\tthemeTags: $utils.mergeTags(this.labels.template.get(\"themeTags\", []), [\"legend\", \"label\"])\n\t\t}, [this.labels.template])\n\t);\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeValueLabel(): Label {\n\t\tconst valueLabel = this.valueLabels.make();\n\t\tvalueLabel.states.create(\"disabled\", {});\n\t\treturn valueLabel;\n\t}\n\n\t/**\n\t * List of legend value label elements.\n\t *\n\t * @default new ListTemplate<label>\n\t */\n\tpublic readonly valueLabels: ListTemplate<Label> = new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => Label._new(this._root, {\n\t\t\tthemeTags: $utils.mergeTags(this.valueLabels.template.get(\"themeTags\", []), [\"legend\", \"label\", \"value\"])\n\t\t}, [this.valueLabels.template])\n\t);\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeMarkerRectangle(): RoundedRectangle {\n\t\tconst markerRectangle = this.markerRectangles.make();\n\t\tmarkerRectangle.states.create(\"disabled\", {});\n\t\treturn markerRectangle;\n\t}\n\n\t/**\n\t * List of rectangle elements used for default legend markers.\n\t *\n\t * @default new ListTemplate<RoundedRectangle>\n\t */\n\tpublic readonly markerRectangles: ListTemplate<RoundedRectangle> = new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => RoundedRectangle._new(this._root, {\n\t\t\tthemeTags: $utils.mergeTags(this.markerRectangles.template.get(\"themeTags\", []), [\"legend\", \"marker\", \"rectangle\"])\n\t\t}, [this.markerRectangles.template])\n\t);\n\n\n\tprotected processDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tsuper.processDataItem(dataItem);\n\n\t\tconst itemContainer = this.makeItemContainer(dataItem);\n\n\t\tconst nameField = this.get(\"nameField\");\n\t\tconst fillField = this.get(\"fillField\");\n\t\tconst strokeField = this.get(\"strokeField\");\n\n\t\tif (itemContainer) {\n\t\t\tconst clickTarget = this.get(\"clickTarget\", \"itemContainer\");\n\n\t\t\tconst item = dataItem.dataContext as ILegendItem;\n\n\t\t\tif (item && item.set) {\n\t\t\t\titem.set(<any>\"legendDataItem\", dataItem);\n\t\t\t}\n\n\t\t\titemContainer._setDataItem(dataItem);\n\t\t\tdataItem.set(\"itemContainer\", itemContainer);\n\n\t\t\tconst marker = this.makeMarker();\n\t\t\tif (marker) {\n\t\t\t\titemContainer.children.push(marker);\n\t\t\t\tmarker._setDataItem(dataItem);\n\t\t\t\tdataItem.set(\"marker\", marker);\n\n\t\t\t\tconst useDefaultMarker = this.get(\"useDefaultMarker\");\n\n\t\t\t\tconst markerRectangle = marker.children.push(this.makeMarkerRectangle());\n\n\t\t\t\tlet fill = dataItem.get(\"fill\");\n\t\t\t\tlet stroke = dataItem.get(\"stroke\");\n\n\t\t\t\tdataItem.set(\"markerRectangle\", markerRectangle);\n\n\t\t\t\tif (item && item.get) {\n\t\t\t\t\tfill = item.get(fillField as any, fill);\n\t\t\t\t\tstroke = item.get(strokeField as any, stroke);\n\t\t\t\t}\n\n\t\t\t\tif (!stroke) {\n\t\t\t\t\tstroke = fill;\n\t\t\t\t}\n\n\t\t\t\tif (!useDefaultMarker) {\n\t\t\t\t\tif (item && item.createLegendMarker) {\n\t\t\t\t\t\titem.createLegendMarker();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (item.on) {\n\t\t\t\t\t\titem.on(fillField as any, () => {\n\t\t\t\t\t\t\tmarkerRectangle.set(\"fill\", item.get(fillField as any));\n\t\t\t\t\t\t})\n\n\t\t\t\t\t\titem.on(strokeField as any, () => {\n\t\t\t\t\t\t\tmarkerRectangle.set(\"stroke\", item.get(strokeField as any));\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tmarkerRectangle.setAll({ fill, stroke });\n\n\t\t\t\t// this solves if template field is set on slice\n\t\t\t\tconst component = item.component;\n\t\t\t\tif (component && component.updateLegendMarker) {\n\t\t\t\t\tcomponent.updateLegendMarker(item as any);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst label = this.makeLabel();\n\n\t\t\tif (label) {\n\t\t\t\titemContainer.children.push(label);\n\t\t\t\tlabel._setDataItem(dataItem);\n\t\t\t\tdataItem.set(\"label\", label);\n\n\t\t\t\tlabel.text.on(\"text\", () => {\n\t\t\t\t\titemContainer.set(\"ariaLabel\", label.text._getText() + \"; \" + this._t(\"Press ENTER to toggle\"));\n\t\t\t\t});\n\n\t\t\t\tif (item && item.get) {\n\t\t\t\t\tdataItem.set(\"name\", item.get(nameField as any) as string);\n\t\t\t\t}\n\n\t\t\t\tlet name = dataItem.get(\"name\");\n\n\t\t\t\tif (name) {\n\t\t\t\t\tlabel.set(\"text\", name);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst valueLabel = this.makeValueLabel();\n\t\t\tif (valueLabel) {\n\t\t\t\titemContainer.children.push(valueLabel);\n\t\t\t\tvalueLabel._setDataItem(dataItem);\n\t\t\t\tdataItem.set(\"valueLabel\", valueLabel);\n\t\t\t}\n\n\t\t\tif (item && item.show) {\n\n\t\t\t\tthis._disposers.push(item.on(\"visible\", (visible) => {\n\t\t\t\t\titemContainer.set(\"disabled\", !visible)\n\t\t\t\t}));\n\n\t\t\t\tif (!item.get(\"visible\")) {\n\t\t\t\t\titemContainer.set(\"disabled\", true);\n\t\t\t\t}\n\n\t\t\t\tif (clickTarget != \"none\") {\n\t\t\t\t\tvar clickContainer = itemContainer;\n\t\t\t\t\tif (clickTarget == \"marker\") {\n\t\t\t\t\t\tclickContainer = marker;\n\t\t\t\t\t}\n\t\t\t\t\tthis._addClickEvents(clickContainer, item, dataItem)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Sort children\n\t\t\tthis.children.values.sort((a, b) => {\n\t\t\t\tvar targetA = a.dataItem!.dataContext;\n\t\t\t\tvar targetB = b.dataItem!.dataContext;\n\t\t\t\tif (targetA && targetB) {\n\t\t\t\t\tvar indexA = this.data.indexOf(targetA);\n\t\t\t\t\tvar indexB = this.data.indexOf(targetB);\n\t\t\t\t\tif (indexA > indexB) {\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}\n\t\t\t\t\telse if (indexA < indexB) {\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn 0;\n\t\t\t});\n\t\t}\n\n\t}\n\n\n\tprotected _addClickEvents(container: Container, item: ILegendItem, dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tcontainer.set(\"cursorOverStyle\", \"pointer\");\n\t\tcontainer.events.on(\"pointerover\", () => {\n\t\t\tconst component = item.component;\n\t\t\tif (component && component.hoverDataItem) {\n\t\t\t\tcomponent.hoverDataItem(item as any)\n\t\t\t}\n\t\t})\n\n\t\tcontainer.events.on(\"pointerout\", () => {\n\t\t\tconst component = item.component;\n\t\t\tif (component && component.hoverDataItem) {\n\t\t\t\tcomponent.unhoverDataItem(item as any)\n\t\t\t}\n\t\t})\n\n\t\tcontainer.events.on(\"click\", () => {\n\t\t\tconst labelText = dataItem.get(\"label\").text._getText();\n\n\t\t\tif (item.show && item.isHidden && (item.isHidden() || item.get(\"visible\") === false)) {\n\t\t\t\titem.show();\n\t\t\t\tcontainer.set(\"disabled\", false);\n\t\t\t\tthis._root.readerAlert(this._t(\"%1 shown\", this._root.locale, labelText));\n\t\t\t}\n\t\t\telse if (item.hide) {\n\t\t\t\titem.hide();\n\t\t\t\tcontainer.set(\"disabled\", true);\n\t\t\t\tthis._root.readerAlert(this._t(\"%1 hidden\", this._root.locale, labelText));\n\t\t\t}\n\t\t})\n\t}\n\n\n\t/**\n\t * @ignore\n\t */\n\tpublic disposeDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\n\t\tconst dataContext = dataItem.dataContext as any;\n\t\tif (dataContext && dataContext.get) {\n\t\t\tconst di = dataContext.get(\"legendDataItem\");\n\t\t\tif (di == dataItem) {\n\t\t\t\tdataContext.set(\"legendDataItem\", undefined);\n\t\t\t}\n\t\t}\n\n\n\t\tlet itemContainer = dataItem.get(\"itemContainer\");\n\t\tif (itemContainer) {\n\t\t\tthis.itemContainers.removeValue(itemContainer);\n\t\t\titemContainer.dispose();\n\t\t}\n\n\t\tlet marker = dataItem.get(\"marker\");\n\t\tif (marker) {\n\t\t\tthis.markers.removeValue(marker);\n\t\t\tmarker.dispose();\n\t\t}\n\n\t\tlet markerRectangle = dataItem.get(\"markerRectangle\");\n\t\tif (markerRectangle) {\n\t\t\tthis.markerRectangles.removeValue(markerRectangle);\n\t\t\tmarkerRectangle.dispose();\n\t\t}\n\n\t\tlet label = dataItem.get(\"label\");\n\t\tif (label) {\n\t\t\tthis.labels.removeValue(label);\n\t\t\tlabel.dispose();\n\t\t}\n\n\t\tlet valueLabel = dataItem.get(\"valueLabel\");\n\t\tif (valueLabel) {\n\t\t\tthis.valueLabels.removeValue(valueLabel);\n\t\t\tvalueLabel.dispose();\n\t\t}\n\n\t}\n}\n", "/** @ignore *//** */\n\nimport type { IPoint } from \"./IPoint\"\nimport * as $math from \"./Math\";\nimport type { IGraphics } from \"../render/backend/Renderer\";\n\n/**\n * @ignore\n */\nexport function segmentedLine(display: IGraphics, segments: Array<Array<Array<IPoint>>>) {\n\tfor (let s = 0, len = segments.length; s < len; s++) {\n\t\tconst groups = segments[s];\n\t\tif (groups.length > 0) {\n\t\t\tlet firstGroup = groups[0];\n\t\t\tif (firstGroup.length > 0) {\n\t\t\t\tlet firstPoint = firstGroup[0];\n\t\t\t\tdisplay.moveTo(firstPoint.x, firstPoint.y);\n\t\t\t\tfor (let g = 0, len = groups.length; g < len; g++) {\n\t\t\t\t\tline(display, groups[g]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * @ignore\n */\nexport function line(display: IGraphics, points: Array<IPoint>) {\n\tfor (let p = 0, len = points.length; p < len; p++) {\n\t\tconst point = points[p];\n\t\tdisplay.lineTo(point.x, point.y);\n\t}\n}\n\n/**\n * @ignore\n */\nexport function moveTo(display: IGraphics, point: IPoint) {\n\tdisplay.moveTo(point.x, point.y);\n}\n\n/**\n * @ignore\n */\nexport function clear(display: IGraphics) {\n\tdisplay.clear();\n}\n\n/**\n * @ignore\n */\nexport function smoothedSegmentedline(display: IGraphics, segments: Array<Array<Array<IPoint>>>, tensionX: number, tensionY: number) {\n\tfor (let s = 0, len = segments.length; s < len; s++) {\n\t\tconst groups = segments[s];\n\t\tif (groups.length > 0) {\n\t\t\tlet firstGroup = groups[0];\n\t\t\tif (firstGroup.length > 0) {\n\t\t\t\tlet firstPoint = firstGroup[0];\n\t\t\t\tdisplay.moveTo(firstPoint.x, firstPoint.y);\n\t\t\t\tfor (let g = 0, len = groups.length; g < len; g++) {\n\t\t\t\t\tconst points = groups[g];\n\t\t\t\t\tif (points.length > 0) {\n\t\t\t\t\t\tdisplay.lineTo(points[0].x, points[0].y)\n\t\t\t\t\t}\n\t\t\t\t\tsmoothedLine(display, points, tensionX, tensionY);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * @ignore\n */\nexport function smoothedLine(display: IGraphics, points: Array<IPoint>, tensionX: number, tensionY: number) {\n\n\tfor (let i = points.length - 1; i > 0; i--) {\n\t\tlet p0 = points[i];\n\t\tlet p1 = points[i - 1];\n\n\t\tif (Math.abs(p0.x - p1.x) < 0.1 && Math.abs(p0.y - p1.y) < 0.1) {\n\t\t\tpoints.splice(i - 1, 1);\n\t\t}\n\t}\n\n\tif (points.length < 3 || (tensionX >= 1 && tensionY >= 1)) {\n\t\tline(display, points);\n\t\treturn;\n\t}\n\n\ttensionX = 1 - tensionX + 0.00001;\n\ttensionY = 1 - tensionY + 0.00001;\n\n\tlet first = points[0];\n\tlet last = points[points.length - 1];\n\n\tlet closed: boolean = false;\n\n\tif ($math.round(first.x, 3) == $math.round(last.x) && $math.round(first.y) == $math.round(last.y)) {\n\t\tclosed = true;\n\t}\n\n\t// Can't moveTo here, as it wont be possible to have fill then.\n\tlet path: string = \"\";\n\n\tfor (let i = 0, len = points.length - 1; i < len; i++) {\n\t\tlet p0: IPoint = points[i - 1];\n\n\t\tlet p1: IPoint = points[i];\n\n\t\tlet p2: IPoint = points[i + 1];\n\n\t\tlet p3: IPoint = points[i + 2];\n\n\t\tif (i === 0) {\n\t\t\tif (closed) {\n\t\t\t\tp0 = points[len - 2];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tp0 = points[0];\n\t\t\t}\n\t\t} else if (i == len - 1) {\n\t\t\tif (closed) {\n\t\t\t\tp3 = points[1];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tp3 = p2;\n\t\t\t}\n\t\t}\n\n\n\t\tlet controlPointA = $math.getCubicControlPointA(p0, p1, p2, tensionX, tensionY);\n\t\tlet controlPointB = $math.getCubicControlPointB(p1, p2, p3, tensionX, tensionY);\n\n\t\tdisplay.bezierCurveTo(controlPointA.x, controlPointA.y, controlPointB.x, controlPointB.y, p2.x, p2.y);\n\t}\n\n\treturn path;\n}\n", "import { Graphics, IGraphicsSettings, IGraphicsPrivate } from \"./Graphics\";\nimport type { IPoint } from \"../util/IPoint\";\nimport * as $draw from \"../util/Draw\";\n\nexport interface ILineSettings extends IGraphicsSettings {\n\n\t/**\n\t * A list of [[IPoint]] (x/y coordinates) points for the line.\n\t */\n\tpoints?: Array<IPoint>;\n\n\t/**\n\t * A list of [[IPoint]] arrays for different segments of the line.\n\t * \n\t * @since 5.1.4\n\t */\n\tsegments?: Array<Array<Array<IPoint>>>;\n}\n\nexport interface ILinePrivate extends IGraphicsPrivate {\n}\n\n/**\n * Draws a line.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\n * @important\n */\nexport class Line extends Graphics {\n\n\tdeclare public _settings: ILineSettings;\n\tdeclare public _privateSettings: ILinePrivate;\n\n\tpublic static className: string = \"Line\";\n\tpublic static classNames: Array<string> = Graphics.classNames.concat([Line.className]);\n\n\tpublic _beforeChanged() {\n\t\tsuper._beforeChanged();\n\n\t\tif (this.isDirty(\"points\") || this.isDirty(\"segments\") || this._sizeDirty || this.isPrivateDirty(\"width\") || this.isPrivateDirty(\"height\")) {\n\t\t\tthis._clear = true;\n\t\t}\n\t}\n\n\tpublic _changed() {\n\t\tsuper._changed();\n\n\t\tif (this._clear) {\n\n\t\t\tconst points = this.get(\"points\");\n\t\t\tconst segments = this.get(\"segments\");\n\n\t\t\tif (points && points.length > 0) {\n\t\t\t\tlet point = points[0];\n\n\t\t\t\tthis._display.moveTo(point.x, point.y);\n\t\t\t\t$draw.segmentedLine(this._display, [[points]]);\n\t\t\t}\n\t\t\telse if (segments) {\n\t\t\t\t$draw.segmentedLine(this._display, segments);\n\t\t\t}\n\t\t\telse if (!this.get(\"draw\")) {\n\t\t\t\tlet w = this.width();\n\t\t\t\tlet h = this.height();\n\n\t\t\t\tthis._display.moveTo(0, 0);\n\t\t\t\tthis._display.lineTo(w, h);\n\t\t\t}\n\t\t}\n\t}\n}\n", "import type { IPicture } from \"./backend/Renderer\";\nimport type { Color } from \"../util/Color\";\n\nimport { Sprite, ISpriteSettings, ISpritePrivate } from \"./Sprite\";\n\nimport * as $type from \"../util/Type\";\n\nexport interface IPictureSettings extends ISpriteSettings {\n\n\t/**\n\t * A source URI of the image.\n\t *\n\t * Can be relative or absolute URL, or data-uri.\n\t */\n\tsrc?: string;\n\n\t/**\n\t * Color of the element's shadow.\n\t *\n\t * For this to work at least one of the following needs to be set as well:\n\t * `shadowBlur`, `shadowOffsetX`, `shadowOffsetY`.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/shadows/} for more info\n\t */\n\tshadowColor?: Color | null;\n\n\t/**\n\t * Blurriness of the the shadow.\n\t *\n\t * The bigger the number, the more blurry shadow will be.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/shadows/} for more info\n\t */\n\tshadowBlur?: number;\n\n\t/**\n\t * Horizontal shadow offset in pixels.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/shadows/} for more info\n\t */\n\tshadowOffsetX?: number;\n\n\t/**\n\t * Vertical shadow offset in pixels.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/shadows/} for more info\n\t */\n\tshadowOffsetY?: number;\n\n\t/**\n\t * Opacity of the shadow (0-1).\n\t *\n\t * If not set, will use the same as `fillOpacity` of the element.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/shadows/} for more info\n\t */\n\tshadowOpacity?: number;\n\n}\n\nexport interface IPicturePrivate extends ISpritePrivate {\n}\n\n/**\n * Displays an image.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/images/} for more info\n * @important\n */\nexport class Picture extends Sprite {\n\n\tdeclare public _settings: IPictureSettings;\n\tdeclare public _privateSettings: IPicturePrivate;\n\n\tpublic _display: IPicture = this._root._renderer.makePicture(undefined);\n\n\tpublic static className: string = \"Picture\";\n\tpublic static classNames: Array<string> = Sprite.classNames.concat([Picture.className]);\n\n\tpublic _changed() {\n\t\tsuper._changed();\n\n\t\tif (this.isDirty(\"width\")) {\n\t\t\tconst width = this.get(\"width\");\n\t\t\tthis._display.width = $type.isNumber(width) ? width : undefined;\n\t\t}\n\n\t\tif (this.isDirty(\"height\")) {\n\t\t\tconst height = this.get(\"height\");\n\t\t\tthis._display.height = $type.isNumber(height) ? height : undefined;\n\t\t}\n\n\t\tif (this.isDirty(\"shadowColor\")) {\n\t\t\tthis._display.clear();\n\t\t\tconst shadowColor = this.get(\"shadowColor\");\n\t\t\tthis._display.shadowColor = shadowColor == null ? undefined : shadowColor;\n\t\t}\n\n\t\tif (this.isDirty(\"shadowBlur\")) {\n\t\t\tthis._display.clear();\n\t\t\tthis._display.shadowBlur = this.get(\"shadowBlur\");\n\t\t}\n\n\t\tif (this.isDirty(\"shadowOffsetX\")) {\n\t\t\tthis._display.clear();\n\t\t\tthis._display.shadowOffsetX = this.get(\"shadowOffsetX\");\n\t\t}\n\n\t\tif (this.isDirty(\"shadowOffsetY\")) {\n\t\t\tthis._display.clear();\n\t\t\tthis._display.shadowOffsetY = this.get(\"shadowOffsetY\");\n\t\t}\n\n\t\tif (this.isDirty(\"shadowOpacity\")) {\n\t\t\tthis._display.clear();\n\t\t\tthis._display.shadowOpacity = this.get(\"shadowOpacity\");\n\t\t}\n\n\t\tif (this.isDirty(\"src\")) {\n\t\t\tthis._display.clear();\n\t\t\tthis._load();\n\t\t}\n\t}\n\n\tprotected _load() {\n\t\tconst src = this.get(\"src\");\n\t\tif (src) {\n\t\t\tconst image = new Image();\n\t\t\t//image.crossOrigin = \"Anonymous\";\n\t\t\timage.src = src!;\n\t\t\timage.decode().then(() => {\n\t\t\t\tthis._display.image = image;\n\t\t\t\tthis._updateSize();\n\t\t\t}).catch((_error: any) => {\n\t\t\t\t// TODO: maybe raise error?\n\t\t\t});\n\t\t}\n\t}\n\n\tpublic _updateSize() {\n\t\tsuper._updateSize();\n\n\t\tconst image = this._display.image;\n\t\tif (image) {\n\t\t\tlet w = this.getPrivate(\"width\", this.get(\"width\"));\n\t\t\tlet h = this.getPrivate(\"height\", this.get(\"height\"));\n\t\t\tconst r = image.width && image.height ? image.width / image.height : 0;\n\n\t\t\tif ($type.isNumber(w) && $type.isNumber(h)) {\n\t\t\t\tthis._display.width = w;\n\t\t\t\tthis._display.height = h;\n\t\t\t}\n\t\t\telse if ($type.isNumber(w) && r) {\n\t\t\t\th = w / r;\n\t\t\t}\n\t\t\telse if ($type.isNumber(h) && r) {\n\t\t\t\tw = h * r;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tw = image.width;\n\t\t\t\th = image.height;\n\t\t\t}\n\n\t\t\tif ($type.isNumber(w)) {\n\t\t\t\tthis._display.width = w;\n\t\t\t}\n\t\t\tif ($type.isNumber(h)) {\n\t\t\t\tthis._display.height = h;\n\t\t\t}\n\t\t\tthis.markDirtyBounds();\n\t\t\tthis.markDirty();\n\t\t}\n\t}\n}\n", "import { Text, ITextSettings, ITextPrivate } from \"./Text\";\nimport * as $math from \"../util/Math\";\nimport type { IRadialText } from \"./backend/Renderer\";\n\n/**\n * @ignore\n */\nexport interface IRadialTextSettings extends ITextSettings {\n\ttextType?: \"regular\" | \"circular\" | \"radial\" | \"aligned\" | \"adjusted\";\n\tradius?: number;\n\tstartAngle?: number;\n\tinside?: boolean;\n\torientation?: \"inward\" | \"outward\" | \"auto\";\n\tkerning?: number;\n}\n\n/**\n * @ignore\n */\nexport interface IRadialTextPrivate extends ITextPrivate {\n}\n\n/**\n * @ignore\n */\nexport class RadialText extends Text {\n\n\tdeclare public _settings: IRadialTextSettings;\n\tdeclare public _privateSettings: IRadialTextPrivate;\n\n\tpublic _display: IRadialText = this._root._renderer.makeRadialText(\"\", this.textStyle);\n\n\tprotected _afterNew() {\n\t\tsuper._afterNew();\n\t}\n\n\tpublic static className: string = \"RadialText\";\n\tpublic static classNames: Array<string> = Text.classNames.concat([RadialText.className]);\n\n\tpublic _beforeChanged() {\n\t\tsuper._beforeChanged();\n\n\t\tthis._display.clear();\n\n\t\tif (this.isDirty(\"textType\")) {\n\t\t\tthis._display.textType = this.get(\"textType\");\n\t\t\tthis.markDirtyBounds();\n\t\t}\n\n\t\tif (this.isDirty(\"radius\")) {\n\t\t\tthis._display.radius = this.get(\"radius\");\n\t\t\tthis.markDirtyBounds();\n\t\t}\n\n\t\tif (this.isDirty(\"startAngle\")) {\n\t\t\tthis._display.startAngle = (this.get(\"startAngle\", 0)! + 90) * $math.RADIANS;\n\t\t\tthis.markDirtyBounds();\n\t\t}\n\n\t\tif (this.isDirty(\"inside\")) {\n\t\t\tthis._display.inside = this.get(\"inside\");\n\t\t\tthis.markDirtyBounds();\n\t\t}\n\n\t\tif (this.isDirty(\"orientation\")) {\n\t\t\tthis._display.orientation = this.get(\"orientation\");\n\t\t\tthis.markDirtyBounds();\n\t\t}\n\n\t\tif (this.isDirty(\"kerning\")) {\n\t\t\tthis._display.kerning = this.get(\"kerning\");\n\t\t\tthis.markDirtyBounds();\n\t\t}\n\t}\n\n}\n", "// import * as $object from \"../util/Object\";\nimport { p50, Percent } from \"../util/Percent\";\nimport { Label, ILabelPrivate, ILabelSettings } from \"./Label\";\nimport { RadialText } from \"./RadialText\";\n\nimport * as $math from \"../util/Math\";\nimport * as $utils from \"../util/Utils\";\n\n\nexport interface IRadialLabelSettings extends ILabelSettings {\n\n\t/**\n\t * Pixel value to adjust radius with.\n\t *\n\t * Will add to (or subtract from if negative) whatever value `baseRadius` evaluates\n\t * to.\n\t */\n\tradius?: number;\n\n\t/**\n\t * Radius of the label's position.\n\t *\n\t * Can be either set in absolute pixel value, or percent.\n\t *\n\t * Relative value, depending on the situation, will most often mean its\n\t * position within certain circular object, like a slice: 0% meaning inner\n\t * edge, and 100% - the outer edge.\n\t *\n\t * @default 100%\n\t */\n\tbaseRadius?: number | Percent;\n\n\t/**\n\t * Label anngle in degrees.\n\t *\n\t * In most cases it will be set by the chart/series and does not need to\n\t * be set manually.\n\t */\n\tlabelAngle?: number;\n\n\t/**\n\t * Should the text \"face\" inward or outward from the arc the text is\n\t * following.\n\t *\n\t * `\"auto\"` means that facing will be chosen automatically based on the angle\n\t * to enhance readbility.\n\t *\n\t * Only applies if `type = \"circluar\"`.\n\t * \n\t * @default \"auto\"\n\t */\n\torientation?: \"inward\" | \"outward\" | \"auto\";\n\n\t/**\n\t * Should label be drawn inside (`true`) or outside (`false`) the arc.\n\t *\n\t * @default false\n\t */\n\tinside?: boolean;\n\n\t/**\n\t * Label type.\n\t *\n\t * * `\"regular\"` (default) - normal horizontal label.\n\t * * `\"circular\"` - arched label.\n\t * * `\"radial\"` - label radiating from the center of the arc.\n\t * * `\"aligned\"` - horizontal label aligned with other labels horizontally.\n\t * * `\"adjusted\"` - horizontal label adjusted in postion.\n\t *\n\t * @default \"regular\"\n\t */\n\ttextType?: \"regular\" | \"circular\" | \"radial\" | \"aligned\" | \"adjusted\";\n\n\t/**\n\t * Extra spacing between characters, in pixels.\n\t *\n\t * @default 0\n\t */\n\tkerning?: number;\n\n}\n\nexport interface IRadialLabelPrivate extends ILabelPrivate {\n\n\t/**\n\t * @ignore\n\t */\n\tleft?: boolean;\n\n\t/**\n\t * @ignore\n\t */\n\tradius?: number;\n\n\t/**\n\t * @ignore\n\t */\n\tinnerRadius?: number;\n\n}\n\nexport class RadialLabel extends Label {\n\n\tdeclare public _settings: IRadialLabelSettings;\n\tdeclare public _privateSettings: IRadialLabelPrivate;\n\n\tdeclare protected _text: RadialText;\n\n\tpublic static className: string = \"RadialLabel\";\n\tpublic static classNames: Array<string> = Label.classNames.concat([RadialLabel.className]);\n\n\tprotected _flipped: boolean = false;\n\n\tprotected _afterNew() {\n\t\tthis._textKeys.push(\"textType\", \"kerning\");\n\t\tsuper._afterNew();\n\t}\n\n\n\tpublic _makeText() {\n\t\tthis._text = this.children.push(RadialText.new(this._root, {}));\n\t}\n\n\t/**\n\t * Returns base radius in pixels.\n\t * \n\t * @return Base radius\n\t */\n\tpublic baseRadius(): number {\n\t\tconst radiusPrivate = this.getPrivate(\"radius\", 0);\n\t\tconst innerRadiusPrivate = this.getPrivate(\"innerRadius\", 0);\n\t\tconst baseRadius = this.get(\"baseRadius\", 0);\n\t\treturn innerRadiusPrivate + $utils.relativeToValue(baseRadius, radiusPrivate - innerRadiusPrivate);\n\t}\n\n\t/**\n\t * Returns radius adjustment in pixels.\n\t * \n\t * @return Radius\n\t */\n\tpublic radius(): number {\n\t\tconst inside = this.get(\"inside\", false);\n\t\treturn this.baseRadius() + this.get(\"radius\", 0) * (inside ? -1 : 1);\n\t}\n\n\tpublic _updateChildren() {\n\t\tsuper._updateChildren();\n\n\t\tif (this.isDirty(\"baseRadius\") || this.isPrivateDirty(\"radius\") || this.isPrivateDirty(\"innerRadius\") || this.isDirty(\"labelAngle\") || this.isDirty(\"radius\") || this.isDirty(\"inside\") || this.isDirty(\"orientation\") || this.isDirty(\"textType\")) {\n\n\t\t\tconst textType = this.get(\"textType\", \"adjusted\");\n\n\t\t\tconst inside = this.get(\"inside\", false);\n\n\t\t\tconst orientation = this.get(\"orientation\");\n\t\t\tlet labelAngle = $math.normalizeAngle(this.get(\"labelAngle\", 0));\n\n\t\t\tthis._text.set(\"startAngle\", this.get(\"labelAngle\", 0));\n\t\t\tthis._text.set(\"inside\", inside);\n\n\t\t\tconst sin = $math.sin(labelAngle);\n\t\t\tconst cos = $math.cos(labelAngle);\n\n\t\t\tlet baseRadius = this.baseRadius();\n\t\t\tlet radius = this.radius();\n\n\t\t\tthis._display.angle = 0;\n\n\t\t\tif (textType == \"circular\") {\n\n\t\t\t\tthis.setAll({\n\t\t\t\t\tpaddingTop: 0,\n\t\t\t\t\tpaddingBottom: 0,\n\t\t\t\t\tpaddingLeft: 0,\n\t\t\t\t\tpaddingRight: 0\n\t\t\t\t});\n\n\t\t\t\t// Circular labels are handled and positioned differently\n\n\t\t\t\tthis._text.set(\"orientation\", orientation);\n\t\t\t\tthis._text.set(\"radius\", radius);\n\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (baseRadius == 0) {\n\t\t\t\t\tlabelAngle = 0;\n\t\t\t\t\tradius = 0;\n\t\t\t\t}\n\n\t\t\t\t// Positioning of radial/regular labels are teh same\n\t\t\t\tlet x = radius * cos;\n\t\t\t\tlet y = radius * sin;\n\n\t\t\t\tif (textType == \"radial\") {\n\n\t\t\t\t\tthis.setRaw(\"x\", x);\n\t\t\t\t\tthis.setRaw(\"y\", y);\n\n\t\t\t\t\tif ((labelAngle < 90) || (labelAngle > 270) || orientation != \"auto\") {\n\t\t\t\t\t\tthis._display.angle = labelAngle;// + 90;\n\t\t\t\t\t\tthis._flipped = false;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis._display.angle = labelAngle + 180;\n\t\t\t\t\t\tthis._flipped = true;\n\t\t\t\t\t}\n\t\t\t\t\tthis._dirty.rotation = false;\n\t\t\t\t}\n\t\t\t\telse if (textType == \"adjusted\") {\n\t\t\t\t\tthis.setRaw(\"centerX\", p50);\n\t\t\t\t\tthis.setRaw(\"centerY\", p50);\n\t\t\t\t\tthis.setRaw(\"x\", x);\n\t\t\t\t\tthis.setRaw(\"y\", y);\n\t\t\t\t}\n\t\t\t\telse if (textType == \"regular\") {\n\t\t\t\t\tthis.setRaw(\"x\", x);\n\t\t\t\t\tthis.setRaw(\"y\", y);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.markDirtyPosition();\n\t\t\tthis.markDirtyBounds();\n\t\t}\n\t}\n\n\n\tpublic _updatePosition() {\n\n\t\tconst textType = this.get(\"textType\", \"regular\");\n\t\tconst inside = this.get(\"inside\", false);\n\n\t\tlet dx = 0;\n\t\tlet dy = 0;\n\t\tlet labelAngle = this.get(\"labelAngle\", 0);\n\t\tlet bounds = this.localBounds();\n\t\tlet w = bounds.right - bounds.left;\n\t\tlet h = bounds.bottom - bounds.top;\n\n\t\tif (textType == \"radial\") {\n\t\t\tif (this._flipped) {\n\t\t\t\tlet centerX = this.get(\"centerX\");\n\t\t\t\tif (centerX instanceof Percent) {\n\t\t\t\t\tw = w * (1 - centerX.value * 2);\n\t\t\t\t}\n\n\t\t\t\tdx = w * $math.cos(labelAngle);\n\t\t\t\tdy = w * $math.sin(labelAngle);\n\t\t\t}\n\t\t}\n\t\telse if (!inside && textType == \"adjusted\") {\n\t\t\tdx = w / 2 * $math.cos(labelAngle);\n\t\t\tdy = h / 2 * $math.sin(labelAngle);\n\t\t}\n\n\n\t\tthis.setRaw(\"dx\", dx);\n\t\tthis.setRaw(\"dy\", dy);\n\n\t\tsuper._updatePosition();\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic get text(): RadialText {\n\t\treturn this._text;\n\t}\n\n}\n", "import { Graphics, IGraphicsSettings, IGraphicsPrivate } from \"./Graphics\";\r\n\r\nexport interface ITriangleSettings extends IGraphicsSettings {\r\n}\r\n\r\nexport interface ITrianglePrivate extends IGraphicsPrivate {\r\n}\r\n\r\n/**\r\n * Draws a triangle.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\r\n * @important\r\n */\r\nexport class Triangle extends Graphics {\r\n\r\n\tdeclare public _settings: ITriangleSettings;\r\n\tdeclare public _privateSettings: ITrianglePrivate;\r\n\r\n\tpublic static className: string = \"Triangle\";\r\n\tpublic static classNames: Array<string> = Graphics.classNames.concat([Triangle.className]);\r\n\r\n\tpublic _beforeChanged() {\r\n\t\tsuper._beforeChanged();\r\n\r\n\t\tif (this.isDirty(\"width\") || this.isDirty(\"height\") || this.isPrivateDirty(\"width\") || this.isPrivateDirty(\"height\")) {\r\n\t\t\tthis._clear = true;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic _changed() {\r\n\t\tsuper._changed();\r\n\r\n\t\tif (this._clear && !this.get(\"draw\")) {\r\n\t\t\tthis._draw();\r\n\t\t}\r\n\t}\r\n\r\n\tprotected _draw() {\r\n\t\tconst w = this.width();\r\n\t\tconst h = this.height();\r\n\t\tconst display = this._display;\r\n\t\tdisplay.moveTo(-w / 2, h / 2);\r\n\t\tdisplay.lineTo(0, -h / 2);\r\n\t\tdisplay.lineTo(w / 2, h / 2);\r\n\t\tdisplay.lineTo(-w / 2, h / 2);\r\n\r\n\t}\r\n\r\n\tpublic _updateSize() {\r\n\t\tthis.markDirty()\r\n\t\tthis._clear = true;\r\n\t}\r\n}\r\n", "import type { Animation } from \"../util/Entity\";\nimport type { Time } from \"../util/Animation\";\n\nimport { RoundedRectangle } from \"../render/RoundedRectangle\";\nimport { Container, IContainerPrivate, IContainerSettings, IContainerEvents } from \"./Container\";\nimport { Graphics } from \"./Graphics\";\nimport { Button } from \"./Button\";\n\nimport * as $type from \"../util/Type\";\nimport * as $utils from \"../util/Utils\";\n\nexport interface IScrollbarSettings extends IContainerSettings {\n\n\t/**\n\t * Orientation of the scrollbar.\n\t */\n\torientation: \"horizontal\" | \"vertical\";\n\n\t/**\n\t * Relative start of the selected range, with 0 meaning beginning, and 1 the\n\t * end.\n\t */\n\tstart?: number;\n\n\t/**\n\t * Relative end of the selected range, with 0 meaning beginning, and 1 the\n\t * end.\n\t */\n\tend?: number;\n\n\t/**\n\t * Number of milliseconds to play scroll animations for.\n\t */\n\tanimationDuration?: number;\n\n\t/**\n\t * Easing function to use for animations.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/animations/#Easing_functions} for more info\n\t */\n\tanimationEasing?: (t: Time) => Time;\n\n}\n\nexport interface IScrollbarPrivate extends IContainerPrivate {\n\n\t/**\n\t * @ignore\n\t */\n\tisBusy?: boolean;\n\n\t/**\n\t * @ignore\n\t */\n\tpositionTextFunction?: (position: number) => string;\n\n}\n\nexport interface IScrollbarEvents extends IContainerEvents {\n\n\t/**\n\t * Invoked when range of the selection changes.\n\t */\n\trangechanged: { start: number, end: number, grip?: \"start\" | \"end\" };\n\n}\n\n/**\n * A control that allows zooming chart's axes, or other uses requiring range\n * selection.\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/scrollbars/} for more info\n */\nexport class Scrollbar extends Container {\n\n\tpublic _addOrientationClass() {\n\t\tthis._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"scrollbar\", this._settings.orientation]);\n\t\tif (!this._settings.background) {\n\t\t\tthis._settings.background = RoundedRectangle.new(this._root, {\n\t\t\t\tthemeTags: $utils.mergeTags(this._settings.themeTags, [\"main\", \"background\"])\n\t\t\t});\n\t\t}\n\t}\n\n\tdeclare public _settings: IScrollbarSettings;\n\tdeclare public _privateSettings: IScrollbarPrivate;\n\tdeclare public _events: IScrollbarEvents;\n\n\tpublic static className: string = \"Scrollbar\";\n\tpublic static classNames: Array<string> = Container.classNames.concat([Scrollbar.className]);\n\n\t/**\n\t * A thumb elment - a draggable square between the grips, used for panning\n\t * the selection.\n\t */\n\tpublic thumb: RoundedRectangle = this._makeThumb();\n\n\t/**\n\t * Start grip button.\n\t */\n\tpublic startGrip: Button = this._makeButton();\n\n\t/**\n\t * End grip button.\n\t */\n\tpublic endGrip: Button = this._makeButton();\n\n\tprotected _thumbBusy: boolean = false;\n\n\tprotected _startDown: boolean = false;\n\n\tprotected _endDown: boolean = false;\n\n\tprotected _thumbDown: boolean = false;\n\n\tprotected _gripDown?: \"start\" | \"end\";\n\n\tprotected _makeButton(): Button {\n\t\treturn this.children.push(Button.new(this._root, {\n\t\t\tthemeTags: [\"resize\", \"button\", this.get(\"orientation\")], icon: Graphics.new(this._root, {\n\t\t\t\tthemeTags: [\"icon\"]\n\t\t\t})\n\t\t}));\n\t}\n\n\tprotected _makeThumb(): RoundedRectangle {\n\t\treturn this.children.push(RoundedRectangle.new(this._root, {\n\t\t\tthemeTags: [\"thumb\", this.get(\"orientation\")]\n\t\t}));\n\t}\n\n\tprotected _handleAnimation(animation: Animation<any>) {\n\t\tif (animation) {\n\t\t\tthis._disposers.push(\n\t\t\t\tanimation.events.on(\"stopped\", () => {\n\t\t\t\t\tthis.setPrivateRaw(\"isBusy\", false);\n\t\t\t\t\tthis._thumbBusy = false;\n\t\t\t\t})\n\t\t\t)\n\t\t}\n\t}\n\n\tprotected _afterNew() {\n\t\tthis._addOrientationClass();\n\t\tsuper._afterNew();\n\n\t\tconst startGrip = this.startGrip;\n\t\tconst endGrip = this.endGrip;\n\t\tconst thumb = this.thumb;\n\t\tconst background = this.get(\"background\");\n\n\t\tif (background) {\n\t\t\tthis._disposers.push(\n\t\t\t\tbackground.events.on(\"click\", (event) => {\n\t\t\t\t\tthis.setPrivateRaw(\"isBusy\", true);\n\t\t\t\t\tconst point = this._display.toLocal(event.point);\n\n\t\t\t\t\tconst w = this.width();\n\t\t\t\t\tconst h = this.height();\n\n\t\t\t\t\tconst orientation = this.get(\"orientation\");\n\n\t\t\t\t\tlet newMiddle: number;\n\n\t\t\t\t\tif (orientation == \"vertical\") {\n\t\t\t\t\t\tnewMiddle = (point.y - thumb.height() / 2) / h;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tnewMiddle = (point.x - thumb.width() / 2) / w;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet newCoordinate: number;\n\t\t\t\t\tlet key: \"x\" | \"y\";\n\n\t\t\t\t\tif (orientation == \"vertical\") {\n\t\t\t\t\t\tnewCoordinate = newMiddle * h;\n\t\t\t\t\t\tkey = \"y\";\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tnewCoordinate = newMiddle * w;\n\t\t\t\t\t\tkey = \"x\";\n\t\t\t\t\t}\n\n\n\t\t\t\t\tconst duration = this.get(\"animationDuration\", 0);\n\t\t\t\t\tif (duration > 0) {\n\t\t\t\t\t\tthis._thumbBusy = true;\n\t\t\t\t\t\tthis._handleAnimation(this.thumb.animate({ key: key, to: newCoordinate, duration: duration, easing: this.get(\"animationEasing\") }));\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis.thumb.set(key, newCoordinate);\n\t\t\t\t\t\tthis._root.events.on(\"frameended\", () => {\n\t\t\t\t\t\t\tthis.setPrivateRaw(\"isBusy\", false);\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t)\n\t\t}\n\n\t\tthis._disposers.push(thumb.events.on(\"dblclick\", (event) => {\n\n\t\t\tif (!$utils.isLocalEvent(event.originalEvent, this)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst duration = this.get(\"animationDuration\", 0);\n\t\t\tconst easing = this.get(\"animationEasing\");\n\n\t\t\tthis.animate({ key: \"start\", to: 0, duration: duration, easing: easing });\n\t\t\tthis.animate({ key: \"end\", to: 1, duration: duration, easing: easing });\n\t\t}));\n\n\t\tthis._disposers.push(startGrip.events.on(\"pointerdown\", () => {\n\t\t\tthis.setPrivateRaw(\"isBusy\", true);\n\t\t\tthis._startDown = true;\n\t\t\tthis._gripDown = \"start\";\n\t\t}))\n\n\t\tthis._disposers.push(endGrip.events.on(\"pointerdown\", () => {\n\t\t\tthis.setPrivateRaw(\"isBusy\", true);\n\t\t\tthis._endDown = true;\n\t\t\tthis._gripDown = \"end\";\n\t\t}))\n\n\t\tthis._disposers.push(thumb.events.on(\"pointerdown\", () => {\n\t\t\tthis.setPrivateRaw(\"isBusy\", true);\n\t\t\tthis._thumbDown = true;\n\t\t\tthis._gripDown = undefined;\n\t\t}))\n\n\t\tthis._disposers.push(startGrip.events.on(\"globalpointerup\", () => {\n\t\t\tif (this._startDown) {\n\t\t\t\tthis.setPrivateRaw(\"isBusy\", false);\n\t\t\t}\n\t\t\tthis._startDown = false;\n\t\t}))\n\n\t\tthis._disposers.push(endGrip.events.on(\"globalpointerup\", () => {\n\t\t\tif (this._endDown) {\n\t\t\t\tthis.setPrivateRaw(\"isBusy\", false);\n\t\t\t}\n\t\t\tthis._endDown = false;\n\t\t}))\n\n\t\tthis._disposers.push(thumb.events.on(\"globalpointerup\", () => {\n\t\t\tif (this._thumbDown) {\n\t\t\t\tthis.setPrivateRaw(\"isBusy\", false);\n\t\t\t}\n\t\t\tthis._thumbDown = false;\n\t\t}))\n\n\t\tthis._disposers.push(startGrip.on(\"x\", () => {\n\t\t\tthis._updateThumb();\n\t\t}));\n\n\t\tthis._disposers.push(endGrip.on(\"x\", () => {\n\t\t\tthis._updateThumb();\n\t\t}));\n\n\t\tthis._disposers.push(startGrip.on(\"y\", () => {\n\t\t\tthis._updateThumb();\n\t\t}));\n\n\t\tthis._disposers.push(endGrip.on(\"y\", () => {\n\t\t\tthis._updateThumb();\n\t\t}));\n\n\t\tthis._disposers.push(thumb.events.on(\"positionchanged\", () => {\n\t\t\tthis._updateGripsByThumb();\n\t\t}));\n\n\t\tif (this.get(\"orientation\") == \"vertical\") {\n\t\t\tstartGrip.set(\"x\", 0);\n\t\t\tendGrip.set(\"x\", 0);\n\n\t\t\tthis._disposers.push(thumb.adapters.add(\"y\", (value) => {\n\t\t\t\treturn Math.max(Math.min(Number(value), this.height() - thumb.height()), 0);\n\t\t\t}))\n\n\t\t\tthis._disposers.push(thumb.adapters.add(\"x\", (_value) => {\n\t\t\t\treturn this.width() / 2;\n\t\t\t}))\n\n\t\t\tthis._disposers.push(startGrip.adapters.add(\"x\", (_value) => {\n\t\t\t\treturn this.width() / 2;\n\t\t\t}))\n\n\t\t\tthis._disposers.push(endGrip.adapters.add(\"x\", (_value) => {\n\t\t\t\treturn this.width() / 2;\n\t\t\t}))\n\n\t\t\tthis._disposers.push(startGrip.adapters.add(\"y\", (value) => {\n\t\t\t\treturn Math.max(Math.min(Number(value), this.height()), 0);\n\t\t\t}))\n\n\t\t\tthis._disposers.push(endGrip.adapters.add(\"y\", (value) => {\n\t\t\t\treturn Math.max(Math.min(Number(value), this.height()), 0);\n\t\t\t}))\n\t\t}\n\t\telse {\n\t\t\tstartGrip.set(\"y\", 0);\n\t\t\tendGrip.set(\"y\", 0);\n\n\t\t\tthis._disposers.push(thumb.adapters.add(\"x\", (value) => {\n\t\t\t\treturn Math.max(Math.min(Number(value), this.width() - thumb.width()), 0);\n\t\t\t}))\n\n\t\t\tthis._disposers.push(thumb.adapters.add(\"y\", (_value) => {\n\t\t\t\treturn this.height() / 2;\n\t\t\t}))\n\n\t\t\tthis._disposers.push(startGrip.adapters.add(\"y\", (_value) => {\n\t\t\t\treturn this.height() / 2;\n\t\t\t}))\n\n\t\t\tthis._disposers.push(endGrip.adapters.add(\"y\", (_value) => {\n\t\t\t\treturn this.height() / 2;\n\t\t\t}))\n\n\t\t\tthis._disposers.push(startGrip.adapters.add(\"x\", (value) => {\n\t\t\t\treturn Math.max(Math.min(Number(value), this.width()), 0);\n\t\t\t}))\n\n\t\t\tthis._disposers.push(endGrip.adapters.add(\"x\", (value) => {\n\t\t\t\treturn Math.max(Math.min(Number(value), this.width()), 0);\n\t\t\t}))\n\t\t}\n\t}\n\n\tpublic _updateChildren() {\n\t\tsuper._updateChildren();\n\n\t\tif (this.isDirty(\"end\") || this.isDirty(\"start\") || this._sizeDirty) {\n\t\t\tthis.updateGrips();\n\t\t}\n\t}\n\n\tpublic _changed() {\n\t\tsuper._changed();\n\t\tif (this.isDirty(\"start\") || this.isDirty(\"end\")) {\n\t\t\tconst eventType = \"rangechanged\";\n\t\t\tif (this.events.isEnabled(eventType)) {\n\t\t\t\tthis.events.dispatch(eventType, { type: eventType, target: this, start: this.get(\"start\", 0), end: this.get(\"end\", 1), grip: this._gripDown });\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic updateGrips() {\n\t\tconst startGrip = this.startGrip;\n\t\tconst endGrip = this.endGrip;\n\n\t\tconst orientation = this.get(\"orientation\");\n\t\tconst height = this.height();\n\t\tconst width = this.width();\n\n\t\tif (orientation == \"vertical\") {\n\t\t\tstartGrip.set(\"y\", height * this.get(\"start\", 0));\n\t\t\tendGrip.set(\"y\", height * this.get(\"end\", 1));\n\t\t}\n\t\telse {\n\t\t\tstartGrip.set(\"x\", width * this.get(\"start\", 0));\n\t\t\tendGrip.set(\"x\", width * this.get(\"end\", 1));\n\t\t}\n\n\t\tconst valueFunction = this.getPrivate(\"positionTextFunction\");\n\t\tconst from = Math.round(this.get(\"start\", 0) * 100);\n\t\tconst to = Math.round(this.get(\"end\", 0) * 100);\n\t\tlet fromValue: string;\n\t\tlet toValue: string;\n\t\tif (valueFunction) {\n\t\t\tfromValue = valueFunction.call(this, this.get(\"start\", 0));\n\t\t\ttoValue = valueFunction.call(this, this.get(\"end\", 0));\n\t\t}\n\t\telse {\n\t\t\tfromValue = from + \"%\";\n\t\t\ttoValue = to + \"%\";\n\t\t}\n\n\t\tstartGrip.set(\"ariaLabel\", this._t(\"From %1\", undefined, fromValue));\n\t\tstartGrip.set(\"ariaValueNow\", \"\" + from);\n\t\tstartGrip.set(\"ariaValueText\", from + \"%\");\n\n\t\tstartGrip.set(\"ariaValueMin\", \"0\");\n\t\tstartGrip.set(\"ariaValueMax\", \"100\");\n\n\t\tendGrip.set(\"ariaLabel\", this._t(\"To %1\", undefined, toValue));\n\t\tendGrip.set(\"ariaValueNow\", \"\" + to);\n\t\tendGrip.set(\"ariaValueText\", to + \"%\");\n\n\t\tendGrip.set(\"ariaValueMin\", \"0\");\n\t\tendGrip.set(\"ariaValueMax\", \"100\");\n\t}\n\n\tprotected _updateThumb() {\n\t\tconst thumb = this.thumb;\n\t\tconst startGrip = this.startGrip;\n\t\tconst endGrip = this.endGrip;\n\n\t\tconst height = this.height();\n\t\tconst width = this.width();\n\n\t\tlet x0 = startGrip.x();\n\t\tlet x1 = endGrip.x();\n\n\t\tlet y0 = startGrip.y();\n\t\tlet y1 = endGrip.y();\n\n\t\tlet start: number = 0;\n\t\tlet end: number = 1;\n\n\t\tif (this.get(\"orientation\") == \"vertical\") {\n\t\t\tif ($type.isNumber(y0) && $type.isNumber(y1)) {\n\t\t\t\tif (!this._thumbBusy && !thumb.isDragging()) {\n\t\t\t\t\tthumb.set(\"height\", y1 - y0);\n\t\t\t\t\tthumb.set(\"y\", y0);\n\t\t\t\t}\n\t\t\t\tstart = y0 / height;\n\t\t\t\tend = y1 / height;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif ($type.isNumber(x0) && $type.isNumber(x1)) {\n\t\t\t\tif (!this._thumbBusy && !thumb.isDragging()) {\n\t\t\t\t\tthumb.set(\"width\", x1 - x0);\n\t\t\t\t\tthumb.set(\"x\", x0);\n\t\t\t\t}\n\t\t\t\tstart = x0 / width;\n\t\t\t\tend = x1 / width;\n\t\t\t}\n\t\t}\n\n\t\tif (this.getPrivate(\"isBusy\") && (this.get(\"start\") != start || this.get(\"end\") != end)) {\n\t\t\tthis.set(\"start\", start);\n\t\t\tthis.set(\"end\", end);\n\t\t}\n\n\t\tconst valueFunction = this.getPrivate(\"positionTextFunction\");\n\t\tconst from = Math.round(this.get(\"start\", 0) * 100);\n\t\tconst to = Math.round(this.get(\"end\", 0) * 100);\n\t\tlet fromValue: string;\n\t\tlet toValue: string;\n\t\tif (valueFunction) {\n\t\t\tfromValue = valueFunction.call(this, this.get(\"start\", 0));\n\t\t\ttoValue = valueFunction.call(this, this.get(\"end\", 0));\n\t\t}\n\t\telse {\n\t\t\tfromValue = from + \"%\";\n\t\t\ttoValue = to + \"%\";\n\t\t}\n\n\t\tthumb.set(\"ariaLabel\", this._t(\"From %1 to %2\", undefined, fromValue, toValue));\n\t\tthumb.set(\"ariaValueNow\", \"\" + from);\n\t\tthumb.set(\"ariaValueText\", from + \"%\");\n\t}\n\n\n\tprotected _updateGripsByThumb() {\n\n\t\tconst thumb = this.thumb;\n\t\tconst startGrip = this.startGrip;\n\t\tconst endGrip = this.endGrip;\n\n\t\tif (this.get(\"orientation\") == \"vertical\") {\n\t\t\tconst thumbSize = thumb.height();\n\t\t\tstartGrip.set(\"y\", thumb.y());\n\t\t\tendGrip.set(\"y\", thumb.y() + thumbSize);\n\t\t}\n\t\telse {\n\t\t\tconst thumbSize = thumb.width();\n\t\t\tstartGrip.set(\"x\", thumb.x());\n\t\t\tendGrip.set(\"x\", thumb.x() + thumbSize);\n\t\t}\n\t}\n}\n", "import { Scrollbar, IScrollbarPrivate, IScrollbarSettings, IScrollbarEvents } from \"./Scrollbar\";\r\n\r\nexport interface ISliderSettings extends IScrollbarSettings {\r\n}\r\n\r\nexport interface ISliderPrivate extends IScrollbarPrivate {\r\n}\r\n\r\nexport interface ISliderEvents extends IScrollbarEvents {\r\n}\r\n\r\n/**\r\n * A control that allows zooming chart's axes, or other uses requiring range\r\n * selection.\r\n */\r\nexport class Slider extends Scrollbar {\r\n\r\n\tdeclare public _settings: ISliderSettings;\r\n\tdeclare public _privateSettings: ISliderPrivate;\r\n\tdeclare public _events: ISliderEvents;\r\n\r\n\tpublic static className: string = \"Slider\";\r\n\tpublic static classNames: Array<string> = Scrollbar.classNames.concat([Slider.className]);\r\n\r\n\r\n\tprotected _afterNew() {\r\n\t\tthis._addOrientationClass();\r\n\t\tsuper._afterNew();\r\n\r\n\t\tthis.endGrip.setPrivate(\"visible\", false);\r\n\t\tthis.thumb.setPrivate(\"visible\", false);\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore\r\n\t */\r\n\tpublic updateGrips() {\r\n\t\tsuper.updateGrips();\r\n\t\tconst startGrip = this.startGrip;\r\n\t\tthis.endGrip.setAll({ x: startGrip.x(), y: startGrip.y() });\r\n\t\tthis.setRaw(\"end\", this.get(\"start\"));\r\n\t}\r\n}\r\n", "const pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path;\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function(x1, y1, x, y) {\n    this._ += \"Q\" + (+x1) + \",\" + (+y1) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + (+x1) + \",\" + (+y1) + \",\" + (+x2) + \",\" + (+y2) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon));\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      var x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n      }\n\n      this._ += \"A\" + r + \",\" + r + \",0,0,\" + (+(y01 * x20 > x01 * y20)) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n    }\n  },\n  arc: function(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._ += \"L\" + x0 + \",\" + y0;\n    }\n\n    // Is this arc empty? We\u2019re done.\n    if (!r) return;\n\n    // Does the angle go the wrong way? Flip the direction.\n    if (da < 0) da = da % tau + tau;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    }\n\n    // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,\" + (+(da >= pi)) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n    }\n  },\n  rect: function(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + (+w) + \"v\" + (+h) + \"h\" + (-w) + \"Z\";\n  },\n  toString: function() {\n    return this._;\n  }\n};\n\nexport default path;\n", "export default function(x) {\n  return function constant() {\n    return x;\n  };\n}\n", "export const abs = Math.abs;\nexport const atan2 = Math.atan2;\nexport const cos = Math.cos;\nexport const max = Math.max;\nexport const min = Math.min;\nexport const sin = Math.sin;\nexport const sqrt = Math.sqrt;\n\nexport const epsilon = 1e-12;\nexport const pi = Math.PI;\nexport const halfPi = pi / 2;\nexport const tau = 2 * pi;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x >= 1 ? halfPi : x <= -1 ? -halfPi : Math.asin(x);\n}\n", "import {path} from \"d3-path\";\nimport constant from \"./constant.js\";\nimport {abs, acos, asin, atan2, cos, epsilon, halfPi, max, min, pi, sin, sqrt, tau} from \"./math.js\";\n\nfunction arcInnerRadius(d) {\n  return d.innerRadius;\n}\n\nfunction arcOuterRadius(d) {\n  return d.outerRadius;\n}\n\nfunction arcStartAngle(d) {\n  return d.startAngle;\n}\n\nfunction arcEndAngle(d) {\n  return d.endAngle;\n}\n\nfunction arcPadAngle(d) {\n  return d && d.padAngle; // Note: optional!\n}\n\nfunction intersect(x0, y0, x1, y1, x2, y2, x3, y3) {\n  var x10 = x1 - x0, y10 = y1 - y0,\n      x32 = x3 - x2, y32 = y3 - y2,\n      t = y32 * x10 - x32 * y10;\n  if (t * t < epsilon) return;\n  t = (x32 * (y0 - y2) - y32 * (x0 - x2)) / t;\n  return [x0 + t * x10, y0 + t * y10];\n}\n\n// Compute perpendicular offset line of length rc.\n// http://mathworld.wolfram.com/Circle-LineIntersection.html\nfunction cornerTangents(x0, y0, x1, y1, r1, rc, cw) {\n  var x01 = x0 - x1,\n      y01 = y0 - y1,\n      lo = (cw ? rc : -rc) / sqrt(x01 * x01 + y01 * y01),\n      ox = lo * y01,\n      oy = -lo * x01,\n      x11 = x0 + ox,\n      y11 = y0 + oy,\n      x10 = x1 + ox,\n      y10 = y1 + oy,\n      x00 = (x11 + x10) / 2,\n      y00 = (y11 + y10) / 2,\n      dx = x10 - x11,\n      dy = y10 - y11,\n      d2 = dx * dx + dy * dy,\n      r = r1 - rc,\n      D = x11 * y10 - x10 * y11,\n      d = (dy < 0 ? -1 : 1) * sqrt(max(0, r * r * d2 - D * D)),\n      cx0 = (D * dy - dx * d) / d2,\n      cy0 = (-D * dx - dy * d) / d2,\n      cx1 = (D * dy + dx * d) / d2,\n      cy1 = (-D * dx + dy * d) / d2,\n      dx0 = cx0 - x00,\n      dy0 = cy0 - y00,\n      dx1 = cx1 - x00,\n      dy1 = cy1 - y00;\n\n  // Pick the closer of the two intersection points.\n  // TODO Is there a faster way to determine which intersection to use?\n  if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) cx0 = cx1, cy0 = cy1;\n\n  return {\n    cx: cx0,\n    cy: cy0,\n    x01: -ox,\n    y01: -oy,\n    x11: cx0 * (r1 / r - 1),\n    y11: cy0 * (r1 / r - 1)\n  };\n}\n\nexport default function() {\n  var innerRadius = arcInnerRadius,\n      outerRadius = arcOuterRadius,\n      cornerRadius = constant(0),\n      padRadius = null,\n      startAngle = arcStartAngle,\n      endAngle = arcEndAngle,\n      padAngle = arcPadAngle,\n      context = null;\n\n  function arc() {\n    var buffer,\n        r,\n        r0 = +innerRadius.apply(this, arguments),\n        r1 = +outerRadius.apply(this, arguments),\n        a0 = startAngle.apply(this, arguments) - halfPi,\n        a1 = endAngle.apply(this, arguments) - halfPi,\n        da = abs(a1 - a0),\n        cw = a1 > a0;\n\n    if (!context) context = buffer = path();\n\n    // Ensure that the outer radius is always larger than the inner radius.\n    if (r1 < r0) r = r1, r1 = r0, r0 = r;\n\n    // Is it a point?\n    if (!(r1 > epsilon)) context.moveTo(0, 0);\n\n    // Or is it a circle or annulus?\n    else if (da > tau - epsilon) {\n      context.moveTo(r1 * cos(a0), r1 * sin(a0));\n      context.arc(0, 0, r1, a0, a1, !cw);\n      if (r0 > epsilon) {\n        context.moveTo(r0 * cos(a1), r0 * sin(a1));\n        context.arc(0, 0, r0, a1, a0, cw);\n      }\n    }\n\n    // Or is it a circular or annular sector?\n    else {\n      var a01 = a0,\n          a11 = a1,\n          a00 = a0,\n          a10 = a1,\n          da0 = da,\n          da1 = da,\n          ap = padAngle.apply(this, arguments) / 2,\n          rp = (ap > epsilon) && (padRadius ? +padRadius.apply(this, arguments) : sqrt(r0 * r0 + r1 * r1)),\n          rc = min(abs(r1 - r0) / 2, +cornerRadius.apply(this, arguments)),\n          rc0 = rc,\n          rc1 = rc,\n          t0,\n          t1;\n\n      // Apply padding? Note that since r1 \u2265 r0, da1 \u2265 da0.\n      if (rp > epsilon) {\n        var p0 = asin(rp / r0 * sin(ap)),\n            p1 = asin(rp / r1 * sin(ap));\n        if ((da0 -= p0 * 2) > epsilon) p0 *= (cw ? 1 : -1), a00 += p0, a10 -= p0;\n        else da0 = 0, a00 = a10 = (a0 + a1) / 2;\n        if ((da1 -= p1 * 2) > epsilon) p1 *= (cw ? 1 : -1), a01 += p1, a11 -= p1;\n        else da1 = 0, a01 = a11 = (a0 + a1) / 2;\n      }\n\n      var x01 = r1 * cos(a01),\n          y01 = r1 * sin(a01),\n          x10 = r0 * cos(a10),\n          y10 = r0 * sin(a10);\n\n      // Apply rounded corners?\n      if (rc > epsilon) {\n        var x11 = r1 * cos(a11),\n            y11 = r1 * sin(a11),\n            x00 = r0 * cos(a00),\n            y00 = r0 * sin(a00),\n            oc;\n\n        // Restrict the corner radius according to the sector angle.\n        if (da < pi && (oc = intersect(x01, y01, x00, y00, x11, y11, x10, y10))) {\n          var ax = x01 - oc[0],\n              ay = y01 - oc[1],\n              bx = x11 - oc[0],\n              by = y11 - oc[1],\n              kc = 1 / sin(acos((ax * bx + ay * by) / (sqrt(ax * ax + ay * ay) * sqrt(bx * bx + by * by))) / 2),\n              lc = sqrt(oc[0] * oc[0] + oc[1] * oc[1]);\n          rc0 = min(rc, (r0 - lc) / (kc - 1));\n          rc1 = min(rc, (r1 - lc) / (kc + 1));\n        }\n      }\n\n      // Is the sector collapsed to a line?\n      if (!(da1 > epsilon)) context.moveTo(x01, y01);\n\n      // Does the sector\u2019s outer ring have rounded corners?\n      else if (rc1 > epsilon) {\n        t0 = cornerTangents(x00, y00, x01, y01, r1, rc1, cw);\n        t1 = cornerTangents(x11, y11, x10, y10, r1, rc1, cw);\n\n        context.moveTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc1 < rc) context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r1, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), !cw);\n          context.arc(t1.cx, t1.cy, rc1, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the outer ring just a circular arc?\n      else context.moveTo(x01, y01), context.arc(0, 0, r1, a01, a11, !cw);\n\n      // Is there no inner ring, and it\u2019s a circular sector?\n      // Or perhaps it\u2019s an annular sector collapsed due to padding?\n      if (!(r0 > epsilon) || !(da0 > epsilon)) context.lineTo(x10, y10);\n\n      // Does the sector\u2019s inner ring (or point) have rounded corners?\n      else if (rc0 > epsilon) {\n        t0 = cornerTangents(x10, y10, x11, y11, r0, -rc0, cw);\n        t1 = cornerTangents(x01, y01, x00, y00, r0, -rc0, cw);\n\n        context.lineTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc0 < rc) context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r0, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), cw);\n          context.arc(t1.cx, t1.cy, rc0, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the inner ring just a circular arc?\n      else context.arc(0, 0, r0, a10, a00, cw);\n    }\n\n    context.closePath();\n\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  arc.centroid = function() {\n    var r = (+innerRadius.apply(this, arguments) + +outerRadius.apply(this, arguments)) / 2,\n        a = (+startAngle.apply(this, arguments) + +endAngle.apply(this, arguments)) / 2 - pi / 2;\n    return [cos(a) * r, sin(a) * r];\n  };\n\n  arc.innerRadius = function(_) {\n    return arguments.length ? (innerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : innerRadius;\n  };\n\n  arc.outerRadius = function(_) {\n    return arguments.length ? (outerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : outerRadius;\n  };\n\n  arc.cornerRadius = function(_) {\n    return arguments.length ? (cornerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : cornerRadius;\n  };\n\n  arc.padRadius = function(_) {\n    return arguments.length ? (padRadius = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), arc) : padRadius;\n  };\n\n  arc.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : startAngle;\n  };\n\n  arc.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : endAngle;\n  };\n\n  arc.padAngle = function(_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : padAngle;\n  };\n\n  arc.context = function(_) {\n    return arguments.length ? ((context = _ == null ? null : _), arc) : context;\n  };\n\n  return arc;\n}\n", "export var slice = Array.prototype.slice;\n\nexport default function(x) {\n  return typeof x === \"object\" && \"length\" in x\n    ? x // Array, TypedArray, NodeList, array-like\n    : Array.from(x); // Map, Set, iterable, string, or anything else\n}\n", "function Linear(context) {\n  this._context = context;\n}\n\nLinear.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // falls through\n      default: this._context.lineTo(x, y); break;\n    }\n  }\n};\n\nexport default function(context) {\n  return new Linear(context);\n}\n", "import curveLinear from \"./linear.js\";\n\nexport var curveRadialLinear = curveRadial(curveLinear);\n\nfunction Radial(curve) {\n  this._curve = curve;\n}\n\nRadial.prototype = {\n  areaStart: function() {\n    this._curve.areaStart();\n  },\n  areaEnd: function() {\n    this._curve.areaEnd();\n  },\n  lineStart: function() {\n    this._curve.lineStart();\n  },\n  lineEnd: function() {\n    this._curve.lineEnd();\n  },\n  point: function(a, r) {\n    this._curve.point(r * Math.sin(a), r * -Math.cos(a));\n  }\n};\n\nexport default function curveRadial(curve) {\n\n  function radial(context) {\n    return new Radial(curve(context));\n  }\n\n  radial._curve = curve;\n\n  return radial;\n}\n", "import {min, sqrt} from \"../math.js\";\n\nconst sqrt3 = sqrt(3);\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size + min(size / 28, 0.75)) * 0.59436;\n    const t = r / 2;\n    const u = t * sqrt3;\n    context.moveTo(0, r);\n    context.lineTo(0, -r);\n    context.moveTo(-u, -t);\n    context.lineTo(u, t);\n    context.moveTo(-u, t);\n    context.lineTo(u, -t);\n  }\n};\n", "import {sqrt} from \"../math.js\";\n\nconst tan30 = sqrt(1 / 3);\nconst tan30_2 = tan30 * 2;\n\nexport default {\n  draw(context, size) {\n    const y = sqrt(size / tan30_2);\n    const x = y * tan30;\n    context.moveTo(0, -y);\n    context.lineTo(x, 0);\n    context.lineTo(0, y);\n    context.lineTo(-x, 0);\n    context.closePath();\n  }\n};\n", "import {sin, cos, sqrt, pi, tau} from \"../math.js\";\n\nconst ka = 0.89081309152928522810;\nconst kr = sin(pi / 10) / sin(7 * pi / 10);\nconst kx = sin(tau / 10) * kr;\nconst ky = -cos(tau / 10) * kr;\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size * ka);\n    const x = kx * r;\n    const y = ky * r;\n    context.moveTo(0, -r);\n    context.lineTo(x, y);\n    for (let i = 1; i < 5; ++i) {\n      const a = tau * i / 5;\n      const c = cos(a);\n      const s = sin(a);\n      context.lineTo(s * r, -c * r);\n      context.lineTo(c * x - s * y, s * x + c * y);\n    }\n    context.closePath();\n  }\n};\n", "import {sqrt} from \"../math.js\";\n\nconst sqrt3 = sqrt(3);\n\nexport default {\n  draw(context, size) {\n    const y = -sqrt(size / (sqrt3 * 3));\n    context.moveTo(0, y * 2);\n    context.lineTo(-sqrt3 * y, -y);\n    context.lineTo(sqrt3 * y, -y);\n    context.closePath();\n  }\n};\n", "import {sqrt} from \"../math.js\";\n\nconst sqrt3 = sqrt(3);\n\nexport default {\n  draw(context, size) {\n    const s = sqrt(size) * 0.6824;\n    const t = s  / 2;\n    const u = (s * sqrt3) / 2; // cos(Math.PI / 6)\n    context.moveTo(0, -s);\n    context.lineTo(u, t);\n    context.lineTo(-u, t);\n    context.closePath();\n  }\n};\n", "import {sqrt} from \"../math.js\";\n\nconst c = -0.5;\nconst s = sqrt(3) / 2;\nconst k = 1 / sqrt(12);\nconst a = (k / 2 + 1) * 3;\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size / a);\n    const x0 = r / 2, y0 = r * k;\n    const x1 = x0, y1 = r * k + r;\n    const x2 = -x1, y2 = y1;\n    context.moveTo(x0, y0);\n    context.lineTo(x1, y1);\n    context.lineTo(x2, y2);\n    context.lineTo(c * x0 - s * y0, s * x0 + c * y0);\n    context.lineTo(c * x1 - s * y1, s * x1 + c * y1);\n    context.lineTo(c * x2 - s * y2, s * x2 + c * y2);\n    context.lineTo(c * x0 + s * y0, c * y0 - s * x0);\n    context.lineTo(c * x1 + s * y1, c * y1 - s * x1);\n    context.lineTo(c * x2 + s * y2, c * y2 - s * x2);\n    context.closePath();\n  }\n};\n", "export default function() {}\n", "export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    (2 * that._x0 + that._x1) / 3,\n    (2 * that._y0 + that._y1) / 3,\n    (that._x0 + 2 * that._x1) / 3,\n    (that._y0 + 2 * that._y1) / 3,\n    (that._x0 + 4 * that._x1 + x) / 6,\n    (that._y0 + 4 * that._y1 + y) / 6\n  );\n}\n\nexport function Basis(context) {\n  this._context = context;\n}\n\nBasis.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 3: point(this, this._x1, this._y1); // falls through\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._context.lineTo((5 * this._x0 + this._x1) / 6, (5 * this._y0 + this._y1) / 6); // falls through\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new Basis(context);\n}\n", "import noop from \"../noop.js\";\nimport {point} from \"./basis.js\";\n\nfunction BasisClosed(context) {\n  this._context = context;\n}\n\nBasisClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x2, this._y2);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.moveTo((this._x2 + 2 * this._x3) / 3, (this._y2 + 2 * this._y3) / 3);\n        this._context.lineTo((this._x3 + 2 * this._x2) / 3, (this._y3 + 2 * this._y2) / 3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x2, this._y2);\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._x2 = x, this._y2 = y; break;\n      case 1: this._point = 2; this._x3 = x, this._y3 = y; break;\n      case 2: this._point = 3; this._x4 = x, this._y4 = y; this._context.moveTo((this._x0 + 4 * this._x1 + x) / 6, (this._y0 + 4 * this._y1 + y) / 6); break;\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new BasisClosed(context);\n}\n", "import {point} from \"./basis.js\";\n\nfunction BasisOpen(context) {\n  this._context = context;\n}\n\nBasisOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; var x0 = (this._x0 + 4 * this._x1 + x) / 6, y0 = (this._y0 + 4 * this._y1 + y) / 6; this._line ? this._context.lineTo(x0, y0) : this._context.moveTo(x0, y0); break;\n      case 3: this._point = 4; // falls through\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new BasisOpen(context);\n}\n", "import {Basis} from \"./basis.js\";\n\nfunction Bundle(context, beta) {\n  this._basis = new Basis(context);\n  this._beta = beta;\n}\n\nBundle.prototype = {\n  lineStart: function() {\n    this._x = [];\n    this._y = [];\n    this._basis.lineStart();\n  },\n  lineEnd: function() {\n    var x = this._x,\n        y = this._y,\n        j = x.length - 1;\n\n    if (j > 0) {\n      var x0 = x[0],\n          y0 = y[0],\n          dx = x[j] - x0,\n          dy = y[j] - y0,\n          i = -1,\n          t;\n\n      while (++i <= j) {\n        t = i / j;\n        this._basis.point(\n          this._beta * x[i] + (1 - this._beta) * (x0 + t * dx),\n          this._beta * y[i] + (1 - this._beta) * (y0 + t * dy)\n        );\n      }\n    }\n\n    this._x = this._y = null;\n    this._basis.lineEnd();\n  },\n  point: function(x, y) {\n    this._x.push(+x);\n    this._y.push(+y);\n  }\n};\n\nexport default (function custom(beta) {\n\n  function bundle(context) {\n    return beta === 1 ? new Basis(context) : new Bundle(context, beta);\n  }\n\n  bundle.beta = function(beta) {\n    return custom(+beta);\n  };\n\n  return bundle;\n})(0.85);\n", "export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    that._x1 + that._k * (that._x2 - that._x0),\n    that._y1 + that._k * (that._y2 - that._y0),\n    that._x2 + that._k * (that._x1 - x),\n    that._y2 + that._k * (that._y1 - y),\n    that._x2,\n    that._y2\n  );\n}\n\nexport function Cardinal(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinal.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: point(this, this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; this._x1 = x, this._y1 = y; break;\n      case 2: this._point = 3; // falls through\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new Cardinal(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n", "import noop from \"../noop.js\";\nimport {point} from \"./cardinal.js\";\n\nexport function CardinalClosed(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinalClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.lineTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        this.point(this._x5, this._y5);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._x3 = x, this._y3 = y; break;\n      case 1: this._point = 2; this._context.moveTo(this._x4 = x, this._y4 = y); break;\n      case 2: this._point = 3; this._x5 = x, this._y5 = y; break;\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new CardinalClosed(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n", "import {point} from \"./cardinal.js\";\n\nexport function CardinalOpen(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinalOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break;\n      case 3: this._point = 4; // falls through\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new CardinalOpen(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n", "import {epsilon} from \"../math.js\";\nimport {Cardinal} from \"./cardinal.js\";\n\nexport function point(that, x, y) {\n  var x1 = that._x1,\n      y1 = that._y1,\n      x2 = that._x2,\n      y2 = that._y2;\n\n  if (that._l01_a > epsilon) {\n    var a = 2 * that._l01_2a + 3 * that._l01_a * that._l12_a + that._l12_2a,\n        n = 3 * that._l01_a * (that._l01_a + that._l12_a);\n    x1 = (x1 * a - that._x0 * that._l12_2a + that._x2 * that._l01_2a) / n;\n    y1 = (y1 * a - that._y0 * that._l12_2a + that._y2 * that._l01_2a) / n;\n  }\n\n  if (that._l23_a > epsilon) {\n    var b = 2 * that._l23_2a + 3 * that._l23_a * that._l12_a + that._l12_2a,\n        m = 3 * that._l23_a * (that._l23_a + that._l12_a);\n    x2 = (x2 * b + that._x1 * that._l23_2a - x * that._l12_2a) / m;\n    y2 = (y2 * b + that._y1 * that._l23_2a - y * that._l12_2a) / m;\n  }\n\n  that._context.bezierCurveTo(x1, y1, x2, y2, that._x2, that._y2);\n}\n\nfunction CatmullRom(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRom.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: this.point(this._x2, this._y2); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; // falls through\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRom(context, alpha) : new Cardinal(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n", "import {CardinalClosed} from \"./cardinalClosed.js\";\nimport noop from \"../noop.js\";\nimport {point} from \"./catmullRom.js\";\n\nfunction CatmullRomClosed(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRomClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.lineTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        this.point(this._x5, this._y5);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._x3 = x, this._y3 = y; break;\n      case 1: this._point = 2; this._context.moveTo(this._x4 = x, this._y4 = y); break;\n      case 2: this._point = 3; this._x5 = x, this._y5 = y; break;\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRomClosed(context, alpha) : new CardinalClosed(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n", "import {CardinalOpen} from \"./cardinalOpen.js\";\nimport {point} from \"./catmullRom.js\";\n\nfunction CatmullRomOpen(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRomOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break;\n      case 3: this._point = 4; // falls through\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRomOpen(context, alpha) : new CardinalOpen(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n", "import noop from \"../noop.js\";\n\nfunction LinearClosed(context) {\n  this._context = context;\n}\n\nLinearClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._point) this._context.closePath();\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    if (this._point) this._context.lineTo(x, y);\n    else this._point = 1, this._context.moveTo(x, y);\n  }\n};\n\nexport default function(context) {\n  return new LinearClosed(context);\n}\n", "function sign(x) {\n  return x < 0 ? -1 : 1;\n}\n\n// Calculate the slopes of the tangents (Hermite-type interpolation) based on\n// the following paper: Steffen, M. 1990. A Simple Method for Monotonic\n// Interpolation in One Dimension. Astronomy and Astrophysics, Vol. 239, NO.\n// NOV(II), P. 443, 1990.\nfunction slope3(that, x2, y2) {\n  var h0 = that._x1 - that._x0,\n      h1 = x2 - that._x1,\n      s0 = (that._y1 - that._y0) / (h0 || h1 < 0 && -0),\n      s1 = (y2 - that._y1) / (h1 || h0 < 0 && -0),\n      p = (s0 * h1 + s1 * h0) / (h0 + h1);\n  return (sign(s0) + sign(s1)) * Math.min(Math.abs(s0), Math.abs(s1), 0.5 * Math.abs(p)) || 0;\n}\n\n// Calculate a one-sided slope.\nfunction slope2(that, t) {\n  var h = that._x1 - that._x0;\n  return h ? (3 * (that._y1 - that._y0) / h - t) / 2 : t;\n}\n\n// According to https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Representations\n// \"you can express cubic Hermite interpolation in terms of cubic B\u00E9zier curves\n// with respect to the four values p0, p0 + m0 / 3, p1 - m1 / 3, p1\".\nfunction point(that, t0, t1) {\n  var x0 = that._x0,\n      y0 = that._y0,\n      x1 = that._x1,\n      y1 = that._y1,\n      dx = (x1 - x0) / 3;\n  that._context.bezierCurveTo(x0 + dx, y0 + dx * t0, x1 - dx, y1 - dx * t1, x1, y1);\n}\n\nfunction MonotoneX(context) {\n  this._context = context;\n}\n\nMonotoneX.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 =\n    this._t0 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n      case 3: point(this, this._t0, slope2(this, this._t0)); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    var t1 = NaN;\n\n    x = +x, y = +y;\n    if (x === this._x1 && y === this._y1) return; // Ignore coincident points.\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; point(this, slope2(this, t1 = slope3(this, x, y)), t1); break;\n      default: point(this, this._t0, t1 = slope3(this, x, y)); break;\n    }\n\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n    this._t0 = t1;\n  }\n}\n\nfunction MonotoneY(context) {\n  this._context = new ReflectContext(context);\n}\n\n(MonotoneY.prototype = Object.create(MonotoneX.prototype)).point = function(x, y) {\n  MonotoneX.prototype.point.call(this, y, x);\n};\n\nfunction ReflectContext(context) {\n  this._context = context;\n}\n\nReflectContext.prototype = {\n  moveTo: function(x, y) { this._context.moveTo(y, x); },\n  closePath: function() { this._context.closePath(); },\n  lineTo: function(x, y) { this._context.lineTo(y, x); },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) { this._context.bezierCurveTo(y1, x1, y2, x2, y, x); }\n};\n\nexport function monotoneX(context) {\n  return new MonotoneX(context);\n}\n\nexport function monotoneY(context) {\n  return new MonotoneY(context);\n}\n", "function Natural(context) {\n  this._context = context;\n}\n\nNatural.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = [];\n    this._y = [];\n  },\n  lineEnd: function() {\n    var x = this._x,\n        y = this._y,\n        n = x.length;\n\n    if (n) {\n      this._line ? this._context.lineTo(x[0], y[0]) : this._context.moveTo(x[0], y[0]);\n      if (n === 2) {\n        this._context.lineTo(x[1], y[1]);\n      } else {\n        var px = controlPoints(x),\n            py = controlPoints(y);\n        for (var i0 = 0, i1 = 1; i1 < n; ++i0, ++i1) {\n          this._context.bezierCurveTo(px[0][i0], py[0][i0], px[1][i0], py[1][i0], x[i1], y[i1]);\n        }\n      }\n    }\n\n    if (this._line || (this._line !== 0 && n === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n    this._x = this._y = null;\n  },\n  point: function(x, y) {\n    this._x.push(+x);\n    this._y.push(+y);\n  }\n};\n\n// See https://www.particleincell.com/2012/bezier-splines/ for derivation.\nfunction controlPoints(x) {\n  var i,\n      n = x.length - 1,\n      m,\n      a = new Array(n),\n      b = new Array(n),\n      r = new Array(n);\n  a[0] = 0, b[0] = 2, r[0] = x[0] + 2 * x[1];\n  for (i = 1; i < n - 1; ++i) a[i] = 1, b[i] = 4, r[i] = 4 * x[i] + 2 * x[i + 1];\n  a[n - 1] = 2, b[n - 1] = 7, r[n - 1] = 8 * x[n - 1] + x[n];\n  for (i = 1; i < n; ++i) m = a[i] / b[i - 1], b[i] -= m, r[i] -= m * r[i - 1];\n  a[n - 1] = r[n - 1] / b[n - 1];\n  for (i = n - 2; i >= 0; --i) a[i] = (r[i] - a[i + 1]) / b[i];\n  b[n - 1] = (x[n] + a[n - 1]) / 2;\n  for (i = 0; i < n - 1; ++i) b[i] = 2 * x[i + 1] - a[i + 1];\n  return [a, b];\n}\n\nexport default function(context) {\n  return new Natural(context);\n}\n", "function Step(context, t) {\n  this._context = context;\n  this._t = t;\n}\n\nStep.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = this._y = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (0 < this._t && this._t < 1 && this._point === 2) this._context.lineTo(this._x, this._y);\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    if (this._line >= 0) this._t = 1 - this._t, this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // falls through\n      default: {\n        if (this._t <= 0) {\n          this._context.lineTo(this._x, y);\n          this._context.lineTo(x, y);\n        } else {\n          var x1 = this._x * (1 - this._t) + x * this._t;\n          this._context.lineTo(x1, this._y);\n          this._context.lineTo(x1, y);\n        }\n        break;\n      }\n    }\n    this._x = x, this._y = y;\n  }\n};\n\nexport default function(context) {\n  return new Step(context, 0.5);\n}\n\nexport function stepBefore(context) {\n  return new Step(context, 0);\n}\n\nexport function stepAfter(context) {\n  return new Step(context, 1);\n}\n", "import { Graphics, IGraphicsSettings, IGraphicsPrivate } from \"./Graphics\";\nimport * as $type from \"../util/Type\";\nimport { Percent } from \"../util/Percent\";\nimport type { IPoint } from \"../util/IPoint\";\nimport { arc } from \"d3-shape\";\nimport * as $math from \"../util/Math\";\n\nexport interface ISliceSettings extends IGraphicsSettings {\n\n\t/**\n\t * Radius in pixels.\n\t */\n\tradius?: number;\n\n\t/**\n\t * Slice \"width\" in degrees.\n\t */\n\tarc?: number;\n\n\t/**\n\t * Inner radius of the slice in pixels.\n\t */\n\tinnerRadius?: number;\n\n\t/**\n\t * Start angle in degrees.\n\t */\n\tstartAngle?: number;\n\n\t/**\n\t * Slice corner radius in pixels.\n\t */\n\tcornerRadius?: number;\n\n\t/**\n\t * Slice \"pull out\" radius in pixels.\n\t */\n\tshiftRadius?: number;\n\n\t/**\n\t * Number of pixels to add to whatever slice's `radius` value is. Negative\n\t * numbers can also be used.\n\t */\n\tdRadius?: number;\n\n\t/**\n\t * Number of pixels to add to whatever slice's `innerRadius` value is.\n\t * Negative numbers can also be used.\n\t */\n\tdInnerRadius?: number;\n\n}\n\nexport interface ISlicePrivate extends IGraphicsPrivate {\n}\n\n/**\n * Draws a slice shape.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\n */\nexport class Slice extends Graphics {\n\n\tdeclare public _settings: ISliceSettings;\n\tdeclare public _privateSettings: ISlicePrivate;\n\n\tpublic static className: string = \"Slice\";\n\tpublic static classNames: Array<string> = Graphics.classNames.concat([Slice.className]);\n\n\t/**\n\t * @ignore\n\t */\n\tpublic ix: number = 0;\n\n\t/**\n\t * @ignore\n\t */\n\tpublic iy: number = 0;\n\n\tprotected _generator = arc();\n\n\tpublic _getTooltipPoint(): IPoint {\n\t\tlet tooltipX = this.get(\"tooltipX\");\n\t\tlet tooltipY = this.get(\"tooltipY\");\n\n\t\tlet x = 0;\n\t\tlet y = 0;\n\n\t\tif ($type.isNumber(tooltipX)) {\n\t\t\tx = tooltipX;\n\t\t}\n\n\t\tif ($type.isNumber(tooltipY)) {\n\t\t\ty = tooltipY;\n\t\t}\n\n\t\tlet radius = this.get(\"radius\", 0);\n\t\tlet innerRadius = this.get(\"innerRadius\", 0);\n\n\t\tlet dRadius = this.get(\"dRadius\", 0);\n\t\tlet dInnerRadius = this.get(\"dInnerRadius\", 0);\n\n\t\tradius += dRadius;\n\t\tinnerRadius += dInnerRadius;\n\n\t\tif (innerRadius < 0) {\n\t\t\tinnerRadius = radius + innerRadius;\n\t\t}\n\n\t\tif (tooltipX instanceof Percent) {\n\t\t\tx = this.ix * (innerRadius + (radius - innerRadius) * tooltipX.value)\n\t\t}\n\n\t\tif (tooltipY instanceof Percent) {\n\t\t\ty = this.iy * (innerRadius + (radius - innerRadius) * tooltipY.value)\n\t\t}\n\n\t\tif (this.get(\"arc\") >= 360 && innerRadius == 0) {\n\t\t\tx = 0;\n\t\t\ty = 0;\n\t\t}\n\n\n\t\treturn { x, y };\n\t}\n\tpublic _beforeChanged() {\n\t\tsuper._beforeChanged();\n\n\t\tif (this.isDirty(\"radius\") || this.isDirty(\"arc\") || this.isDirty(\"innerRadius\") || this.isDirty(\"startAngle\") || this.isDirty(\"dRadius\") || this.isDirty(\"dInnerRadius\") || this.isDirty(\"cornerRadius\")) {\n\t\t\tthis._clear = true;\n\t\t}\n\t}\n\n\tpublic _changed() {\n\t\tsuper._changed();\n\n\t\tif (this._clear) {\n\t\t\tlet startAngle = this.get(\"startAngle\", 0);\n\t\t\tlet arc = this.get(\"arc\", 0);\n\t\t\tconst generator = this._generator;\n\n\t\t\tif(arc < 0){\n\t\t\t\tstartAngle = startAngle + arc;\n\t\t\t\tarc = arc * -1;\n\t\t\t}\n\n\t\t\tif(arc > 0.1){ // this fixes bug with full circle when arc is very small\n\t\t\t\tgenerator.cornerRadius(this.get(\"cornerRadius\", 0));\n\t\t\t}\n\t\t\tgenerator.context(this._display as any);\n\n\t\t\tlet radius = this.get(\"radius\", 0);\n\t\t\tlet innerRadius = this.get(\"innerRadius\", 0);\n\n\t\t\tlet dRadius = this.get(\"dRadius\", 0);\n\t\t\tlet dInnerRadius = this.get(\"dInnerRadius\", 0);\n\n\t\t\tradius += dRadius;\n\t\t\tinnerRadius += dInnerRadius;\t\t\t\n\n\t\t\tif (innerRadius < 0) {\n\t\t\t\tinnerRadius = radius + innerRadius;\n\t\t\t}\n\n\t\t\tgenerator({ innerRadius: innerRadius, outerRadius: radius, startAngle: (startAngle + 90) * $math.RADIANS, endAngle: (startAngle + arc + 90) * $math.RADIANS });\n\n\t\t\tlet middleAngle = startAngle + arc / 2;\n\n\t\t\tthis.ix = $math.cos(middleAngle);\n\t\t\tthis.iy = $math.sin(middleAngle);\n\t\t}\n\n\t\tif (this.isDirty(\"shiftRadius\")) {\n\t\t\tconst shiftRadius = this.get(\"shiftRadius\", 0);\n\t\t\tthis.setRaw(\"dx\", this.ix * shiftRadius);\n\t\t\tthis.setRaw(\"dy\", this.iy * shiftRadius);\n\t\t\tthis.markDirtyPosition();\n\t\t}\n\t}\n}\n", "import { Line, ILineSettings, ILinePrivate } from \"./Line\";\n\n\nexport interface ITickSettings extends ILineSettings {\n\n\t/**\n\t * Length in pixels.\n\t */\n\tlength?: number;\n\n\t/**\n\t * Location within target space. 0 - beginning, 1 - end.\n\t */\n\tlocation?: number;\n\n}\n\nexport interface ITickPrivate extends ILinePrivate {\n}\n\n/**\n * Draws a tick element (mostly used on axes).\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\n */\nexport class Tick extends Line {\n\n\tdeclare public _settings: ITickSettings;\n\tdeclare public _privateSettings: ITickPrivate;\n\n\tpublic static className: string = \"Tick\";\n\tpublic static classNames: Array<string> = Line.classNames.concat([Tick.className]);\n}\n", "interface ParsedDate {\n\tyear: number,\n\tmonth: number,\n\tday: number,\n\thour: number,\n\tminute: number,\n\tsecond: number,\n\tmillisecond: number,\n\tweekday: number\n}\n\nfunction parseDate(timezone: Intl.DateTimeFormat, date: Date): ParsedDate {\n\tlet year = 0;\n\tlet month = 0;\n\tlet day = 1;\n\tlet hour = 0;\n\tlet minute = 0;\n\tlet second = 0;\n\tlet millisecond = 0;\n\tlet weekday = 0;\n\n\ttimezone.formatToParts(date).forEach((x) => {\n\t\tswitch (x.type) {\n\t\t\tcase \"year\":\n\t\t\t\tyear = +x.value;\n\t\t\t\tbreak;\n\t\t\tcase \"month\":\n\t\t\t\tmonth = (+x.value) - 1;\n\t\t\t\tbreak;\n\t\t\tcase \"day\":\n\t\t\t\tday = +x.value;\n\t\t\t\tbreak;\n\t\t\tcase \"hour\":\n\t\t\t\thour = +x.value;\n\t\t\t\tbreak;\n\t\t\tcase \"minute\":\n\t\t\t\tminute = +x.value;\n\t\t\t\tbreak;\n\t\t\tcase \"second\":\n\t\t\t\tsecond = +x.value;\n\t\t\t\tbreak;\n\t\t\tcase \"fractionalSecond\" as any:\n\t\t\t\tmillisecond = +x.value;\n\t\t\t\tbreak;\n\t\t\tcase \"weekday\":\n\t\t\t\tswitch (x.value) {\n\t\t\t\t\tcase \"Sun\":\n\t\t\t\t\t\tweekday = 0;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Mon\":\n\t\t\t\t\t\tweekday = 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Tue\":\n\t\t\t\t\t\tweekday = 2;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Wed\":\n\t\t\t\t\t\tweekday = 3;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Thu\":\n\t\t\t\t\t\tweekday = 4;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Fri\":\n\t\t\t\t\t\tweekday = 5;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Sat\":\n\t\t\t\t\t\tweekday = 6;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t}\n\t});\n\n\tif (hour === 24) {\n\t\thour = 0;\n\t}\n\n\treturn { year, month, day, hour, minute, second, millisecond, weekday };\n}\n\n\nfunction toUTCDate(timezone: Intl.DateTimeFormat, date: Date): number {\n\tconst { year, month, day, hour, minute, second, millisecond } = parseDate(timezone, date);\n\treturn Date.UTC(year, month, day, hour, minute, second, millisecond);\n}\n\n\nexport class Timezone {\n\tprivate _utc: Intl.DateTimeFormat;\n\tprivate _dtf: Intl.DateTimeFormat;\n\n\tpublic readonly name: string | undefined;\n\n\t/**\n\t * Use this method to create an instance of this class.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/getting-started/#New_element_syntax} for more info\n\t * @param   timezone  IANA timezone\n\t * @return            Instantiated object\n\t */\n\tstatic new<C extends typeof Timezone, T extends InstanceType<C>>(this: C, timezone: string | undefined): T {\n\t\treturn (new this(timezone, true)) as T;\n\t}\n\n\tconstructor(timezone: string | undefined, isReal: boolean) {\n\t\tif (!isReal) {\n\t\t\tthrow new Error(\"You cannot use `new Class()`, instead use `Class.new()`\");\n\t\t}\n\n\t\tthis.name = timezone;\n\n\t\tthis._utc = new Intl.DateTimeFormat(\"UTC\", {\n\t\t\thour12: false,\n\t\t\ttimeZone: \"UTC\",\n\t\t\tyear: \"numeric\",\n\t\t\tmonth: \"2-digit\",\n\t\t\tday: \"2-digit\",\n\t\t\thour: \"2-digit\",\n\t\t\tminute: \"2-digit\",\n\t\t\tsecond: \"2-digit\",\n\t\t\tweekday: \"short\",\n\t\t\tfractionalSecondDigits: 3,\n\t\t} as any);\n\n\t\tthis._dtf = new Intl.DateTimeFormat(\"UTC\", {\n\t\t\thour12: false,\n\t\t\ttimeZone: timezone,\n\t\t\tyear: \"numeric\",\n\t\t\tmonth: \"2-digit\",\n\t\t\tday: \"2-digit\",\n\t\t\thour: \"2-digit\",\n\t\t\tminute: \"2-digit\",\n\t\t\tsecond: \"2-digit\",\n\t\t\tweekday: \"short\",\n\t\t\tfractionalSecondDigits: 3,\n\t\t} as any);\n\t}\n\n\tconvertLocal(date: Date): Date {\n\t\tconst offset = this.offsetUTC(date);\n\t\tconst userOffset = date.getTimezoneOffset();\n\t\tconst output = new Date(date);\n\t\toutput.setUTCMinutes(output.getUTCMinutes() - (offset - userOffset));\n\n\t\tconst newUserOffset = output.getTimezoneOffset();\n\n\t\tif (userOffset != newUserOffset) {\n\t\t\toutput.setUTCMinutes(output.getUTCMinutes() + newUserOffset - userOffset)\n\t\t}\n\n\t\treturn output;\n\t}\n\n\toffsetUTC(date: Date): number {\n\t\tconst utc = toUTCDate(this._utc, date);\n\t\tconst dtf = toUTCDate(this._dtf, date);\n\t\treturn (utc - dtf) / 60000;\n\t}\n\n\tparseDate(date: Date): ParsedDate {\n\t\treturn parseDate(this._dtf, date)\n\t}\n}\n", "import type { IGradient } from \"../backend/Renderer\";\nimport type { Sprite } from \"../Sprite\";\nimport type { Percent } from \"../../util/Percent\";\n\nimport { Gradient, IGradientSettings, IGradientPrivate } from \"./Gradient\";\nimport { Color } from \"../../util/Color\";\n\nimport * as $array from \"../../util/Array\";\nimport * as $type from \"../../util/Type\";\nimport * as $utils from \"../../util/Utils\";\n\n\nexport interface IRadialGradientSettings extends IGradientSettings {\n\n\t/**\n\t * Gradient radius in pixels or percent (relative to the `target`).\n\t */\n\tradius?: number | Percent;\n\n\t/**\n\t * X position.\n\t */\n\tx?: number | Percent;\n\n\t/**\n\t * Y position.\n\t */\n\ty?: number | Percent;\n\n}\n\nexport interface IRadialGradientPrivate extends IGradientPrivate {\n}\n\n/**\n * Radial gradient.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/gradients/} for more info\n */\nexport class RadialGradient extends Gradient {\n\n\tdeclare public _settings: IRadialGradientSettings;\n\tdeclare public _privateSettings: IRadialGradientPrivate;\n\n\tpublic static className: string = \"RadialGradient\";\n\tpublic static classNames: Array<string> = Gradient.classNames.concat([RadialGradient.className]);\n\n\t/**\n\t * @ignore\n\t */\n\tpublic getFill(target: Sprite): IGradient {\n\t\tconst bounds = this.getBounds(target);\n\n\t\tlet x = 0;\n\t\tlet y = 0;\n\n\t\tlet l = bounds.left || 0;\n\t\tlet r = bounds.right || 0;\n\t\tlet t = bounds.top || 0;\n\t\tlet b = bounds.bottom || 0;\n\n\t\tconst width = r - l;\n\t\tconst height = b - t;\n\n\t\tlet radius = target.get(\"radius\" as any);\n\t\tif ($type.isNumber(radius)) {\n\t\t\tx = 0;\n\t\t\ty = 0;\n\t\t}\n\t\telse {\n\t\t\tradius = Math.min(width, height) / 2;\n\t\t\tx = width / 2;\n\t\t\ty = height / 2;\n\t\t}\n\n\t\tlet ux = this.get(\"x\");\n\t\tlet uy = this.get(\"y\");\n\t\tif (ux != null) {\n\t\t\tx = $utils.relativeToValue(ux, width);\n\t\t}\n\n\t\tif (uy != null) {\n\t\t\ty = $utils.relativeToValue(uy, height);\n\t\t}\n\n\t\tconst gradient = this._root._renderer.createRadialGradient(x, y, 0, x, y, radius);\n\t\tconst stops = this.get(\"stops\")!;\n\t\tif (stops) {\n\t\t\tlet i = 0;\n\t\t\t$array.each(stops, (stop) => {\n\n\t\t\t\tlet offset = stop.offset;\n\n\t\t\t\tif (!$type.isNumber(offset)) {\n\t\t\t\t\toffset = i / (stops.length - 1);\n\t\t\t\t}\n\n\t\t\t\tlet opacity = stop.opacity;\n\n\t\t\t\tif (!$type.isNumber(opacity)) {\n\t\t\t\t\topacity = 1;\n\t\t\t\t}\n\n\t\t\t\tlet color = stop.color;\n\n\t\t\t\tif (color) {\n\n\t\t\t\t\tconst lighten = stop.lighten;\n\t\t\t\t\tif (lighten) {\n\t\t\t\t\t\tcolor = Color.lighten(color, lighten)\n\t\t\t\t\t}\n\n\t\t\t\t\tconst brighten = stop.brighten;\n\t\t\t\t\tif (brighten) {\n\t\t\t\t\t\tcolor = Color.brighten(color, brighten)\n\t\t\t\t\t}\n\n\t\t\t\t\tgradient.addColorStop(offset, 'rgba(' + color.r + ',' + color.g + ',' + color.b + ',' + opacity + ')');\n\t\t\t\t}\n\t\t\t\ti++;\n\t\t\t})\n\t\t}\n\n\t\treturn gradient\n\t}\n}\n", "import type { IGraphics, IPattern } from \"../backend/Renderer\";\nimport type { Color } from \"../../util/Color\";\n\nimport { Entity, IEntitySettings, IEntityPrivate } from \"../../util/Entity\";\n\nexport interface IPatternSettings extends IEntitySettings {\n\n\t/**\n\t * Rotation of patterm in degrees. Supported values: -90 to 90.\n\t *\n\t * @default 0\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/patterns/#Rotation} for more info\n\t */\n\trotation?: number;\n\n\t/**\n\t * How pattern tiles are repeated when filling the area.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/patterns/#Repetition} for more info\n\t */\n\trepetition?: \"repeat\" | \"repeat-x\" | \"repeat-y\" | \"no-repeat\";\n\n\t/**\n\t * Width of the pattern tile, in pixels.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/patterns/#Sizing_patterns} for more info\n\t */\n\twidth?: number;\n\n\t/**\n\t * Width of the pattern tile, in pixels.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/patterns/#Sizing_patterns} for more info\n\t */\n\theight?: number;\n\n\t/**\n\t * Color of the pattern shape.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/patterns/#Colors} for more info\n\t */\n\tcolor?: Color;\n\n\t/**\n\t * Opacity of the pattern shape.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/patterns/#Colors} for more info\n\t */\n\tcolorOpacity?: number;\n\n\t/**\n\t * Width of the pattern's line elements.\n\t *\n\t * @default 1\n\t */\n\tstrokeWidth?: number;\n\n\t/**\n\t * Stroke (border or line) dash settings.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/#Dashed_lines} for more information\n\t */\n\tstrokeDasharray?: number[] | number;\n\n\t/**\n\t * Stroke (border or line) dash offset.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/#Dashed_lines} for more information\n\t */\n\tstrokeDashoffset?: number;\n\n\t/**\n\t * Color to fill gaps between pattern shapes.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/patterns/#Colors} for more info\n\t */\n\tfill?: Color;\n\n\t/**\n\t * Opacity of the fill for gaps between pattern shapes.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/patterns/#Colors} for more info\n\t */\n\tfillOpacity?: number;\n\n\t/**\n\t * @ignore\n\t */\n\tcolorInherited?: boolean;\n\n\t/**\n\t * @ignore\n\t */\n\tfillInherited?: boolean;\n}\n\nexport interface IPatternPrivate extends IEntityPrivate {\n}\n\n/**\n * Base class for patterns.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/patterns/} for more info\n */\nexport class Pattern extends Entity {\n\tprotected _afterNew() {\n\t\t// Applying themes because pattern will not have parent\n\t\tsuper._afterNewApplyThemes();\n\t}\n\n\tdeclare public _settings: IPatternSettings;\n\tdeclare public _privateSettings: IPatternPrivate;\n\n\tpublic static className: string = \"Pattern\";\n\tpublic static classNames: Array<string> = Entity.classNames.concat([Pattern.className]);\n\n\tpublic _display: IGraphics = this._root._renderer.makeGraphics();\n\tpublic _backgroundDisplay: IGraphics = this._root._renderer.makeGraphics();\n\n\tprotected _clear = false;\n\n\tprotected _pattern: IPattern | undefined;\n\n\tpublic get pattern(): IPattern | undefined {\n\t\treturn this._pattern;\n\t}\n\n\tprotected _draw(): void { }\n\n\tpublic _beforeChanged() {\n\t\tsuper._beforeChanged();\n\n\t\tif (this.isDirty(\"repetition\") || this.isDirty(\"width\") || this.isDirty(\"height\") || this.isDirty(\"rotation\") || this.isDirty(\"color\") || this.isDirty(\"strokeWidth\") || this.isDirty(\"strokeDasharray\") || this.isDirty(\"strokeDashoffset\") || this.isDirty(\"colorOpacity\") || this.isDirty(\"fill\") || this.isDirty(\"fillOpacity\")) {\n\t\t\tthis._clear = true;\n\t\t}\n\t}\n\n\tpublic _changed() {\n\t\tsuper._changed();\n\n\t\tif (this._clear) {\n\t\t\tconst repetition = this.get(\"repetition\", \"\");\n\t\t\tconst width = this.get(\"width\", 100);\n\t\t\tconst height = this.get(\"height\", 100);\n\t\t\tconst fill = this.get(\"fill\");\n\t\t\tconst fillOpacity = this.get(\"fillOpacity\", 1);\n\n\t\t\tthis._display.clear();\n\t\t\tthis._backgroundDisplay.clear();\n\n\t\t\tif (fill && (fillOpacity > 0)) {\n\t\t\t\tthis._backgroundDisplay.beginFill(fill, fillOpacity);\n\t\t\t\tthis._backgroundDisplay.drawRect(0, 0, width, height);\n\t\t\t\tthis._backgroundDisplay.endFill();\n\t\t\t}\n\n\t\t\tthis._display.angle = this.get(\"rotation\", 0);\n\t\t\t//this._display.pivot = { x: width / 2, y: height / 2 };\n\t\t\tthis._draw();\n\n\t\t\tthis._pattern = this._root._renderer.createPattern(this._display, this._backgroundDisplay, repetition, width, height);\n\t\t}\n\t}\n}\n", "import { Pattern, IPatternSettings, IPatternPrivate } from \"./Pattern\";\n\nimport * as $math from \"../../util/Math\";\n\nexport interface ICirclePatternSettings extends IPatternSettings {\n\n\t/**\n\t * Gap between circles, in pixels.\n\t *\n\t * @default 3\n\t */\n\tgap?: number;\n\n\t/**\n\t * Radius of the circles, in pixels.\n\t *\n\t * @default 3\n\t */\n\tradius?: number;\n\n\t/**\n\t * If set to `true`, will place every second circle, creating checkered\n\t * pattern.\n\t *\n\t * @default false\n\t */\n\tcheckered?: boolean;\n\n\t/**\n\t * Center circles.\n\t *\n\t * @default true\n\t */\n\tcentered?: boolean;\n\n}\n\nexport interface ICirclePatternPrivate extends IPatternPrivate {\n}\n\n/**\n * Circle pattern.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/patterns/} for more info\n */\nexport class CirclePattern extends Pattern {\n\n\tdeclare public _settings: ICirclePatternSettings;\n\tdeclare public _privateSettings: ICirclePatternPrivate;\n\n\tpublic static className: string = \"CirclePattern\";\n\tpublic static classNames: Array<string> = Pattern.classNames.concat([CirclePattern.className]);\n\n\tpublic _beforeChanged() {\n\t\tsuper._beforeChanged();\n\n\t\tif (this.isDirty(\"gap\")) {\n\t\t\tthis._clear = true;\n\t\t}\n\t}\n\n\tprotected _draw() {\n\t\tsuper._draw();\n\n\t\tconst checkered = this.get(\"checkered\", false);\n\t\tconst centered = this.get(\"centered\", true);\n\t\tconst gap = this.get(\"gap\", 0);\n\t\tconst rotation = this.get(\"rotation\", 0);\n\t\tlet w = this.get(\"width\", 100);\n\t\tlet h = this.get(\"height\", 100);\n\t\tlet radius = this.get(\"radius\", 3);\n\n\t\tlet cellW = radius * 2 + gap;\n\t\tlet cellH = radius * 2 + gap;\n\n\t\tlet cols = Math.round(w / cellW);\n\t\tlet rows = Math.round(h / cellH);\n\n\t\tcellW = w / cols;\n\t\tcellH = h / rows;\n\n\t\tif (rotation != 0) {\n\t\t\t// @todo this is probably not right\n\t\t\tthis._display.x = cellW * $math.cos(rotation);\n\t\t\tthis._display.y = cellH * $math.sin(rotation);\n\t\t}\n\n\t\tconst color = this.get(\"color\");\n\t\tconst colorOpacity = this.get(\"colorOpacity\");\n\t\tif (color || colorOpacity) {\n\t\t\tthis._display.beginFill(color, colorOpacity);\n\t\t}\n\n\t\tfor (let r = rotation == 0 ? 0 : -rows * 2; r < rows * 2; r++) {\n\t\t\tfor (let c = rotation == 0 ? 0 : -cols * 2; c < cols * 2; c++) {\n\t\t\t\tif (!checkered || ((r & 1) != 1 && (c & 1) != 1) || ((r & 1) == 1 && (c & 1) == 1)) {\n\t\t\t\t\tlet x = c * cellW;\n\t\t\t\t\tlet y = r * cellH;\n\t\t\t\t\tif (centered) {\n\t\t\t\t\t\tx += cellW + gap / 2;\n\t\t\t\t\t\ty += cellH + gap / 2;\n\t\t\t\t\t}\n\t\t\t\t\tthis._display.drawCircle(x - radius, y - radius, radius);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (checkered) {\n\t\t\tw = w / 2 - gap * 2;\n\t\t\th = h / 2 - gap * 2;\n\t\t}\n\t\telse {\n\t\t\tw -= gap;\n\t\t\th -= gap;\n\t\t}\n\n\t\tif (color || colorOpacity) {\n\t\t\tthis._display.endFill();\n\t\t}\n\n\t}\n}\n", "import { Pattern, IPatternSettings, IPatternPrivate } from \"./Pattern\";\nimport * as $type from \"../../util//Type\";\n\nexport interface ILinePatternSettings extends IPatternSettings {\n\n\t/**\n\t * Gap between  lines, in pixels.\n\t *\n\t * @default 6\n\t */\n\tgap?: number;\n\n}\n\nexport interface ILinePatternPrivate extends IPatternPrivate {\n}\n\n/**\n * Line pattern.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/patterns/} for more info\n */\nexport class LinePattern extends Pattern {\n\n\tdeclare public _settings: ILinePatternSettings;\n\tdeclare public _privateSettings: ILinePatternPrivate;\n\n\tpublic static className: string = \"LinePattern\";\n\tpublic static classNames: Array<string> = Pattern.classNames.concat([LinePattern.className]);\n\n\tpublic _beforeChanged() {\n\t\tsuper._beforeChanged();\n\n\t\tif (this.isDirty(\"gap\")) {\n\t\t\tthis._clear = true;\n\t\t}\n\t}\n\n\tprotected _draw() {\n\t\tsuper._draw();\n\n\t\tconst w = this.get(\"width\", 100);\n\t\tconst h = this.get(\"height\", 100);\n\t\tconst gap = this.get(\"gap\", 0);\n\t\tconst strokeWidth = this.get(\"strokeWidth\", 1);\n\n\t\tif (!gap) {\n\t\t\tthis._display.moveTo(0, 0);\n\t\t\tthis._display.lineTo(w, 0);\n\t\t}\n\t\telse {\n\t\t\tlet step = gap + strokeWidth;\n\t\t\tlet count = h / step;\n\n\t\t\tfor (let i = -count; i < count * 2; i++) {\n\t\t\t\tconst y = Math.round(i * step - step / 2) + 0.5;\n\t\t\t\tthis._display.moveTo(-w, y);\n\t\t\t\tthis._display.lineTo(w * 2, y);\n\t\t\t}\n\t\t}\n\n\t\tthis._display.lineStyle(strokeWidth, this.get(\"color\"), this.get(\"colorOpacity\"));\n\n\t\tlet strokeDasharray = this.get(\"strokeDasharray\");\n\t\tif ($type.isNumber(strokeDasharray)) {\n\t\t\tif (strokeDasharray < 0.5) {\n\t\t\t\tstrokeDasharray = [0];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tstrokeDasharray = [strokeDasharray]\n\t\t\t}\n\t\t}\n\t\tthis._display.setLineDash(strokeDasharray as number[]);\n\n\t\tconst strokeDashoffset = this.get(\"strokeDashoffset\");\n\t\tif (strokeDashoffset) {\n\t\t\tthis._display.setLineDashOffset(strokeDashoffset);\n\t\t}\n\n\t\tthis._display.endStroke();\n\t}\n}\n", "import { Pattern, IPatternSettings, IPatternPrivate } from \"./Pattern\";\n\nimport * as $math from \"../../util/Math\";\n\nexport interface IRectanglePatternSettings extends IPatternSettings {\n\n\t/**\n\t * Gap between rectangles, in pixels.\n\t *\n\t * @default 6\n\t */\n\tgap?: number;\n\n\t/**\n\t * Maximum width of the rectangle, in pixels.\n\t *\n\t * @default 5\n\t */\n\tmaxWidth?: number;\n\n\t/**\n\t * Maximum height of the rectangle, in pixels.\n\t *\n\t * @default 5\n\t */\n\tmaxHeight?: number;\n\n\t/**\n\t * If set to `true`, will place every second rectangle, creating checkered\n\t * pattern.\n\t *\n\t * @default false\n\t */\n\tcheckered?: boolean;\n\n\t/**\n\t * Center rectangles.\n\t *\n\t * @default true\n\t */\n\tcentered?: boolean;\n\n}\n\nexport interface IRectanglePatternPrivate extends IPatternPrivate {\n}\n\n/**\n * Rectangle pattern.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/patterns/} for more info\n */\nexport class RectanglePattern extends Pattern {\n\tdeclare public _settings: IRectanglePatternSettings;\n\tdeclare public _privateSettings: IRectanglePatternPrivate;\n\n\tpublic static className: string = \"RectanglePattern\";\n\tpublic static classNames: Array<string> = Pattern.classNames.concat([RectanglePattern.className]);\n\n\tpublic _beforeChanged() {\n\t\tsuper._beforeChanged();\n\n\t\tif (this.isDirty(\"gap\")) {\n\t\t\tthis._clear = true;\n\t\t}\n\t}\n\n\tprotected _draw() {\n\t\tsuper._draw();\n\n\t\tconst checkered = this.get(\"checkered\", false);\n\t\tconst centered = this.get(\"centered\", true);\n\t\tconst gap = this.get(\"gap\", 0);\n\t\tconst rotation = this.get(\"rotation\", 0);\n\t\tlet w = this.get(\"width\", 100);\n\t\tlet h = this.get(\"height\", 100);\n\t\tlet rectW = this.get(\"maxWidth\", 5);\n\t\tlet rectH = this.get(\"maxHeight\", 5);\n\n\n\t\tlet cellW = rectW + gap;\n\t\tlet cellH = rectH + gap;\n\n\t\tlet cols = Math.round(w / cellW);\n\t\tlet rows = Math.round(h / cellH);\n\n\t\tcellW = w / cols;\n\t\tcellH = h / rows;\n\n\t\tif (rotation != 0) {\n\t\t\t// @todo this is probably not right\n\t\t\tthis._display.x = cellW / 2 * $math.cos(rotation);\n\t\t\tthis._display.y = -cellH / 2 * $math.sin(rotation);\n\t\t}\n\n\t\tfor (let r = rotation == 0 ? 0 : -rows * 2; r < rows * 2; r++) {\n\t\t\tfor (let c = rotation == 0 ? 0 : -cols * 2; c < cols * 2; c++) {\n\t\t\t\tif (!checkered || ((r & 1) != 1 && (c & 1) != 1) || ((r & 1) == 1 && (c & 1) == 1)) {\n\t\t\t\t\tlet x = c * cellW;\n\t\t\t\t\tlet y = r * cellH;\n\t\t\t\t\tif (centered) {\n\t\t\t\t\t\tx += (cellW - rectW) / 2;\n\t\t\t\t\t\ty += (cellH - rectH) / 2;\n\t\t\t\t\t}\n\t\t\t\t\tthis._display.drawRect(x, y, rectW, rectH);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (checkered) {\n\t\t\tw = w / 2 - gap * 2;\n\t\t\th = h / 2 - gap * 2;\n\t\t}\n\t\telse {\n\t\t\tw -= gap;\n\t\t\th -= gap;\n\t\t}\n\n\t\tconst color = this.get(\"color\");\n\t\tconst colorOpacity = this.get(\"colorOpacity\");\n\t\tif (color || colorOpacity) {\n\t\t\t// this._display.lineStyle(strokeWidth, stroke, colorOpacity);\n\t\t\t// this._display.endStroke();\n\t\t\tthis._display.beginFill(color, colorOpacity);\n\t\t\tthis._display.endFill();\n\t\t}\n\n\t}\n}\n", "import { Entity, IEntitySettings, IEntityPrivate } from \"./Entity\";\nimport { Color } from \"./Color\";\n\n\nexport interface IColorSetSettings extends IEntitySettings {\n\n\t/**\n\t * List of colors in the set.\n\t */\n\tcolors?: Color[];\n\n\t/**\n\t * A step size when using `next()`.\n\t *\n\t * E.g. setting to `2` will make it return every second color in the list.\n\t *\n\t * @default 1\n\t */\n\tstep?: number;\n\n\t/**\n\t * Start iterating colors from specific index.\n\t */\n\tstartIndex?: number;\n\n\t/**\n\t * If set to `true`, color set will reuse existing colors from the list\n\t * inestead of generating new ones.\n\t *\n\t * @default false\n\t */\n\treuse?: boolean;\n\n\t/**\n\t * A base color to generate new colors from if `colors` is not specified.\n\t * @type {[type]}\n\t */\n\tbaseColor?: Color;\n\n\t/**\n\t * A set of tranformation to apply to base list of colors when the set runs\n\t * out of colors and generates additional ones.\n\t */\n\tpassOptions?: IColorSetStepOptions;\n\n\t/**\n\t * If set, each returned color will be applied saturation.\n\t */\n\tsaturation?: number;\n\n\t// count?: number;\n}\n\nexport interface IColorSetPrivate extends IEntityPrivate {\n\n\tcurrentStep?: number;\n\tcurrentPass?: number;\n\n\t/**\n\t * @ignore\n\t */\n\tnumColors?: number;\n\n}\n\nexport interface IColorSetStepOptions {\n\n\t/**\n\t * Value to add to \"hue\".\n\t */\n\thue?: number;\n\n\t/**\n\t * Value to add to \"saturation\".\n\t */\n\tsaturation?: number;\n\n\t/**\n\t * Value to add to \"lightness\".\n\t */\n\tlightness?: number;\n\n}\n\n\n/**\n * An object which holds list of colors and can generate new ones.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/#Color_sets} for more info\n */\nexport class ColorSet extends Entity {\n\tpublic static className: string = \"ColorSet\";\n\tpublic static classNames: Array<string> = Entity.classNames.concat([ColorSet.className]);\n\n\tdeclare public _settings: IColorSetSettings;\n\tdeclare public _privateSettings: IColorSetPrivate;\n\n\t//protected _currentPass: number = 0;\n\n\tprotected _afterNew() {\n\t\t// Applying themes because color set will not have parent\n\t\tsuper._afterNewApplyThemes();\n\t}\n\n\tpublic _beforeChanged(): void {\n\t\tif (this.isDirty(\"colors\")) {\n\t\t\tthis.reset();\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic generateColors(): void {\n\t\tthis.setPrivate(\"currentPass\", this.getPrivate(\"currentPass\", 0) + 1)\n\t\tconst pass = this.getPrivate(\"currentPass\");\n\t\tconst colors = this.get(\"colors\", [this.get(\"baseColor\", Color.fromHex(0xff0000))]);\n\t\tif (!this.getPrivate(\"numColors\")) {\n\t\t\tthis.setPrivate(\"numColors\", colors.length);\n\t\t}\n\t\t//const len = colors.length;\n\t\tconst len = this.getPrivate(\"numColors\")!;\n\t\t//const start = len - this.getPrivate(\"numColors\")!;\n\t\tconst start = 0;\n\t\tconst passOptions = this.get(\"passOptions\")!;\n\t\tconst reuse = this.get(\"reuse\");\n\t\tfor (let i = start; i < len; i++) {\n\t\t\tif (reuse) {\n\t\t\t\tcolors.push(colors[i])\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconst hsl = colors[i]!.toHSL();\n\t\t\t\tlet h = hsl.h + (passOptions.hue || 0) * pass!;\n\t\t\t\twhile (h > 1) h -= 1;\n\n\t\t\t\tlet s = hsl.s + (passOptions.saturation || 0) * pass!;\n\t\t\t\t//if (s > 1) s -= Math.floor(s);\n\t\t\t\tif (s > 1) s = 1;\n\t\t\t\tif (s < 0) s = 0;\n\n\t\t\t\tlet l = hsl.l + (passOptions.lightness || 0) * pass!;\n\t\t\t\t//if (l > 1) l -= Math.floor(l);\n\t\t\t\twhile (l > 1) l -= 1;\n\t\t\t\tcolors.push(Color.fromHSL(h, s, l));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Returns a [[Color]] at specific index.\n\t *\n\t * If there's no color at this index, a new color is generated.\n\t *\n\t * @param   index  Index\n\t * @return         Color\n\t */\n\tpublic getIndex(index: number): Color {\n\t\tconst colors = this.get(\"colors\", []);\n\t\tconst saturation = this.get(\"saturation\");\n\t\tif (index >= colors.length) {\n\t\t\tthis.generateColors();\n\t\t\treturn this.getIndex(index);\n\t\t}\n\n\t\treturn saturation != null ? Color.saturate(colors[index], saturation!) : colors[index];\n\t}\n\n\t/**\n\t * Returns next [[Color]] in the list.\n\t *\n\t * If the list is out of colors, new ones are generated dynamically.\n\t */\n\tpublic next() {\n\t\tlet currentStep = this.getPrivate(\"currentStep\", this.get(\"startIndex\", 0));\n\t\tthis.setPrivate(\"currentStep\", currentStep + this.get(\"step\", 1));\n\t\treturn this.getIndex(currentStep);\n\t}\n\n\t/**\n\t * Resets counter to the start of the list, so the next call for `next()` will\n\t * return the first color.\n\t */\n\tpublic reset() {\n\t\tthis.setPrivate(\"currentStep\", this.get(\"startIndex\", 0));\n\t\tthis.setPrivate(\"currentPass\", 0);\n\t}\n}\n", "import * as $type from \"./Type\"\nimport * as $object from \"./Object\"\n\nexport interface IJSONParserOptions {\n\n\t/**\n\t * Reverse the order of parsed data.\n\t */\n\treverse?: boolean;\n\n}\n\n/**\n * Tool to parse JSON string into structured data.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/data/#Parsing} for more info\n * @important\n */\nexport class JSONParser {\n\n\t/**\n\t * Parses JSON string.\n\t * \n\t * @param   input    JSON\n\t * @param   options  Options\n\t * @return           Data\n\t */\n\tpublic static parse(input: string, options?: IJSONParserOptions): any {\n\t\toptions = this._applyDefaults(options);\n\t\ttry {\n\t\t\tif ($type.isString(input)) {\n\t\t\t\tlet data  = JSON.parse(input);\n\t\t\t\tif (options.reverse && $type.isArray(data)) {\n\t\t\t\t\tdata.reverse();\n\t\t\t\t}\n\t\t\t\treturn data;\n\t\t\t}\n\t\t\telse if ($type.isArray(input) || $type.isObject(input)) {\n\t\t\t\treturn input;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthrow(\"Unable to parse JSON data\");\n\t\t\t}\n\t\t} catch (e) {\n\t\t\treturn undefined;\n\t\t}\n\t}\n\n\tprotected static _applyDefaults(options?: IJSONParserOptions): IJSONParserOptions {\n\t\tconst normalized: IJSONParserOptions = {};\n\t\tconst defaults = {\n\t\t\treverse: false\n\t\t};\n\t\tif (!options) {\n\t\t\toptions = {};\n\t\t}\n\t\t$object.each(defaults, (key, val) => {\n\t\t\tnormalized[key] = options![key] || val;\n\t\t});\n\t\treturn normalized;\n\t}\n}\n\n\nexport interface ICSVParserOptions {\n\n\t/**\n\t * Delimiter used for columns.\n\t * \n\t * @default \",\"\n\t */\n\tdelimiter?: string;\n\n\t/**\n\t * Reverse the order of parsed data.\n\t */\n\treverse?: boolean;\n\n\t/**\n\t * Skip first X rows.\n\t *\n\t * @default 0\n\t */\n\tskipRows?: number;\n\n\t/**\n\t * Skip empty rows.\n\t *\n\t * @default true\n\t */\n\tskipEmpty?: boolean;\n\n\t/**\n\t * Use the first row to name the columns.\n\t * \n\t * @default false\n\t */\n\tuseColumnNames?: boolean;\n\n}\n\n/**\n * Tool to parse JSON string into structured data.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/data/#Parsing} for more info\n * @important\n */\nexport class CSVParser {\n\n\t/**\n\t * Parses CSV string.\n\t * \n\t * @param   input    CSV\n\t * @param   options  Options\n\t * @return           Data\n\t */\n\tpublic static parse(input: string, options?: ICSVParserOptions): any {\n\t\toptions = this._applyDefaults(options);\n\n\t\t// Get CSV data as array\n\t\tlet data = this.CSVToArray(input, options.delimiter!);\n\n\t\t// Init resuling array\n\t\tlet res: any[] = [],\n\t\t\tcols: string[] = [],\n\t\t\tcol: string,\n\t\t\ti: number;\n\n\t\t// Skip rows\n\t\tfor (i = 0; i < options.skipRows!; i++) {\n\t\t\tdata.shift();\n\t\t}\n\n\t\t// First row holds column names?\n\t\tif (options.useColumnNames) {\n\t\t\tcols = data.shift();\n\n\t\t\t// Normalize column names\n\t\t\tfor (let x = 0; x < cols.length; x++) {\n\t\t\t\t// trim\n\t\t\t\tcol = cols[x] != null ? cols[x].replace(/^\\s+|\\s+$/gm, \"\") : \"\";\n\n\t\t\t\t// Check for empty\n\t\t\t\tif (\"\" === col) {\n\t\t\t\t\tcol = \"col\" + x;\n\t\t\t\t}\n\n\t\t\t\tcols[x] = col;\n\t\t\t}\n\t\t}\n\n\t\t// Iterate through the result set\n\t\tlet row;\n\t\twhile (true) {\n\t\t\trow = options.reverse ? data.pop() : data.shift();\n\n\t\t\tif (!row) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (options.skipEmpty && row.length === 1 && row[0] === \"\") {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet dataPoint: any = {};\n\t\t\tfor (i = 0; i < row.length; i++) {\n\t\t\t\tcol = undefined === cols[i] ? \"col\" + i : cols[i];\n\t\t\t\tdataPoint[col] = row[i];\n\t\t\t}\n\t\t\tres.push(dataPoint);\n\t\t}\n\n\t\treturn res;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic static CSVToArray(data: string, delimiter: string): any[] {\n\n\t\t// Check to see if the delimiter is defined. If not,\n\t\t// then default to comma.\n\t\tdelimiter = (delimiter || ',');\n\n\t\t// Create a regular expression to parse the CSV values.\n\t\tlet objPattern = new RegExp(\n\t\t\t(\n\t\t\t\t// Delimiters.\n\t\t\t\t\"(\\\\\" + delimiter + \"|\\\\r?\\\\n|\\\\r|^)\" +\n\n\t\t\t\t// Quoted fields.\n\t\t\t\t\"(?:\\\"([^\\\"]*(?:\\\"\\\"[^\\\"]*)*)\\\"|\" +\n\n\t\t\t\t// Standard fields.\n\t\t\t\t\"([^\\\"\\\\\" + delimiter + \"\\\\r\\\\n]*))\"\n\t\t\t),\n\t\t\t\"gi\"\n\t\t);\n\n\n\t\t// Create an array to hold our data. Give the array\n\t\t// a default empty first row.\n\t\tlet arrData: any[] = [\n\t\t\t[]\n\t\t];\n\n\t\t// Create an array to hold our individual pattern\n\t\t// matching groups.\n\t\tlet arrMatches = null;\n\n\t\t// Keep looping over the regular expression matches\n\t\t// until we can no longer find a match.\n\t\twhile (true) {\n\t\t\tarrMatches = objPattern.exec(data);\n\n\t\t\tif (!arrMatches) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// Get the delimiter that was found.\n\t\t\tlet strMatchedDelimiter = arrMatches[1];\n\n\t\t\t// Check to see if the given delimiter has a length\n\t\t\t// (is not the start of string) and if it matches\n\t\t\t// field delimiter. If id does not, then we know\n\t\t\t// that this delimiter is a row delimiter.\n\t\t\tif (\n\t\t\t\tstrMatchedDelimiter.length &&\n\t\t\t\t(strMatchedDelimiter !== delimiter)\n\t\t\t) {\n\n\t\t\t\t// Since we have reached a new row of data,\n\t\t\t\t// add an empty row to our data array.\n\t\t\t\tarrData.push([]);\n\n\t\t\t}\n\n\t\t\t// Now that we have our delimiter out of the way,\n\t\t\t// let's check to see which kind of value we\n\t\t\t// captured (quoted or unquoted).\n\t\t\tlet strMatchedValue;\n\t\t\tif (arrMatches[2]) {\n\n\t\t\t\t// We found a quoted value. When we capture\n\t\t\t\t// this value, unescape any double quotes.\n\t\t\t\tstrMatchedValue = arrMatches[2].replace(\n\t\t\t\t\tnew RegExp(\"\\\"\\\"\", \"g\"),\n\t\t\t\t\t\"\\\"\"\n\t\t\t\t);\n\n\t\t\t} else {\n\n\t\t\t\t// We found a non-quoted value.\n\t\t\t\tstrMatchedValue = arrMatches[3];\n\n\t\t\t}\n\n\t\t\t// Now that we have our value string, let's add\n\t\t\t// it to the data array.\n\t\t\tarrData[arrData.length - 1].push(strMatchedValue);\n\t\t}\n\n\t\t// Return the parsed data.\n\t\treturn (arrData);\n\t}\n\n\tprotected static _applyDefaults(options?: ICSVParserOptions): ICSVParserOptions {\n\t\tconst normalized: ICSVParserOptions = {};\n\t\tconst defaults = {\n\t\t\tdelimiter: \",\",\n\t\t\treverse: false,\n\t\t\tskipRows: 0,\n\t\t\tskipEmpty: true,\n\t\t\tuseColumnNames: false\n\t\t};\n\t\tif (!options) {\n\t\t\toptions = {};\n\t\t}\n\t\t$object.each(defaults, (key, val) => {\n\t\t\tnormalized[key] = options![key] || val;\n\t\t});\n\t\treturn normalized;\n\n\t}\n\n}", "import { Entity, IEntitySettings, IEntityPrivate, IEntityEvents } from \"./Entity\"\nimport { Color } from \"./Color\"\nimport * as $type from \"./Type\"\nimport * as $object from \"./Object\"\nimport * as $array from \"./Array\"\n\n\nexport interface IDataProcessorSettings extends IEntitySettings {\n\n\t/**\n\t * Date format used for parsing string-based dates.\n\t */\n\tdateFormat?: string;\n\n\t/**\n\t * A list of fields in data that need to be converted to tiemstamps.\n\t */\n\tdateFields?: string[];\n\n\t/**\n\t * A list of fields in data that need to be converted to numbers.\n\t */\n\tnumericFields?: string[];\n\n\t/**\n\t * A list of fields in data that need to be converted to [[Color]] objects.\n\t */\n\tcolorFields?: string[];\n\n\t/**\n\t * Replace empty values with this.\n\t */\n\temptyAs?: any;\n\n}\n\nexport interface IDataProcessorPrivate extends IEntityPrivate {\n\n\t/**\n\t * @ignore\n\t */\n\tdeepFields?: string[];\n}\n\nexport interface IDataProcessorEvents extends IEntityEvents {\n}\n\n/**\n * A tool that can process the data before it is being used in charts.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/data/#Pre_processing_data} for more info\n * @important\n */\nexport class DataProcessor extends Entity {\n\tdeclare public _settings: IDataProcessorSettings;\n\tdeclare public _privateSettings: IDataProcessorPrivate;\n\n\tprotected _checkDates: boolean = false;\n\tprotected _checkNumbers: boolean = false;\n\tprotected _checkColors: boolean = false;\n\tprotected _checkEmpty: boolean = false;\n\tprotected _checkDeep: boolean = false;\n\n\tprotected _afterNew() {\n\t\tsuper._afterNew();\n\t\tthis._checkFeatures();\n\t\tthis.on(\"dateFields\", () => this._checkFeatures());\n\t\tthis.on(\"dateFormat\", () => this._checkFeatures());\n\t\tthis.on(\"numericFields\", () => this._checkFeatures());\n\t\tthis.on(\"colorFields\", () => this._checkFeatures());\n\t\tthis.on(\"emptyAs\", () => this._checkFeatures());\n\t}\n\n\tprotected _checkFeatures(): void {\n\t\tif (this.isDirty(\"dateFields\") || this.isDirty(\"dateFormat\")) {\n\t\t\tthis._checkDates = this.get(\"dateFields\") && (this.get(\"dateFields\")!.length > 0);\n\t\t}\n\t\tif (this.isDirty(\"numericFields\")) {\n\t\t\tthis._checkNumbers = this.get(\"numericFields\") && (this.get(\"numericFields\")!.length > 0);\n\t\t}\n\t\tif (this.isDirty(\"colorFields\")) {\n\t\t\tthis._checkColors = this.get(\"colorFields\") && (this.get(\"colorFields\")!.length > 0);\n\t\t}\n\t\tif (this.isDirty(\"emptyAs\")) {\n\t\t\tthis._checkEmpty = this.get(\"emptyAs\") != null;\n\t\t}\n\t\tthis._checkDeepFeatures();\n\t}\n\n\tprotected _checkDeepFeatures(): void {\n\t\tconst deepFields: string[] = [];\n\t\t$array.each([\"dateFields\", \"numericFields\", \"colorFields\"], (where: any) => {\n\t\t\t$array.each(this.get(where, []), (field) => {\n\t\t\t\tconst steps = (<string>field).split(\".\");\n\t\t\t\tsteps.pop();\n\t\t\t\twhile (steps.length > 0) {\n\t\t\t\t\tdeepFields.push(steps.join(\".\"));\n\t\t\t\t\tsteps.pop();\n\t\t\t\t}\n\t\t\t});\n\t\t})\n\t\tthis._checkDeep = deepFields.length > 0;\n\t\tthis.setPrivate(\"deepFields\", deepFields);\n\t}\n\n\t/**\n\t * Processess entire array of data.\n\t *\n\t * NOTE: calling this will modify original array!\n\t */\n\tpublic processMany(data: { [index: string]: any }[]): void {\n\t\tif ($type.isArray(data) && (this._checkDates || this._checkNumbers || this._checkColors || this._checkEmpty)) {\n\t\t\t$array.each(data, (row) => {\n\t\t\t\tthis.processRow(row);\n\t\t\t})\n\t\t}\n\t}\n\n\t/**\n\t * Processes a row (object) of data.\n\t * \n\t * NOTE: calling this will modify values of the original object!\n\t */\n\tpublic processRow(row: { [index: string]: any }, prefix: string = \"\"): void {\n\t\t$object.each(row, (key: any, _value) => {\n\t\t\tconst lookupKey: string = prefix + key;\n\t\t\tif (this._checkEmpty) {\n\t\t\t\trow[key] = this._maybeToEmpty(row[key]);\n\t\t\t}\n\t\t\tif (this._checkNumbers) {\n\t\t\t\trow[key] = this._maybeToNumber(lookupKey, row[key]);\n\t\t\t}\n\t\t\tif (this._checkDates) {\n\t\t\t\trow[key] = this._maybeToDate(lookupKey, row[key]);\n\t\t\t}\n\t\t\tif (this._checkColors) {\n\t\t\t\trow[key] = this._maybeToColor(lookupKey, row[key]);\n\t\t\t}\n\t\t\tif (this._checkDeep && (<any>this).getPrivate(\"deepFields\", []).indexOf(lookupKey) !== -1 && $type.isObject(row[key])) {\n\t\t\t\tthis.processRow(row[key], lookupKey + \".\");\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected _maybeToNumber(field: string, value: any): any {\n\t\tif (this.get(\"numericFields\")!.indexOf(field) !== -1) {\n\t\t\treturn $type.toNumber(value);\n\t\t}\n\t\treturn value;\n\t}\n\n\tprotected _maybeToDate(field: string, value: any): any {\n\t\tif (this.get(\"dateFields\")!.indexOf(field) !== -1) {\n\t\t\treturn this._root.dateFormatter.parse(value, this.get(\"dateFormat\", \"\")).getTime();\n\t\t}\n\t\treturn value;\n\t}\n\n\tprotected _maybeToEmpty(value: any): any {\n\t\tif ((value == null || value == \"\") && this.get(\"emptyAs\") != null) {\n\t\t\treturn this.get(\"emptyAs\");\n\t\t}\n\t\treturn value;\n\t}\n\n\tprotected _maybeToColor(field: string, value: any): any {\n\t\tif (this.get(\"colorFields\")!.indexOf(field) !== -1) {\n\t\t\treturn Color.fromAny(value);\n\t\t}\n\t\treturn value;\n\t}\n\n}\n", "/**\n * A collection of network-related functions\n */\n\n/**\n * ============================================================================\n * IMPORTS\n * ============================================================================\n * @hidden\n */\nimport type { Optional } from \"./Type\";\n\n/**\n * Defines an interface for objects that hold a net request result.\n */\nexport interface INetLoadResult<A> {\n\n\t/**\n\t * A reference to original [[XMLHttpRequest]].\n\t */\n\txhr: XMLHttpRequest;\n\n\t/**\n\t * Request response body.\n\t */\n\tresponse?: string;\n\n\t/**\n\t * Request response as Blob. (if set `responseType = \"blob\"`)\n\t */\n\tblob?: Blob;\n\n\t/**\n\t * Response `Content-Type`.\n\t */\n\ttype: string | null;\n\n\t/**\n\t * Was there an error?\n\t */\n\terror: boolean;\n\n\t/**\n\t * A target object that made the net load request.\n\t */\n\ttarget?: A;\n\n}\n\nexport interface INetRequestOptions {\n\n\t/**\n\t * Custom request headers to be added to HTTP(S) request.\n\t */\n\trequestHeaders?: { key: string, value: string }[];\n\n\t/**\n\t * Specify expected response type.\n\t *\n\t * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseType} for more info\n\t */\n\tresponseType?: XMLHttpRequestResponseType;\n\n\t/**\n\t * Specify whether to send CORS credentials (defaults to `false`).\n\t *\n\t * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/withCredentials} for more info\n\t */\n\twithCredentials?: boolean;\n}\n\n/**\n * Loads an external file via its URL.\n *\n * Please note that this is an asynchronous function.\n *\n * It will not return the result, but rather a `Promise`.\n *\n * You can use the `await` notion, or `then()`.\n *\n * ```TypeScript\n * // Using await\n * let response = await Net.load( \"http://www.my.com/data.json\" );\n * console.log( response.response );\n *\n * // Using then()\n * Net.load( \"http://www.my.com/data.json\" ).then( ( response ) => {\n *   console.log( response.response );\n * } );\n * ```\n * ```JavaScript\n * // Using then()\n * Net.load( \"http://www.my.com/data.json\" ).then( function( response ) {\n *   console.log( response.response );\n * } );\n * ```\n *\n * @async\n * @see {@link https://www.amcharts.com/docs/v5/concepts/data/net-load-utility/} for more info\n * @param url      URL for the file to load\n * @param target   A target element that is requesting the net load\n * @param options  Request options\n * @return Result (Promise)\n */\nexport function load<A>(url: string, target?: A, options?: INetRequestOptions): Promise<INetLoadResult<A>> {\n\treturn new Promise<INetLoadResult<A>>((success, error) => {\n\n\t\t// Is return type Blob?\n\t\tlet isBlob = options != null && options.responseType == \"blob\";\n\n\t\t// Create request and set up handlers\n\t\tlet xhr = new XMLHttpRequest();\n\t\txhr.onload = () => {\n\t\t\tif (xhr.status === 200) {\n\n\t\t\t\tlet response: Optional<string>;\n\t\t\t\tlet blob: Optional<Blob>;\n\n\t\t\t\tif (isBlob) {\n\t\t\t\t\tblob = xhr.response;\n\t\t\t\t\treadBlob(blob!).then((response: any) => {\n\t\t\t\t\t\tlet output: INetLoadResult<A> = {\n\t\t\t\t\t\t\txhr: xhr,\n\t\t\t\t\t\t\terror: false,\n\t\t\t\t\t\t\tresponse: response,\n\t\t\t\t\t\t\tblob: blob,\n\t\t\t\t\t\t\ttype: xhr.getResponseHeader(\"Content-Type\"),\n\t\t\t\t\t\t\ttarget: target\n\t\t\t\t\t\t};\n\t\t\t\t\t\tsuccess(output);\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tresponse = xhr.responseText || xhr.response\n\t\t\t\t}\n\n\t\t\t\tlet output: INetLoadResult<A> = {\n\t\t\t\t\txhr: xhr,\n\t\t\t\t\terror: false,\n\t\t\t\t\tresponse: response,\n\t\t\t\t\tblob: blob,\n\t\t\t\t\ttype: xhr.getResponseHeader(\"Content-Type\"),\n\t\t\t\t\ttarget: target\n\t\t\t\t};\n\t\t\t\tsuccess(output);\n\t\t\t}\n\t\t\telse {\n\t\t\t\terror({\n\t\t\t\t\txhr: xhr,\n\t\t\t\t\terror: true,\n\t\t\t\t\ttype: xhr.getResponseHeader(\"Content-Type\"),\n\t\t\t\t\ttarget: target\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t\txhr.onerror = () => {\n\t\t\terror({\n\t\t\t\txhr: xhr,\n\t\t\t\terror: true,\n\t\t\t\ttype: xhr.getResponseHeader(\"Content-Type\"),\n\t\t\t\ttarget: target\n\t\t\t});\n\t\t};\n\n\t\t// Open request\n\t\txhr.open(\"GET\", url, true);\n\n\t\tif (options && options.withCredentials) {\n\t\t\txhr.withCredentials = true;\n\t\t}\n\n\t\t// Process options\n\t\tif (options != null) {\n\n\t\t\tif (options.requestHeaders != null) {\n\t\t\t\tfor (let i = 0; i < options.requestHeaders.length; i++) {\n\t\t\t\t\tlet header = options.requestHeaders[i];\n\t\t\t\t\txhr.setRequestHeader(header.key, header.value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (options.responseType != null) {\n\t\t\t\txhr.responseType = options.responseType;\n\t\t\t}\n\t\t}\n\n\t\t// Send request\n\t\txhr.send();\n\n\t});\n\n}\n\n/**\n * Returns textual representation of a Blob object.\n *\n * @param   blob  Target blob\n * @return        Text promise\n */\nexport function readBlob(blob: Blob): Promise<string> {\n\treturn new Promise<string>((success, error) => {\n\t\tconst reader = new FileReader()\n\n\t\treader.onload = _event => {\n\t\t\tsuccess(<string>reader.result);\n\t\t}\n\n\t\treader.onerror = (e) => {\n\t\t\terror(e);\n\t\t}\n\n\t\treader.readAsText(blob);\n\t});\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqBA,IAAA,SAAA,WAAA;AAIC,qBAAA;AAAA,QAAA,QAAA;AAHA,WAAA,eAAA,MAAA,aAAA;;;;;;AACA,WAAA,eAAA,MAAA,YAAA;;;;aAAqE,CAAA;;AAGpE,SAAK,YAAY,IAAI,eAAe,SAAC,SAAmB;AACvD,MAAO,KAAK,SAAS,SAAC,OAAK;AAC1B,QAAO,KAAK,MAAK,UAAU,SAAC,IAAC;AAC5B,cAAI,GAAE,WAAW,MAAM,QAAQ;AAC9B,eAAE,SAAQ;;QAEZ,CAAC;MACF,CAAC;IACF,CAAC;EACF;;;;;WAEA,SAAU,QAAiB,UAAoB;AAC9C,WAAK,UAAU,QAAQ,QAAQ,EAAE,KAAK,aAAY,CAAE;AACpD,WAAK,SAAS,KAAK,EAAE,QAAQ,SAAQ,CAAE;IACxC;;;;;;WAEA,SAAa,QAAe;AAC3B,WAAK,UAAU,UAAU,MAAM;AAE/B,MAAO,OAAO,KAAK,UAAU,SAAC,IAAC;AAC9B,eAAO,GAAE,WAAW;MACrB,CAAC;IACF;;AACD,SAAA;AAAA,EA5BA;AAgDA,IAAA,MAAA,WAAA;AAAA,kBAAA;AAGC,WAAA,eAAA,MAAA,UAAA;;;;aAAgC;;AAChC,WAAA,eAAA,MAAA,YAAA;;;;aAAgH,CAAA;;EAkDjH;;;;;WAhDC,SAAU,QAAiB,UAAoB;AAA/C,UAAA,QAAA;AACC,UAAI,KAAK,WAAW,MAAM;AACzB,YAAI,aAA0B;AAE9B,YAAM,SAAO,WAAA;AACZ,cAAM,cAAc,KAAK,IAAG;AAE5B,cAAI,eAAa,QAAQ,cAAe,aAAW,KAAI,OAAQ;AAC9D,yBAAW;AAEX,YAAO,KAAK,MAAK,UAAU,SAAC,IAAC;AAC5B,kBAAI,UAAU,GAAE,OAAO,sBAAqB;AAE5C,kBAAI,QAAQ,UAAU,GAAE,KAAK,SAAS,QAAQ,WAAW,GAAE,KAAK,QAAQ;AACvE,mBAAE,OAAO;AACT,mBAAE,SAAQ;;YAEZ,CAAC;;AAGF,cAAI,MAAK,SAAS,WAAW,GAAG;AAC/B,kBAAK,SAAS;iBAER;AACN,kBAAK,SAAS,sBAAsB,MAAI;;QAE1C;AAEA,aAAK,SAAS,sBAAsB,MAAI;;AAIzC,UAAI,OAAO,EAAE,OAAO,GAAG,QAAQ,GAAG,MAAM,GAAG,OAAO,GAAG,KAAK,GAAG,QAAQ,GAAG,GAAG,GAAG,GAAG,EAAC;AAClF,WAAK,SAAS,KAAK,EAAE,QAAQ,UAAU,KAAI,CAAE;IAC9C;;;;;;WAEA,SAAa,QAAe;AAC3B,MAAO,OAAO,KAAK,UAAU,SAAC,IAAC;AAC9B,eAAO,GAAE,WAAW;MACrB,CAAC;AAED,UAAI,KAAK,SAAS,WAAW,GAAG;AAC/B,YAAI,KAAK,WAAW,MAAM;AACzB,+BAAqB,KAAK,MAAM;AAChC,eAAK,SAAS;;;IAGjB;;AApDA,SAAA,eAAA,MAAA,SAAA;;;;WAA8B;;AAqD/B,SAAA;EAtDA;AA4DA,IAAI,WAA0B;AAK9B,sBAAmB;AAClB,MAAI,aAAa,MAAM;AACtB,QAAI,OAAO,mBAAmB,aAAa;AAC1C,iBAAW,IAAI,OAAM;WAEf;AACN,iBAAW,IAAI,IAAG;;;AAIpB,SAAO;AACR;AAKA,IAAA,eAAA,WAAA;AAKC,yBAAY,SAAkB,UAAoB;AAJlD,WAAA,eAAA,MAAA,WAAA;;;;;;AACA,WAAA,eAAA,MAAA,YAAA;;;;;;AACA,WAAA,eAAA,MAAA,aAAA;;;;aAA6B;;AAG5B,SAAK,UAAU,WAAU;AACzB,SAAK,WAAW;AAChB,SAAK,QAAQ,UAAU,SAAS,QAAQ;EACzC;;;;;WAEA,WAAA;AACC,aAAO,KAAK;IACb;;;;;;WAEA,WAAA;AACC,UAAI,CAAC,KAAK,WAAW;AACpB,aAAK,YAAY;AACjB,aAAK,QAAQ,aAAa,KAAK,QAAQ;;IAEzC;;AAEA,SAAA,eAAW,cAAA,WAAA,UAAM;SAAjB,WAAA;AACC,aAAO,KAAK;IACb;;;;AACD,SAAA;AAAA,EAzBA;;;ACzBA,IAAA,kBAAA,SAAA,QAAA;AAAqC,YAAA,kBAAA,MAAA;AAArC,8BAAA;;EAKA;AAJC,SAAA,eAAA,kBAAA,aAAA;;;;WAAkC;;AAClC,SAAA,eAAA,kBAAA,cAAA;;;;WAA0C,OAAO,WAAW,OAAO,CAAC,iBAAgB,SAAS,CAAC;;AAG/F,SAAA;EALqC,MAAM;;;ACrF3C,IAAA,mBAAA,SAAA,QAAA;AAAsC,YAAA,mBAAA,MAAA;AAAtC,+BAAA;;EA6GA;;;;;WArGC,WAAA;AACC,aAAA,UAAM,eAAc,KAAA,IAAA;AAEpB,UAAI,KAAK,QAAQ,kBAAkB,KAAK,KAAK,QAAQ,cAAc,KAAK,KAAK,QAAQ,eAAe,KAAK,KAAK,QAAQ,UAAU,KAAK,KAAK,QAAQ,UAAU,KAAK,KAAK,QAAQ,OAAO,KAAK,KAAK,QAAQ,QAAQ,GAAG;AACjN,aAAK,SAAS;;IAEhB;;;;;;WAEA,WAAA;AACC,aAAA,UAAM,SAAQ,KAAA,IAAA;AAEd,UAAI,KAAK,QAAQ;AAEhB,aAAK,gBAAe;AAEpB,YAAI,IAAI,KAAK,MAAK;AAClB,YAAI,IAAI,KAAK,OAAM;AAEnB,YAAI,IAAI,KAAK,IAAI,GAAG;AACnB,cAAI,KAAK,KAAK,IAAI,gBAAgB,CAAC;AACnC,eAAK,AAAM,WAAW,IAAI,GAAG,KAAK,IAAI,IAAI,GAAG,IAAI,CAAC,CAAC;AAEnD,cAAI,KAAI,KAAK,IAAI,YAAY,CAAC;AAC9B,cAAI,KAAI,KAAK,IAAI,YAAY,CAAC;AAC9B,cAAI,MAAM,KAAK,IAAI,oBAAoB,EAAE,IAAI;AAI7C,cAAI,MAAM;AACV,cAAI,MAAM;AAEV,cAAI,MAAM;AACV,cAAI,MAAM;AAEV,cAAI,MAAM;AACV,cAAI,MAAM;AAEV,cAAI,MAAM;AACV,cAAI,MAAM;AAIV,cAAI,KAAM,MAAI,OAAQ,OAAM,OAAQ,MAAI,OAAQ,OAAM;AACtD,cAAI,KAAM,MAAI,OAAQ,OAAM,OAAQ,MAAI,OAAQ,OAAM;AAEtD,cAAM,UAAU,KAAK;AAErB,kBAAQ,OAAO,IAAI,CAAC;AAEpB,cAAI,KAAK,KAAK,KAAK,GAAG;AACrB,gBAAI,QAAQ,KAAK,MAAM,AAAM,WAAW,IAAG,KAAK,KAAK,IAAI,MAAM,EAAE,CAAC;AAClE,iBAAI,AAAM,WAAW,IAAG,WAAW,CAAC;AAEpC,oBAAQ,OAAO,QAAQ,KAAK,CAAC;AAC7B,oBAAQ,OAAO,IAAG,EAAC;AACnB,oBAAQ,OAAO,QAAQ,KAAK,CAAC;;AAG9B,kBAAQ,OAAO,IAAI,IAAI,CAAC;AACxB,kBAAQ,MAAM,GAAG,GAAG,GAAG,IAAI,EAAE;AAG7B,cAAI,KAAK,KAAK,KAAK,GAAG;AACrB,gBAAI,QAAQ,KAAK,MAAM,AAAM,WAAW,IAAG,KAAK,KAAK,IAAI,MAAM,EAAE,CAAC;AAClE,iBAAI,AAAM,WAAW,IAAG,GAAG,QAAQ;AACnC,oBAAQ,OAAO,GAAG,EAAE;AACpB,oBAAQ,OAAO,GAAG,QAAQ,GAAG;AAC7B,oBAAQ,OAAO,IAAG,EAAC;AACnB,oBAAQ,OAAO,GAAG,QAAQ,GAAG;;AAE9B,kBAAQ,OAAO,GAAG,IAAI,EAAE;AACxB,kBAAQ,MAAM,GAAG,GAAG,IAAI,IAAI,GAAG,EAAE;AAGjC,cAAI,KAAK,KAAK,KAAK,GAAG;AACrB,gBAAI,QAAQ,KAAK,MAAM,AAAM,WAAW,IAAG,KAAK,KAAK,IAAI,MAAM,EAAE,CAAC;AAClE,iBAAI,AAAM,WAAW,IAAG,GAAG,QAAQ;AAEnC,oBAAQ,OAAO,IAAI,IAAI,CAAC;AACxB,oBAAQ,OAAO,QAAQ,KAAK,CAAC;AAC7B,oBAAQ,OAAO,IAAG,EAAC;AACnB,oBAAQ,OAAO,QAAQ,KAAK,CAAC;;AAE9B,kBAAQ,OAAO,IAAI,CAAC;AACpB,kBAAQ,MAAM,GAAG,GAAG,GAAG,IAAI,IAAI,EAAE;AAIjC,cAAI,KAAK,KAAK,KAAK,GAAG;AACrB,gBAAI,QAAQ,KAAK,MAAM,AAAM,WAAW,IAAG,KAAK,KAAK,IAAI,KAAK,GAAG,CAAC;AAClE,iBAAI,AAAM,WAAW,IAAG,WAAW,CAAC;AACpC,oBAAQ,OAAO,GAAG,IAAI,EAAE;AACxB,oBAAQ,OAAO,GAAG,QAAQ,GAAG;AAC7B,oBAAQ,OAAO,IAAG,EAAC;AACnB,oBAAQ,OAAO,GAAG,QAAQ,GAAG;;AAE9B,kBAAQ,OAAO,GAAG,EAAE;AACpB,kBAAQ,MAAM,GAAG,GAAG,IAAI,GAAG,EAAE;;;IAGhC;;AAvGA,SAAA,eAAA,mBAAA,aAAA;;;;WAAkC;;AAClC,SAAA,eAAA,mBAAA,cAAA;;;;WAA0C,SAAS,WAAW,OAAO,CAAC,kBAAiB,SAAS,CAAC;;AAuGlG,SAAA;EA7GsC,QAAQ;;;ACyE9C,IAAA,UAAA,SAAA,QAAA;AAA6B,YAAA,UAAA,MAAA;AAA7B,sBAAA;AAAA,QAAA,QAAA,WAAA,QAAA,OAAA,MAAA,MAAA,SAAA,KAAA;AAEC,WAAA,eAAA,OAAA,oBAAA;;;;;;AAEA,WAAA,eAAA,OAAA,OAAA;;;;aAAqB;;AACrB,WAAA,eAAA,OAAA,OAAA;;;;aAAqB;;AAKrB,WAAA,eAAA,OAAA,UAAA;;;;;;AAIA,WAAA,eAAA,OAAA,WAAA;;;;;;AACA,WAAA,eAAA,OAAA,aAAA;;;;;;AACA,WAAA,eAAA,OAAA,YAAA;;;;;;AAEA,WAAA,eAAA,OAAA,MAAA;;;;aAAuB;;AACvB,WAAA,eAAA,OAAA,MAAA;;;;aAAuB;;;EAuTxB;;;;;WArTC,WAAA;AAAA,UAAA,QAAA;AACC,WAAK,UAAU,YAAY,AAAO,UAAU,KAAK,UAAU,WAAW,CAAC,SAAS,CAAC;AAEjF,aAAA,UAAM,UAAS,KAAA,IAAA;AAEf,WAAK,IAAI,cAAc,iBAAiB,IAAI,KAAK,OAAO;QACvD,WAAW,CAAC,WAAW,YAAY;OACnC,CAAC;AAEF,WAAK,SAAS,KAAK,SAAS,KAAK,MAAM,IAAI,KAAK,OAAO,CAAA,CAAE,CAAC;AAE1D,WAAK,WAAW,KAAK,KAAK,OAAO,OAAO,GAAG,iBAAiB,WAAA;AAC3D,cAAK,kBAAiB;MACvB,CAAC,CAAC;AAEF,WAAK,GAAG,UAAU,WAAA;AACjB,cAAK,kBAAiB;MACvB,CAAC;AAED,WAAK,iBAAgB;AAErB,WAAK,MAAM,iBAAiB,SAAS,KAAK,IAAI;AAC9C,WAAK,KAAK,CAAC;AAEX,WAAK,MAAM,UAAU,KAAK,IAAI;IAC/B;;AAQA,SAAA,eAAW,SAAA,WAAA,SAAK;SAAhB,WAAA;AACC,aAAO,KAAK;IACb;;;;;;;;WAKA,WAAA;AACC,aAAA,UAAM,QAAO,KAAA,IAAA;AACb,MAAO,OAAO,KAAK,MAAM,WAAW,IAAI;IACzC;;;;;;WAEA,WAAA;AACC,aAAA,UAAM,gBAAe,KAAA,IAAA;AACrB,UAAM,YAAY,KAAK,IAAI,WAAW;AACtC,UAAI,aAAa,MAAM;AACtB,aAAK,MAAM,IAAI,QAAQ,KAAK,IAAI,WAAW,CAAC;;AAE7C,UAAM,YAAY,KAAK,IAAI,WAAW;AACtC,UAAI,aAAa,MAAM;AACtB,aAAK,MAAM,IAAI,QAAQ,KAAK,IAAI,WAAW,CAAC;;IAE9C;;;;;;WAEA,WAAA;AACC,aAAA,UAAM,SAAQ,KAAA,IAAA;AAEd,UAAI,KAAK,QAAQ,SAAS,GAAG;AAE5B,aAAK,kBAAiB;;AAGvB,UAAI,KAAK,QAAQ,eAAe,GAAG;AAClC,aAAK,sBAAqB;;IAE5B;;;;;;WAEA,WAAA;AACC,aAAA,UAAM,QAAO,KAAA,IAAA;AACb,WAAK,sBAAqB;IAC3B;;;;;;WAGA,WAAA;AAAA,UAAA,QAAA;AACC,UAAI,gBAAgB,KAAK,IAAI,eAAe;AAC5C,UAAM,aAAa,KAAK,IAAI,YAAY;AACxC,UAAI;AACJ,UAAI;AAGJ,UAAI,iBAAiB,YAAY;AAEhC,eAAO,cAAc,IAAI,MAAa;AACtC,iBAAS,cAAc,IAAI,QAAe;AAE1C,YAAI,QAAQ,MAAM;AACjB,iBAAO;;AAGR,YAAI,KAAK,IAAI,mBAAmB,GAAG;AAElC,cAAI,KAAK,SAAS;AACjB,iBAAK,QAAQ,QAAO;;AAGrB,cAAI,QAAQ,MAAM;AACjB,uBAAW,IAAI,QAAQ,IAAW;;AAGnC,eAAK,UAAU,cAAc,GAAG,QAAe,SAAC,OAAI;AACnD,gBAAI,SAAQ,MAAM;AACjB,yBAAW,IAAI,QAAQ,KAAW;AAClC,oBAAK,iBAAiB,KAAI;;UAE5B,CAAC;;AAGF,YAAI,KAAK,IAAI,qBAAqB,GAAG;AAEpC,cAAI,KAAK,WAAW;AACnB,iBAAK,UAAU,QAAO;;AAGvB,cAAI,QAAQ,MAAM;AACjB,uBAAW,IAAI,UAAU,IAAW;;AAGrC,eAAK,YAAY,cAAc,GAAG,QAAe,SAAC,OAAI;AACrD,gBAAI,SAAQ,MAAM;AACjB,yBAAW,IAAI,UAAU,KAAW;;UAEtC,CAAC;;AAGF,YAAI,KAAK,IAAI,wBAAwB,GAAG;AAEvC,cAAI,KAAK,UAAU;AAClB,iBAAK,SAAS,QAAO;;AAGtB,cAAI,QAAQ,MAAM;AACjB,iBAAK,MAAM,IAAI,QAAQ,IAAW;;AAGnC,eAAK,WAAW,cAAc,GAAG,QAAe,SAAC,OAAI;AACpD,gBAAI,SAAQ,MAAM;AACjB,oBAAK,MAAM,IAAI,QAAQ,KAAW;;UAEpC,CAAC;;;AAIH,WAAK,iBAAiB,IAAI;IAC3B;;;;;;WAGA,SAA2B,MAAsB;AAChD,UAAI,KAAK,IAAI,eAAe,GAAG;AAC9B,YAAI,QAAQ,MAAM;AACjB,iBAAO,KAAK,IAAI,YAAY,EAAG,IAAI,MAAM;;AAG1C,YAAI,QAAQ,MAAM;AACjB,iBAAO,KAAK,MAAM,gBAAgB,IAAI,YAAY;;AAGnD,YAAI,gBAAgB,OAAO;AAC1B,eAAK,MAAM,IAAI,QAAQ,MAAM,YAAY,MAAM,KAAK,MAAM,gBAAgB,IAAI,iBAAiB,GAAG,KAAK,MAAM,gBAAgB,IAAI,MAAM,CAAC,CAAC;;;IAG5I;;;;;;WAEA,SAAoB,UAAuC;AAC1D,aAAA,UAAM,aAAY,KAAA,MAAC,QAAQ;AAC3B,WAAK,MAAM,aAAa,QAAQ;IACjC;;;;;;WAGA,WAAA;AACC,aAAA,UAAM,iBAAgB,KAAA,IAAA;AACtB,UAAM,SAAS,KAAK,MAAM;AAE1B,UAAI,QAAQ;AAEX,YAAI,KAAK;AACT,YAAI,KAAK;AAET,YAAI,UAAU,KAAK,IAAI,SAAS;AAChC,YAAI,mBAAmB,SAAS;AAC/B,eAAK,QAAQ;;AAGd,YAAI,UAAU,KAAK,IAAI,SAAS;AAChC,YAAI,mBAAmB,SAAS;AAC/B,eAAK,QAAQ;;AAGd,YAAI,UAAU,OAAO,MAAK;AAC1B,YAAI,UAAU,OAAO,OAAM;AAE3B,YAAM,SAAS,KAAK,IAAI,UAAU,EAAE,MAAM,GAAG,KAAK,GAAG,OAAO,SAAS,QAAQ,QAAO,CAAE;AAEtF,aAAK,cAAa;AAElB,YAAI,IAAI,KAAK,MAAK;AAClB,YAAI,IAAI,KAAK,OAAM;AAGnB,YAAI,MAAM,GAAG;AACZ,cAAI,KAAK;;AAGV,YAAI,MAAM,GAAG;AACZ,cAAI,KAAK;;AAGV,YAAI,UAAU,KAAK,IAAI,WAAW,EAAE,GAAG,UAAU,GAAG,GAAG,UAAU,EAAC,CAAE;AACpE,YAAI,KAAI,QAAQ;AAChB,YAAI,KAAI,QAAQ;AAEhB,YAAI,qBAAqB,KAAK,IAAI,oBAAoB;AAEtD,YAAI,aAAa,KAAK,IAAI,YAAY;AACtC,YAAI,gBAAgB;AACpB,YAAI,gBAAgB;AACpB,YAAI,gBAAgB;AAEpB,YAAI,sBAAsB,kBAAkB;AAC3C,0BAAgB,WAAW,IAAI,iBAAiB,CAAC;AACjD,0BAAgB,WAAW,IAAI,eAAe,CAAC,IAAI;AACnD,0BAAgB;;AAGjB,YAAI,WAAW;AACf,YAAI,WAAW;AAEf,YAAI,UAAU,OAAO,QAAQ,OAAO;AACpC,YAAI,UAAU,OAAO,SAAS,OAAO;AAKrC,YAAI,sBAAsB,gBAAgB,sBAAsB,UAAU,sBAAsB,SAAS;AACxG,0BAAgB;AAChB,cAAI,sBAAsB,cAAc;AACvC,gBAAI,KAAI,OAAO,OAAO,UAAU,GAAG;AAClC,oBAAM,IAAK,KAAI,MAAM;AACrB,+BAAiB;mBAEb;AACJ,oBAAM,IAAI,KAAK;;qBAGR,sBAAsB,QAAQ;AACtC,kBAAM,IAAK,KAAI,MAAM;iBAEjB;AACJ,kBAAM,IAAI,KAAK;AACf,6BAAiB;;eAId;AACJ,0BAAgB;AAChB,cAAI,sBAAsB,YAAY;AACrC,gBAAI,KAAI,OAAO,MAAM,IAAI,IAAI,eAAe;AAC3C,oBAAM,IAAK,KAAI,MAAM;mBAEjB;AACJ,oBAAM,IAAI,KAAK;AACf,+BAAiB;;qBAGV,sBAAsB,QAAQ;AACtC,kBAAM,IAAK,KAAI,MAAM;iBAEjB;AACJ,kBAAM,IAAI,KAAK;AACf,6BAAiB;;;AAInB,aAAI,AAAM,WAAW,IAAG,OAAO,OAAO,IAAI,IAAI,OAAO,OAAO,UAAU,IAAK,KAAI,GAAG,IAAI;AACtF,aAAI,AAAM,WAAW,IAAG,OAAO,MAAM,IAAI,IAAI,OAAO,MAAM,UAAU,IAAK,KAAI,GAAG,IAAI;AAEpF,mBAAW,QAAQ,IAAI,KAAI,IAAI,KAAK;AACpC,mBAAW,QAAQ,IAAI,KAAI,IAAI,KAAK;AAEpC,aAAK,MAAM;AACX,aAAK,MAAM;AAEX,YAAM,oBAAoB,KAAK,IAAI,qBAAqB,CAAC;AAEzD,YAAI,oBAAoB,KAAK,KAAK,IAAI,SAAS,KAAK,KAAK,IAAI,SAAS,IAAI,KAAK;AAC9E,cAAM,kBAAkB,KAAK,IAAI,iBAAiB;AAClD,eAAK,QAAQ,EAAE,KAAK,KAAK,IAAI,IAAG,UAAU,mBAAmB,QAAQ,gBAAe,CAAE;AACtF,eAAK,QAAQ,EAAE,KAAK,KAAK,IAAI,IAAG,UAAU,mBAAmB,QAAQ,gBAAe,CAAE;eAElF;AACJ,eAAK,IAAI,KAAK,EAAC;AACf,eAAK,IAAI,KAAK,EAAC;;AAGhB,YAAI,sBAAsB,kBAAkB;AAC3C,qBAAW,IAAI,YAAY,QAAQ;AACnC,qBAAW,IAAI,YAAY,QAAQ;;AAGpC,YAAI,IAAI,GAAG;AACV,eAAK,KAAK;;AAEX,YAAI,IAAI,GAAG;AACV,eAAK,KAAK;;;IAGb;;AA9TA,SAAA,eAAA,UAAA,aAAA;;;;WAAkC;;AAClC,SAAA,eAAA,UAAA,cAAA;;;;WAA0C,UAAU,WAAW,OAAO,CAAC,SAAQ,SAAS,CAAC;;AA8T1F,SAAA;EA1U6B,SAAS;;;AC1BtC,IAAA,kBAAA,SAAA,QAAA;AAAqC,YAAA,kBAAA,MAAA;AAArC,8BAAA;;EA8hBA;;;;;WA1hBC,WAAA;AAEC,WAAK,YAAY,gBAAgB,CAAC;AAClC,WAAK,YAAY,gBAAgB,aAAa;AAC9C,WAAK,YAAY,wBAAwB,CAAI;AAE7C,UAAM,MAAM;AACZ,UAAM,MAAM;AACZ,UAAM,KAAK;AAEX,WAAK,YAAY,qBAAqB;QACrC,EAAE,UAAU,KAAM,UAAU,KAAK,GAAG,MAAM,GAAG,EAAC;QAC9C,EAAE,UAAU,KAAM,UAAU,KAAK,GAAG,MAAM,GAAG,EAAC;QAC9C,EAAE,UAAU,KAAM,UAAU,KAAK,GAAG,MAAM,GAAG,EAAC;QAC9C,EAAE,UAAU,MAAO,UAAU,KAAK,GAAG,MAAM,IAAI,EAAC;QAChD,EAAE,UAAU,MAAO,UAAU,KAAK,GAAG,MAAM,IAAI,EAAC;QAChD,EAAE,UAAU,MAAO,UAAU,KAAK,GAAG,MAAM,IAAI,EAAC;QAChD,EAAE,UAAU,MAAO,UAAU,KAAK,GAAG,MAAM,IAAI,EAAC;QAChD,EAAE,UAAU,MAAO,UAAU,KAAK,GAAG,MAAM,IAAI,EAAC;OAChD;AAED,WAAK,YAAY,uBAAuB;QACvC,EAAE,UAAU,OAAO,UAAU,KAAK,GAAG,MAAM,IAAI,EAAC;QAChD,EAAE,UAAU,OAAO,UAAU,KAAK,GAAG,MAAM,IAAI,EAAC;QAChD,EAAE,UAAU,OAAO,UAAU,KAAK,GAAG,MAAM,IAAI,EAAC;QAChD,EAAE,UAAU,OAAO,UAAU,KAAK,GAAG,MAAM,IAAI,EAAC;QAChD,EAAE,UAAU,OAAO,UAAU,KAAK,GAAG,MAAM,IAAI,EAAC;QAChD,EAAE,UAAU,MAAM,UAAU,KAAK,GAAG,MAAM,GAAG,EAAC;QAC9C,EAAE,UAAU,MAAM,UAAU,KAAK,GAAG,MAAM,GAAG,EAAC;QAC9C,EAAE,UAAU,MAAM,UAAU,KAAK,GAAG,MAAM,GAAG,EAAC;OAC9C;AAED,WAAK,YAAY,gBAAgB;QAChC,EAAE,UAAU,GAAG,QAAQ,KAAK,GAAG,KAAK,GAAG,EAAC;QACxC,EAAE,UAAU,MAAM,QAAQ,KAAK,GAAG,KAAK,IAAI,EAAC;QAC5C,EAAE,UAAU,SAAS,QAAQ,KAAK,GAAG,KAAK,IAAI,EAAC;QAC/C,EAAE,UAAU,YAAY,QAAQ,KAAK,GAAG,KAAK,IAAI,EAAC;QAClD,EAAE,UAAU,eAAe,QAAQ,KAAK,GAAG,KAAK,IAAI,EAAC;QACrD,EAAE,UAAU,kBAAkB,QAAQ,KAAK,GAAG,KAAK,IAAI,EAAC;OACxD;AAED,aAAA,UAAM,aAAY,KAAA,IAAA;IACnB;;;;;;WAEA,WAAA;AACC,aAAA,UAAM,eAAc,KAAA,IAAA;IACrB;;;;;;WASA,SAAc,OAAwB,QAA4C,WAAkB;AAGnG,UAAI,UAAU,QAAS,AAAM,SAAS,MAAM,KAAK,OAAO,YAAW,MAAO,UAAW;AACpF,iBAAS,KAAK,IAAI,gBAAgB,EAAE;;AAIrC,UAAI;AAIJ,UAAI,SAAiB,OAAO,KAAK;AAGjC,UAAI,AAAM,SAAS,MAAM,GAAG;AAC3B,YAAI;AACH,cAAI,KAAK,IAAI,aAAa,GAAG;AAC5B,mBAAO,IAAI,KAAK,aAAa,KAAK,IAAI,aAAa,GAA6B,MAAM,EAAE,OAAO,MAAM;iBAEjG;AACJ,mBAAO,IAAI,KAAK,aAAa,QAAqC,MAAM,EAAE,OAAO,MAAM;;iBAGlF,GAAP;AACC,iBAAO;;aAIJ;AAGJ,iBAAS,AAAO,YAAY,MAAO;AAGnC,YAAI,OAAO,KAAK,YAAY,QAAQ,KAAK,MAAM,QAAQ;AAIvD,YAAI,UAAO;AACX,YAAI,SAAS,KAAK,IAAI,cAAc,GAAG;AACtC,oBAAU,KAAK;mBAEP,SAAS,KAAK,IAAI,cAAc,GAAG;AAC3C,oBAAU,KAAK;eAEX;AACJ,oBAAU,KAAK;;AAIhB,YAAI,aAAa,QAAQ,CAAC,QAAQ,KAAK;AACtC,oBAAU,AAAQ,MAAK,OAAO;AAC9B,kBAAQ,SAAS,SAAS,UAAU,IAAI,IAAI;;AAI7C,oBAAY,QAAQ,SAAS,MAAY,WAAW,EAAE,KAAK,KAAK,YAAY,QAAQ,OAAO,CAAC;;AAI7F,aAAO;IACR;;;;;;WAUA,SAAsB,QAAgB,UAAkB;AAAxD,UAAA,QAAA;AASC,UAAM,oBAAoB,SAAS,eAAe,oBAAoB;AACtE,UAAM,mBAAmB,SAAS,eAAe,mBAAmB;AAGpE,UAAI,OAAY;QACf,YAAY;UACX,aAAa;YACZ,UAAU;YACV,WAAW;YACX,YAAY;YACZ,aAAa;;UAEd,YAAY;YACX,UAAU;YACV,WAAW;YACX,aAAa;;UAEd,YAAY;UACZ,UAAU;UACV,UAAU;;QAEX,YAAY;UACX,aAAa;YACZ,UAAU;YACV,WAAW;YACX,YAAY;YACZ,aAAa;;UAEd,YAAY;YACX,UAAU;YACV,WAAW;YACX,aAAa;;UAEd,YAAY;UACZ,UAAU;UACV,UAAU;;QAEX,QAAQ;UACP,aAAa;YACZ,UAAU;YACV,WAAW;YACX,YAAY;YACZ,aAAa;;UAEd,YAAY;YACX,UAAU;YACV,WAAW;YACX,aAAa;;UAEd,YAAY;UACZ,UAAU;UACV,UAAU;;;AAKZ,eAAS,OAAO,QAAQ,MAAY,YAAY;AAGhD,UAAI,QAAQ,OAAO,MAAM,GAAG;AAC5B,WAAK,SAAS,SAAS,MAAM;AAE7B,UAAI,OAAO,MAAM,OAAO,aAAa;AACpC,aAAK,OAAO,KAAK;aAEb;AACJ,aAAK,KAAK,SAAS,MAAM;;AAG1B,UAAI,OAAO,MAAM,OAAO,aAAa;AACpC,aAAK,WAAW,KAAK;aAEjB;AACJ,aAAK,SAAS,SAAS,MAAM;;AAI9B,MAAQ,MAAK,MAAM,SAAC,OAAO,MAAI;AAE9B,YAAI,KAAK,QAAQ;AAChB;;AAWD,YAAI,aAAa,KAAK;AAGtB,YAAI,WAAW,YAAW,MAAO,UAAU;AAC1C,uBAAa,MAAK,IAAI,gBAAgB,aAAa;;AAIpD,YAAI,SAAS,cAAc,MAAM,YAAY,IAAI;AACjD,iBAAS,IAAY,GAAG,IAAI,OAAO,QAAQ,KAAK;AAC/C,cAAI,QAAQ,OAAO;AAGnB,gBAAM,OAAO,MAAM,KAAK,QAAc,cAAc,GAAG;AAEvD,cAAI,MAAM,SAAS,SAAS;AAI3B,gBAAI,UAA2B,MAAM,KAAK,MAAM,uCAAuC;AAEvF,gBAAI,SAAS;AACZ,kBAAI,YAAY,QAAQ,QAAQ,OAAO,IAAI;AAG1C,qBAAK,YAAY,MAAM;qBAEnB;AAGJ,oBAAI,OAAwB,QAAQ,GAAG,MAAM,mCAAmC;AAEhF,oBAAI,MAAM;AACT,uBAAK,MAAM,KAAK,GAAG,YAAW;AAC9B,uBAAK,aAAa,QAAQ,GAAG,MAAM,yBAAyB,IAAI,OAAO;;AAIxE,oBAAI,KAAI,QAAQ,GAAG,MAAM,GAAG;AAG5B,oBAAI,GAAE,OAAO,IAAI;uBAIZ;AAEJ,uBAAK,UAAU,SAAU,IAAE,GAAG,MAAM,IAAI,KAAK,CAAA,GAAI;AACjD,uBAAK,UAAU,UAAW,IAAE,GAAG,MAAM,KAAK,KAAK,CAAA,GAAI,SAAS,KAAK,UAAU;AAG3E,sBAAI,IAAI,GAAE,GAAG,MAAM,GAAG;AACtB,sBAAI,EAAE,WAAW,GAAG;yBAIf;AAEJ,yBAAK,UAAU,WAAY,GAAE,IAAG,KAAM,IAAI;AAE1C,wBAAI,KAAK,UAAU,aAAa,GAAG;AAClC,2BAAK,UAAU,WAAW;;;;AAM7B,oBAAI,OAAQ,GAAE,OAAQ,aAAa;uBAI9B;AAEJ,uBAAK,SAAS,SAAU,IAAE,GAAG,MAAM,IAAI,KAAK,CAAA,GAAI;AAChD,uBAAK,SAAS,UAAW,IAAE,GAAG,MAAM,KAAK,KAAK,CAAA,GAAI,SAAS,KAAK,SAAS;;AAI1E,qBAAK,YAAY,MAAM,KAAK,MAAM,QAAQ,EAAE,EAAE,KAAW,WAAW;;;iBAKlE;AAEJ,iBAAK,YAAY,MAAM;;;AAYzB,aAAK,SAAS;MAEf,CAAC;AAMD,aAAO;IACR;;;;;;WAUA,SAAsB,OAAe,SAAY;AAGhD,UAAI,WAAoB,QAAQ;AAChC,cAAQ,KAAK,IAAI,KAAK;AAGtB,UAAI,SAAiB,IAAI,SAAiB;AAC1C,UAAI,OAAiB,QAAQ,MAAM,QAAQ,IAAI,MAAM,EAAE,IAAI,CAAA;AAC3D,UAAI,KAAK,QAAQ,GAAG,MAAM,IAAI;AAC7B,YAAI,MAAI,KAAK,YAAY,OAAO,KAAK,IAAI,cAAc,GAAI,KAAK,QAAQ,GAAG,MAAM,EAAE;AACnF,gBAAQ,IAAE;AACV,iBAAS,IAAE;AACX,iBAAS,IAAE;AACX,YAAI,QAAQ,YAAY;AACvB,mBAAS,MAAM;;iBAGR,KAAK,QAAQ,GAAG,MAAM,IAAI;AAClC,YAAI,MAAI,KAAK,YAAY,OAAO,QAAQ,KAAK,IAAI,sBAAsB,IAAK,KAAK,IAAI,qBAAqB,IAAK,KAAK,IAAI,mBAAmB,GAAI,KAAK,QAAQ,GAAG,MAAM,EAAE;AACvK,gBAAQ,IAAE;AACV,iBAAS,IAAE;AACX,iBAAS,IAAE;AACX,YAAI,QAAQ,YAAY;AACvB,mBAAS,MAAM;;iBAGR,KAAK,QAAQ,GAAG,MAAM,IAAI;AAClC,YAAI,KAAK,KAAK,IAAI,MAAM,SAAQ,EAAG,SAAS,GAAG,EAAE;AACjD,iBAAS;AACT,gBAAQ,WAAW,MAAM,YAAY,EAAE,CAAC;AACxC,iBAAS;iBAED,KAAK,QAAQ,QAAG,MAAM,IAAI;AAClC,YAAI,KAAK,KAAK,IAAI,MAAM,SAAQ,EAAG,SAAS,GAAG,EAAE;AACjD,iBAAS;AACT,gBAAQ,WAAW,MAAM,YAAY,EAAE,CAAC;AACxC,iBAAS;;AAIV,UAAI,KAAK,QAAQ,GAAG,MAAM,IAAI;AAE7B,YAAI,MAAG;AACP,YAAI,QAAQ,SAAS,WAAW,GAAG;AAClC,gBAAM,MAAM,cAAc,QAAQ,SAAS,OAAO,EAAE,MAAM,GAAG;eAEzD;AACJ,gBAAM,MAAM,cAAa,EAAG,MAAM,GAAG;;AAEtC,gBAAQ,OAAO,IAAI,EAAE;AACrB,iBAAS,MAAM,IAAI;AACnB,YAAI,QAAQ,YAAY;AACvB,mBAAS,MAAM;;iBAGR,QAAQ,SAAS,YAAY,GAAG;AACxC,gBAAQ,KAAK,MAAM,KAAK;iBAEhB,QAAQ,SAAS,UAAU,GAAG;AACtC,YAAI,IAAY,KAAK,IAAI,IAAI,QAAQ,SAAS,OAAO;AACrD,gBAAQ,KAAK,MAAM,QAAQ,CAAC,IAAI;;AAIjC,UAAI,MAAc;AAGlB,UAAI,KAAI,AAAM,eAAe,KAAK,EAAE,MAAM,GAAG;AAG7C,UAAI,OAAO,GAAE;AAGb,UAAI,KAAK,SAAS,QAAQ,UAAU,QAAQ;AAC3C,eAAO,MAAM,QAAQ,UAAU,SAAS,KAAK,SAAS,CAAC,EAAE,KAAK,GAAG,IAAI;;AAItE,UAAI,QAAQ,UAAU,WAAW,GAAG;AACnC,YAAI,KAAe,CAAA;AACnB,YAAI,QAAgB,KAAK,MAAM,EAAE,EAAE,QAAO,EAAG,KAAK,EAAE;AACpD,iBAAS,IAAI,GAAG,MAAM,KAAK,QAAQ,KAAK,KAAK,KAAK,QAAQ,UAAU,UAAU;AAC7E,cAAI,IAAY,MAAM,OAAO,GAAG,QAAQ,UAAU,QAAQ,EAAE,MAAM,EAAE,EAAE,QAAO,EAAG,KAAK,EAAE;AACvF,cAAI,MAAM,IAAI;AACb,eAAG,QAAQ,CAAC;;;AAGd,eAAO,GAAG,KAAK,QAAQ,UAAU,SAAS;;AAI3C,aAAO;AAGP,UAAI,GAAE,WAAW,GAAG;AACnB,WAAE,KAAK,EAAE;;AAEV,UAAI,OAAe,GAAE;AAGrB,UAAI,KAAK,SAAS,QAAQ,SAAS,QAAQ;AAC1C,gBAAQ,MAAM,QAAQ,SAAS,SAAS,KAAK,SAAS,CAAC,EAAE,KAAK,GAAG;;AAGlE,UAAI,SAAS,IAAI;AAChB,eAAO,QAAQ,SAAS,YAAY;;AAIrC,UAAI,QAAQ,IAAI;AACf,cAAM;;AAIP,UAAI,UAAU,KAAK,YAAa,KAAK,QAAQ,GAAG,MAAM,IAAK;AAC1D,cAAM,MAAM;;AAIb,UAAI,QAAQ;AACX,cAAM,SAAS;;AAEhB,UAAI,QAAQ;AACX,eAAO;;AAGR,aAAO;IACR;;;;;;WAGA,SAAsB,OAAe,UAAiB,OAAsB;AAAtB,UAAA,UAAA,QAAA;AAAA,gBAAA;MAAsB;AAC3E,UAAI,WAAW;AACf,UAAI,SAAS;AACb,UAAI,SAAS;AACb,UAAI,UAAU;AACd,UAAI,KAAI;AAER,eAAS,IAAI,GAAG,MAAM,SAAS,QAAQ,IAAI,KAAK,KAAK;AACpD,YAAI,SAAS,GAAG,UAAU,OAAO;AAChC,cAAI,SAAS,GAAG,WAAW,GAAG;AAC7B,uBAAW;iBAEP;AACJ,uBAAW,QAAQ,SAAS,GAAG;AAC/B,iBAAI,SAAS,GAAG;;AAEjB,mBAAS,SAAS,GAAG;AACrB,mBAAS,SAAS,GAAG;AACrB,oBAAU;;;AAKZ,UAAI,CAAC,WAAW,SAAS,SAAS,UAAU,SAAS,GAAG;AAEvD,mBAAW,QAAQ,SAAS,GAAG;AAC/B,iBAAS,SAAS,GAAG;AACrB,iBAAS,SAAS,GAAG;AACrB,kBAAU;;AAGX,UAAI,SAAS;AACZ,mBAAW,WACV,SAAS,YACR,KAAK,IAAI,GAAE,SAAQ,EAAG,SAAS,KAAK,MAAM,QAAQ,EAAE,SAAQ,EAAG,QAAQ,YAAY,EAAE,EAAE,QAAQ,EAAE,CAAC,CAClG;;AAIH,aAAO,CAAC,UAAU,QAAQ,MAAM;IACjC;;;;;;WASA,SAAc,MAAY;AACzB,aAAO,KAAK,QAAQ,MAAY,YAAY;IAC7C;;;;;;WASA,SAAgB,MAAY;AAC3B,aAAO,KAAK,QAAc,cAAc,GAAG;IAC5C;;AAED,SAAA;AAAA,EA9hBqC,MAAM;;;AC9B3C,IAAA,gBAAA,SAAA,QAAA;AAAmC,YAAA,gBAAA,MAAA;AAAnC,4BAAA;;EAwkCA;;;;;WApkCC,WAAA;AAEC,WAAK,YAAY,cAAc,IAAI;AACnC,WAAK,YAAY,cAAc,YAAY;AAE3C,aAAA,UAAM,aAAY,KAAA,IAAA;IACnB;;;;;;WAEA,WAAA;AACC,aAAA,UAAM,eAAc,KAAA,IAAA;IACrB;;;;;;WAEA,SAAc,QAAa,QAA4C;AAMtE,UAAI,OAAO,WAAW,eAAe,WAAW,IAAI;AACnD,iBAAS,KAAK,IAAI,cAAc,YAAY;;AAI7C,UAAI;AAIJ,UAAI,OAAa;AAGjB,UAAI,AAAM,SAAS,MAAM,GAAG;AAE3B,YAAI;AACH,cAAM,UAAU,KAAK,IAAI,aAAa;AACtC,cAAI,SAAS;AACZ,mBAAO,IAAI,KAAK,eAAe,SAAqC,MAAM,EAAE,OAAO,IAAI;iBAEnF;AACJ,mBAAO,IAAI,KAAK,eAAe,QAAuC,MAAM,EAAE,OAAO,IAAI;;iBAGpF,GAAP;AACC,iBAAO;;;AAMT,UAAI,OAAO,KAAK,YAAY,MAAM;AAGlC,UAAM,WAAW,KAAK,MAAM;AAC5B,UAAI,YAAY,CAAC,KAAK,MAAM,KAAK;AAChC,eAAO,SAAS,aAAa,IAAI;;AAKlC,UAAI,CAAC,AAAM,SAAS,KAAK,QAAO,CAAE,GAAG;AAGpC,eAAO;;AAIR,kBAAY,KAAK,YAAY,MAAM,IAAI;AAGvC,UAAI,KAAK,IAAI,YAAY,GAAG;AAC3B,oBAAY,UAAU,QACrB,SAAS,UAAU,OAAO,GAAG,CAAC,EAAE,YAAW,CAAE;;AAK/C,aAAO;IACR;;;;;;WASA,SAAsB,MAAY,MAAoB;AAGrD,UAAI,MAAM,KAAK;AAGf,UAAI,UACH,OACA,SACA,KACA,OACA,SACA,SACA,cACA,SAAiB,KAAK,kBAAiB,GACvC,YAAoB,KAAK,QAAO;AACjC,UAAI,KAAK,MAAM,KAAK;AACnB,mBAAW,KAAK,eAAc;AAC9B,gBAAQ,KAAK,YAAW;AACxB,kBAAU,KAAK,UAAS;AACxB,cAAM,KAAK,WAAU;AACrB,gBAAQ,KAAK,YAAW;AACxB,kBAAU,KAAK,cAAa;AAC5B,kBAAU,KAAK,cAAa;AAC5B,uBAAe,KAAK,mBAAkB;aAElC;AACJ,mBAAW,KAAK,YAAW;AAC3B,gBAAQ,KAAK,SAAQ;AACrB,kBAAU,KAAK,OAAM;AACrB,cAAM,KAAK,QAAO;AAClB,gBAAQ,KAAK,SAAQ;AACrB,kBAAU,KAAK,WAAU;AACzB,kBAAU,KAAK,WAAU;AACzB,uBAAe,KAAK,gBAAe;;AAIpC,eAAS,IAAI,GAAG,MAAM,KAAK,MAAM,QAAQ,IAAI,KAAK,KAAK;AACtD,YAAI,QAAgB;AACpB,gBAAQ,KAAK,MAAM;eAEb;AACJ,oBAAQ,KAAK,GACZ,WAAW,IACR,YACA,SAAS;AAEb;eAEI;AACJ,oBAAQ,KAAK,IAAI,QAAQ,EAAE,SAAQ;AACnC,gBAAI,WAAW,GAAG;AACjB,uBAAS,KAAK,GAAG,SAAS;;AAE3B;eAEI;eACA;eACA;AACJ,oBAAQ,KAAK,IAAI,QAAQ,EAAE,SAAQ,EAAG,OAAO,CAAC,KAAK,MAAM,GAAG,MAAM;AAClE,gBAAI,WAAW,GAAG;AACjB,uBAAS,KAAK,GAAG,SAAS;;AAE3B;eAEI;eACA;eACA;eACA;AACJ,gBAAI,OAAO,AAAO,QAAQ,IAAI;AAC9B,gBAAI,OAAO;AACX,gBAAI,QAAQ,KAAM,UAAU,GAAI;AAC/B;;AAED,gBAAI,KAAK,MAAM,MAAM,QAAQ;AAC5B,sBAAQ,KAAK,IAAI,IAAI,EAAE,SAAQ;mBAE3B;AACJ,sBAAQ,KAAK,IAAI,IAAI,EAAE,SAAQ,EAAG,OAAO,CAAC,KAAK,MAAM,GAAG,MAAM;;AAE/D,gBAAI,OAAO,GAAG;AACb,uBAAS,KAAK,GAAG,SAAS;;AAE3B;eAEI;AAEJ;eAEI;AACJ,oBAAQ,KAAK,KAAK,KAAM,MAAK,SAAQ,IAAK,KAAK,CAAC;AAChD;eAEI;AACJ,oBAAQ,KAAK,GAAG,KAAK,UAAU,KAAK,CAAC,EAAE,OAAO,GAAG,CAAC;AAClD;eAEI;AACJ,oBAAQ,KAAK,GAAG,KAAK,UAAU,KAAK,CAAC;AACrC;eAEI;AACJ,oBAAQ,KAAK,GAAG,KAAK,eAAe,KAAK,CAAC;AAC1C;eAEI;AACJ,oBAAQ,AAAO,UAAU,QAAQ,GAAG,GAAG,GAAG;AAC1C;eAEI;AACJ,oBAAS,SAAQ,GAAG,SAAQ;AAC5B;eAEI;AACJ,oBAAQ,AAAO,UAAU,AAAO,QAAQ,MAAM,KAAK,MAAM,GAAG,GAAG,GAAG,GAAG;AACrE;eAEI;AACJ,oBAAQ,AAAO,QAAQ,MAAM,KAAK,MAAM,GAAG,EAAE,SAAQ;AACrD;eAEI;AACJ,oBAAQ,AAAO,aAAa,MAAM,KAAK,MAAM,GAAG,EAAE,SAAQ;AAC1D;eAEI;AACJ,oBAAQ,AAAO,UAAU,KAAK,GAAG,GAAG;AACpC;eAEI;AACJ,oBAAQ,IAAI,SAAQ;AACpB;eAEI;eACA;AACJ,oBAAQ,AAAO,UAAU,AAAO,WAAW,MAAM,KAAK,MAAM,GAAG,EAAE,SAAQ,GAAI,KAAK,MAAM,GAAG,QAAQ,GAAG;AACtG;eAEI;AACJ,oBAAQ,AAAO,WAAW,MAAM,KAAK,MAAM,GAAG,EAAE,SAAQ;AACxD;eAEI;AAEJ;eAEI;AAEJ;eAEI;AACJ,oBAAQ,KAAK,MAAM,SAAS,cAAc,UAAU,EAAE,KAAK,MAAM,GAAG;AACpE;eAEI;AACJ,oBAAS,YAAW,GAAG,SAAQ;AAC/B;eAEI;AACJ,oBAAQ,AAAO,UAAW,YAAW,GAAG,SAAQ,GAAI,GAAG,GAAG;AAC1D;eAEI;eACA;AACJ,oBAAQ,KAAK,GAAG,KAAK,iBAAiB,OAAO,CAAC;AAC9C;eAEI;eACA;AACJ,oBAAQ,KAAK,GAAG,KAAK,iBAAiB,OAAO,CAAC;AAC9C;eAEI;eACA;AACJ,oBAAQ,KAAK,GAAG,KAAK,iBAAiB,OAAO,CAAC,EAAE,OAAO,GAAG,CAAC;AAC3D;eAEI;eACA;AACJ,oBAAS,WAAW,MAAK,MAAM,OAAO,kBAAkB,KAAK,GAAG,SAAQ;AACxE,gBAAI,KAAK,MAAM,MAAM,MAAM;AAC1B,sBAAQ,AAAO,UAAU,OAAO,GAAG,GAAG;;AAEvC;eAEI;AACJ,gBAAI,SAAS,IAAI;AAChB,sBAAQ,KAAK,GAAG,IAAI;mBAEhB;AACJ,sBAAQ,KAAK,GAAG,IAAI;;AAErB;eAEI;AACJ,gBAAI,SAAS,IAAI;AAChB,sBAAQ,KAAK,GAAG,MAAM;mBAElB;AACJ,sBAAQ,KAAK,GAAG,MAAM;;AAEvB;eAEI;AACJ,gBAAI,SAAS,IAAI;AAChB,sBAAQ,KAAK,GAAG,GAAG;mBAEf;AACJ,sBAAQ,KAAK,GAAG,GAAG;;AAEpB;eAEI;AACJ,oBAAQ,AAAO,WAAW,KAAK,EAAE,SAAQ;AACzC;eAEI;AACJ,oBAAQ,AAAO,UAAU,AAAO,WAAW,KAAK,GAAG,GAAG,GAAG;AACzD;eAEI;AACJ,oBAAQ,MAAM,SAAQ;AACtB;eAEI;AACJ,oBAAQ,AAAO,UAAU,OAAO,GAAG,GAAG;AACtC;eAEI;AACJ,oBAAQ,AAAO,WAAW,OAAO,CAAC,EAAE,SAAQ;AAC5C;eAEI;AACJ,oBAAQ,AAAO,UAAU,AAAO,WAAW,OAAO,CAAC,GAAG,GAAG,GAAG;AAC5D;eAEI;AACJ,oBAAS,SAAQ,GAAG,SAAQ;AAC5B;eAEI;AACJ,oBAAQ,AAAO,UAAU,QAAQ,GAAG,GAAG,GAAG;AAC1C;eAEI;AACJ,oBAAQ,QAAQ,SAAQ;AACxB;eAEI;AACJ,oBAAQ,AAAO,UAAU,SAAS,GAAG,GAAG;AACxC;eAEI;AACJ,oBAAQ,QAAQ,SAAQ;AACxB;eAEI;AACJ,oBAAQ,AAAO,UAAU,SAAS,GAAG,GAAG;AACxC;eAEI;eACA;eACA;AACJ,oBAAQ,KAAK,MAAO,eAAe,MAAQ,KAAK,IAAI,IAAI,KAAK,MAAM,GAAG,MAAM,CAAC,EAAE,SAAQ;AACvF;eAEI;AACJ,oBAAQ,UAAU,SAAQ;AAC1B;eAEI;eACA;eACA;AACJ,oBAAQ,AAAO,UAAU,cAAc,KAAK,MAAM,GAAG,QAAQ,GAAG;AAChE;eAEI;AACJ,oBAAQ,AAAO,YAAY,MAAM,OAAO,OAAO,KAAK,MAAM,GAAG;AAC7D;eAEI;AACJ,oBAAQ,AAAO,YAAY,MAAM,MAAM,OAAO,KAAK,MAAM,GAAG;AAC5D;eAEI;AACJ,oBAAQ,AAAO,YAAY,MAAM,OAAO,MAAM,KAAK,MAAM,GAAG;AAC5D;eAEI;AACJ,oBAAQ,AAAO,YAAY,MAAM,MAAM,MAAM,KAAK,MAAM,GAAG;AAC3D;eAEI;eACA;AACJ,gBAAI,KAAK,KAAK,IAAI,MAAM,IAAI;AAC5B,gBAAI,MAAM,KAAK,MAAM,EAAE;AACvB,gBAAI,MAAM,KAAK,KAAK,MAAM;AAE1B,gBAAI,KAAK,MAAM,KAAK;AACnB,oBAAM;AACN,oBAAM;;AAGP,gBAAI,KAAK,MAAM,MAAM,KAAK;AACzB,sBAAQ;AACR,uBAAS,SAAS,IAAI,MAAM;AAC5B,uBAAS,AAAO,UAAU,KAAK,CAAC,IAAI,MAAM,AAAO,UAAU,KAAK,CAAC;mBAE7D;AACJ,sBAAQ,SAAS,IAAI,MAAM;AAC3B,uBAAS,AAAO,UAAU,KAAK,CAAC,IAAI,AAAO,UAAU,KAAK,CAAC;;AAE5D;eAEI;AACJ,oBAAQ,KAAK,YAAW;AACxB;eAEI;AACJ,oBAAQ,KAAK,YAAW;AACxB;;AAGF,cAAM,IAAI,QAAc,aAAa,KAAK;;AAG3C,aAAO;IACR;;;;;;WAOA,SAAsB,QAAc;AAMnC,UAAI,OAAuB;QAC1B,YAAY;QACZ,SAAc,CAAA;;AAIf,UAAI,SAAS,cAAc,MAAM,QAAQ,IAAI;AAC7C,eAAS,IAAY,GAAG,IAAI,OAAO,QAAQ,KAAK;AAC/C,YAAI,QAAQ,OAAO;AAEnB,YAAI,MAAM,SAAS,SAAS;AAG3B,cAAI,MAAM,KAAK,MAAM,SAAS,GAAG;AAChC,gBAAI,aAAa,KAAK,IAAI,cAAc,YAAY;AACpD,gBAAI,CAAC,AAAM,SAAS,UAAU,GAAG;AAChC,2BAAa;;AAEd,kBAAM,OAAO;;AAId,cAAI,UAAU,MAAM,KAAK,MAAM,+MAA+M;AAG9O,cAAI,SAAS;AAGZ,qBAAS,KAAI,GAAG,KAAI,QAAQ,QAAQ,MAAK;AACxC,mBAAK,MAAM,KAAK,QAAQ,GAAE;AAC1B,oBAAM,OAAO,MAAM,KAAK,QAAQ,QAAQ,KAAU,WAAW;;;;AAQhE,aAAK,YAAY,MAAM;;AAMxB,aAAO;IACR;;;;;;WAEA,WAAA;AACC,aAAO,CAAC,WAAW,YAAY,SAAS,SAAS,OAAO,QAAQ,QAAQ,UAAU,aAAa,WAAW,YAAY,UAAU;IACjI;;;;;;WAEA,SAAoB,OAAa;AAChC,aAAO,KAAK,QAAO,EAAG;IACvB;;;;;;WAEA,WAAA;AACC,aAAO,CAAC,OAAO,OAAO,OAAO,OAAO,cAAc,OAAO,OAAO,OAAO,OAAO,OAAO,OAAO,KAAK;IAClG;;;;;;WAEA,SAAyB,OAAa;AACrC,aAAO,KAAK,aAAY,EAAG;IAC5B;;;;;;WAEA,WAAA;AACC,aAAO,CAAC,UAAU,UAAU,WAAW,aAAa,YAAY,UAAU,UAAU;IACrF;;;;;;WAEA,SAAsB,OAAa;AAClC,aAAO,KAAK,UAAS,EAAG;IACzB;;;;;;WAEA,WAAA;AACC,aAAO,CAAC,OAAO,OAAO,OAAO,OAAO,OAAO,OAAO,KAAK;IACxD;;;;;;WAEA,SAA2B,OAAa;AACvC,aAAO,KAAK,eAAc,EAAG;IAC9B;;;;;;WAEA,SAAa,QAAa,QAAc;AAGvC,UAAI,kBAAkB,MAAM;AAC3B,eAAO;;AAIR,UAAI,AAAM,SAAS,MAAM,GAAG;AAC3B,eAAO,IAAI,KAAK,MAAM;;AAIvB,UAAI,CAAC,AAAM,SAAS,MAAM,GAAG;AAC5B,iBAAS,OAAO,SAAQ;;AAIzB,UAAI;AAGJ,UAAI,MAAc;AAGlB,eAAS,AAAO,YAAY,MAAM;AAGlC,eAAS,OAAO,OAAO,GAAG,OAAO,MAAM;AAGvC,UAAI,OAAO,KAAK,YAAY,MAAM;AAGlC,UAAI,gBAAgB;QACnB,QAAQ;QACR,SAAS;QACT,SAAS;QACT,SAAS;QACT,SAAS;QACT,cAAc;QACd,aAAa;QACb,gBAAgB;QAChB,eAAe;QACf,OAAO;QACP,WAAW;QACX,QAAQ;QACR,aAAa;QACb,eAAe;QACf,aAAa;QACb,eAAe;QACf,UAAU;QACV,UAAU;QACV,eAAe;QACf,qBAAqB;QACrB,MAAM;QACN,QAAQ;QACR,aAAa;QACb,OAAO;;AAIR,UAAI,YAAY;QACf,QAAQ;QACR,SAAS;QACT,OAAO;QACP,QAAQ;QACR,UAAU;QACV,UAAU;QACV,eAAe;QACf,aAAkB;QAClB,UAAU;QACV,OAAO,KAAK,MAAM;;AAInB,UAAI,cAAsB;AAC1B,UAAI,QAAgB;AAGpB,eAAS,IAAY,GAAG,IAAI,KAAK,MAAM,QAAQ,KAAK;AAGnD,gBAAQ,IAAI,cAAc;AAE1B,gBAAQ,KAAK,MAAM;eAEb;eACA;AACJ,mBAAO;AACP,0BAAc,OAAO;AACrB;eAEI;eACA;AACJ,mBAAO;AACP,0BAAc,QAAQ;AACtB;eAEI;eACA;AACJ,mBAAO;AACP,0BAAc,QAAQ;AACtB;eAEI;eACA;AACJ,mBAAO;AACP,0BAAc,QAAQ;AACtB;eAEI;AACJ,mBAAO,MAAM,KAAK,cAAc,KAAK,QAAO,CAAE,EAAE,KAAK,GAAG,IAAI;AAC5D,0BAAc,YAAY;AAC1B;eAEI;AACJ,mBAAO,MAAM,KAAK,cAAc,KAAK,aAAY,CAAE,EAAE,KAAK,GAAG,IAAI;AACjE,0BAAc,aAAa;AAC3B;eAEI;eACA;AACJ,mBAAO;AACP,0BAAc,QAAQ;AACtB;eAEI;eACA;AACJ,mBAAO;AACP,0BAAc,OAAO;AACrB;eAEI;eACA;AACJ,mBAAO;AACP,0BAAc,MAAM;AACpB;eAEI;eACA;eACA;AACJ,mBAAO;AACP,0BAAc,UAAU;AACxB;eAGI;AACJ,mBAAO,MAAM,KAAK,cAAc,KAAK,UAAS,CAAE,EAAE,KAAK,GAAG,IAAI;AAC9D,0BAAc,cAAc;AAC5B;eAEI;AACJ,mBAAO,MAAM,KAAK,cAAc,KAAK,eAAc,CAAE,EAAE,KAAK,GAAG,IAAI;AACnE,0BAAc,eAAe;AAC7B;eAEI;eACA;eACA;AAEJ,mBAAO,MAAM,KAAK,cAAc,CAAC,MAAM,MAAM,QAAU,QAAU,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI;AACxF,0BAAc,KAAK;AACnB;eAEI;eACA;AACJ,mBAAO;AACP,0BAAc,cAAc;AAC5B;eAEI;eACA;AACJ,mBAAO;AACP,0BAAc,YAAY;AAC1B;eAEI;eACA;AACJ,mBAAO;AACP,0BAAc,cAAc;AAC5B;eAEI;eACA;AACJ,mBAAO;AACP,0BAAc,YAAY;AAC1B;eAEI;eACA;AACJ,mBAAO;AACP,0BAAc,SAAS;AACvB;eAEI;eACA;AACJ,mBAAO;AACP,0BAAc,SAAS;AACvB;eAEI;eACA;eACA;AACJ,mBAAO;AACP,0BAAc,cAAc;AAC5B,0BAAc,oBAAoB,KAAK,MAAM,GAAG;AAChD;eAEI;eACA;eACA;AACJ,mBAAO;AACP,0BAAc,cAAc;AAC5B;eAEI;AACJ,mBAAO;AACP,0BAAc,YAAY;AAC1B;eAEI;AACJ,mBAAO;AACP,0BAAc,OAAO;AACrB;eAEI;AACJ,mBAAO;AACP,0BAAc,OAAO;AACrB;eAEI;AACJ,mBAAO;AACP,0BAAc,MAAM;AACpB,2BAAe;AACf;eAEI;eACA;eACA;eACA;eACA;eACA;eACA;eACA;eACA;eACA;eACA;eACA;eACA;eACA;eACA;eACA;eACA;eACA;eACA;eACA;eACA;eACA;AAEJ;AACA;;AAGF,eAAO;;AAIR,UAAI,QAAQ,IAAI,OAAO,GAAG;AAC1B,UAAI,UAA4B,OAAO,MAAM,KAAK;AAElD,UAAI,SAAS;AAIZ,YAAI,cAAc,OAAO,IAAI;AAC5B,oBAAU,OAAO,SAAS,QAAQ,cAAc,KAAK;;AAItD,YAAI,cAAc,QAAQ,IAAI;AAC7B,cAAI,MAAM,SAAS,QAAQ,cAAc,MAAM;AAC/C,iBAAO;AACP,oBAAU,OAAO;;AAIlB,YAAI,cAAc,QAAQ,IAAI;AAC7B,cAAI,MAAM,SAAS,QAAQ,cAAc,MAAM;AAC/C,cAAI,MAAM,IAAI;AACb,mBAAO;iBAEH;AACJ,mBAAO;;AAER,oBAAU,OAAO;;AAIlB,YAAI,cAAc,QAAQ,IAAI;AAC7B,cAAI,MAAM,SAAS,QAAQ,cAAc,MAAM;AAC/C,gBAAM,KAAK,MAAO,IAAI,KAAI,EAAG,YAAW,IAAM,EAAE,IAAI,KAAK;AACzD,oBAAU,OAAO;;AAIlB,YAAI,cAAc,YAAY,IAAI;AACjC,oBAAU,QAAQ,KAAK,aAAkB,QAAQ,cAAc,UAAU;;AAI1E,YAAI,cAAc,aAAa,IAAI;AAClC,oBAAU,QAAQ,KAAK,kBAAuB,QAAQ,cAAc,WAAW;;AAIhF,YAAI,cAAc,QAAQ,IAAI;AAC7B,oBAAU,QAAQ,SAAS,QAAQ,cAAc,MAAM,IAAI;;AAO5D,YAAK,cAAc,OAAO,MAAQ,cAAc,QAAQ,IAAK;AAI5D,oBAAU,QAAQ;AAClB,oBAAU,MAAM,AAAO,eACtB,SAAS,QAAQ,cAAc,KAAK,GACpC,UAAU,MACV,GACA,KAAK,MAAM,GAAG;;AAKhB,YAAI,cAAc,MAAM,IAAI;AAC3B,oBAAU,MAAM,SAAS,QAAQ,cAAc,IAAI;;AAIpD,YAAI,cAAc,UAAU,IAAI;AAC/B,oBAAU,QAAQ;AAClB,oBAAU,MAAM,SAAS,QAAQ,cAAc,QAAQ;;AAIxD,YAAI,cAAc,YAAY,IAAI;AACjC,oBAAU,OAAO,SAAS,QAAQ,cAAc,UAAU;;AAI3D,YAAI,cAAc,YAAY,IAAI;AACjC,oBAAU,OAAO,SAAS,QAAQ,cAAc,UAAU,IAAI;;AAI/D,YAAI,cAAc,cAAc,IAAI;AACnC,cAAI,MAAM,SAAS,QAAQ,cAAc,YAAY;AACrD,cAAI,OAAO,IAAI;AACd,kBAAM;;AAEP,cAAK,cAAc,KAAK,MAAO,CAAC,KAAK,KAAK,QAAQ,cAAc,GAAG,GAAG;AACrE,mBAAO;;AAER,oBAAU,OAAO;;AAIlB,YAAI,cAAc,cAAc,IAAI;AACnC,cAAI,MAAM,SAAS,QAAQ,cAAc,YAAY;AACrD,cAAI,OAAO,IAAI;AACd,kBAAM;;AAEP,cAAK,cAAc,KAAK,MAAO,CAAC,KAAK,KAAK,QAAQ,cAAc,GAAG,GAAG;AACrE,mBAAO;;AAER,oBAAU,OAAO;;AAIlB,YAAI,cAAc,SAAS,IAAI;AAC9B,oBAAU,SAAS,SAAS,QAAQ,cAAc,OAAO;;AAI1D,YAAI,cAAc,SAAS,IAAI;AAC9B,oBAAU,SAAS,SAAS,QAAQ,cAAc,OAAO;;AAI1D,YAAI,cAAc,cAAc,IAAI;AACnC,cAAI,MAAM,SAAS,QAAQ,cAAc,YAAY;AACrD,cAAI,cAAc,qBAAqB,GAAG;AACzC,mBAAO;qBAEC,cAAc,qBAAqB,GAAG;AAC9C,mBAAO;;AAER,oBAAU,cAAc;;AAIzB,YAAI,cAAc,YAAY,IAAI;AACjC,oBAAU,YAAY,SAAS,QAAQ,cAAc,UAAU;AAE/D,cAAM,KAAK,IAAI,KAAK,UAAU,SAAS;AACvC,oBAAU,OAAO,GAAG,eAAc;AAClC,oBAAU,QAAQ,GAAG,YAAW;AAChC,oBAAU,MAAM,GAAG,WAAU;AAC7B,oBAAU,OAAO,GAAG,YAAW;AAC/B,oBAAU,SAAS,GAAG,cAAa;AACnC,oBAAU,SAAS,GAAG,cAAa;AACnC,oBAAU,cAAc,GAAG,mBAAkB;;AAI9C,YAAI,cAAc,OAAO,IAAI;AAC5B,oBAAU,SAAS,KAAK,sBAAsB,IAAI,KAAK,UAAU,MAAM,UAAU,OAAO,UAAU,GAAG,GAAG,QAAQ,cAAc,KAAK;;AAIpI,YAAI,cAAc,MAAM,IAAI;AAE3B,oBAAU,OAAO,AAAM,SAAS,QAAQ,cAAc,MAAM,EAAE;AAC9D,oBAAU,QAAQ,AAAM,SAAS,QAAQ,cAAc,MAAM,EAAE,IAAI;AACnE,oBAAU,MAAM,AAAM,SAAS,QAAQ,cAAc,MAAM,EAAE;AAC7D,oBAAU,OAAO,AAAM,SAAS,QAAQ,cAAc,MAAM,EAAE;AAC9D,oBAAU,SAAS,AAAM,SAAS,QAAQ,cAAc,MAAM,EAAE;AAChE,oBAAU,SAAS,AAAM,SAAS,QAAQ,cAAc,MAAM,EAAE;AAChE,oBAAU,cAAc,AAAM,SAAS,QAAQ,cAAc,MAAM,EAAE;AAErE,cAAI,QAAQ,cAAc,MAAM,MAAM,OAAO,QAAQ,cAAc,MAAM,MAAM,KAAK;AACnF,sBAAU,MAAM;qBAER,QAAQ,cAAc,MAAM,MAAM,IAAI;AAC9C,sBAAU,SAAS,KAAK,sBAAsB,IAAI,KAAK,UAAU,MAAM,UAAU,OAAO,UAAU,GAAG,GAAG,QAAQ,cAAc,MAAM,EAAE;;;AAKxI,YAAI,UAAU,KAAK;AAClB,gBAAM,IAAI,KAAK,KAAK,IACnB,UAAU,MACV,UAAU,OACV,UAAU,KACV,UAAU,MACV,UAAU,QACV,UAAU,QACV,UAAU,WAAW,CACrB;eAEG;AACJ,gBAAM,IAAI,KACT,UAAU,MACV,UAAU,OACV,UAAU,KACV,UAAU,MACV,UAAU,SAAS,UAAU,QAC7B,UAAU,QACV,UAAU,WAAW;;aAKnB;AAGJ,cAAM,IAAI,KAAK,MAAM;;AAGtB,aAAO;IACR;;;;;;WAEA,SAAgC,MAAY,MAAY;AACvD,UAAI,QAAQ,KAAK,MAAM,gCAAgC;AACvD,UAAI,OAAO;AACV,YAAI,QAAQ,KAAK,MAAM,gCAAgC;AACvD,YAAI,MAAM,MAAM;AAChB,YAAI,OAAO,MAAM;AACjB,YAAI,SAAS,MAAM;AACnB,YAAI,SAAS,SAAS,IAAI,IAAI,KAAK,SAAS,MAAM;AAKlD,YAAI,OAAO,KAAK;AACf,oBAAU;;AAIX,YAAI,iBAAkB,SAAQ,IAAI,KAAI,GAAI,kBAAiB;AAC3D,YAAI,OAAO,SAAS;AACpB,eAAO;;AAER,aAAO;IACR;;;;;;WAQA,SAAuB,OAAa;AAGnC,UAAI,QAAgB,KAAK,QAAO,EAAG,QAAQ,KAAK;AAChD,UAAI,QAAQ,IAAI;AACf,eAAO;;AAIR,UAAI,CAAC,KAAK,MAAM,SAAS,UAAS,GAAI;AACrC,gBAAQ,KAAK,MAAM,SAAS,aAAa,KAAK,QAAO,CAAE,EAAE,QAAQ,KAAK;AACtE,YAAI,QAAQ,IAAI;AACf,iBAAO;;;AAIT,aAAO;IACR;;;;;;WAQA,SAA4B,OAAkB;AAG7C,UAAI,QAAgB,KAAK,aAAY,EAAG,QAAQ,KAAK;AACrD,UAAI,QAAQ,IAAI;AACf,eAAO;;AAIR,cAAQ,KAAK,QAAO,EAAG,QAAa,KAAK;AACzC,UAAI,QAAQ,IAAI;AACf,eAAO;;AAIR,UAAI,KAAK,MAAM,YAAY,CAAC,KAAK,MAAM,SAAS,UAAS,GAAI;AAC5D,gBAAQ,KAAK,MAAM,SAAS,aAAa,KAAK,aAAY,CAAE,EAAE,QAAQ,KAAK;AAC3E,YAAI,QAAQ,IAAI;AACf,iBAAO;;;AAIT,aAAO;IACR;;;;;;WASA,SAAe,OAAa;AAC3B,UAAI,OAAO,KAAK,cAAc,CAAC,MAAM,QAAQ,GAAG,CAAC;AACjD,aAAO,KAAK,QAAQ,MAAM,YAAW,CAAE,IAAI;IAC5C;;;;;;WAQA,SAAwB,MAAkC;AACzD,UAAI,MAAgB,CAAA;AACpB,eAAS,IAAY,GAAG,IAAI,KAAK,QAAQ,KAAK;AAE7C,YAAI,KAAK,MAAM,UAAU;AACxB,cAAI,KAAK,AAAO,cAAc,KAAK,GAAG,KAAK,EAAE,CAAC,CAAC;eAE3C;AACJ,cAAI,KAAK,AAAO,cAAc,KAAK,EAAE,CAAC;;;AAGxC,aAAO;IACR;;AAED,SAAA;AAAA,EAxkCmC,MAAM;;;ACGzC,IAAA,oBAAA,SAAA,QAAA;AAAuC,YAAA,oBAAA,MAAA;AAAvC,gCAAA;AAAA,QAAA,QAAA,WAAA,QAAA,OAAA,MAAA,MAAA,SAAA,KAAA;AAuFC,WAAA,eAAA,OAAA,gBAAA;;;;aAAsD;QACrD,KAAK;QACL,KAAK;QACL,KAAK;QACL,KAAK;QACL,KAAK;QACL,KAAK;;;;EA8ZP;;;;;WAvfC,WAAA;AACC,UAAM,eAAe;AACrB,UAAM,UAAU;AAChB,UAAM,UAAU;AAChB,UAAM,QAAQ;AACd,UAAM,OAAO;AACb,UAAM,QAAQ;AACd,UAAM,SAAS;AACf,UAAM,QAAQ;AAEd,UAAM,UAAU;AAChB,UAAM,UAAU;AAChB,UAAM,QAAQ;AACd,UAAM,OAAO;AACb,UAAM,QAAQ;AACd,UAAM,SAAS;AACf,UAAM,QAAQ;AAGd,WAAK,YAAY,gBAAgB,CAAC;AAClC,WAAK,YAAY,YAAY,QAAQ;AACrC,WAAK,YAAY,mBAAmB;QACnC,eAAe;UACd,eAAe,KAAK,GAAG,YAAY;UACnC,UAAU,KAAK,GAAI,eAAe,OAAe;UACjD,UAAU,KAAK,GAAI,eAAe,OAAe;UACjD,QAAQ,KAAK,GAAI,eAAe,KAAa;UAC7C,OAAO,KAAK,GAAI,eAAe,IAAY;UAC3C,QAAQ,KAAK,GAAI,eAAe,KAAa;UAC7C,SAAS,KAAK,GAAI,eAAe,MAAc;UAC/C,QAAQ,KAAK,GAAI,eAAe,KAAa;;QAE9C,UAAU;UACT,UAAU,KAAK,GAAI,OAAe;UAClC,UAAU,KAAK,GAAI,UAAU,OAAe;UAC5C,QAAQ,KAAK,GAAI,UAAU,KAAa;UACxC,OAAO,KAAK,GAAI,UAAU,IAAY;UACtC,QAAQ,KAAK,GAAI,UAAU,KAAa;UACxC,SAAS,KAAK,GAAI,UAAU,MAAc;UAC1C,QAAQ,KAAK,GAAI,UAAU,KAAa;;QAEzC,UAAU;UACT,UAAU,KAAK,GAAI,OAAe;UAClC,QAAQ,KAAK,GAAI,UAAU,KAAa;UACxC,OAAO,KAAK,GAAI,UAAU,IAAY;UACtC,QAAQ,KAAK,GAAI,UAAU,KAAa;UACxC,SAAS,KAAK,GAAI,UAAU,MAAc;UAC1C,QAAQ,KAAK,GAAI,UAAU,KAAa;;QAEzC,QAAQ;UACP,QAAQ,KAAK,GAAI,KAAa;UAC9B,OAAO,KAAK,GAAI,QAAQ,IAAY;UACpC,QAAQ,KAAK,GAAI,QAAQ,KAAa;UACtC,SAAS,KAAK,GAAI,QAAQ,MAAc;UACxC,QAAQ,KAAK,GAAI,QAAQ,KAAa;;QAEvC,OAAO;UACN,OAAO,KAAK,GAAI,IAAY;UAC5B,QAAQ,KAAK,GAAI,OAAO,KAAa;UACrC,SAAS,KAAK,GAAI,OAAO,MAAc;UACvC,QAAQ,KAAK,GAAI,OAAO,KAAa;;QAEtC,QAAQ;UACP,QAAQ,KAAK,GAAI,KAAa;UAC9B,SAAS,KAAK,GAAI,QAAQ,MAAc;UACxC,QAAQ,KAAK,GAAI,QAAQ,KAAa;;QAEvC,SAAS;UACR,SAAS,KAAK,GAAI,MAAc;UAChC,QAAQ,KAAK,GAAI,SAAS,KAAa;;QAExC,QAAQ;UACP,QAAQ,KAAK,GAAG,KAAK;;OAEtB;AAED,aAAA,UAAM,aAAY,KAAA,IAAA;IACnB;;;;;;WAeA,WAAA;AACC,aAAA,UAAM,eAAc,KAAA,IAAA;IACrB;;;;;;WAaA,SAAc,OAAwB,QAAiB,MAAe;AAGrE,UAAI,WAAW,QAAQ,KAAK,IAAI,UAAU;AAG1C,UAAI,OAAO,WAAW,eAAe,WAAW,IAAI;AACnD,YAAI,KAAK,IAAI,gBAAgB,KAAK,MAAM;AACvC,mBAAS,KAAK,IAAI,gBAAgB;eAE9B;AACJ,mBAAS,KAAK,UAAU,AAAM,SAAS,KAAK,GAAG,QAAW,QAAQ;;;AAKpE,eAAS,AAAO,YAAY,MAAO;AAGnC,UAAI,OAAO,KAAK,YAAY,QAAQ,QAAQ;AAI5C,UAAI,SAAiB,OAAO,KAAK;AAGjC,UAAI;AACJ,UAAI,SAAS,KAAK,IAAI,cAAc,GAAG;AACtC,kBAAU,KAAK;iBAEP,SAAS,KAAK,IAAI,cAAc,GAAG;AAC3C,kBAAU,KAAK;aAEX;AACJ,kBAAU,KAAK;;AAKhB,UAAI,YAAY,KAAK,YAAY,QAAQ,OAAO;AAGhD,UAAI,QAAQ,UAAU,IAAI;AACzB,oBAAY,MAAM,QAAQ,QAAQ,MAAM,YAAY;;AAGrD,aAAO;IACR;;;;;;WAUA,SAAsB,QAAgB,MAAe;AAArD,UAAA,QAAA;AAUC,UAAI,WAAW,QAAQ,KAAK,IAAI,UAAU;AAG1C,UAAI,OAAO;QACV,YAAY;UACX,SAAS;UACT,YAAY;UACZ,SAAc,CAAA;UACd,UAAU;UACV,YAAY;UACZ,UAAU;UACV,YAAY;;QAEb,YAAY;UACX,SAAS;UACT,YAAY;UACZ,SAAc,CAAA;UACd,UAAU;UACV,YAAY;UACZ,UAAU;UACV,YAAY;;QAEb,QAAQ;UACP,SAAS;UACT,YAAY;UACZ,SAAc,CAAA;UACd,UAAU;UACV,YAAY;UACZ,UAAU;UACV,YAAY;;;AAKd,eAAS,OAAO,QAAQ,MAAY,YAAY;AAGhD,UAAI,QAAQ,OAAO,MAAM,GAAG;AAC5B,WAAK,SAAS,SAAS,MAAM;AAE7B,UAAI,OAAO,MAAM,OAAO,aAAa;AACpC,aAAK,OAAO,KAAK;aAEb;AACJ,aAAK,KAAK,SAAS,MAAM;;AAG1B,UAAI,OAAO,MAAM,OAAO,aAAa;AACpC,aAAK,WAAW,KAAK;aAEjB;AACJ,aAAK,SAAS,SAAS,MAAM;;AAI9B,MAAQ,MAAK,MAAM,SAAC,OAAO,MAAI;AAE9B,YAAI,KAAK,QAAQ;AAChB;;AAWD,YAAI,aAAqB,KAAK;AAG9B,YAAI,OAAwB,CAAA;AAC5B,eAAO,KAAK,OAAO,MAAM,eAAe;AACxC,YAAI,QAAQ,KAAK,UAAU,KAAK,OAAO,IAAI;AAC1C,uBAAa,KAAK,OAAO,OAAO,KAAK,GAAG,MAAM;AAC9C,eAAK,QAAQ,KAAK;;AAKnB,YAAI,SAAS,cAAc,MAAM,YAAY,IAAI;AACjD,iBAAS,IAAY,GAAG,IAAI,OAAO,QAAQ,KAAK;AAC/C,cAAI,QAAQ,OAAO;AAGnB,gBAAM,OAAO,MAAM,KAAK,QAAc,cAAc,GAAG;AAEvD,cAAI,MAAM,SAAS,SAAS;AAQ3B,gBAAI,MAAM,KAAK,MAAM,oBAAoB,GAAG;AAC3C,mBAAK,WAAW;AAChB,oBAAM,OAAO,MAAM,KAAK,QAAQ,wBAAwB,IAAI;;AAI7D,gBAAI,UAAU,MAAM,KAAK,MAAM,4CAA4C;AAE3E,gBAAI,SAAS;AAEZ,uBAAS,KAAI,GAAG,KAAI,QAAQ,QAAQ,MAAK;AAExC,oBAAI,QAAQ,OAAM,MAAM;AACvB,0BAAQ,MAAK,MAAK,aAAa,QAAQ;;AAExC,qBAAK,MAAM,KAAK,QAAQ,GAAE;AAC1B,sBAAM,OAAO,MAAM,KAAK,QAAQ,QAAQ,KAAU,WAAW;;;;AAMhE,eAAK,YAAY,MAAM;;AAWxB,aAAK,SAAS;MACf,CAAC;AAMD,aAAO;IACR;;;;;;WASA,SAAsB,OAAe,SAAY;AAGhD,UAAI,WAAW,CAAC,QAAQ,YAAa,QAAQ,KAAK,IAAI,cAAc;AACpE,cAAQ,KAAK,IAAI,KAAK;AAGtB,UAAI,SAAS,KAAK,YAAY,OAAO,QAAQ,QAAQ;AAGrD,UAAI,MAAM,QAAQ;AAGlB,eAAS,IAAI,GAAG,MAAM,QAAQ,MAAM,QAAQ,IAAI,KAAK,KAAK;AAGzD,YAAI,OAAO,QAAQ,MAAM;AACzB,YAAI,OAAO,KAAK,YAAY,KAAK,OAAO,GAAG,CAAC,CAAC;AAC7C,YAAI,SAAS,KAAK;AAGlB,YAAI,OAAO,KAAK,MAAM,SAAS,KAAK,cAAc,IAAK,CAAC;AACxD,cAAM,IAAI,QAAc,aAAa,AAAO,UAAU,MAAM,QAAQ,GAAG,CAAC;AAGxE,kBAAU,OAAO,KAAK,cAAc,IAAK;;AAI1C,UAAI,UAAU;AACb,cAAM,MAAM;;AAGb,aAAO;IACR;;;;;;WASA,SAAmB,OAAe,UAAkB;AACnD,aAAO,QAAQ,KAAK,cAAc,QAAQ;IAC3C;;;;;;WAEA,SAAsB,MAAY;AACjC,cAAQ;aACF;AACJ,iBAAO;aACH;AACJ,iBAAO;aACH;AACJ,iBAAO;aACH;AACJ,iBAAO;aACH;AACJ,iBAAO;aACH;AACJ,iBAAO;aACH;AACJ,iBAAO;aACH;AACJ,iBAAO;;AACR;IACF;;;;;;WAqBA,SAAiB,OAAe,UAAmB,UAAmB;AAGrE,UAAI,KAAK,IAAI,gBAAgB,KAAK,MAAM;AACvC,eAAO,KAAK,IAAI,gBAAgB;;AAIjC,UAAI,CAAC,UAAU;AACd,mBAAW,KAAK,IAAI,UAAU;;AAG/B,UAAI,YAAY,QAAQ,SAAS,UAAU;AAC1C,gBAAQ,KAAK,IAAI,KAAK;AACtB,mBAAW,KAAK,IAAI,QAAQ;AAC5B,YAAI,UAAU,KAAK,aAAa,KAAK,IAAI,OAAO,QAAQ,GAAG,QAAQ;AAGnE,eAAa,KAAK,IAAI,iBAAiB,EAAG,UAAW;aAEjD;AACJ,YAAI,OAAO,KAAK,aAAa,OAAO,QAAQ;AAC5C,eAAa,KAAK,IAAI,iBAAiB,EAAG,UAAW;;IAGvD;;;;;;WAUA,SAAoB,OAAe,UAAmB;AAGrD,UAAI,CAAC,UAAU;AACd,mBAAW,KAAK,IAAI,UAAU;;AAI/B,UAAI;AACJ,UAAI,KAAK,KAAK,gBAAgB,OAAO,QAAQ;AAC7C,MAAQ,cAAa,KAAK,eAAc,GAAI,SAAC,KAAK,KAAG;AACpD,YAAI,OAAO,YAAY,aAAa;AACnC,cAAI,MAAM,KAAK;AACf,cAAI,OAAO,GAAG;AACb,gBAAI,CAAC,aAAa;AACjB,4BAAc;;AAEf,mBAAO;;AAER,wBAAc;;AAEf,eAAO;MACR,CAAC;AAED,aAAO;IACR;;;;;;WASA,SAAuB,OAAe,UAAmB;AAGxD,UAAI,CAAC,UAAU;AACd,mBAAW,KAAK,IAAI,UAAU;;AAG/B,aAAO,QAAQ,KAAK,cAAc,QAAS;IAC5C;;;;;;WAEA,SAAwB,UAAkB;AACzC,aAAO,KAAK,eAAc,EAAG;IAC9B;;;;;;WAEA,WAAA;AACC,aAAO;QACN,eAAe;QACf,UAAU;QACV,UAAU;QACV,QAAQ;QACR,OAAO;QACP,QAAQ;QACR,SAAS;QACT,QAAQ;;IAEV;;AAED,SAAA;AAAA,EA3fuC,MAAM;;;ACJ7C,IAAA,aAAe;EACd,kBAAkB;EAMlB,qBAAqB;EACrB,sBAAsB;EAUtB,wBAAwB;EACxB,wBAAwB;EACxB,wBAAwB;EACxB,yBAAyB;EACzB,yBAAyB;EACzB,yBAAyB;EACzB,yBAAyB;EACzB,yBAAyB;EAEzB,0BAA0B;EAC1B,0BAA0B;EAC1B,0BAA0B;EAC1B,2BAA2B;EAC3B,2BAA2B;EAC3B,2BAA2B;EAC3B,2BAA2B;EAC3B,2BAA2B;EAE3B,kBAAkB;EAClB,mBAAmB;EACnB,mBAAmB;EACnB,mBAAmB;EACnB,mBAAmB;EACnB,mBAAmB;EAanB,SAAS;EACT,qBAAqB;EACrB,0BAA0B;EAC1B,gBAAgB;EAChB,qBAAqB;EACrB,gBAAgB;EAChB,qBAAqB;EACrB,cAAc;EACd,mBAAmB;EACnB,aAAa;EACb,kBAAkB;EAClB,cAAc;EACd,mBAAmB;EACnB,eAAe;EACf,oBAAoB;EACpB,cAAc;EAuBd,yBAAyB;EACzB,gCAAgC;EAChC,gCAAgC;EAChC,8BAA8B;EAC9B,6BAA6B;EAC7B,8BAA8B;EAC9B,+BAA+B;EAC/B,8BAA8B;EAE9B,oBAAoB;EACpB,2BAA2B;EAC3B,yBAAyB;EACzB,wBAAwB;EACxB,yBAAyB;EACzB,0BAA0B;EAC1B,yBAAyB;EAEzB,oBAAoB;EACpB,yBAAyB;EACzB,wBAAwB;EACxB,yBAAyB;EACzB,0BAA0B;EAC1B,yBAAyB;EAEzB,kBAAkB;EAClB,sBAAsB;EACtB,uBAAuB;EACvB,wBAAwB;EACxB,uBAAuB;EAEvB,iBAAiB;EACjB,sBAAsB;EACtB,uBAAuB;EACvB,sBAAsB;EAEtB,kBAAkB;EAClB,wBAAwB;EACxB,uBAAuB;EAEvB,mBAAmB;EACnB,wBAAwB;EAExB,kBAAkB;EAGlB,WAAW;EACX,WAAW;EAUX,KAAK;EACL,KAAK;EACL,MAAM;EACN,MAAM;EACN,QAAQ;EACR,QAAQ;EAoBR,WAAW;EACX,YAAY;EACZ,SAAS;EACT,SAAS;EACT,OAAO;EACP,QAAQ;EACR,QAAQ;EACR,UAAU;EACV,aAAa;EACb,WAAW;EACX,YAAY;EACZ,YAAY;EACZ,OAAO;EACP,OAAO;EACP,OAAO;EACP,OAAO;EACP,cAAc;EACd,OAAO;EACP,OAAO;EACP,OAAO;EACP,OAAO;EACP,OAAO;EACP,OAAO;EACP,OAAO;EAGP,UAAU;EACV,UAAU;EACV,WAAW;EACX,aAAa;EACb,YAAY;EACZ,UAAU;EACV,YAAY;EACZ,OAAO;EACP,OAAO;EACP,OAAO;EACP,OAAO;EACP,OAAO;EACP,OAAO;EACP,OAAO;EAWP,YAAY,SAAS,KAAW;AAC/B,QAAI,MAAM;AACV,QAAK,MAAM,MAAQ,MAAM,IAAK;AAC7B,cAAQ,MAAM;aACR;AACJ,gBAAM;AACN;aACI;AACJ,gBAAM;AACN;aACI;AACJ,gBAAM;AACN;;;AAGH,WAAO;EACR;EAIA,YAAY;EAGZ,QAAQ;EACR,QAAQ;EAGR,UAAU;EAGV,yBAAyB;EAGzB,WAAW;EAIX,QAAQ;EAKR,SAAS;EACT,gBAAgB;EAChB,aAAa;EACb,aAAa;EACb,eAAe;EACf,eAAe;EACf,kBAAkB;EAClB,gBAAgB;EAChB,iBAAiB;EACjB,iBAAiB;EACjB,uBAAuB;EACvB,gBAAgB;EAKhB,UAAU;EACV,sBAAsB;EACtB,eAAe;EACf,iBAAiB;EACjB,eAAe;EACf,oBAAoB;EACpB,iBAAiB;EACjB,kBAAkB;EAClB,cAAc;EAGd,OAAO;EACP,0BAA0B;EAC1B,2BAA2B;EAC3B,qCAAqC;EACrC,+DAA+D;EAY/D,UAAU;EACV,SAAS;EACT,QAAQ;EACR,SAAS;EACT,6CAA6C;EAC7C,uBAAuB;EACvB,yBAAyB;EACzB,gCAAgC;EAChC,qCAAqC;EACrC,yBAAyB;EACzB,gFAAgF;EAChF,cAAc;EACd,OAAO;EACP,OAAO;EACP,OAAO;EACP,OAAO;EACP,OAAO;EACP,QAAQ;EACR,OAAO;EACP,QAAQ;EACR,QAAQ;EAYR,+EAA+E;EAC/E,+CAA+C;EAC/C,oDAAoD;EACpD,qDAAqD;EACrD,yEAAyE;EACzE,4CAA4C;EAC5C,kDAAkD;EAClD,kDAAkD;EAClD,iBAAiB;EACjB,WAAW;EACX,SAAS;EAGT,oCAAoC;EACpC,0BAA0B;EAC1B,2BAA2B;EAC3B,gBAAgB;EAGhB,SAAS;EACT,YAAY;;;;AClIb,IAAA,WAAA,SAAA,QAAA;AAA8B,YAAA,WAAA,MAAA;AAA9B,uBAAA;;EAgGA;;;;;WA5FC,WAAA;AACC,WAAK,WAAW,iBAAiB,UAAE;AACnC,aAAA,UAAM,aAAY,KAAA,IAAA;IACnB;;;;;;WAEA,SAAoD,QAAa,QAAgB;AAAE,UAAA,OAAA,CAAA;eAAA,KAAA,GAAA,KAAA,UAAA,QAAA,MAAsB;AAAtB,aAAA,KAAA,KAAA,UAAA;;AAGlF,UAAI,CAAC,QAAQ;AACZ,iBAAS,KAAK,MAAM,UAAU,KAAK,WAAW,eAAe;;AAI9D,UAAI,cAAsB;AAC1B,UAAI,QAAQ,OAAO;AAGnB,UAAI,UAAU,MAAM;AACnB,sBAAc;iBAEN,SAAS,MAAM;AAEvB,YAAI,OAAO;AACV,wBAAsB;;iBAGf,WAAW,KAAK,WAAW,eAAe,GAAG;AAErD,eAAO,KAAK,UAAS,MAAd,MAAI,cAAA,CAAW,QAAQ,KAAK,WAAW,eAAe,CAAC,GAAA,OAAK,IAAI,GAAA,KAAA,CAAA;;AAIxE,UAAI,KAAK,QAAQ;AAChB,iBAAS,MAAM,KAAK,QAAQ,IAAI,GAAG,IAAI,KAAK,EAAE,GAAG;AAChD,wBAAc,YAAY,MAAM,MAAO,KAAI,EAAE,EAAE,KAAK,KAAK,EAAE;;;AAK7D,aAAO;IACR;;;;;;WAEA,SAAoB,QAAgB,QAAgB;AAAE,UAAA,OAAA,CAAA;eAAA,KAAA,GAAA,KAAA,UAAA,QAAA,MAAsB;AAAtB,aAAA,KAAA,KAAA,UAAA;;AACrD,aAAO,KAAK,UAAS,MAAd,MAAI,cAAA,CAAgB,QAAQ,MAAM,GAAA,OAAK,IAAI,GAAA,KAAA,CAAA;IACnD;;;;;;WAEA,SAAyB,QAAgB,aAAqB,QAAgB;AAC7E,UAAM,eAAe,UAAU,KAAK,MAAM;AACpC,mBAAc,UAAU;IAC/B;;;;;;WAEA,SAAyD,QAAa,QAAgB;AAAE,UAAA,OAAA,CAAA;eAAA,KAAA,GAAA,KAAA,UAAA,QAAA,MAAsB;AAAtB,aAAA,KAAA,KAAA,UAAA;;AACvF,UAAI,cAAc,KAAK,UAAS,MAAd,MAAI,cAAA,CAAW,QAAQ,MAAM,GAAA,OAAK,IAAI,GAAA,KAAA,CAAA;AACxD,aAAO,eAAe,SAAS,KAAK;IACrC;;;;;;WAEA,SAAyD,QAAa,QAAgB;AAErF,UAAU,KAAK,MAAM,OAAQ,SAAS;AACrC,eAAa,KAAK,MAAM,OAAQ;;AAIjC,UAAI,WAAW,KAAK,WAAW,eAAe,GAAG;AAChD,eAAO,KAAK,cAAc,QAAQ,KAAK,WAAW,eAAe,CAAC;;AAInE,aAAO,WAAA;AACN,eAAO;MACR;IACD;;;;;;WAEA,SAAuD,MAAkB,QAAgB;AAAzF,UAAA,QAAA;AAEC,UAAI,CAAC,KAAK,UAAS,GAAI;AACtB,eAAO,AAAO,IAAI,MAAM,SAAC,IAAC;AAAK,iBAAA,MAAK,UAAU,IAAG,MAAM;QAAxB,CAAyB;aAElD;AACN,eAAO;;IAET;;;;;;WAOA,WAAA;AACC,aAAO,KAAK,WAAW,eAAe,MAAM,KAAK,MAAM;IACxD;;AAED,SAAA;AAAA,EAhG8B,MAAM;;;AC/PpC,IAAA,SAAA,WAAA;AAQC,mBAAY,IAAO,GAAO,GAAO,GAAO,IAAQ,IAAM;AAA1C,QAAA,OAAA,QAAA;AAAA,WAAA;IAAK;AAAE,QAAA,MAAA,QAAA;AAAA,UAAA;IAAK;AAAE,QAAA,MAAA,QAAA;AAAA,UAAA;IAAK;AAAE,QAAA,MAAA,QAAA;AAAA,UAAA;IAAK;AAAE,QAAA,OAAA,QAAA;AAAA,WAAA;IAAM;AAAE,QAAA,OAAA,QAAA;AAAA,WAAA;IAAM;AAPtD,WAAA,eAAA,MAAA,KAAA;;;;;;AACA,WAAA,eAAA,MAAA,KAAA;;;;;;AACA,WAAA,eAAA,MAAA,KAAA;;;;;;AACA,WAAA,eAAA,MAAA,KAAA;;;;;;AACA,WAAA,eAAA,MAAA,MAAA;;;;;;AACA,WAAA,eAAA,MAAA,MAAA;;;;;;AAGC,SAAK,IAAI;AACT,SAAK,IAAI;AACT,SAAK,IAAI;AACT,SAAK,IAAI;AACT,SAAK,KAAK;AACV,SAAK,KAAK;EACX;;;;;WAKA,SAAa,IAAW,IAAW,QAAgB,QAAgB,UAAkB,OAAiB;AAAjB,UAAA,UAAA,QAAA;AAAA,gBAAA;MAAiB;AACrG,WAAK,IAAI,KAAK,IAAI,QAAQ,IAAI;AAC9B,WAAK,IAAI,KAAK,IAAI,QAAQ,IAAI;AAC9B,WAAK,IAAI,CAAC,KAAK,IAAI,QAAQ,IAAI;AAC/B,WAAK,IAAI,KAAK,IAAI,QAAQ,IAAI;AAC9B,WAAK,KAAK,KAAM,UAAS,KAAK,IAAM,SAAS,KAAK;AAClD,WAAK,KAAK,KAAM,UAAS,KAAK,IAAM,SAAS,KAAK;IACnD;;;;;;WAMA,SAAM,QAAc;AACnB,aAAO;QACN,GAAI,KAAK,IAAI,OAAO,IAAM,KAAK,IAAI,OAAO,IAAK,KAAK;QACpD,GAAI,KAAK,IAAI,OAAO,IAAM,KAAK,IAAI,OAAO,IAAK,KAAK;;IAEtD;;;;;;WAMA,SAAa,QAAc;AAC1B,UAAM,KAAK,IAAM,MAAK,IAAI,KAAK,IAAM,KAAK,IAAI,CAAC,KAAK;AAEpD,aAAO;QACN,GAAI,KAAK,IAAI,KAAK,OAAO,IAAM,CAAC,KAAK,IAAI,KAAK,OAAO,IAAQ,MAAK,KAAK,KAAK,IAAM,KAAK,KAAK,KAAK,KAAM;QACvG,GAAI,KAAK,IAAI,KAAK,OAAO,IAAM,CAAC,KAAK,IAAI,KAAK,OAAO,IAAQ,EAAC,KAAK,KAAK,KAAK,IAAM,KAAK,KAAK,KAAK,KAAM;;IAE1G;;;;;;WAKA,SAAO,QAAc;AACpB,UAAM,KAAK,KAAK;AAChB,UAAM,KAAK,KAAK;AAChB,UAAM,KAAK,KAAK;AAChB,UAAM,KAAK,KAAK;AAChB,WAAK,IAAK,OAAO,IAAI,KAAO,OAAO,IAAI;AACvC,WAAK,IAAK,OAAO,IAAI,KAAO,OAAO,IAAI;AACvC,WAAK,IAAK,OAAO,IAAI,KAAO,OAAO,IAAI;AACvC,WAAK,IAAK,OAAO,IAAI,KAAO,OAAO,IAAI;AACvC,WAAK,KAAM,OAAO,KAAK,KAAO,OAAO,KAAK,KAAM,KAAK;AACrD,WAAK,KAAM,OAAO,KAAK,KAAO,OAAO,KAAK,KAAM,KAAK;IACtD;;;;;;WAKA,SAAQ,QAAc;AACrB,UAAM,MAAM,KAAK;AACjB,UAAI,OAAO,MAAM,KAAK,OAAO,MAAM,KAAK,OAAO,MAAM,KAAK,OAAO,MAAM,GAAG;AACzE,YAAM,KAAK,KAAK;AAChB,YAAM,KAAK,KAAK;AAChB,aAAK,IAAK,KAAK,OAAO,IAAM,KAAK,IAAI,OAAO;AAC5C,aAAK,IAAK,KAAK,OAAO,IAAM,KAAK,IAAI,OAAO;AAC5C,aAAK,IAAK,KAAK,OAAO,IAAM,KAAK,IAAI,OAAO;AAC5C,aAAK,IAAK,KAAK,OAAO,IAAM,KAAK,IAAI,OAAO;;AAE7C,WAAK,KAAM,MAAM,OAAO,IAAM,KAAK,KAAK,OAAO,IAAK,OAAO;AAC3D,WAAK,KAAM,MAAM,OAAO,IAAM,KAAK,KAAK,OAAO,IAAK,OAAO;IAC5D;;;;;;WAKA,SAAS,QAAc;AACtB,WAAK,IAAI,OAAO;AAChB,WAAK,IAAI,OAAO;AAChB,WAAK,IAAI,OAAO;AAChB,WAAK,IAAI,OAAO;AAChB,WAAK,KAAK,OAAO;AACjB,WAAK,KAAK,OAAO;IAClB;;AACD,SAAA;AAAA,EAjGA;;;AC/BA,IAAI,iBAAiB,WAAY;AAAE,yBAAuB,KAAK,GAAG;AAAE,QAAI,OAAO,CAAC;AAAG,QAAI,KAAK;AAAM,QAAI,KAAK;AAAO,QAAI,KAAK;AAAW,QAAI;AAAE,eAAS,KAAK,IAAI,OAAO,UAAU,GAAG,IAAI,CAAE,MAAM,MAAK,GAAG,KAAK,GAAG,OAAO,KAAK,MAAM;AAAE,aAAK,KAAK,GAAG,KAAK;AAAG,YAAI,KAAK,KAAK,WAAW;AAAG;AAAA,MAAO;AAAA,IAAE,SAAS,KAAP;AAAc,WAAK;AAAM,WAAK;AAAA,IAAK,UAAE;AAAU,UAAI;AAAE,YAAI,CAAC,MAAM,GAAG;AAAW,aAAG,UAAU;AAAA,MAAG,UAAE;AAAU,YAAI;AAAI,gBAAM;AAAA,MAAI;AAAA,IAAE;AAAE,WAAO;AAAA,EAAM;AAAE,SAAO,SAAU,KAAK,GAAG;AAAE,QAAI,MAAM,QAAQ,GAAG,GAAG;AAAE,aAAO;AAAA,IAAK,WAAW,OAAO,YAAY,OAAO,GAAG,GAAG;AAAE,aAAO,cAAc,KAAK,CAAC;AAAA,IAAG,OAAO;AAAE,YAAM,IAAI,UAAU,sDAAsD;AAAA,IAAG;AAAA,EAAE;AAAG,EAAE;AAEtpB,IAAI,MAAM,KAAK,KAAK;AAEpB,IAAI,eAAe,uBAAsB,MAAM,IAAI,IAAI,QAAQ,QAAQ,SAAS,SAAS;AACvF,MAAI,KAAI,KAAK,GACT,KAAI,KAAK;AAEb,QAAK;AACL,QAAK;AAEL,MAAI,KAAK,SAAS,KAAI,SAAS;AAC/B,MAAI,KAAK,SAAS,KAAI,SAAS;AAE/B,SAAO;AAAA,IACL,GAAG,KAAK;AAAA,IACR,GAAG,KAAK;AAAA,EACV;AACF;AAEA,IAAI,gBAAgB,wBAAuB,MAAM,MAAM;AAGrD,MAAI,KAAI,SAAS,qBAAqB,iBAAiB,SAAS,sBAAsB,kBAAkB,IAAI,IAAI,KAAK,IAAI,OAAO,CAAC;AAEjI,MAAI,KAAK,KAAK,IAAI,IAAI;AACtB,MAAI,KAAK,KAAK,IAAI,IAAI;AACtB,MAAI,KAAK,KAAK,IAAI,OAAO,IAAI;AAC7B,MAAI,KAAK,KAAK,IAAI,OAAO,IAAI;AAE7B,SAAO,CAAC;AAAA,IACN,GAAG,KAAK,KAAK;AAAA,IACb,GAAG,KAAK,KAAK;AAAA,EACf,GAAG;AAAA,IACD,GAAG,KAAK,KAAK;AAAA,IACb,GAAG,KAAK,KAAK;AAAA,EACf,GAAG;AAAA,IACD,GAAG;AAAA,IACH,GAAG;AAAA,EACL,CAAC;AACH;AAEA,IAAI,cAAc,sBAAqB,IAAI,IAAI,IAAI,IAAI;AACrD,MAAI,QAAO,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK;AAExC,MAAI,MAAM,KAAK,KAAK,KAAK;AAEzB,MAAI,MAAM,GAAG;AACX,UAAM;AAAA,EACR;AAEA,MAAI,MAAM,IAAI;AACZ,UAAM;AAAA,EACR;AAEA,SAAO,QAAO,KAAK,KAAK,GAAG;AAC7B;AAEA,IAAI,eAAe,uBAAsB,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,cAAc,WAAW,QAAQ,QAAQ,KAAK,KAAK;AAClH,MAAI,OAAO,KAAK,IAAI,IAAI,CAAC;AACzB,MAAI,OAAO,KAAK,IAAI,IAAI,CAAC;AACzB,MAAI,QAAQ,KAAK,IAAI,KAAK,CAAC;AAC3B,MAAI,QAAQ,KAAK,IAAI,KAAK,CAAC;AAE3B,MAAI,WAAW,OAAO,OAAO,OAAO,QAAQ,OAAO;AAEnD,MAAI,WAAW,GAAG;AAChB,eAAW;AAAA,EACb;AAEA,cAAY,OAAO,QAAQ,OAAO;AAClC,aAAW,KAAK,KAAK,QAAQ,IAAK,kBAAiB,YAAY,KAAK;AAEpE,MAAI,WAAW,WAAW,KAAK,KAAK;AACpC,MAAI,WAAW,WAAW,CAAC,KAAK,KAAK;AAErC,MAAI,UAAU,SAAS,WAAW,SAAS,WAAY,MAAK,MAAM;AAClE,MAAI,UAAU,SAAS,WAAW,SAAS,WAAY,MAAK,MAAM;AAElE,MAAI,MAAO,OAAM,YAAY;AAC7B,MAAI,MAAO,OAAM,YAAY;AAC7B,MAAI,MAAO,EAAC,MAAM,YAAY;AAC9B,MAAI,MAAO,EAAC,MAAM,YAAY;AAE9B,MAAI,OAAO,YAAY,GAAG,GAAG,KAAK,GAAG;AACrC,MAAI,OAAO,YAAY,KAAK,KAAK,KAAK,GAAG;AAEzC,MAAI,cAAc,KAAK,OAAO,GAAG;AAC/B,YAAQ;AAAA,EACV;AAEA,MAAI,cAAc,KAAK,OAAO,GAAG;AAC/B,YAAQ;AAAA,EACV;AAEA,SAAO,CAAC,SAAS,SAAS,MAAM,IAAI;AACtC;AAEA,IAAI,cAAc,sBAAqB,OAAO;AAC5C,MAAI,KAAK,MAAM,IACX,KAAK,MAAM,IACX,KAAK,MAAM,IACX,KAAK,MAAM,IACX,KAAK,MAAM,IACX,KAAK,MAAM,IACX,sBAAsB,MAAM,eAC5B,gBAAgB,wBAAwB,SAAY,IAAI,qBACxD,qBAAqB,MAAM,cAC3B,eAAe,uBAAuB,SAAY,IAAI,oBACtD,kBAAkB,MAAM,WACxB,YAAY,oBAAoB,SAAY,IAAI;AAEpD,MAAI,SAAS,CAAC;AAEd,MAAI,OAAO,KAAK,OAAO,GAAG;AACxB,WAAO,CAAC;AAAA,EACV;AAEA,MAAI,SAAS,KAAK,IAAI,gBAAgB,MAAM,GAAG;AAC/C,MAAI,SAAS,KAAK,IAAI,gBAAgB,MAAM,GAAG;AAE/C,MAAI,MAAM,SAAU,MAAK,MAAM,IAAI,SAAU,MAAK,MAAM;AACxD,MAAI,MAAM,CAAC,SAAU,MAAK,MAAM,IAAI,SAAU,MAAK,MAAM;AAEzD,MAAI,QAAQ,KAAK,QAAQ,GAAG;AAC1B,WAAO,CAAC;AAAA,EACV;AAEA,OAAK,KAAK,IAAI,EAAE;AAChB,OAAK,KAAK,IAAI,EAAE;AAEhB,MAAI,SAAS,KAAK,IAAI,KAAK,CAAC,IAAI,KAAK,IAAI,IAAI,CAAC,IAAI,KAAK,IAAI,KAAK,CAAC,IAAI,KAAK,IAAI,IAAI,CAAC;AAEnF,MAAI,SAAS,GAAG;AACd,UAAM,KAAK,KAAK,MAAM;AACtB,UAAM,KAAK,KAAK,MAAM;AAAA,EACxB;AAEA,MAAI,gBAAgB,aAAa,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,cAAc,WAAW,QAAQ,QAAQ,KAAK,GAAG,GACtG,iBAAiB,eAAe,eAAe,CAAC,GAChD,UAAU,eAAe,IACzB,UAAU,eAAe,IACzB,OAAO,eAAe,IACtB,OAAO,eAAe;AAQ1B,MAAI,QAAQ,KAAK,IAAI,IAAI,IAAK,OAAM;AACpC,MAAI,KAAK,IAAI,IAAM,KAAK,IAAI,MAAW;AACrC,YAAQ;AAAA,EACV;AAEA,MAAI,WAAW,KAAK,IAAI,KAAK,KAAK,KAAK,GAAG,CAAC;AAE3C,UAAQ;AAER,WAAS,IAAI,GAAG,IAAI,UAAU,KAAK;AACjC,WAAO,KAAK,cAAc,MAAM,IAAI,CAAC;AACrC,YAAQ;AAAA,EACV;AAEA,SAAO,OAAO,IAAI,SAAU,OAAO;AACjC,QAAI,gBAAgB,aAAa,MAAM,IAAI,IAAI,IAAI,QAAQ,QAAQ,SAAS,OAAO,GAC/E,KAAK,cAAc,GACnB,KAAK,cAAc;AAEvB,QAAI,iBAAiB,aAAa,MAAM,IAAI,IAAI,IAAI,QAAQ,QAAQ,SAAS,OAAO,GAChF,KAAK,eAAe,GACpB,KAAK,eAAe;AAExB,QAAI,iBAAiB,aAAa,MAAM,IAAI,IAAI,IAAI,QAAQ,QAAQ,SAAS,OAAO,GAChF,KAAI,eAAe,GACnB,KAAI,eAAe;AAEvB,WAAO,EAAE,IAAQ,IAAQ,IAAQ,IAAQ,GAAG,IAAG,GAAG,GAAE;AAAA,EACtD,CAAC;AACH;AAEA,IAAO,kBAAQ;;;AC7Jf,mBAAmB,MAAc,QAAgB,UAAgB;AAChE,MAAI,WAAW,UAAU;AACxB,UAAM,IAAI,MAAM,cAAc,WAAW,oBAAoB,OAAO,cAAc,MAAM;;AAE1F;AAKA,sBAAsB,MAAc,QAAgB,UAAgB;AACnE,MAAI,SAAS,UAAU;AACtB,UAAM,IAAI,MAAM,uBAAuB,WAAW,oBAAoB,OAAO,cAAc,MAAM;;AAEnG;AAKA,uBAAuB,MAAc,QAAgB,UAAgB;AACpE,eAAa,MAAM,QAAQ,QAAQ;AAEnC,MAAK,SAAS,aAAc,GAAG;AAC9B,UAAM,IAAI,MAAM,mBAAmB,OAAO,0BAA0B,QAAQ;;AAE9E;AAKA,sBAAsB,OAAa;AAClC,MAAI,UAAU,KAAK,UAAU,GAAG;AAC/B,WAAO;SAED;AACN,UAAM,IAAI,MAAM,qBAAqB;;AAEvC;AA2CA,sBAAsB,IAAU;AAC/B,MAAM,MAAM,CAAC,GAAG,GAAG,CAAC;AACpB,WAAS,IAAI,GAAG,IAAI,IAAI,KAAK;AAC5B,QAAI,IAAI,OAAO;AACf,QAAI,IAAI,MAAM,KAAK;AACnB,WAAO;;AAER,SAAQ,KAAI,KAAK,KAAM,KAAI,MAAM,KAAM,KAAI,MAAM;AAClD;AAKA,qBAAqB,WAAgC,GAA2C;AAC/F,aAAU;AACT,QAAI,UAAU,aAAa;AAC1B,UAAI,CAAC,EAAE,SAAS,GAAG;AAClB;;;AAIF,QAAI,UAAU,SAAS;AACtB,kBAAY,UAAU;WAEhB;AACN;;;AAGH;AAMA,wBAAwB,SAAsB,MAAc,GAAwC;AACnG,SAAO,AAAO,iBAAiB,SAAS,AAAO,iBAAiB,IAAI,GAAG,SAAC,OAA8B;AACrG,QAAI,UAAgB,MAAO;AAC3B,QAAI,SAAS;AACZ,UAAI,QAAQ,UAAU,GAAG;AACxB,kBAAgB,MAAO;;AAGxB,QAAE,AAAO,KAAgB,OAAO,CAAC;WAE3B;AACN,QAAE,CAAa,KAAK,CAAC;;EAEvB,CAAC;AACF;AAKA,mBAAmB,OAAuB;AACzC,MAAM,SAAS,SAAS,cAAc,QAAQ;AAC9C,SAAO,QAAQ;AACf,SAAO,SAAS;AAChB,MAAM,UAAU,OAAO,WAAW,IAAI;AACtC,UAAQ,UAAU,OAAO,GAAG,GAAG,GAAG,CAAC;AAEnC,MAAI;AACH,YAAQ,aAAa,GAAG,GAAG,GAAG,CAAC;AAC/B,WAAO;WAED,KAAP;AACC,YAAQ,KAAK,YAAa,MAAM,MAAM,0KAA2K;AACjN,WAAO;;AAET;AAOA,qBAAqB,MAAuB;AAC3C,OAAK,QAAQ;AACb,OAAK,SAAS;AACd,OAAK,MAAM,QAAQ;AACnB,OAAK,MAAM,SAAS;AACrB;AAKA,IAAA,cAAA,WAAA;AAAA,0BAAA;AACC,WAAA,eAAA,MAAA,MAAA;;;;aAAuB;;AACvB,WAAA,eAAA,MAAA,MAAA;;;;aAAuB;;EAiBxB;AAfC,SAAA,eAAI,aAAA,WAAA,KAAC;SAAL,WAAA;AACC,aAAO,KAAK;IACb;SAMA,SAAM,OAAa;AAClB,WAAK,KAAK;IACX;;;;AANA,SAAA,eAAI,aAAA,WAAA,KAAC;SAAL,WAAA;AACC,aAAO,KAAK;IACb;SAMA,SAAM,OAAa;AAClB,WAAK,KAAK;IACX;;;;AACD,SAAA;AAAA,EAnBA;AAwBA,IAAA,sBAAA,SAAA,QAAA;AAAyC,YAAA,sBAAA,MAAA;AAqCxC,gCAAY,UAAwB;AAApC,QAAA,QACC,OAAA,KAAA,IAAA,KAAO;AArCR,WAAA,eAAA,OAAA,UAAA;;;;;;AAEA,WAAA,eAAA,OAAA,QAAA;;;;aAAqC;;AACrC,WAAA,eAAA,OAAA,WAAA;;;;aAA0B;;AAC1B,WAAA,eAAA,OAAA,cAAA;;;;aAA8B;;AAC9B,WAAA,eAAA,OAAA,eAAA;;;;aAA8B;;AAC9B,WAAA,eAAA,OAAA,YAAA;;;;aAA2B;;AAC3B,WAAA,eAAA,OAAA,aAAA;;;;aAA4B;;AAC5B,WAAA,eAAA,OAAA,eAAA;;;;aAA8B;;AAC9B,WAAA,eAAA,OAAA,cAAA;;;;aAA6B;;AAC7B,WAAA,eAAA,OAAA,cAAA;;;;aAA6B;;AAC7B,WAAA,eAAA,OAAA,SAAA;;;;aAAuB;;AACvB,WAAA,eAAA,OAAA,iBAAA;;;;aAA+B;;AAC/B,WAAA,eAAA,OAAA,SAAA;;;;aAAuB;;AACvB,WAAA,eAAA,OAAA,SAAA;;;;aAAuB;;AACvB,WAAA,eAAA,OAAA,KAAA;;;;aAAmB;;AACnB,WAAA,eAAA,OAAA,KAAA;;;;aAAmB;;AACnB,WAAA,eAAA,OAAA,SAAA;;;;aAA4B,IAAI,YAAW;;AAE3C,WAAA,eAAA,OAAA,UAAA;;;;;;AAEA,WAAA,eAAA,OAAA,mBAAA;;;;;;AACA,WAAA,eAAA,OAAA,wBAAA;;;;;;AAEA,WAAA,eAAA,OAAA,gBAAA;;;;aAA8B,IAAI,OAAM;;AACxC,WAAA,eAAA,OAAA,WAAA;;;;aAAyB,IAAI,OAAM;;AAEnC,WAAA,eAAA,OAAA,YAAA;;;;aAA6B,IAAI,OAAM;;AAEvC,WAAA,eAAA,OAAA,aAAA;;;;;;AACA,WAAA,eAAA,OAAA,WAAA;;;;;;AAEA,WAAA,eAAA,OAAA,gBAAA;;;;;;AACA,WAAA,eAAA,OAAA,WAAA;;;;;;AACA,WAAA,eAAA,OAAA,YAAA;;;;;;AAIC,UAAK,YAAY;;EAClB;;;;;WAEA,WAAA;AACC,WAAK,UAAU,cAAc,IAAI;IAClC;;;;;;WAEA,WAAA;AACC,aAAO,KAAK,SAAQ,EAAG;IACxB;;;;;;WAEA,WAAA;AACC,UAAI,OAA4B;AAEhC,iBAAU;AACT,YAAI,KAAK,QAAQ;AAChB,iBAAO,KAAK;mBAEF,KAAK,SAAS;AACxB,iBAAO,KAAK;eAEN;AACN,iBAAO,KAAK,UAAU;;;IAGzB;;;;;;WAEA,SAAgB,OAA2B,SAAuB;AAAvB,UAAA,YAAA,QAAA;AAAA,kBAAA;MAAuB;AACjE,UAAI,SAAS,MAAM;AAClB,aAAK,SAAS;aAER;AACN,aAAK,SAAS,KAAK,UAAU,SAAS,OAAO,OAAO;AACpD,aAAK,OAAO,UAAU;AACtB,YAAI,KAAK,SAAS;AACjB,eAAK,QAAQ,mBAAmB,KAAK,MAAM;;;IAG9C;;;;;;WAEA,WAAA;AACC,WAAK,SAAQ,EAAG,QAAQ;IACzB;;;;;;WAEA,WAAA;AACC,WAAK,iBAAgB;IACtB;;;;;;WAEA,WAAA;AACC,WAAK,eAAe;IACrB;;;;;;WAEA,SAAkB,SAAgB;IAAU;;;;;;WAE5C,WAAA;AACC,UAAI,KAAK,aAAa,QAAW;AAChC,aAAK,WAAW,KAAK,UAAU,QAAQ,IAAI;;AAG5C,aAAO,KAAK;IACb;;;;;;WAEA,WAAA;AACC,aAAO,KAAK,YAAY,SAAU,MAAK,eAAe,KAAK,UAAU,oBAAoB;IAC1F;;;;;;WAEA,WAAA;AACC,aAAO,KAAK,eAAc;IAC3B;;;;;;WAEA,SAAgB,OAA0B;AACzC,iBAAU;AACT,YAAI,UAAU,MAAM;AACnB,iBAAO;mBAEG,MAAM,SAAS;AACzB,kBAAQ,MAAM;eAER;AACN,iBAAO;;;IAGV;;;;;;WAEA,SAAS,QAAa;AACrB,aAAO,KAAK,QAAQ,MAAM,MAAK;IAChC;;;;;;WAEA,SAAQ,QAAa;AACpB,aAAO,KAAK,QAAQ,aAAa,MAAK;IACvC;;;;;;WAEA,WAAA;AACC,WAAK,SAAS,aAAa,GAAG,GAAG,KAAK,MAAM,GAAG,KAAK,MAAM,GAAG,KAAK,QAAQ,KAAK,KAAK,KAAK,KAAK,KAAK;AACnG,aAAO,KAAK;IACb;;;;;;WAEA,WAAA;AACC,UAAI,CAAC,KAAK,cAAc;AAEvB,YAAM,KAAK;AACX,aAAK,eAAe;UACnB,MAAM;UACN,KAAK;UACL,OAAO,CAAC;UACR,QAAQ,CAAC;;AAGV,aAAK,WAAW,KAAK,YAAY;;AAElC,aAAO,KAAK;IACb;;;;;;WAEA,SAAkB,QAAe;AAChC,WAAK,WAAU;AAEf,UAAM,SAAS,KAAK,eAAc;AAElC,UAAM,MAAK,OAAO,MAAM,EAAE,GAAG,OAAO,MAAM,GAAG,OAAO,IAAG,CAAE;AACzD,UAAM,KAAK,OAAO,MAAM,EAAE,GAAG,OAAO,OAAO,GAAG,OAAO,IAAG,CAAE;AAC1D,UAAM,KAAK,OAAO,MAAM,EAAE,GAAG,OAAO,OAAO,GAAG,OAAO,OAAM,CAAE;AAC7D,UAAM,KAAK,OAAO,MAAM,EAAE,GAAG,OAAO,MAAM,GAAG,OAAO,OAAM,CAAE;AAE5D,aAAO;QACN,MAAM,KAAK,IAAI,IAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QACrC,KAAK,KAAK,IAAI,IAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QACpC,OAAO,KAAK,IAAI,IAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QACtC,QAAQ,KAAK,IAAI,IAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;;IAEzC;;;;;;WAEA,SAAyC,KAAU,UAA0D,SAAW;AACvH,UAAI,KAAK,aAAa;AACrB,eAAO,KAAK,UAAU,UAAU,MAAM,KAAK,UAAU,OAAO;aAEtD;AACN,eAAO,IAAI,SAAS,WAAA;QAAQ,CAAC;;IAE/B;;;;;;WAEA,WAAA;AAEC,WAAK,aAAa,aACjB,KAAK,GACL,KAAK,GACL,KAAK,MAAM,GACX,KAAK,MAAM,GAEX,KAAK,QAAQ,KAAK,KAAK,KACvB,KAAK,KAAK;AAGX,WAAK,QAAQ,SAAS,KAAK,YAAY;AAEvC,UAAI,KAAK,SAAS;AAEjB,aAAK,QAAQ,QAAQ,KAAK,QAAQ,OAAO;;IAE3C;;;;;;WAEA,SAAkB,SAAmC,YAAkB;AACtE,UAAM,IAAI,KAAK;AACf,cAAQ,aACP,EAAE,IAAI,YACN,EAAE,IAAI,YACN,EAAE,IAAI,YACN,EAAE,IAAI,YACN,EAAE,KAAK,YACP,EAAE,KAAK,UAAU;IAEnB;;;;;;WAEA,SAAc,aAAwB;AAAtC,UAAA,QAAA;AACC,UAAI,KAAK,WAAY,MAAK,eAAe,SAAS,CAAC,KAAK,UAAU,eAAe;AAChF,aAAK,WAAU;AAEf,YAAM,eAAa,KAAK,UAAU;AAElC,YAAM,SAAS,KAAK,UAAU;AAC9B,YAAM,eAAe,KAAK,UAAU;AAEpC,YAAM,SAAO,KAAK;AAClB,YAAI,QAAM;AACT,iBAAK,WAAU;;AAIhB,QAAO,KAAK,QAAQ,SAAC,OAAK;AACzB,cAAI,OAAO;AACV,gBAAM,UAAU,MAAM;AACtB,oBAAQ,KAAI;AAGZ,gBAAI,QAAM;AACT,qBAAK,WAAW,SAAS,MAAM,SAAS,YAAU;AAClD,qBAAK,SAAS,OAAO;AACrB,sBAAQ,KAAI;;AAGb,oBAAQ,cAAc,MAAK,gBAAgB,MAAK;AAEhD,kBAAK,WAAW,SAAS,MAAM,SAAS,YAAU;AAElD,gBAAI,MAAK,QAAQ;AAChB,sBAAQ,SAAS,MAAK;;;QAGzB,CAAC;AAED,qBAAa,KAAI;AAGjB,YAAI,UAAQ,KAAK,mBAAkB,GAAI;AACtC,iBAAK,WAAW,cAAc,YAAU;AACxC,iBAAK,SAAS,YAAY;AAC1B,uBAAa,KAAI;;AAGlB,aAAK,WAAW,cAAc,YAAU;AAExC,aAAK,QAAQ,WAAW;AAExB,qBAAa,QAAO;AAEpB,QAAO,KAAK,QAAQ,SAAC,OAAK;AACzB,cAAI,OAAO;AACV,kBAAM,QAAQ,QAAO;;QAEvB,CAAC;;IAEH;;;;;;WAEA,SAAkB,aAAwB;AACzC,UAAI,KAAK,eAAe,OAAO;AAC9B,YAAM,QAAQ,KAAK,UAAU;AAC7B,cAAM,UAAU;;IAElB;;;;;;WAEA,WAAA;AACC,aAAO,KAAK,UAAU,UAAU,IAAI,IAAI;IACzC;;;;;;WAEA,WAAA;AAAA,UAAA,QAAA;AACC,aAAO,KAAK,UAAU,UAAU,KAAK,SAAC,IAAC;AAAK,eAAA,GAAE,UAAU;MAAZ,CAAgB;IAC7D;;;;;;WAEA,WAAA;AACC,WAAK,SAAQ,EAAG,QAAQ;IACzB;;;;;;WAEA,WAAA;AACC,UAAM,WAAW,KAAK;AACtB,UAAI,SAAS,iBAAiB,CAAC,SAAS,cAAc;AACrD,eAAO;;AAER,UAAI,KAAK,aAAa;AACrB,eAAO;iBAEC,KAAK,SAAS;AACtB,eAAO,KAAK,QAAQ,kBAAiB;;AAEtC,aAAO;IACR;;AAED,SAAA;AAAA,EAhTyC,aAAa;AAqTtD,IAAA,kBAAA,SAAA,QAAA;AAAqC,YAAA,kBAAA,MAAA;AAArC,8BAAA;AAAA,QAAA,QAAA,WAAA,QAAA,OAAA,MAAA,MAAA,SAAA,KAAA;AACC,WAAA,eAAA,OAAA,uBAAA;;;;aAAsC;;AACtC,WAAA,eAAA,OAAA,gBAAA;;;;;;AAEA,WAAA,eAAA,OAAA,aAAA;;;;aAAkD,CAAA;;;EAyEnD;;;;;WAvEC,WAAA;AACC,aAAO,KAAK,uBAAuB,OAAA,UAAM,mBAAkB,KAAA,IAAA;IAC5D;;;;;;WAEA,SAAS,OAA0B;AAClC,YAAM,UAAU;AAChB,WAAK,UAAU,KAAK,KAAK;AACzB,UAAI,MAAM,QAAQ;AACjB,aAAK,mBAAmB,MAAM,MAAM;;IAEtC;;;;;;WAEA,SAAW,OAA4B,OAAa;AACnD,YAAM,UAAU;AAChB,WAAK,UAAU,OAAO,OAAO,GAAG,KAAK;AACrC,UAAI,MAAM,QAAQ;AACjB,aAAK,mBAAmB,MAAM,MAAM;;IAEtC;;;;;;WAEA,SAAY,OAA0B;AACrC,YAAM,UAAU;AAChB,MAAO,YAAY,KAAK,WAAW,KAAK;IACzC;;;;;;WAEA,SAAkB,aAAwB;AAA1C,UAAA,QAAA;AACC,aAAA,UAAM,QAAO,KAAA,MAAC,WAAW;AAEzB,UAAM,WAAW,KAAK;AAEtB,UAAI,KAAK,eAAe,KAAK,qBAAqB;AACjD,UAAE,SAAS;;AAGZ,UAAM,QAAQ,KAAK,UAAU;AAE7B,MAAO,KAAK,KAAK,WAAW,SAAC,OAAK;AACjC,cAAM,gBAAgB,MAAK,gBAAgB,MAAK;AAChD,cAAM,OAAO,KAAK;MACnB,CAAC;AAED,UAAI,KAAK,eAAe,KAAK,qBAAqB;AACjD,UAAE,SAAS;;IAEb;;;;;;WAEA,SAAmB,OAAkB;AACpC,UAAI,CAAC,KAAK,cAAc;AACvB,aAAK,eAAe,CAAA;;AAErB,MAAO,QAAQ,KAAK,cAAc,KAAK;AACvC,UAAI,KAAK,SAAS;AACjB,aAAK,QAAQ,mBAAmB,KAAK;;IAEvC;;;;;;WAEA,SAAsB,MAAqB;AAArB,UAAA,SAAA,QAAA;AAAA,eAAA;MAAqB;AAC1C,aAAA,UAAM,eAAc,KAAA,IAAA;AACpB,UAAI,QAAQ,KAAK,cAAc;AAC9B,QAAO,KAAK,KAAK,cAAc,SAAC,OAAK;AAAK,iBAAA,MAAM,QAAQ;QAAd,CAAkB;;IAE9D;;;;;;WAEA,WAAA;AACC,aAAA,UAAM,QAAO,KAAA,IAAA;AACb,UAAI,KAAK,cAAc;AACtB,QAAO,KAAK,KAAK,cAAc,SAAC,OAAK;AACpC,gBAAM,QAAQ;QACf,CAAC;;IAEH;;AACD,SAAA;AAAA,EA7EqC,mBAAmB;AAkFxD,kBAAkB,QAAiB,QAAa;AAC/C,SAAO,OAAO,KAAK,IAAI,OAAO,MAAM,OAAM,CAAC;AAC3C,SAAO,MAAM,KAAK,IAAI,OAAO,KAAK,OAAM,CAAC;AACzC,SAAO,QAAQ,KAAK,IAAI,OAAO,OAAO,OAAM,CAAC;AAC7C,SAAO,SAAS,KAAK,IAAI,OAAO,QAAQ,OAAM,CAAC;AAChD;AAKA,IAAA,KAAA,WAAA;AAAA,iBAAA;EAMA;;;;;WALC,SAAgB,UAAoC,aAA+B;IAAU;;;;;;WAE7F,SAAY,UAAkC;IAAU;;;;;;WAExD,SAAiB,SAAgB;IAAU;;AAC5C,SAAA;AAAA,EANA;AAWA,IAAA,YAAA,SAAA,QAAA;AAAwB,YAAA,YAAA,MAAA;AACvB,sBAAmB,QAA8C;AAAjE,QAAA,QAAqE,OAAA,KAAA,IAAA,KAAO;;;;;aAAzD;;;EAA2D;;;;;WAE9E,SAAgB,SAAmC,YAA8B;AAChF,UAAI,eAAe,QAAW;AAC7B,gBAAQ,YAAY;aAEd;AACN,gBAAQ,YAAY,KAAK;;IAE3B;;AACD,SAAA;AAAA,EAXwB,EAAE;AAgB1B,IAAA,UAAA,SAAA,QAAA;AAAsB,YAAA,UAAA,MAAA;AACrB,oBAAmB,aAAoB;AAAvC,QAAA,QAA2C,OAAA,KAAA,IAAA,KAAO;;;;;aAA/B;;;EAAiC;;;;;WACpD,SAAgB,SAAmC,aAA+B;AACjF,cAAQ,KAAI;AACZ,UAAI,KAAK,aAAa;AACrB,gBAAQ,cAAc;AACtB,gBAAQ,aAAa;AACrB,gBAAQ,gBAAgB;AACxB,gBAAQ,gBAAgB;;IAE1B;;AACD,SAAA;AAAA,EAXsB,EAAE;AAgBxB,IAAA,YAAA,SAAA,QAAA;AAAwB,YAAA,YAAA,MAAA;AAAxB,wBAAA;;EAIA;;;;;WAHC,SAAgB,SAAmC,aAA+B;AACjF,cAAQ,OAAM;IACf;;AACD,SAAA;AAAA,EAJwB,EAAE;AAS1B,IAAA,YAAA,SAAA,QAAA;AAAwB,YAAA,YAAA,MAAA;AACvB,sBAAmB,OAAsB,QAAuD,UAAsC;AAAtI,QAAA,QAA0I,OAAA,KAAA,IAAA,KAAO;;;;;aAA9H;;;;;;aAAsB;;;;;;aAAuD;;;EAAmD;;;;;WAEnJ,SAAgB,SAAmC,YAA8B;AAChF,UAAI,eAAe,QAAW;AAC7B,gBAAQ,cAAc;aAEhB;AACN,gBAAQ,cAAc,KAAK;;AAG5B,cAAQ,YAAY,KAAK;AACzB,UAAG,KAAK,UAAS;AAChB,gBAAQ,WAAW,KAAK;;IAE1B;;AACD,SAAA;AAAA,EAhBwB,EAAE;AAqB1B,IAAA,WAAA,SAAA,QAAA;AAAuB,YAAA,WAAA,MAAA;AACtB,qBAAmB,MAAc;AAAjC,QAAA,QAAqC,OAAA,KAAA,IAAA,KAAO;;;;;aAAzB;;;EAA2B;;;;;WAE9C,SAAgB,SAAmC,aAA+B;AACjF,cAAQ,YAAY,KAAK,IAAI;IAC9B;;AACD,SAAA;AAAA,EANuB,EAAE;AAWzB,IAAA,iBAAA,SAAA,QAAA;AAA6B,YAAA,iBAAA,MAAA;AAC5B,2BAAmB,YAAkB;AAArC,QAAA,QAAyC,OAAA,KAAA,IAAA,KAAO;;;;;aAA7B;;;EAA+B;;;;;WAElD,SAAgB,SAAmC,aAA+B;AACjF,cAAQ,iBAAiB,KAAK;IAC/B;;AACD,SAAA;AAAA,EAN6B,EAAE;AAW/B,IAAA,WAAA,SAAA,QAAA;AAAuB,YAAA,WAAA,MAAA;AACtB,qBAAmB,IAAkB,IAAkB,OAAsB,QAAc;AAA3F,QAAA,QAA+F,OAAA,KAAA,IAAA,KAAO;;;;;aAAnF;;;;;;aAAkB;;;;;;aAAkB;;;;;;aAAsB;;;EAA2B;;;;;WAExG,SAAY,SAAiC;AAC5C,cAAQ,KAAK,KAAK,GAAG,KAAK,GAAG,KAAK,OAAO,KAAK,MAAM;IACrD;;;;;;WAEA,SAAiB,QAAe;AAC/B,UAAM,IAAI,KAAK;AACf,UAAM,IAAI,KAAK;AACf,UAAM,IAAI,IAAI,KAAK;AACnB,UAAM,IAAI,IAAI,KAAK;AAEnB,eAAS,QAAQ,EAAE,GAAG,GAAG,GAAG,EAAC,CAAE;AAC/B,eAAS,QAAQ,EAAE,GAAG,GAAG,GAAG,EAAC,CAAE;AAC/B,eAAS,QAAQ,EAAE,GAAG,GAAG,GAAG,EAAC,CAAE;AAC/B,eAAS,QAAQ,EAAE,GAAG,GAAG,GAAG,EAAC,CAAE;IAChC;;AACD,SAAA;AAAA,EAlBuB,EAAE;AAuBzB,IAAA,aAAA,SAAA,QAAA;AAAyB,YAAA,aAAA,MAAA;AACxB,uBAAmB,IAAkB,IAAkB,QAAc;AAArE,QAAA,QAAyE,OAAA,KAAA,IAAA,KAAO;;;;;aAA7D;;;;;;aAAkB;;;;;;aAAkB;;;EAA2B;;;;;WAElF,SAAY,SAAiC;AAC5C,cAAQ,OAAO,KAAK,IAAI,KAAK,QAAQ,KAAK,CAAC;AAC3C,cAAQ,IAAI,KAAK,GAAG,KAAK,GAAG,KAAK,QAAQ,GAAG,IAAI,KAAK,EAAE;IACxD;;;;;;WAGA,SAAiB,QAAe;AAC/B,eAAS,QAAQ,EAAE,GAAG,KAAK,IAAI,KAAK,QAAQ,GAAG,KAAK,IAAI,KAAK,OAAM,CAAE;AACrE,eAAS,QAAQ,EAAE,GAAG,KAAK,IAAI,KAAK,QAAQ,GAAG,KAAK,IAAI,KAAK,OAAM,CAAE;IACtE;;AACD,SAAA;AAAA,EAbyB,EAAE;AAkB3B,IAAA,cAAA,SAAA,QAAA;AAA0B,YAAA,cAAA,MAAA;AACzB,wBAAmB,IAAkB,IAAkB,SAAwB,SAAe;AAA9F,QAAA,QAAkG,OAAA,KAAA,IAAA,KAAO;;;;;aAAtF;;;;;;aAAkB;;;;;;aAAkB;;;;;;aAAwB;;;EAA4B;;;;;WAE3G,SAAY,SAAiC;AAC5C,cAAQ,QAAQ,GAAG,GAAG,KAAK,SAAS,KAAK,SAAS,GAAG,GAAG,KAAK,KAAK,CAAC;IACpE;;;;;;WAGA,SAAiB,QAAe;AAC/B,eAAS,QAAQ,EAAE,GAAG,KAAK,IAAI,KAAK,SAAS,GAAG,KAAK,IAAI,KAAK,QAAO,CAAE;AACvE,eAAS,QAAQ,EAAE,GAAG,KAAK,IAAI,KAAK,SAAS,GAAG,KAAK,IAAI,KAAK,QAAO,CAAE;IACxE;;AACD,SAAA;AAAA,EAZ0B,EAAE;AAiB5B,IAAA,MAAA,SAAA,QAAA;AAAkB,YAAA,MAAA,MAAA;AACjB,gBACQ,IACA,IACA,QACA,YACA,UACA,eAAsB;AAN9B,QAAA,QAOI,OAAA,KAAA,IAAA,KAAO;;;;;aANH;;;;;;aACA;;;;;;aACA;;;;;;aACA;;;;;;aACA;;;;;;aACA;;;EACK;;;;;WAEb,SAAY,SAAiC;AAC5C,UAAI,KAAK,SAAS,GAAG;AACpB,gBAAQ,IAAI,KAAK,IAAI,KAAK,IAAI,KAAK,QAAQ,KAAK,YAAY,KAAK,UAAU,KAAK,aAAa;;IAE/F;;;;;;WAEA,SAAiB,QAAe;AAC/B,UAAI,YAAY,AAAM,aAAa,KAAK,IAAI,KAAK,IAAI,KAAK,aAAmB,SAAS,KAAK,WAAiB,SAAS,KAAK,MAAM;AAChI,eAAS,QAAQ,EAAE,GAAG,UAAU,MAAM,GAAG,UAAU,IAAG,CAAE;AACxD,eAAS,QAAQ,EAAE,GAAG,UAAU,OAAO,GAAG,UAAU,OAAM,CAAE;IAC7D;;AACD,SAAA;AAAA,EArBkB,EAAE;AA0BpB,IAAA,QAAA,SAAA,QAAA;AAAoB,YAAA,QAAA,MAAA;AACnB,kBACQ,IACA,IACA,IACA,IACA,QAAc;AALtB,QAAA,QAMI,OAAA,KAAA,IAAA,KAAO;;;;;aALH;;;;;;aACA;;;;;;aACA;;;;;;aACA;;;;;;aACA;;;EACK;;;;;WAEb,SAAY,SAAiC;AAC5C,UAAI,KAAK,SAAS,GAAG;AACpB,gBAAQ,MAAM,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,KAAK,MAAM;;IAE/D;;;;;;WAGA,SAAiB,SAAgB;IA0BjC;;AACD,SAAA;AAAA,EA3CoB,EAAE;AAgDtB,IAAA,SAAA,SAAA,QAAA;AAAqB,YAAA,SAAA,MAAA;AACpB,mBAAmB,IAAkB,IAAS;AAA9C,QAAA,QAAkD,OAAA,KAAA,IAAA,KAAO;;;;;aAAtC;;;;;;aAAkB;;;EAAsB;;;;;WAE3D,SAAY,SAAiC;AAC5C,cAAQ,OAAO,KAAK,GAAG,KAAK,CAAC;IAC9B;;;;;;WAEA,SAAiB,QAAe;AAC/B,eAAS,QAAQ,EAAE,GAAG,KAAK,GAAG,GAAG,KAAK,EAAC,CAAE;IAC1C;;AACD,SAAA;AAAA,EAVqB,EAAE;AAevB,IAAA,SAAA,SAAA,QAAA;AAAqB,YAAA,SAAA,MAAA;AACpB,mBAAmB,IAAkB,IAAS;AAA9C,QAAA,QAAkD,OAAA,KAAA,IAAA,KAAO;;;;;aAAtC;;;;;;aAAkB;;;EAAsB;;;;;WAE3D,SAAY,SAAiC;AAC5C,cAAQ,OAAO,KAAK,GAAG,KAAK,CAAC;IAC9B;;;;;;WAEA,SAAiB,QAAe;AAC/B,eAAS,QAAQ,EAAE,GAAG,KAAK,GAAG,GAAG,KAAK,EAAC,CAAE;IAC1C;;AACD,SAAA;AAAA,EAVqB,EAAE;AAevB,IAAA,YAAA,SAAA,QAAA;AAAwB,YAAA,YAAA,MAAA;AAAxB,wBAAA;;EAIA;;;;;WAHC,SAAY,SAAiC;AAC5C,cAAQ,UAAS;IAClB;;AACD,SAAA;AAAA,EAJwB,EAAE;AAS1B,IAAA,gBAAA,SAAA,QAAA;AAA4B,YAAA,gBAAA,MAAA;AAC3B,0BACQ,KACA,KACA,MACA,MACA,KACA,KAAW;AANnB,QAAA,QAOI,OAAA,KAAA,IAAA,KAAO;;;;;aANH;;;;;;aACA;;;;;;aACA;;;;;;aACA;;;;;;aACA;;;;;;aACA;;;EACK;;;;;WAEb,SAAY,SAAiC;AAC5C,cAAQ,cAAc,KAAK,KAAK,KAAK,KAAK,KAAK,MAAM,KAAK,MAAM,KAAK,KAAK,KAAK,GAAG;IACnF;;;;;;WAGA,SAAiB,QAAe;AAC/B,eAAS,QAAQ,EAAE,GAAG,KAAK,KAAK,GAAG,KAAK,IAAG,CAAE;AAC7C,eAAS,QAAQ,EAAE,GAAG,KAAK,MAAM,GAAG,KAAK,KAAI,CAAE;AAC/C,eAAS,QAAQ,EAAE,GAAG,KAAK,KAAK,GAAG,KAAK,IAAG,CAAE;IAC9C;;AACD,SAAA;AAAA,EApB4B,EAAE;AAyB9B,IAAA,mBAAA,SAAA,QAAA;AAA+B,YAAA,mBAAA,MAAA;AAC9B,6BACQ,KACA,KACA,KACA,KAAW;AAJnB,QAAA,QAKI,OAAA,KAAA,IAAA,KAAO;;;;;aAJH;;;;;;aACA;;;;;;aACA;;;;;;aACA;;;EACK;;;;;WAEb,SAAY,SAAiC;AAC5C,cAAQ,iBAAiB,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,GAAG;IAChE;;;;;;WAGA,SAAiB,QAAe;AAC/B,eAAS,QAAQ,EAAE,GAAG,KAAK,KAAK,GAAG,KAAK,IAAG,CAAE;AAC7C,eAAS,QAAQ,EAAE,GAAG,KAAK,KAAK,GAAG,KAAK,IAAG,CAAE;IAC9C;;AACD,SAAA;AAAA,EAjB+B,EAAE;AAsBjC,IAAA,SAAA,SAAA,QAAA;AAAqB,YAAA,SAAA,MAAA;AACpB,mBACQ,QACA,OACA,SACA,SACA,SAAgB;AALxB,QAAA,QAMI,OAAA,KAAA,IAAA,KAAO;;;;;aALH;;;;;;aACA;;;;;;aACA;;;;;;aACA;;;;;;aACA;;;EACK;;;;;WAEb,SAAgB,SAAmC,aAA+B;AACjF,UAAI,KAAK,SAAS;AACjB,gBAAQ,YAAY,KAAK;;AAE1B,cAAQ,cAAc,KAAK;AAC3B,cAAQ,aAAa,KAAK;AAC1B,cAAQ,gBAAgB,KAAK;AAC7B,cAAQ,gBAAgB,KAAK;IAC9B;;AACD,SAAA;AAAA,EAlBqB,EAAE;AAwBvB,IAAA,iBAAA,SAAA,QAAA;AAAoC,YAAA,iBAAA,MAAA;AAApC,6BAAA;AAAA,QAAA,QAAA,WAAA,QAAA,OAAA,MAAA,MAAA,SAAA,KAAA;AACC,WAAA,eAAA,OAAA,eAAA;;;;aAAmC,CAAA;;AAEnC,WAAA,eAAA,OAAA,aAAA;;;;aAA8B,UAAU;;AAExC,WAAA,eAAA,OAAA,eAAA;;;;aAAiC;;AACjC,WAAA,eAAA,OAAA,cAAA;;;;;;AACA,WAAA,eAAA,OAAA,gBAAA;;;;;;;EAscD;;;;;WApcC,WAAA;AACC,aAAA,UAAM,MAAK,KAAA,IAAA;AACX,WAAK,YAAY,SAAS;IAC3B;;;;;;WAEA,SAAkB,IAAM;AACvB,WAAK,YAAY,KAAK,EAAE;IACzB;;;;;;WAEA,SAAU,QAAgD,OAAiB;AAAjB,UAAA,UAAA,QAAA;AAAA,gBAAA;MAAiB;AAC1E,WAAK,aAAa;AAClB,UAAI,QAAO;AACV,YAAI,kBAAiB,OAAO;AAC3B,eAAK,QAAQ,IAAI,UAAU,OAAM,MAAM,KAAK,CAAC,CAAC;eAExC;AACN,eAAK,aAAa;AAClB,eAAK,QAAQ,IAAI,UAAU,MAAK,CAAC;;aAE5B;AACN,aAAK,QAAQ,IAAI,UAAU,mBAAmB,QAAQ,GAAG,CAAC;;IAE5D;;;;;;WAEA,WAAA;AACC,WAAK,QAAQ,IAAI,QAAQ,KAAK,WAAW,CAAC;IAC3C;;;;;;WAEA,WAAA;AACC,WAAK,QAAQ,IAAI,UAAS,CAAE;IAC7B;;;;;;WAEA,SAAU,OAAmB,QAAgD,OAAmB,UAAsC;AAA5H,UAAA,UAAA,QAAA;AAAA,gBAAA;MAAiB;AAAkD,UAAA,UAAA,QAAA;AAAA,gBAAA;MAAiB;AAC7F,WAAK,eAAe;AACpB,UAAI,QAAO;AACV,YAAI,kBAAiB,OAAO;AAC3B,eAAK,QAAQ,IAAI,UAAU,OAAO,OAAM,MAAM,KAAK,GAAG,QAAQ,CAAC;eACzD;AACN,eAAK,QAAQ,IAAI,UAAU,OAAO,QAAO,QAAQ,CAAC;;aAE7C;AACN,aAAK,QAAQ,IAAI,UAAU,OAAO,mBAAmB,QAAQ,KAAK,QAAQ,CAAC;;IAE7E;;;;;;WAEA,SAAY,MAAe;AAC1B,WAAK,QAAQ,IAAI,SAAS,OAAO,OAAO,CAAA,CAAE,CAAC;IAC5C;;;;;;WAEA,SAAkB,YAAsB;AAAtB,UAAA,eAAA,QAAA;AAAA,qBAAA;MAAsB;AACvC,WAAK,QAAQ,IAAI,eAAe,UAAU,CAAC;IAC5C;;;;;;WAEA,SAAS,IAAW,IAAW,OAAe,QAAc;AAC3D,WAAK,QAAQ,IAAI,SAAS,IAAG,IAAG,OAAO,MAAM,CAAC;IAC/C;;;;;;WAEA,SAAW,IAAW,IAAW,QAAc;AAC9C,WAAK,QAAQ,IAAI,WAAW,IAAG,IAAG,MAAM,CAAC;IAC1C;;;;;;WAEA,SAAY,IAAW,IAAW,SAAiB,SAAe;AACjE,WAAK,QAAQ,IAAI,YAAY,IAAG,IAAG,SAAS,OAAO,CAAC;IACrD;;;;;;WAEA,SAAI,IAAY,IAAY,QAAgB,YAAoB,UAAkB,eAA8B;AAA9B,UAAA,kBAAA,QAAA;AAAA,wBAAA;MAA8B;AAC/G,WAAK,QAAQ,IAAI,IAAI,IAAI,IAAI,QAAQ,YAAY,UAAU,aAAa,CAAC;IAC1E;;;;;;WAEA,SAAM,IAAY,IAAY,IAAY,IAAY,QAAc;AACnE,WAAK,QAAQ,IAAI,MAAM,IAAI,IAAI,IAAI,IAAI,MAAM,CAAC;IAC/C;;;;;;WAEA,SAAO,IAAW,IAAS;AAC1B,WAAK,QAAQ,IAAI,OAAO,IAAG,EAAC,CAAC;IAC9B;;;;;;WAEA,SAAO,IAAW,IAAS;AAC1B,WAAK,QAAQ,IAAI,OAAO,IAAG,EAAC,CAAC;IAC9B;;;;;;WAEA,SAAc,KAAa,KAAa,MAAc,MAAc,KAAa,KAAW;AAC3F,WAAK,QAAQ,IAAI,cAAc,KAAK,KAAK,MAAM,MAAM,KAAK,GAAG,CAAC;IAC/D;;;;;;WAEA,SAAiB,KAAa,KAAa,KAAa,KAAW;AAClE,WAAK,QAAQ,IAAI,iBAAiB,KAAK,KAAK,KAAK,GAAG,CAAC;IACtD;;;;;;WAEA,WAAA;AACC,WAAK,QAAQ,IAAI,UAAS,CAAE;IAC7B;;;;;;WAEA,SAAO,QAAc,OAAkB,SAAqB,SAAqB,SAAgB;AAA5E,UAAA,UAAA,QAAA;AAAA,gBAAA;MAAgB;AAAE,UAAA,YAAA,QAAA;AAAA,kBAAA;MAAmB;AAAE,UAAA,YAAA,QAAA;AAAA,kBAAA;MAAmB;AAC9E,WAAK,cAAc;AACnB,WAAK,QAAQ,IAAI,OAAO,UAAU,OAAM,MAAM,OAAO,IAAI,OAAM,MAAM,KAAK,cAAc,KAAK,YAAY,GAAG,OAAM,SAAS,OAAO,CAAC;IACpI;;;;;;WAIA,SAAQ,OAAY;AAApB,UAAA,QAAA;AACC,UAAI,KAAI;AACR,UAAI,KAAI;AACR,UAAI,MAAqB;AACzB,UAAI,MAAqB;AACzB,UAAI,OAAsB;AAC1B,UAAI,OAAsB;AAE1B,UAAM,kBAAkB;AACxB,UAAM,cAAc;AAEpB,UAAI;AAEJ,aAAQ,SAAQ,gBAAgB,KAAK,KAAI,OAAO,MAAM;AACrD,YAAM,SAAO,MAAM;AACnB,YAAM,OAAO,MAAM;AAEnB,YAAM,OAAO,CAAA;AAEb,eAAQ,SAAQ,YAAY,KAAK,IAAI,OAAO,MAAM;AACjD,eAAK,KAAK,CAAC,MAAM,EAAE;;AAIpB,YAAI,WAAS,OAAO,WAAS,OAAO,WAAS,OAAO,WAAS,KAAK;AACjE,gBAAM;AACN,gBAAM;;AAIP,YAAI,WAAS,OAAO,WAAS,OAAO,WAAS,OAAO,WAAS,KAAK;AACjE,iBAAO;AACP,iBAAO;;AAGR,gBAAQ;eACF;AACJ,0BAAc,QAAM,KAAK,QAAQ,CAAC;AAClC,iBAAI,KAAK;AACT,iBAAI,KAAK;AACT,iBAAK,OAAO,IAAG,EAAC;AAEhB,qBAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK,GAAG;AACxC,mBAAI,KAAK;AACT,mBAAI,KAAK,IAAI;AACb,mBAAK,OAAO,IAAG,EAAC;;AAEjB;eACI;AACJ,0BAAc,QAAM,KAAK,QAAQ,CAAC;AAClC,kBAAK,KAAK;AACV,kBAAK,KAAK;AACV,iBAAK,OAAO,IAAG,EAAC;AAEhB,qBAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK,GAAG;AACxC,oBAAK,KAAK;AACV,oBAAK,KAAK,IAAI;AACd,mBAAK,OAAO,IAAG,EAAC;;AAEjB;eAEI;AACJ,0BAAc,QAAM,KAAK,QAAQ,CAAC;AAClC,qBAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK,GAAG;AACxC,mBAAI,KAAK;AACT,mBAAI,KAAK,IAAI;AACb,mBAAK,OAAO,IAAG,EAAC;;AAEjB;eACI;AACJ,0BAAc,QAAM,KAAK,QAAQ,CAAC;AAClC,qBAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK,GAAG;AACxC,oBAAK,KAAK;AACV,oBAAK,KAAK,IAAI;AACd,mBAAK,OAAO,IAAG,EAAC;;AAEjB;eAEI;AACJ,yBAAa,QAAM,KAAK,QAAQ,CAAC;AACjC,qBAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,EAAE,GAAG;AACrC,mBAAI,KAAK;AACT,mBAAK,OAAO,IAAG,EAAC;;AAEjB;eACI;AACJ,yBAAa,QAAM,KAAK,QAAQ,CAAC;AACjC,qBAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,EAAE,GAAG;AACrC,oBAAK,KAAK;AACV,mBAAK,OAAO,IAAG,EAAC;;AAEjB;eAEI;AACJ,yBAAa,QAAM,KAAK,QAAQ,CAAC;AACjC,qBAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,EAAE,GAAG;AACrC,mBAAI,KAAK;AACT,mBAAK,OAAO,IAAG,EAAC;;AAEjB;eACI;AACJ,yBAAa,QAAM,KAAK,QAAQ,CAAC;AACjC,qBAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,EAAE,GAAG;AACrC,oBAAK,KAAK;AACV,mBAAK,OAAO,IAAG,EAAC;;AAEjB;eAEI;AACJ,0BAAc,QAAM,KAAK,QAAQ,CAAC;AAClC,qBAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK,GAAG;AACxC,kBAAM,KAAK,KAAK;AAChB,kBAAM,KAAK,KAAK,IAAI;AACpB,oBAAM,KAAK,IAAI;AACf,oBAAM,KAAK,IAAI;AACf,mBAAI,KAAK,IAAI;AACb,mBAAI,KAAK,IAAI;AACb,mBAAK,cAAc,IAAI,IAAI,KAAK,KAAK,IAAG,EAAC;;AAE1C;eACI;AACJ,0BAAc,QAAM,KAAK,QAAQ,CAAC;AAClC,qBAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK,GAAG;AACxC,kBAAM,KAAK,KAAK,KAAK;AACrB,kBAAM,KAAK,KAAK,IAAI,KAAK;AACzB,oBAAM,KAAK,IAAI,KAAK;AACpB,oBAAM,KAAK,IAAI,KAAK;AACpB,oBAAK,KAAK,IAAI;AACd,oBAAK,KAAK,IAAI;AACd,mBAAK,cAAc,IAAI,IAAI,KAAK,KAAK,IAAG,EAAC;;AAE1C;eAEI;AACJ,0BAAc,QAAM,KAAK,QAAQ,CAAC;AAClC,gBAAI,QAAQ,QAAQ,QAAQ,MAAM;AACjC,oBAAM;AACN,oBAAM;;AAEP,qBAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK,GAAG;AACxC,kBAAM,KAAK,IAAI,KAAI;AACnB,kBAAM,KAAK,IAAI,KAAI;AACnB,oBAAM,KAAK;AACX,oBAAM,KAAK,IAAI;AACf,mBAAI,KAAK,IAAI;AACb,mBAAI,KAAK,IAAI;AACb,mBAAK,cAAc,IAAI,IAAI,KAAK,KAAK,IAAG,EAAC;;AAE1C;eACI;AACJ,0BAAc,QAAM,KAAK,QAAQ,CAAC;AAClC,gBAAI,QAAQ,QAAQ,QAAQ,MAAM;AACjC,oBAAM;AACN,oBAAM;;AAEP,qBAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK,GAAG;AACxC,kBAAM,KAAK,IAAI,KAAI;AACnB,kBAAM,KAAK,IAAI,KAAI;AACnB,oBAAM,KAAK,KAAK;AAChB,oBAAM,KAAK,IAAI,KAAK;AACpB,oBAAK,KAAK,IAAI;AACd,oBAAK,KAAK,IAAI;AACd,mBAAK,cAAc,IAAI,IAAI,KAAK,KAAK,IAAG,EAAC;;AAE1C;eAEI;AACJ,0BAAc,QAAM,KAAK,QAAQ,CAAC;AAClC,qBAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK,GAAG;AACxC,qBAAO,KAAK;AACZ,qBAAO,KAAK,IAAI;AAChB,mBAAI,KAAK,IAAI;AACb,mBAAI,KAAK,IAAI;AACb,mBAAK,iBAAiB,MAAM,MAAM,IAAG,EAAC;;AAEvC;eACI;AACJ,0BAAc,QAAM,KAAK,QAAQ,CAAC;AAClC,qBAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK,GAAG;AACxC,qBAAO,KAAK,KAAK;AACjB,qBAAO,KAAK,IAAI,KAAK;AACrB,oBAAK,KAAK,IAAI;AACd,oBAAK,KAAK,IAAI;AACd,mBAAK,iBAAiB,MAAM,MAAM,IAAG,EAAC;;AAEvC;eAEI;AACJ,0BAAc,QAAM,KAAK,QAAQ,CAAC;AAClC,gBAAI,SAAS,QAAQ,SAAS,MAAM;AACnC,qBAAO;AACP,qBAAO;;AAER,qBAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK,GAAG;AACxC,qBAAO,IAAI,KAAI;AACf,qBAAO,IAAI,KAAI;AACf,mBAAI,KAAK;AACT,mBAAI,KAAK,IAAI;AACb,mBAAK,iBAAiB,MAAM,MAAM,IAAG,EAAC;;AAEvC;eACI;AACJ,0BAAc,QAAM,KAAK,QAAQ,CAAC;AAClC,gBAAI,SAAS,QAAQ,SAAS,MAAM;AACnC,qBAAO;AACP,qBAAO;;AAER,qBAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK,GAAG;AACxC,qBAAO,IAAI,KAAI;AACf,qBAAO,IAAI,KAAI;AACf,oBAAK,KAAK;AACV,oBAAK,KAAK,IAAI;AACd,mBAAK,iBAAiB,MAAM,MAAM,IAAG,EAAC;;AAEvC;eAEI;eACA;AACJ,gBAAM,WAAY,WAAS;AAE3B,0BAAc,QAAM,KAAK,QAAQ,CAAC;AAElC,qBAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK,GAAG;AACxC,kBAAI,KAAK,KAAK,IAAI;AAClB,kBAAI,KAAK,KAAK,IAAI;AAElB,kBAAI,UAAU;AACb,sBAAM;AACN,sBAAM;;AAGP,kBAAM,KAAK,gBAAY;gBACtB,IAAI;gBACJ,IAAI;gBACJ,IAAI,KAAK;gBACT,IAAI,KAAK,IAAI;gBACb,eAAe,KAAK,IAAI;gBACxB,cAAc,aAAa,KAAK,IAAI,EAAE;gBACtC,WAAW,aAAa,KAAK,IAAI,EAAE;gBACnC;gBACA;eACA;AAED,cAAO,KAAK,IAAI,SAAC,GAAC;AACjB,sBAAK,cAAc,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC;AACnD,qBAAI,EAAE;AACN,qBAAI,EAAE;cACP,CAAC;;AAEF;eACI;eACA;AACJ,sBAAU,QAAM,KAAK,QAAQ,CAAC;AAC9B,iBAAK,UAAS;AACd;;;IAGJ;;;;;;WAGA,SAAgB,SAAiC;AAChD,cAAQ,UAAS;AAEjB,MAAO,KAAK,KAAK,aAAa,SAAC,IAAE;AAChC,WAAG,KAAK,OAAO;MAChB,CAAC;IACF;;;;;;WAEA,SAAkB,aAAwB;AACzC,aAAA,UAAM,QAAO,KAAA,MAAC,WAAW;AAEzB,UAAM,QAAQ,KAAK,UAAU;AAE7B,UAAM,aAAa,MAAM;AACzB,UAAM,cAAc,KAAK,eAAc;AAEvC,UAAI,cAAc,aAAa;AAE9B,YAAM,YAAU,MAAM;AACtB,YAAM,iBAAe,KAAK,UAAU;AAEpC,YAAI,YAAY;AACf,oBAAQ,2BAA2B,KAAK;AAExC,oBAAQ,UAAS;;AAGlB,YAAI;AAEJ,YAAI,aAAa;AAChB,yBAAa,UAAS;AACtB,oBAAQ,KAAK,YAAW;;AAGzB,QAAO,KAAK,KAAK,aAAa,SAAC,IAAE;AAChC,cAAI,YAAY;AACf,eAAG,KAAK,SAAO;AACf,eAAG,SAAS,WAAS,MAAS;;AAG/B,cAAI,aAAa;AAChB,eAAG,KAAK,cAAY;AACpB,eAAG,SAAS,gBAAc,OAAK;;QAEjC,CAAC;;IAEH;;;;;;WAEA,SAAsB,SAAiC;AACtD,UAAI,KAAK,SAAS;AACjB,aAAK,WAAU;AAEf,gBAAQ,KAAI;AAGZ,YAAM,OAAO,KAAK;AAClB,YAAI,MAAM;AACT,eAAK,WAAU;AACf,eAAK,WAAW,SAAS,CAAC;AAC1B,eAAK,SAAS,OAAO;AACrB,kBAAQ,KAAI;;AAIb,gBAAQ,cAAc,KAAK,gBAAgB,KAAK;AAEhD,aAAK,WAAW,SAAS,CAAC;AAE1B,YAAI,KAAK,QAAQ;AAChB,kBAAQ,SAAS,KAAK;;AAGvB,gBAAQ,2BAA2B,KAAK;AAExC,gBAAQ,UAAS;AAEjB,QAAO,KAAK,KAAK,aAAa,SAAC,IAAE;AAChC,aAAG,KAAK,OAAO;AACf,aAAG,SAAS,SAAS,MAAS;QAC/B,CAAC;AAED,gBAAQ,QAAO;;IAEjB;;;;;;WAEA,SAAkB,QAAe;AAChC,UAAI,KAAK,WAAW,KAAK,YAAY;AACpC,QAAO,KAAK,KAAK,aAAa,SAAC,IAAE;AAChC,aAAG,UAAU,MAAM;QACpB,CAAC;;IAEH;;AACD,SAAA;AAAA,EA7coC,mBAAmB;AAifvD,IAAA,aAAA,SAAA,QAAA;AAAgC,YAAA,aAAA,MAAA;AAS/B,uBAAY,UAA0B,MAAc,OAAsB;AAA1E,QAAA,QACC,OAAA,KAAA,MAAM,QAAQ,KAAC;AAThB,WAAA,eAAA,OAAA,QAAA;;;;;;AACA,WAAA,eAAA,OAAA,SAAA;;;;;;AACA,WAAA,eAAA,OAAA,cAAA;;;;aAA4B;;AAE5B,WAAA,eAAA,OAAA,aAAA;;;;;;AACA,WAAA,eAAA,OAAA,gBAAA;;;;aAAkC;;AAClC,WAAA,eAAA,OAAA,kBAAA;;;;aAAoC;;AAInC,UAAK,OAAO;AACZ,UAAK,QAAQ;;EACd;;;;;WAEA,WAAA;AACC,aAAA,UAAM,iBAAgB,KAAA,IAAA;AACtB,WAAK,YAAY;IAClB;;;;;;WAEA,SAAgB,SAAiC;AAChD,UAAI,KAAK,MAAM,WAAW;AACzB,gBAAQ,YAAY,KAAK,MAAM;;AAGhC,UAAI,KAAK,MAAM,WAAW;AACzB,gBAAQ,YAAY,KAAK,MAAM;;AAGhC,UAAI,KAAK,MAAM,cAAc;AAC5B,gBAAQ,eAAe,KAAK,MAAM;;IAGpC;;;;;;WAEA,SAAqB,OAAoB,aAAqB,kBAAwB;AAA7C,UAAA,gBAAA,QAAA;AAAA,sBAAA;MAAmB;AAAE,UAAA,qBAAA,QAAA;AAAA,2BAAA;MAAwB;AACrF,aAAA,UAAM,QAAO,KAAA,MAAC,KAAK;AAEnB,UAAM,UAAU,MAAM;AACtB,UAAM,eAAe,KAAK,UAAU;AAIpC,UAAM,QAAQ,KAAK;AACnB,UAAI,YAAY,KAAK,cAAc,QAAW,gBAAgB;AAE9D,cAAQ,OAAO;AACf,UAAI,KAAK,eAAc,KAAM,CAAC,aAAa;AAC1C,qBAAa,OAAO;;AAIrB,UAAI,MAAM,MAAM;AACf,YAAI,MAAM,gBAAgB,OAAO;AAChC,kBAAQ,YAAY,MAAM,KAAK,MAAK;eAC9B;AACN,kBAAQ,YAAY,MAAM;;;AAI5B,UAAI,MAAM,aAAa;AACtB,cAAM,QAAQ,cAAc,MAAM,YAAY,MAAM,MAAM,iBAAiB,CAAC;;AAE7E,UAAI,MAAM,YAAY;AACrB,cAAM,QAAQ,aAAa,MAAM;;AAElC,UAAI,MAAM,eAAe;AACxB,cAAM,QAAQ,gBAAgB,MAAM;;AAErC,UAAI,MAAM,eAAe;AACxB,cAAM,QAAQ,gBAAgB,MAAM;;AAGrC,WAAK,QAAQ,OAAO;AAEpB,UAAI,KAAK,eAAc,KAAM,CAAC,aAAa;AAC1C,qBAAa,YAAY,KAAK,YAAW;AACzC,aAAK,QAAQ,YAAY;;IAE3B;;;;;;WAEA,SAAwB,QAAqB,kBAAwB;AAAxB,UAAA,qBAAA,QAAA;AAAA,2BAAA;MAAwB;AAGpE,UAAM,QAAQ,KAAK;AACnB,UAAI,YAAsB,CAAA;AAE1B,UAAI,UAAU,OAAO,aAAa;AACjC,kBAAU,KAAK,OAAO,WAAW;iBAEzB,MAAM,aAAa;AAC3B,kBAAU,KAAK,MAAM,WAAW;;AAGjC,UAAI,CAAC,kBAAkB;AACtB,YAAI,UAAU,OAAO,YAAY;AAChC,oBAAU,KAAK,OAAO,UAAU;mBAExB,MAAM,YAAY;AAC1B,oBAAU,KAAK,MAAM,UAAU;;;AAIjC,UAAI,UAAU,OAAO,WAAW;AAC/B,kBAAU,KAAK,OAAO,SAAS;iBAEvB,MAAM,WAAW;AACzB,kBAAU,KAAK,MAAM,SAAS;;AAG/B,UAAI,UAAU,OAAO,UAAU;AAC9B,YAAI,AAAM,SAAS,OAAO,QAAQ,GAAG;AACpC,iBAAO,WAAW,OAAO,WAAW;;AAErC,kBAAU,KAAK,OAAO,QAAQ;iBAEtB,MAAM,UAAU;AACxB,YAAI,AAAM,SAAS,MAAM,QAAQ,GAAG;AACnC,gBAAM,WAAW,MAAM,WAAW;;AAEnC,kBAAU,KAAK,MAAM,QAAQ;;AAG9B,UAAI,UAAU,OAAO,YAAY;AAChC,kBAAU,KAAK,OAAO,UAAU;iBAExB,MAAM,YAAY;AAC1B,kBAAU,KAAK,MAAM,UAAU;iBAEvB,UAAU,QAAQ;AAC1B,kBAAU,KAAK,OAAO;;AAGvB,aAAO,UAAU,KAAK,GAAG;IAC1B;;;;;;WAEA,SAAkB,aAAwB;AAA1C,UAAA,QAAA;AACC,UAAM,QAAQ,KAAK,UAAU;AAG7B,UAAI,CAAC,KAAK,WAAW;AACpB,aAAK,SAAS,KAAK;;AAGpB,UAAI,KAAK,cAAc;AAEtB,YAAM,gBAAc,KAAK,eAAc;AACvC,YAAM,YAAU,MAAM;AACtB,YAAM,eAAa,MAAM;AACzB,YAAM,iBAAe,KAAK,UAAU;AAEpC,kBAAQ,KAAI;AACZ,uBAAa,KAAI;AACjB,aAAK,WAAW,KAAK;AAMrB,QAAO,KAAK,KAAK,WAAY,SAAC,OAAM,QAAM;AACzC,UAAO,KAAK,MAAK,YAAY,SAAC,OAAO,SAAM;AAG1C,gBAAI,MAAM,OAAO;AAChB,wBAAQ,KAAI;AACZ,6BAAa,KAAI;AAEjB,wBAAQ,OAAO,MAAM;AACrB,kBAAI,MAAK,eAAc,GAAI;AAC1B,+BAAa,OAAO,MAAM;;;AAI5B,gBAAI,MAAM,MAAM;AACf,wBAAQ,KAAI;AACZ,wBAAQ,YAAY,MAAM,KAAK,MAAK;;AAKrC,gBAAI,cAAY;AACf,wBAAQ,SAAS,MAAM,MAAM,MAAM,SAAS,MAAK,UAAU,MAAM,OAAO;;AAIzE,gBAAI,MAAM,kBAAkB,eAAe,MAAM,kBAAkB,gBAAgB;AAElF,kBAAI,YAAY;AAChB,kBAAI,SAAS;AACb,kBAAI,WAAW,MAAM;AAErB,kBAAI,UAAU,MAAM;AACpB,sBAAQ,MAAK,MAAM;qBACb;qBACA;AACJ,6BAAW,MAAM;AACjB;qBACI;AACJ,6BAAW,MAAM,QAAQ;AACzB;;AAGF,kBAAI,MAAM,OAAO;AAChB,oBAAM,SAAS,cAAc,aAAa,MAAM,KAAK;AACrD,wBAAQ,OAAO;uBACT;uBACA;uBACA;uBACA;uBACA;AACJ,gCAAY;AACZ;;;AAIH,kBAAI,UAAU;AACb,yBAAS,WAAW;;AAGrB,kBAAI,KAAC;AAEL,kBAAI,MAAM,kBAAkB,gBAAgB;AAC3C,qBAAI,YAAY,MAAK,UAAU,MAAM,UAAU,MAAM,SAAS;qBAE1D;AACJ,qBAAI,YAAY,SAAS,MAAM,MAAK,UAAU,MAAM;;AAGrD,wBAAQ,KAAI;AACZ,wBAAQ,UAAS;AACjB,kBAAI,MAAM,MAAM;AACf,0BAAQ,cAAc,MAAM,KAAK,MAAK;yBAE9B,MAAK,MAAM,QAAQ,MAAK,MAAM,gBAAgB,OAAO;AAC7D,0BAAQ,cAAc,MAAK,MAAM,KAAK,MAAK;;AAE5C,wBAAQ,YAAY,YAAY;AAChC,wBAAQ,OAAO,SAAS,EAAC;AACzB,wBAAQ,OAAO,UAAU,MAAM,OAAO,EAAC;AACvC,wBAAQ,OAAM;AACd,wBAAQ,QAAO;;AAGhB,gBAAI,iBAAe,MAAK,aAAa;AAIpC,6BAAa,SAAS,MAAM,MAAM,MAAM,SAAS,MAAK,UAAU,MAAM,OAAO;;AAG9E,gBAAI,MAAM,MAAM;AACf,wBAAQ,QAAO;;AAKhB,gBAAI,MAAM,OAAO;AAChB,wBAAQ,QAAO;AACf,6BAAa,QAAO;;UAGtB,CAAC;QACF,CAAC;AAED,kBAAQ,QAAO;AACf,uBAAa,QAAO;;IAEtB;;;;;;WAEA,SAAkB,QAAe;AAChC,UAAI,KAAK,WAAW,KAAK,YAAY;AAEpC,YAAM,KAAI,KAAK,SAAS,KAAK,SAAQ,CAAE;AACvC,iBAAS,QAAQ,EAAE,GAAG,GAAE,MAAM,GAAG,GAAE,IAAG,CAAE;AACxC,iBAAS,QAAQ,EAAE,GAAG,GAAE,OAAO,GAAG,GAAE,OAAM,CAAE;;IAG9C;;;;;;WAEA,SAAgB,OAAkB;AAAlC,UAAA,QAAA;AACC,UAAM,UAAU,MAAM;AACtB,UAAM,eAAe,KAAK,UAAU;AACpC,UAAM,MAAM,KAAK,MAAM,aAAa;AAGpC,WAAK,YAAY,CAAA;AAGjB,UAAM,oBAAoB,KAAK,MAAM;AACrC,UAAM,WAAW,KAAK,MAAM;AAE5B,UAAM,WAAW,AAAM,SAAS,QAAQ,KAAK,qBAAqB;AAClE,UAAM,OAAO,AAAM,SAAS,QAAQ,KAAK,qBAAqB;AAG9D,cAAQ,KAAI;AACZ,mBAAa,KAAI;AACjB,WAAK,WAAW,OAAO,MAAM,IAAI;AAGjC,UAAM,UAAU;AAGhB,UAAM,QAAQ,KAAK,KAAK,SAAQ,EAAG,QAAQ,OAAO,EAAE,EAAE,MAAM,IAAI;AAChE,UAAI,gBAAgB;AACpB,UAAI,OAAO;AACX,UAAI,OAAO;AAGX,UAAI,UAAU;AACd,UAAI;AACJ,MAAO,KAAK,OAAO,SAAC,OAAM,QAAM;AAG/B,YAAI;AACJ,YAAI,SAAQ,IAAI;AACf,mBAAS,CAAC;YACT,MAAM;YACN,MAAM;WACN;eAEG;AACJ,mBAAS,cAAc,MAAM,OAAM,OAAO,MAAK,MAAM,gBAAgB;;;AAMrE,cAAI,WAAkB;YACrB;YACA,QAAQ;YACR,OAAO;YACP,QAAQ;YACR,MAAM;YACN,OAAO;YACP,YAAY,CAAA;;AAIb,cAAM,UAAU,MAAK,aAAa,SAAS,OAAO;AAElD,cAAM,SAAS,QAAQ,0BAA0B,QAAQ;AACzD,mBAAS,SAAS;AAClB,mBAAS,SAAS,QAAQ;AAE1B,cAAI;AACJ,cAAI,oBAAwC,MAAK,MAAM;AACvD,cAAI;AACJ,cAAI;AACJ,cAAI,kBAAkB;AACtB,cAAI,iBAAiB;AACrB,cAAI,iBAAoC,CAAA;AACxC,cAAI;AAKJ,UAAO,aAAa,QAAQ,SAAC,OAAO,OAAK;AAGxC,gBAAI,MAAM,QAAQ,UAAU;AAC3B,kBAAI,MAAM,QAAQ,OAAO;AACxB,oBAAI,CAAC,eAAe;AACnB,0BAAQ,QAAO;AACf,+BAAa,QAAO;AACpB,kCAAgB;;AAEjB,8BAAc;AACd,+BAAe;AACf,oCAAoB;AACpB,oCAAoB,MAAK,MAAM;AAC/B,uCAAuB;AACvB,gCAAgB,MAAM;qBAElB;AAEJ,oBAAI,CAAC,eAAe;AACnB,0BAAQ,QAAO;AACf,+BAAa,QAAO;;AAGrB,oBAAI,SAAS,cAAc,aAAa,MAAM,IAAI;AAClD,oBAAM,YAAY,MAAK,cAAc,MAAM;AAC3C,wBAAQ,KAAI;AACZ,6BAAa,KAAI;AACjB,wBAAQ,OAAO;AACf,+BAAe;AACf,gCAAgB,MAAM;AACtB,oBAAI,OAAO,gBAAgB;AAC1B,sCAAoB,OAAO;;AAE5B,oBAAI,OAAO,MAAM;AAChB,gCAAqB,OAAO;;AAE7B,oBAAU,OAAQ,OAAO;AACxB,sCAAoB,AAAM,SAAe,OAAQ,KAAK;;AAEvD,oBAAI,OAAO,eAAe;AACzB,yCAAuB,OAAO;;AAE/B,gCAAgB;AAGhB,oBAAM,YAAU,MAAK,aAAa,SAAS,OAAO;AAClD,oBAAM,WAAS,UAAQ,0BAA0B,UAAQ;AACzD,oBAAI,WAAS,SAAS,QAAQ;AAC7B,2BAAS,SAAS;;AAEnB,oBAAI,UAAQ,0BAA0B,SAAS,QAAQ;AACtD,2BAAS,SAAS,UAAQ;;;uBAMpB,MAAM,QAAQ,WAAW,CAAC,iBAAiB;AAGnD,kBAAM,YAAU,MAAK,aAAa,MAAM,MAAM,OAAO;AACrD,kBAAI,aAAa,UAAQ,wBAAwB,UAAQ;AAGzD,kBAAI,UAAU;AAGb,oBAAI,aAAa,kBAAkB,MAAK,MAAM,cAAc;AAG5D,oBAAM,WAAW,MAAK,MAAM,YAAY;AACxC,oBAAM,kBAAkB,MAAK,aAAa,UAAU,OAAO;AAC3D,oBAAM,gBAAgB,gBAAgB,wBAAwB,gBAAgB;AAG9E,oBAAK,SAAS,QAAQ,aAAc,UAAU;AAC7C,sBAAM,cAAc,WAAW,SAAS,QAAQ;AAChD,wBAAM,OAAO,MAAK,cAAc,SAAS,MAAM,MAAM,aAAa,UAAU;AAC5E,wBAAM,QAAQ;AACd,oCAAkB;;yBAIX,MAAM;AAEd,oBAAK,SAAS,QAAQ,aAAc,UAAU;AAC7C,sBAAM,cAAc,WAAW,SAAS;AACxC,sBAAM,UAAU,MAAK,cAAc,SAAS,MAAM,MAAM,aAAa,OAAO,cAAc;AAE1F,sBAAI,WAAW,IAAI;AAElB,0BAAK,eAAe;AACpB,2BAAO;;AAKR,mCAAiB,OAAO,MAAM,QAAQ,CAAC;AAGvC,sBAAI,AAAO,KAAK,OAAO,KAAK,AAAO,KAAK,MAAM,IAAI,GAAG;AACpD,mCAAe,QAAQ;sBACtB,MAAM;sBACN,MAAM,MAAM,KAAK,OAAO,QAAQ,MAAM;qBACtC;AACD,wBAAI,eAAe;AAClB,qCAAe,QAAQ;wBACtB,MAAM;wBACN,MAAM;uBACN;;;AAKH,wBAAM,OAAO,AAAO,KAAK,OAAO;AAEhC,2BAAS,CAAA;AACT,oCAAkB;;;AAMpB,kBAAI,eAAe;AACnB,kBAAI,gBAAgB;AACpB,kBAAI,gBAAgB,qBAAsB,oBAAoB,YAAa;AAE1E,oBAAM,YAAY,aAAa;AAC/B,wBAAQ,MAAK,MAAM;uBACb;uBACA;AACJ,mCAAe;AACf;uBACI;AACJ,mCAAe;AACf,oCAAgB;AAChB;;AAEA,oCAAgB;;AAElB,6BAAa;;AAGd,kBAAM,cAAc,UAAQ,0BAA0B,UAAQ;AAG9D,kBAAI,cAAc,SAAS,QAAQ;AAClC,yBAAS,SAAS;;AAEnB,kBAAI,UAAQ,0BAA0B,SAAS,QAAQ;AACtD,yBAAS,SAAS,UAAQ;;AAG3B,uBAAS,SAAS;AAClB,uBAAS,QAAQ,UAAQ,wBAAwB;AACjD,uBAAS,SAAS,UAAQ,yBAAyB;AACnD,uBAAS,WAAW,KAAK;gBACxB,OAAO;gBACP,MAAM;gBACN,MAAM,MAAM;gBACZ,OAAO;gBACP,QAAQ;gBACR,MAAM,UAAQ;gBACd,OAAO,UAAQ;gBACf,QAAQ,UAAQ;gBAChB,SAAS;gBACT,SAAS;gBACT,gBAAgB;gBAChB,eAAe;eACf;AAID,+BAAiB;;AAIlB,gBAAI,gBAAgB;;AAIpB,mBAAO;UAGR,CAAC;AAED,cAAI,MAAK,MAAM,sBAAsB,SAAS;AAC7C,qBAAS,UAAU,MAAK,MAAM,WAAW;AACzC,qBAAS,UAAU,MAAK,MAAM,WAAW;iBAErC;AACJ,qBAAS,UAAU,MAAK,MAAM,cAAc;AAC5C,qBAAS,UAAU,MAAK,MAAM,cAAc;;AAG7C,cAAI,OAAO,SAAS,MAAM;AACzB,mBAAO,SAAS;;AAGjB,cAAI,OAAO,SAAS,OAAO;AAC1B,mBAAO,SAAS;;AAGjB,gBAAK,UAAW,KAAK,QAAQ;AAG7B,qBAAW,SAAS;AAGpB,mBAAS,kBAAkB,CAAA;;AAlP5B,eAAO,OAAO,SAAS,GAAC;;;MAqPzB,CAAC;AAED,UAAI,CAAC,eAAe;AACnB,gBAAQ,QAAO;AACf,qBAAa,QAAO;;AAIrB,MAAO,KAAK,KAAK,WAAW,SAAC,UAAU,QAAc;AACpD,YAAI,qBAAqB;AACzB,QAAO,KAAK,SAAS,YAAY,SAAC,OAAK;AACtC,gBAAM,UAAU,qBAAqB,MAAM,OAAO,SAAS;AAC3D,gBAAM,WAAW,SAAS,SAAS,SAAS,SAAU,OAAK,MAAM,iBAAiB;AAClF,gCAAsB,MAAM;AAE5B,cAAI,MAAM,eAAe;AACxB,oBAAQ,MAAM;mBACR;AACJ,sBAAM,WAAW,SAAS,SAAS,IAAI,MAAM,SAAS;AACtD;mBACI;AACJ,sBAAM,WAAW,MAAM,SAAS;AAChC;;;QAGJ,CAAC;MACF,CAAC;AAED,UAAM,SAAS;QACd,MAAM,MAAM,CAAC,OAAO,CAAC;QACrB,KAAK;QACL,OAAO,MAAM,OAAO;QACpB,QAAQ;;AAKT,UAAI,sBAAsB,QAAQ;AACjC,YAAM,QAAQ,KAAK,UAAU,MAAM;AACnC,YAAI,QAAQ,GAAG;AACd,cAAI,qBAAqB,OAAO;AAC/B,gBAAI,AAAM,SAAS,KAAK,MAAM,QAAQ,KAAM,QAAQ,KAAK,MAAM,UAAW;AACzE,mBAAK,eAAe;mBAEhB;AACJ,kBAAI,CAAC,KAAK,kBAAkB,KAAK,kBAAkB,GAAG;AACrD,qBAAK,iBAAiB,KAAK;;AAE5B,mBAAK,QAAQ;AACb,mBAAK,eAAe;;qBAGb,qBAAqB,QAAQ;AACrC,iBAAK,eAAe;iBAEhB;AAEJ,oBAAQ,KAAK,MAAM;mBACb;mBACA;AACJ,uBAAO,OAAO,CAAC;AACf,uBAAO,QAAQ;AACf;mBACI;AACJ,uBAAO,OAAO,CAAC,WAAW;AAC1B,uBAAO,QAAQ,WAAW;AAC1B;;AAEA,uBAAO,OAAO;AACd,uBAAO,QAAQ;;AAGjB,iBAAK,QAAQ,KAAK,kBAAkB;AACpC,iBAAK,iBAAiB;AACtB,iBAAK,eAAe;;eAGjB;AACJ,eAAK,QAAQ,KAAK,kBAAkB;AACpC,eAAK,iBAAiB;AACtB,eAAK,eAAe;;;AAItB,cAAQ,QAAO;AACf,mBAAa,QAAO;AAEpB,aAAO;IACR;;;;;;WAEA,SAAoB,QAAe;AAClC,UAAM,OAAO,KAAK,MAAM;AACxB,UAAM,OAAO,KAAK,MAAM;AACxB,UAAI,CAAC,AAAM,SAAS,IAAI,KAAK,CAAC,AAAM,SAAS,IAAI,GAAG;AACnD,eAAO;;AAER,UAAM,IAAI,OAAO,QAAQ,OAAO;AAChC,UAAM,IAAI,OAAO,SAAS,OAAO;AACjC,aAAO,KAAK,IAAI,OAAQ,KAAK,GAAG,OAAQ,KAAK,CAAC;IAC/C;;;;;;WAEA,SAAwB,SAAmC,MAAc,UAAkB,YAA6B,oBAAkC;AAA/D,UAAA,eAAA,QAAA;AAAA,qBAAA;MAA2B;AAAE,UAAA,uBAAA,QAAA;AAAA,6BAAA;MAAkC;AACzJ,UAAI;AACJ,SAAG;AACF,YAAI,YAAY;AACf,iBAAO,KAAK,MAAM,GAAG,EAAE;eAEnB;AACJ,cAAI,MAAM,KAAK,QAAQ,mCAAmC,EAAE;AAC5D,cAAI,OAAO,MAAM,oBAAoB;AACpC,yBAAa;iBAET;AACJ,mBAAO;;;AAGT,YAAM,UAAU,KAAK,aAAa,MAAM,OAAO;AAC/C,gBAAQ,QAAQ,wBAAwB,QAAQ;eACvC,QAAQ,YAAa,QAAQ;AACvC,aAAO;IACR;;;;;;WAEA,SAAuB,MAAc,SAAiC;AACrE,UAAI,UAAU,QAAQ,YAAY,IAAI;AACtC,UAAI,cAAmB,CAAA;AACvB,UAAI,QAAQ,2BAA2B,MAAM;AAC5C,YAAM,MAAM,SAAS,cAAc,KAAK;AACxC,YAAI,YAAY;AAChB,YAAI,MAAM,aAAa;AACvB,YAAI,MAAM,WAAW;AACrB,YAAI,MAAM,MAAM;AAChB,YAAI,MAAM,aAAa,KAAK,MAAM,cAAc;AAChD,YAAI,MAAM,WAAW,KAAK,MAAM,WAAW;AAC3C,iBAAS,KAAK,YAAY,GAAG;AAC7B,YAAM,OAAO,IAAI,sBAAqB;AACtC,iBAAS,KAAK,YAAY,GAAG;AAC7B,YAAM,IAAI,KAAK;AACf,YAAM,MAAI,QAAQ;AAClB,YAAI,OAAO;AACX,YAAI,QAAQ;AAEZ,sBAAc;UACb,yBAAyB;UACzB,0BAA0B;UAC1B,uBAAuB;UACvB,wBAAwB;UACxB,uBAAuB;UACvB,wBAAwB;UACxB,OAAO;;aAIJ;AACJ,sBAAc;UACb,yBAAyB,QAAQ;UACjC,0BAA0B,QAAQ;UAClC,uBAAuB,QAAQ;UAC/B,wBAAwB,QAAQ;UAChC,uBAAuB,QAAQ;UAC/B,wBAAwB,QAAQ;UAChC,OAAO,QAAQ;;;AAIjB,UAAM,IAAI,QAAQ;AAClB,cAAQ,KAAK,MAAM;aACb;aACA;AACJ,sBAAY,wBAAwB;AACpC,sBAAY,yBAAyB;AACrC;aACI;AACJ,sBAAY,wBAAwB,IAAI;AACxC,sBAAY,yBAAyB,IAAI;AACzC;;AAEA,sBAAY,wBAAwB;AACpC,sBAAY,yBAAyB;;AAGvC,aAAO;IACR;;AAED,SAAA;AAAA,EAjvBgC,mBAAmB;AAsvBnD,IAAA,kBAAA,WAAA;AAAA,8BAAA;AAEC,WAAA,eAAA,MAAA,QAAA;;;;;;AACA,WAAA,eAAA,MAAA,aAAA;;;;;;AACA,WAAA,eAAA,MAAA,cAAA;;;;;;AACA,WAAA,eAAA,MAAA,YAAA;;;;;;AACA,WAAA,eAAA,MAAA,cAAA;;;;;;AACA,WAAA,eAAA,MAAA,aAAA;;;;;;AACA,WAAA,eAAA,MAAA,eAAA;;;;;;AACA,WAAA,eAAA,MAAA,kBAAA;;;;;;AACA,WAAA,eAAA,MAAA,eAAA;;;;;;AACA,WAAA,eAAA,MAAA,cAAA;;;;;;AACA,WAAA,eAAA,MAAA,iBAAA;;;;;;AACA,WAAA,eAAA,MAAA,iBAAA;;;;;;AACA,WAAA,eAAA,MAAA,iBAAA;;;;;;AAGA,WAAA,eAAA,MAAA,cAAA;;;;aAAuC,QAAQ,GAAG;;AAClD,WAAA,eAAA,MAAA,iBAAA;;;;aAAgC;;AAMhC,WAAA,eAAA,MAAA,aAAA;;;;;;AACA,WAAA,eAAA,MAAA,gBAAA;;;;;;AACA,WAAA,eAAA,MAAA,qBAAA;;;;aAA2E;;AAC3E,WAAA,eAAA,MAAA,cAAA;;;;aAA8B;;AAC9B,WAAA,eAAA,MAAA,YAAA;;;;aAA2B;;AAC3B,WAAA,eAAA,MAAA,YAAA;;;;;;AACA,WAAA,eAAA,MAAA,aAAA;;;;;;AACA,WAAA,eAAA,MAAA,YAAA;;;;;;AACA,WAAA,eAAA,MAAA,oBAAA;;;;aAAoC;;EACrC;AAAA,SAAA;AAAA,EAjCA;AAsCA,IAAA,mBAAA,SAAA,QAAA;AAAsC,YAAA,mBAAA,MAAA;AAAtC,+BAAA;AAAA,QAAA,QAAA,WAAA,QAAA,OAAA,MAAA,MAAA,SAAA,KAAA;AACC,WAAA,eAAA,OAAA,YAAA;;;;aAA+E;;AAC/E,WAAA,eAAA,OAAA,UAAA;;;;;;AACA,WAAA,eAAA,OAAA,cAAA;;;;;;AACA,WAAA,eAAA,OAAA,UAAA;;;;aAA0B;;AAC1B,WAAA,eAAA,OAAA,eAAA;;;;aAAqD;;AACrD,WAAA,eAAA,OAAA,WAAA;;;;aAA0B;;AAE1B,WAAA,eAAA,OAAA,iBAAA;;;;aAAiC;;;EAwYlC;;;;;WAtYC,SAAe,aAAwB;AACtC,cAAQ,KAAK;aACP;AACJ,eAAK,gBAAgB,WAAW;AAChC;;AAEA,iBAAA,UAAM,QAAO,KAAA,MAAC,WAAW;AACzB;;IAEH;;;;;;WAEA,SAAuB,aAAwB;AAC9C,UAAM,QAAQ,KAAK,UAAU;AAE7B,WAAK,WAAW,KAAK;AAErB,UAAM,cAAc,KAAK,eAAc;AACvC,UAAM,UAAU,MAAM;AACtB,UAAM,aAAa,MAAM;AACzB,UAAM,eAAe,KAAK,UAAU;AAGpC,cAAQ,KAAI;AACZ,UAAI,aAAa;AAChB,qBAAa,KAAI;;AAIlB,UAAI,SAAU,KAAK,UAAU;AAC7B,UAAI,aAAc,KAAK,cAAc;AACrC,UAAI,aAAa;AACjB,UAAI,cAAc,KAAK;AACvB,UAAI,SAAS,eAAe,SAAS,SAAS,eAAe;AAC7D,UAAM,SAAS,KAAK;AACpB,UAAM,QAAQ,KAAK,MAAM,aAAa;AACtC,UAAM,UAAU,KAAK,WAAW;AAChC,UAAI,YAAY,SAAS,SAAS,IAAI;AACtC,UAAM,gBAAgB,CAAC,KAAK;AAG5B,UAAI,CAAC,KAAK,WAAW;AACpB,aAAK,SAAS,KAAK;;AAIpB,UAAI,UAAU,QAAQ;AAErB,YAAI,aAAW;AACf,YAAI,WAAW;AACf,QAAO,KAAK,KAAK,WAAY,SAAC,OAAM,QAAM;AACzC,cAAM,cAAa,aAAc,MAAK,QAAS,UAAS,MAAK,UAAW,IAAI,CAAC;AAC7E,cAAI,cAAa,YAAU;AAC1B,yBAAW;;QAEb,CAAC;AACD,YAAI,SAAS,QAAQ;AACpB,qBAAY,cAAW,aAAa,KAAW;mBAEvC,SAAS,SAAS;AAC1B,qBAAY,cAAW,aAAa,KAAW;eAE3C;AACJ,qBAAW,aAAmB;;AAE/B,mBAAW,AAAM,eAAe,QAAQ;AACxC,iBAAU,YAAY,OAAS,YAAY;;AAG5C,UAAI,UAAU,QAAQ,eAAe;AACpC,aAAK,UAAW,QAAO;AACvB,aAAK,gBAAgB;;AAQtB,MAAO,KAAK,KAAK,WAAY,SAAC,OAAM,QAAM;AAEzC,YAAM,aAAa,MAAK;AAIxB,YAAI,CAAC,QAAQ;AACZ,oBAAU;;AAIX,YAAM,cAAa,MAAM,UAAY,aAAa,KAAK,CAAC,WAAY,eAAe;AAClF,gBAAK,WAAW,QAAO;;AAIxB,YAAI,iBAAiB;AACrB,qBAAa;AAGb,YAAI,SAAS,UAAU;AACtB,4BAAmB,MAAK,QAAS,UAAS,cAAe,IAAI,CAAC;AAC9D,uBAAa,iBAAiB;;AAe/B,0BAAmB,KAAK,KAAM,UAAS,IAAI;AAG3C,gBAAQ,KAAI;AACZ,YAAI,aAAa;AAChB,uBAAa,KAAI;;AAIlB,gBAAQ,OAAO,cAAc;AAC7B,YAAI,aAAa;AAChB,uBAAa,OAAO,cAAc;;AAGnC,YAAI,aAAa;AACjB,QAAO,KAAK,MAAK,YAAY,SAAC,OAAO,SAAM;AAG1C,cAAM,OAAO,MAAM;AACnB,cAAM,YAAY,MAAM;AAGxB,uBAAc,YAAY,IAAM,UAAS,cAAc;AACvD,kBAAQ,OAAO,UAAU;AACzB,cAAI,aAAa;AAChB,yBAAa,OAAO,UAAU;;AAI/B,cAAI,MAAM,OAAO;AAChB,oBAAQ,KAAI;AACZ,yBAAa,KAAI;AAEjB,oBAAQ,OAAO,MAAM;AACrB,gBAAI,aAAa;AAChB,2BAAa,OAAO,MAAM;;;AAI5B,cAAI,MAAM,MAAM;AACf,oBAAQ,KAAI;AACZ,oBAAQ,YAAY,MAAM,KAAK,MAAK;;AAKrC,kBAAQ,eAAe;AACvB,kBAAQ,YAAY;AACpB,cAAI,aAAa;AAChB,yBAAa,eAAe;AAC5B,yBAAa,YAAY;;AAI1B,cAAI,YAAY;AACf,oBAAQ,SAAS,MAAM,GAAI,UAAS,IAAI,MAAO,KAAI,SAAS,aAAa,EAAE;;AAE5E,cAAI,aAAa;AAChB,yBAAa,SAAS,MAAM,GAAI,UAAS,IAAI,MAAO,KAAI,SAAS,aAAa,EAAE;;AAGjF,cAAI,MAAM,MAAM;AACf,oBAAQ,QAAO;;AAKhB,cAAI,MAAM,OAAO;AAChB,oBAAQ,QAAO;AACf,yBAAa,QAAO;;AAIrB,uBAAc,aAAY,IAAI,WAAY,UAAS,cAAc;AACjE,kBAAQ,OAAO,UAAU;AACzB,cAAI,aAAa;AAChB,yBAAa,OAAO,UAAU;;QAGhC,CAAC;AAGD,gBAAQ,QAAO;AACf,YAAI,aAAa;AAChB,uBAAa,QAAO;;AAIrB,YAAI,QAAQ;AACX,oBAAU;;MAGZ,CAAC;AAGD,cAAQ,QAAO;AACf,UAAI,aAAa;AAChB,qBAAa,QAAO;;IAEtB;;;;;;WAEA,SAAgB,OAAkB;AACjC,cAAQ,KAAK;aACP;AACJ,iBAAO,KAAK,iBAAiB,KAAK;;AAElC,iBAAO,OAAA,UAAM,SAAQ,KAAA,MAAC,KAAK;;IAE9B;;;;;;WAEA,SAAwB,OAAkB;AAA1C,UAAA,QAAA;AACC,UAAM,UAAU,MAAM;AACtB,UAAM,eAAe,KAAK,UAAU;AACpC,UAAM,MAAM,KAAK,MAAM,aAAa;AAGpC,WAAK,YAAY,CAAA;AACjB,WAAK,gBAAgB;AAGrB,cAAQ,KAAI;AACZ,mBAAa,KAAI;AACjB,WAAK,WAAW,OAAO,IAAI;AAG3B,UAAM,QAAQ,KAAK,KAAK,SAAQ,EAAG,QAAQ,OAAO,EAAE,EAAE,MAAM,IAAI;AAChE,UAAI,gBAAgB;AAGpB,UAAI,UAAU;AACd,MAAO,KAAK,OAAO,SAAC,OAAM,QAAM;AAG/B,YAAI,SAAS,cAAc,MAAM,OAAM,OAAO,MAAK,MAAM,gBAAgB;AAGzE,YAAI,WAAkB;UACrB;UACA,QAAQ;UACR,OAAO;UACP,QAAQ;UACR,MAAM;UACN,OAAO;UACP,YAAY,CAAA;;AAGb,YAAI;AACJ,YAAI;AACJ,YAAI;AAGJ,QAAO,KAAK,QAAQ,SAAC,OAAO,SAAM;AAGjC,cAAI,MAAM,QAAQ,UAAU;AAC3B,gBAAI,MAAM,QAAQ,OAAO;AACxB,kBAAI,CAAC,eAAe;AACnB,wBAAQ,QAAO;AACf,6BAAa,QAAO;AACpB,gCAAgB;;AAEjB,4BAAc;AACd,6BAAe;AACf,kCAAoB;mBAEhB;AACJ,kBAAI,SAAS,cAAc,aAAa,MAAM,IAAI;AAClD,kBAAM,YAAY,MAAK,cAAc,MAAM;AAC3C,sBAAQ,KAAI;AACZ,2BAAa,KAAI;AACjB,sBAAQ,OAAO;AACf,6BAAe;AACf,kBAAI,OAAO,MAAM;AAChB,8BAAqB,OAAO;;AAE7B,kBAAU,OAAQ,OAAO;AACxB,oCAAoB,AAAM,SAAe,OAAQ,KAAK;;AAEvD,8BAAgB;;qBAKT,MAAM,QAAQ,SAAS;AAG/B,gBAAM,QAAQ,MAAM,KAAK,MAAM,KAAK,KAAK,CAAA;AACzC,gBAAI,KAAK;AACR,oBAAM,QAAO;;AAEd,qBAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AAEtC,kBAAM,OAAO,MAAM;AAGnB,kBAAM,UAAU,MAAK,aAAa,MAAM,OAAO;AAC/C,kBAAI,aAAa,QAAQ;AAGzB,kBAAI,gBAAgB,qBAAsB,oBAAoB,YAAa;AAC1E,6BAAa;;AAGd,kBAAM,cAAc,QAAQ,0BAA0B,QAAQ;AAC9D,kBAAI,cAAc,SAAS,QAAQ;AAClC,yBAAS,SAAS;;AAEnB,kBAAI,QAAQ,0BAA0B,SAAS,QAAQ;AACtD,yBAAS,SAAS,QAAQ;;AAG3B,uBAAS,SAAS;AAClB,uBAAS,QAAQ,QAAQ;AACzB,uBAAS,SAAS,QAAQ;AAC1B,uBAAS,WAAW,KAAK;gBACxB,OAAO;gBACP,MAAM;gBACN,MAAM;gBACN,OAAO;gBACP,QAAQ,cAAc,QAAQ;gBAC9B,MAAM,QAAQ;gBACd,OAAO,QAAQ;gBACf,QAAQ,QAAQ;gBAChB,SAAS;gBACT,SAAS;gBACT,gBAAgB;eAChB;AAED,kBAAI,KAAK;AACR;;;;QAMJ,CAAC;AAED,YAAI,MAAK,MAAM,sBAAsB,SAAS;AAC7C,mBAAS,UAAU,MAAK,MAAM,WAAW;eAErC;AACJ,mBAAS,UAAU,MAAK,MAAM,cAAc;;AAG7C,cAAK,UAAW,KAAK,QAAQ;AAG7B,mBAAW,SAAS;MAGrB,CAAC;AAED,UAAI,CAAC,eAAe;AACnB,gBAAQ,QAAO;AACf,qBAAa,QAAO;;AAIrB,MAAO,KAAK,KAAK,WAAW,SAAC,UAAQ;AACpC,QAAO,KAAK,SAAS,YAAY,SAAC,OAAK;AACtC,gBAAM,WAAW,KAAK,MAAO,UAAS,SAAS,MAAM,SAAU,UAAS,SAAS,MAAM,WAAW,CAAC;QACpG,CAAC;MACF,CAAC;AAED,cAAQ,QAAO;AACf,mBAAa,QAAO;AAEpB,aAAO;QACN,MAAM;QACN,KAAK;QACL,OAAO;QACP,QAAQ;;IAEV;;AAED,SAAA;AAAA,EAhZsC,UAAU;AAqZhD,IAAA,cAAA,SAAA,QAAA;AAAiC,YAAA,cAAA,MAAA;AAchC,wBAAY,UAA0B,OAAmC;AAAzE,QAAA,QACC,OAAA,KAAA,MAAM,QAAQ,KAAC;AAdhB,WAAA,eAAA,OAAA,SAAA;;;;;;AACA,WAAA,eAAA,OAAA,UAAA;;;;;;AACA,WAAA,eAAA,OAAA,SAAA;;;;;;AACA,WAAA,eAAA,OAAA,WAAA;;;;;;AAEA,WAAA,eAAA,OAAA,eAAA;;;;;;AACA,WAAA,eAAA,OAAA,cAAA;;;;;;AACA,WAAA,eAAA,OAAA,iBAAA;;;;;;AACA,WAAA,eAAA,OAAA,iBAAA;;;;;;AACA,WAAA,eAAA,OAAA,iBAAA;;;;;;AAEA,WAAA,eAAA,OAAA,cAAA;;;;;;AAIC,UAAK,QAAQ;;EACd;;;;;WAEA,WAAA;AACC,aAAA,UAAM,SAAQ,KAAA,IAAA;AAEd,UAAI,KAAK,YAAY;AACpB,oBAAY,KAAK,UAAU;;IAE7B;;;;;;WAEA,WAAA;AACC,UAAI,CAAC,KAAK,cAAc;AAGvB,YAAI,IAAI;AACR,YAAI,IAAI;AAER,YAAI,KAAK,OAAO;AACf,cAAI,KAAK;;AAEV,YAAI,KAAK,QAAQ;AAChB,cAAI,KAAK;;AAGV,aAAK,eAAe;UACnB,MAAM;UACN,KAAK;UACL,OAAO;UACP,QAAQ;;AAGT,aAAK,WAAW,KAAK,YAAY;;AAElC,aAAO,KAAK;IACb;;;;;;WAEA,SAAkB,aAAwB;AACzC,aAAA,UAAM,QAAO,KAAA,MAAC,WAAW;AAEzB,UAAI,KAAK,OAAO;AACf,YAAM,QAAQ,KAAK,UAAU;AAE7B,YAAI,KAAK,YAAY,QAAW;AAC/B,eAAK,UAAU,UAAU,KAAK,KAAK;AACnC,gBAAM,UAAU;;AAGjB,YAAI,KAAK,WAAW,KAAK,UAAU,cAAc;AAChD;;AAGD,YAAI,MAAM,OAAO;AAEhB,cAAI,KAAK,aAAa;AACrB,kBAAM,QAAQ,cAAc,KAAK,YAAY,MAAM,KAAK,iBAAiB,CAAC;;AAE3E,cAAI,KAAK,YAAY;AACpB,kBAAM,QAAQ,aAAa,KAAK;;AAEjC,cAAI,KAAK,eAAe;AACvB,kBAAM,QAAQ,gBAAgB,KAAK;;AAEpC,cAAI,KAAK,eAAe;AACvB,kBAAM,QAAQ,gBAAgB,KAAK;;AAIpC,cAAM,QAAQ,KAAK,SAAS,KAAK,MAAM;AACvC,cAAM,SAAS,KAAK,UAAU,KAAK,MAAM;AAEzC,gBAAM,QAAQ,UAAU,KAAK,OAAO,GAAG,GAAG,OAAO,MAAM;;AAGxD,YAAI,KAAK,eAAe,KAAK,eAAc,GAAI;AAC9C,cAAM,OAAO,KAAK,SAAS,KAAK,KAAK;AAErC,eAAK,UAAU,cAAc,UAAU,MAAM,GAAG,CAAC;;;IAGpD;;;;;;WAEA,WAAA;AACC,aAAA,UAAM,MAAK,KAAA,IAAA;AACX,WAAK,QAAQ;AACb,WAAK,aAAa;IACnB;;;;;;WAEA,SAAmB,OAAuB;AACzC,UAAI,KAAK,eAAe,QAAW;AAElC,YAAM,QAAQ,KAAK,SAAS,MAAM;AAClC,YAAM,SAAS,KAAK,UAAU,MAAM;AAGpC,YAAM,SAAS,SAAS,cAAc,QAAQ;AAC9C,eAAO,QAAQ;AACf,eAAO,SAAS;AAEhB,YAAM,UAAU,OAAO,WAAW,IAAI;AAEtC,gBAAQ,wBAAwB;AAEhC,gBAAQ,YAAY,KAAK,YAAW;AACpC,gBAAQ,SAAS,GAAG,GAAG,OAAO,MAAM;AAEpC,YAAI,CAAC,UAAU,KAAK,GAAG;AACtB,kBAAQ,2BAA2B;AACnC,kBAAQ,UAAU,OAAO,GAAG,GAAG,OAAO,MAAM;;AAG7C,aAAK,aAAa;;AAGnB,aAAO,KAAK;IACb;;AAED,SAAA;AAAA,EArIiC,mBAAmB;AA0IpD,IAAA,sBAAA,WAAA;AAKC,gCAAmB,OAAiB,QAAsB,MAAa;;;;;aAApD;;;;;;aAAiB;;;;;;aAAsB;;AAJ1D,WAAA,eAAA,MAAA,MAAA;;;;;;AACA,WAAA,eAAA,MAAA,aAAA;;;;aAA4B;;AAC5B,WAAA,eAAA,MAAA,UAAA;;;;aAAyB;;AAGxB,QAAI,AAAO,SAAS,aAAa,KAAK,iBAAiB,OAAO;AAC7D,WAAK,KAAK,MAAM;WAEV;AACN,WAAK,KAAK;;EAEZ;AACD,SAAA;AAAA,EAbA;AAsCA,IAAA,iBAAA,SAAA,QAAA;AAAoC,YAAA,iBAAA,MAAA;AAiDnC,2BAAY,YAAmB;AAA/B,QAAA,QACC,OAAA,KAAA,IAAA,KAAO;AAjDR,WAAA,eAAA,OAAA,QAAA;;;;aAA2B,SAAS,cAAc,KAAK;;AACvD,WAAA,eAAA,OAAA,aAAA;;;;aAAmC,SAAS,cAAc,KAAK;;AAE/D,WAAA,eAAA,OAAA,UAAA;;;;aAAoC,CAAA;;AACpC,WAAA,eAAA,OAAA,gBAAA;;;;aAA0C,CAAA;;AAC1C,WAAA,eAAA,OAAA,gBAAA;;;;aAAmC,MAAK,SAAS,CAAC;;AAElD,WAAA,eAAA,OAAA,cAAA;;;;;;AACA,WAAA,eAAA,OAAA,iBAAA;;;;;;AAEA,WAAA,eAAA,OAAA,kBAAA;;;;aAA8C,SAAS,cAAc,QAAQ;;AAC7E,WAAA,eAAA,OAAA,mBAAA;;;;aAAsD,MAAK,eAAe,WAAW,IAAI;;AAEzF,WAAA,eAAA,OAAA,UAAA;;;;aAA2B;;AAC3B,WAAA,eAAA,OAAA,WAAA;;;;aAA4B;;AAE5B,WAAA,eAAA,OAAA,gBAAA;;;;aAAiC;;AACjC,WAAA,eAAA,OAAA,iBAAA;;;;aAAkC;;AAElC,WAAA,eAAA,OAAA,cAAA;;;;;;AACA,WAAA,eAAA,OAAA,uBAAA;;;;aAAsC;;AAEtC,WAAA,eAAA,OAAA,cAAA;;;;aAA2D,CAAA;;AAC3D,WAAA,eAAA,OAAA,WAAA;;;;aAAsE,CAAA;;AAEtE,WAAA,eAAA,OAAA,YAAA;;;;aAA6B;;AAC7B,WAAA,eAAA,OAAA,aAAA;;;;aAAgE,CAAA;;AAEhE,WAAA,eAAA,OAAA,qBAAA;;;;aAAmC;;AACnC,WAAA,eAAA,OAAA,gBAAA;;;;aAA+B;;AAG/B,WAAA,eAAA,OAAA,aAAA;;;;aAA6C,oBAAI,IAAG;;AACpD,WAAA,eAAA,OAAA,aAAA;;;;aAAkE,CAAA;;AAClE,WAAA,eAAA,OAAA,cAAA;;;;aAAmE,CAAA;;AAEnE,WAAA,eAAA,OAAA,yBAAA;;;;;;AAEA,WAAA,eAAA,OAAA,iBAAA;;;;aAAgC;;AAChC,WAAA,eAAA,OAAA,wBAAA;;;;aAAsC;;AACtC,WAAA,eAAA,OAAA,gBAAA;;;;aAA+B;;AAC/B,WAAA,eAAA,OAAA,uBAAA;;;;;;AAUC,QAAI,cAAc,MAAM;AACvB,YAAK,aAAa,OAAO;WACnB;AACN,YAAK,aAAa;;AAGnB,UAAK,KAAK,MAAM,WAAW;AAC3B,UAAK,KAAK,YAAY,MAAK,SAAS;AAEpC,UAAK,WAAW,KAAK,IAAI,SAAS,WAAA;AACjC,MAAQ,MAAK,MAAK,SAAS,SAAC,MAAM,QAAM;AACvC,eAAO,SAAS,QAAO;MACxB,CAAC;AAED,MAAO,KAAK,MAAK,QAAQ,SAAC,OAAK;AAC9B,oBAAY,MAAM,IAAI;AAEtB,YAAI,MAAM,gBAAgB;AACzB,sBAAY,MAAM,cAAc;;MAElC,CAAC;AAED,kBAAY,MAAK,UAAU;AAC3B,kBAAY,MAAK,cAAc;IAChC,CAAC,CAAC;AAGF,UAAK,aAAa,SAAS,cAAc,QAAQ;AACjD,UAAK,gBAAgB,MAAK,WAAW,WAAW,MAAM,EAAE,OAAO,MAAK,CAAE;AACtE,UAAK,cAAc,wBAAwB;AAE3C,UAAK,WAAW,MAAM,WAAW;AACjC,UAAK,WAAW,MAAM,MAAM;AAC5B,UAAK,WAAW,MAAM,OAAO;AAE7B,UAAK,WAAW,KAAK,AAAO,iBAAiB,MAAK,YAAY,SAAS,SAAC,eAAyB;AAChG,UAAM,QAAQ,MAAK,SAAS,aAAa;AACzC,UAAM,SAAS,MAAK,cAAc,MAAM,OAAO,MAAM,IAAI;AACzD,cAAQ,MAAM,MAAM;IACrB,CAAC,CAAC;AAGF,UAAK,WAAW,KAAK,AAAO,iBAAiB,QAAQ,UAAU,SAAC,KAAG;AAClE,UAAI,cAAc,MAAM;AACvB,cAAK,aAAa,OAAO;;IAE3B,CAAC,CAAC;AAIF,QAAI,AAAO,SAAS,aAAa,GAAG;AACnC,UAAM,WAAW,SAAC,IAAO;AACxB,YAAI,MAAK,UAAU,WAAW,GAAG;AAChC,UAAO,aAAa,MAAK,WAAW,SAAC,MAAI;AACxC,gBAAI,KAAK,MAAM,kBAAiB,GAAI;AACnC,iBAAG,eAAc;AACjB,qBAAO;;AAER,mBAAO;UACR,CAAC;;AAIF,YAAI,MAAK,qBAAqB;AAC7B,gBAAK,sBAAqB;;MAE5B;AAEA,YAAK,WAAW,KAAK,AAAO,iBAAiB,QAAQ,cAAc,UAAU,EAAE,SAAS,MAAK,CAAE,CAAC;AAChG,YAAK,WAAW,KAAK,AAAO,iBAAiB,MAAK,MAAM,cAAc,UAAU,EAAE,SAAS,MAAK,CAAE,CAAC;AAEnG,YAAK,WAAW,KAAK,AAAO,iBAAiB,MAAK,MAAM,aAAa,WAAA;AAEpE,YAAI,MAAK,qBAAqB;AAC7B,gBAAK,sBAAqB;;MAE5B,GAAG,EAAE,SAAS,KAAI,CAAE,CAAC;AAErB,YAAK,WAAW,KAAK,AAAO,iBAAiB,QAAQ,SAAS,SAAC,KAAQ;AACtE,cAAK,eAAe;MACrB,GAAG,EAAE,SAAS,KAAI,CAAE,CAAC;AAErB,YAAK,WAAW,KAAK,AAAO,iBAAiB,MAAK,MAAM,SAAS,SAAC,KAAQ;AACzE,eAAO,WAAW,WAAA;AACjB,gBAAK,eAAe;AACpB,gBAAK,sBAAqB;QAC3B,GAAG,GAAG;MACP,GAAG,EAAE,SAAS,KAAI,CAAE,CAAC;;AAKtB,QAAI,AAAO,SAAS,aAAa,GAAG;AACnC,YAAK,WAAW,KAAK,AAAO,iBAAiB,MAAK,MAAM,SAAS,SAAC,IAAE;AACnE,YAAI,UAAU;AACd,cAAK,UAAU,QAAQ,SAAC,KAAG;AAC1B,cAAI,IAAI,WAAW;AAClB,sBAAU;AACV,mBAAO;;QAET,CAAC;AACD,YAAI,SAAS;AACZ,aAAG,eAAc;;MAEnB,GAAG,EAAE,SAAS,MAAK,CAAE,CAAC;;;EAGxB;;;;;WAEA,WAAA;AAAA,UAAA,QAAA;AACC,UAAI,KAAK,qBAAqB;AAC7B,qBAAa,KAAK,mBAAmB;;AAEtC,UAAI,KAAK,uBAAuB,GAAG;AAClC,aAAK,sBAAsB,OAAO,WAAW,WAAA;AAC5C,gBAAK,eAAe;QACrB,GAAG,KAAK,oBAAoB;;IAE9B;;AAEA,SAAA,eAAW,gBAAA,WAAA,kBAAc;SAAzB,WAAA;AACC,aAAO,CAAC,CAAC,KAAK,WAAW;IAC1B;SAEA,SAA0B,OAAc;AACvC,UAAI,OAAO;AACV,YAAI,CAAC,KAAK,WAAW,YAAY;AAChC,eAAK,KAAK,YAAY,KAAK,UAAU;;aAGhC;AACN,YAAI,KAAK,WAAW,YAAY;AAC/B,eAAK,WAAW,WAAW,YAAY,KAAK,UAAU;;;IAGzD;;;;;;;;WAEA,SAAqB,IAAY,IAAY,IAAY,IAAU;AAClE,aAAO,KAAK,aAAa,QAAQ,qBAAqB,IAAI,IAAI,IAAI,EAAE;IACrE;;;;;;WAEA,SAAqB,IAAY,IAAY,SAAiB,IAAY,IAAY,SAAe;AACpG,aAAO,KAAK,aAAa,QAAQ,qBAAqB,IAAI,IAAI,SAAS,IAAI,IAAI,OAAO;IACvF;;;;;;WAEA,SAAc,UAA0B,YAA4B,YAAoB,OAAe,QAAc;AA4BpH,WAAK,eAAe,QAAQ;AAC5B,WAAK,eAAe,SAAS;AAE7B,WAAK,gBAAgB,UAAU,GAAG,GAAG,OAAO,MAAM;AAKlD,iBAAW,eAAe,KAAK,eAAe;AAC9C,eAAS,eAAe,KAAK,eAAe;AAE5C,aAAO,KAAK,gBAAgB,cAAc,KAAK,gBAAgB,UAAU;IAC1E;;;;;;WAEA,WAAA;AACC,aAAO,IAAI,gBAAgB,IAAI;IAChC;;;;;;WAEA,WAAA;AACC,aAAO,IAAI,eAAe,IAAI;IAC/B;;;;;;WAEA,SAAS,MAAc,OAAsB;AAC5C,aAAO,IAAI,WAAW,MAAM,MAAM,KAAK;IACxC;;;;;;WAEA,WAAA;AACC,aAAO,IAAI,gBAAe;IAC3B;;;;;;WAEA,SAAe,MAAc,OAAsB;AAClD,aAAO,IAAI,iBAAiB,MAAM,MAAM,KAAK;IAC9C;;;;;;WAEA,SAAY,OAAmC;AAC9C,aAAO,IAAI,YAAY,MAAM,KAAK;IACnC;;;;;;WAEA,SAAO,OAAe,QAAc;AAApC,UAAA,QAAA;AACC,WAAK,eAAe;AACpB,WAAK,gBAAgB;AACrB,WAAK,SAAS,KAAK,MAAM,QAAQ,KAAK,UAAU;AAChD,WAAK,UAAU,KAAK,MAAM,SAAS,KAAK,UAAU;AAElD,MAAO,KAAK,KAAK,QAAQ,SAAC,OAAK;AAC9B,YAAI,OAAO;AACV,gBAAM,QAAQ;AAEd,cAAI,MAAM,SAAS,MAAM;AACxB,kBAAM,KAAK,QAAQ,MAAM;AACzB,kBAAM,KAAK,MAAM,QAAQ,MAAM,QAAQ;iBAEnC;AACJ,kBAAM,KAAK,QAAQ,MAAK;AACxB,kBAAM,KAAK,MAAM,QAAQ,QAAQ;;AAGlC,cAAI,MAAM,UAAU,MAAM;AACzB,kBAAM,KAAK,SAAS,MAAM;AAC1B,kBAAM,KAAK,MAAM,SAAS,MAAM,SAAS;iBAErC;AACJ,kBAAM,KAAK,SAAS,MAAK;AACzB,kBAAM,KAAK,MAAM,SAAS,SAAS;;;MAGtC,CAAC;AAGD,WAAK,WAAW,QAAQ,KAAK;AAC7B,WAAK,WAAW,SAAS,KAAK;AAC9B,WAAK,WAAW,MAAM,QAAQ,QAAQ;AACtC,WAAK,WAAW,MAAM,SAAS,SAAS;AAExC,WAAK,KAAK,MAAM,QAAQ,QAAQ;AAChC,WAAK,KAAK,MAAM,SAAS,SAAS;IACnC;;;;;;WAEA,WAAA;AACC,UAAM,OAAO,SAAS,cAAc,QAAQ;AAC5C,UAAM,UAAU,KAAK,WAAW,IAAI;AACpC,UAAM,QAAQ;QACb;QACA;QACA,OAAO;QACP,SAAS;QACT,OAAO;QACP,QAAQ;QACR,OAAO;QACP,SAAS;;AAGV,WAAK,MAAM,WAAW;AACtB,WAAK,MAAM,MAAM;AACjB,WAAK,MAAM,OAAO;AAElB,aAAO;IACR;;;;;;WAEA,SAAgB,OAAa;AAC5B,UAAM,SAAS,KAAK;AACpB,UAAM,SAAS,OAAO;AACtB,eAAS,IAAI,GAAG,IAAI,QAAQ,KAAK;AAChC,YAAM,QAAQ,OAAO;AACrB,YAAI,MAAM,SAAS,OAAO;AACzB,iBAAO;;;IAGV;;;;;;WAEA,SAAS,OAAe,SAAuB;AAAvB,UAAA,YAAA,QAAA;AAAA,kBAAA;MAAuB;AAC9C,UAAI,gBAAgB,KAAK,gBAAgB,KAAK;AAC9C,UAAI,eAAe;AAClB,eAAO;;AAGR,UAAM,QAAQ,KAAK,oBAAmB;AACtC,YAAM,QAAQ;AACd,YAAM,UAAU;AAEhB,UAAI,MAAM,WAAW,KAAK,QAAQ;AACjC,cAAM,KAAK,QAAQ,KAAK;AACxB,cAAM,KAAK,MAAM,QAAQ,KAAK,eAAe;AAC7C,cAAM,KAAK,SAAS,KAAK;AACzB,cAAM,KAAK,MAAM,SAAS,KAAK,gBAAgB;;AAGhD,UAAM,SAAS,KAAK;AAEpB,aAAO,KAAK,KAAK;AAEjB,aAAO,KAAK,SAAC,IAAG,GAAC;AAChB,YAAI,GAAE,QAAQ,EAAE,OAAO;AACtB,iBAAO;mBAEC,GAAE,QAAQ,EAAE,OAAO;AAC3B,iBAAO;eAEH;AACJ,iBAAO;;MAET,CAAC;AAED,UAAM,SAAS,OAAO;AACtB,UAAM,aAAa,AAAO,QAAQ,QAAQ,KAAK;AAC/C,UAAI;AAEJ,eAAS,IAAI,aAAa,GAAG,IAAI,QAAQ,KAAK;AAC7C,YAAI,OAAO,GAAG,SAAS;AACtB,iBAAO,OAAO;AACd;;;AAIF,UAAI,MAAM,SAAS;AAClB,YAAI,SAAS,QAAW;AACvB,eAAK,UAAU,YAAY,MAAM,IAAI;eAE/B;AACN,eAAK,UAAU,aAAa,MAAM,MAAM,KAAK,IAAI;;;AAInD,aAAO;IACR;;;;;;WAEA,SAAO,MAAyB;AAAhC,UAAA,QAAA;AAEC,WAAK,aAAa,SAAS;AAE3B,MAAO,KAAK,KAAK,QAAQ,SAAC,OAAK;AAC9B,YAAI,OAAO;AACV,cAAI,MAAM,SAAS,MAAM,SAAS;AACjC,gBAAM,UAAU,MAAM;AAEtB,kBAAK,aAAa,KAAK,KAAK;AAE5B,oBAAQ,KAAI;AACZ,oBAAQ,UAAU,GAAG,GAAG,MAAK,QAAQ,MAAK,OAAO;;;MAGpD,CAAC;AAED,WAAK,cAAc,KAAI;AAGvB,WAAK,cAAc,YAAY;AAC/B,WAAK,cAAc,SAAS,GAAG,GAAG,KAAK,QAAQ,KAAK,OAAO;AAE3D,WAAK,OAAO,KAAK,YAAY;AAE7B,WAAK,cAAc,QAAO;AAM1B,MAAO,KAAK,KAAK,QAAQ,SAAC,OAAK;AAC9B,YAAI,OAAO;AACV,cAAM,UAAU,MAAM;AACtB,kBAAQ,UAAS;AACjB,kBAAQ,OAAO,GAAG,CAAC;AACnB,kBAAQ,OAAM;;MAEhB,CAAC;AAED,MAAO,KAAK,KAAK,cAAc,SAAC,OAAK;AACpC,cAAM,QAAQ,QAAO;AACrB,cAAM,QAAQ;MACf,CAAC;AAGD,UAAI,KAAK,UAAU,QAAQ,KAAK,uBAAuB;AAEtD,YAAM,WAAS,KAAK,sBAAsB;AAE1C,QAAO,KAAK,KAAK,sBAAsB,QAAQ,SAAC,OAAK;AACpD,gBAAK,yBAAyB,OAAO,QAAM;QAC5C,CAAC;;IAEH;;;;;;WAEA,SAAQ,KAAwB;AAC/B,UAAM,KAAK,aAAa,EAAE,KAAK,QAAQ;AACvC,UAAM,SAAQ,MAAM,QAAQ,EAAE,EAAE,MAAK;AACrC,WAAK,UAAU,UAAS;AACxB,aAAO;IACR;;;;;;WAEA,SAAc,KAAwB;AACrC,UAAI,IAAI,aAAa,QAAW;AAC/B,eAAO,KAAK,UAAU,IAAI;;IAE5B;;;;;;WAMA,SAAyC,eAAkB,aAA2B;AAA3B,UAAA,gBAAA,QAAA;AAAA,sBAAA;MAA2B;AACrF,UAAM,OAAgB,cAAc,KAAK,KAAK,sBAAqB,IAAK,IAAI,QAAQ,GAAG,GAAG,GAAG,CAAC;AAE9F,aAAO,IAAI,oBACV,eACC,cAAc,WAAW,cAAc,UAAU;QACjD,GAAG,cAAc,UAAW,eAAc,UAAU,KAAK,OAAO;QAChE,GAAG,cAAc,UAAW,eAAc,UAAU,KAAK,MAAM;UAC5D;QACH,GAAG;QACH,GAAG;SAEJ,IAAI;IAEN;;;;;;WAEA,SAAc,QAAe,MAAa;AACzC,UAAI,OAAM,IAAI,KAAK,OAAM,IAAI,KAAK,SAAS,OAAM,IAAI,KAAK,OAAM,IAAI,KAAK,QAAQ;AAChF;aAEI;AACJ,YAAM,QAAQ,KAAK,cAAc,aAEhC,KAAK,MAAO,OAAM,IAAI,KAAK,QAAS,KAAK,MAAM,GAC/C,KAAK,MAAO,OAAM,IAAI,KAAK,SAAU,KAAK,OAAO,GACjD,GACA,CAAC;AAGF,YAAI,MAAM,KAAK,OAAO,KAAK,MAAM,KAAK,OAAO,KAAK,MAAM,KAAK,OAAO,GAAG;AACtE,iBAAO;;AAER,YAAM,UAAU,MAAM,QAAQ,MAAM,KAAK,IAAI,MAAM,KAAK,IAAI,MAAM,KAAK,EAAE,EAAE,MAAK;AAChF,YAAM,MAAM,KAAK,UAAU;AAE3B,eAAO;;IAET;;;;;;WAEA,SAA+C,KAAU,GAAgC;AACxF,UAAM,SAAS,KAAK,QAAQ;AAE5B,UAAI,WAAW,QAAW;AACzB,eAAO,cAAc;AAErB,YAAI;AACH,YAAE,MAAM;;AAGR,iBAAO,cAAc;AAErB,cAAI,OAAO,SAAS;AACnB,mBAAO,UAAU;AAEjB,YAAO,OAAO,OAAO,WAAW,SAAC,UAAQ;AACxC,qBAAO,CAAC,SAAS;YAClB,CAAC;AAED,gBAAI,OAAO,UAAU,WAAW,GAAG;AAClC,qBAAO,SAAS,QAAO;AACvB,qBAAO,KAAK,QAAQ;;;;;IAKzB;;;;;;WAEA,SAAqD,KAAU,OAA2B;AACzF,UAAI,CAAC,KAAK,qBAAqB;AAC9B;;AAGD,WAAK,YAAY,KAAK,SAAC,QAAM;AAC5B,QAAO,KAAK,OAAO,WAAW,SAAC,UAAQ;AACtC,cAAI,CAAC,SAAS,UAAU;AACvB,qBAAS,SAAS,KAAK,SAAS,SAAS,KAAK;;QAEhD,CAAC;MACF,CAAC;IACF;;;;;;WAEA,SAAkD,KAAU,QAA6B,OAA2B;AACnH,UAAI,CAAC,KAAK,qBAAqB;AAC9B,eAAO;;AAGR,UAAI,aAAa;AAEjB,WAAK,YAAY,KAAK,SAAC,QAAM;AAC5B,QAAO,KAAK,OAAO,WAAW,SAAC,UAAQ;AACtC,cAAI,CAAC,SAAS,YAAY,SAAS,WAAW,QAAQ;AACrD,qBAAS,SAAS,KAAK,SAAS,SAAS,KAAK;AAC9C,yBAAa;;QAEf,CAAC;MACF,CAAC;AAED,aAAO;IACR;;;;;;WAEA,SAAmB,eAA4B;AAA/C,UAAA,QAAA;AAEC,UAAM,SAAwB,cAAe;AAC7C,UAAI,UAAU,KAAK,UAAU,KAAK,UAAU,KAAK,WAAW,QAAW;AAEtE;;AAGD,UAAM,QAAQ,KAAK,SAAS,aAAa;AACzC,UAAM,SAAS,KAAK,cAAc,MAAM,OAAO,MAAM,IAAI;AAGzD,UAAI,QAAQ;AACX,YAAM,OAAK,MAAM;AAEjB,YAAI,YAAU;AAEd,oBAAY,QAAQ,SAAC,KAAG;AACvB,cAAM,OAAO,EAAE,IAAI,MAAI,OAAO,IAAG;AAEjC,gBAAK,WAAW,KAAK,IAAI;AAEzB,cAAI,CAAC,aAAW,MAAK,eAAe,eAAe,KAAK,KAAK,GAAG;AAE/D,wBAAU;AAEV,gBAAM,MAAM,MAAK,UAAU,KAAK,SAAC,IAAC;AACjC,qBAAO,GAAE,UAAU,OAAO,GAAE,OAAO;YACpC,CAAC;AAED,gBAAI,CAAC,KAAK;AACT,oBAAK,UAAU,KAAK,IAAI;;;AAK1B,iBAAO;QACR,CAAC;;IAEH;;;;;;WAEA,SAAyB,eAA8B,QAAe;AAAtE,UAAA,QAAA;AACC,UAAM,QAAQ,KAAK,SAAS,aAAa;AAEzC,UAAM,SAAS,KAAK,cAAc,MAAM,OAAO,MAAM,IAAI;AACzD,YAAM,SAAS;AAEf,UAAI,QAAQ;AACX,aAAK,UAAU,QAAQ,SAAC,KAAG;AAC1B,cAAI,CAAC,IAAI,SAAS,MAAM,GAAG;AAC1B,kBAAK,UAAU,OAAO,GAAG;AACzB,gBAAI,IAAI,iBAAiB;AACxB,cAAO,SAAS,SAAS,MAAM,UAAU,IAAI,oBAAqB;;AAEnE,kBAAK,eAAe,cAAc,KAAK,KAAK;;QAE9C,CAAC;AAED,YAAI,MAAM,QAAQ;AACjB,sBAAY,QAAQ,SAAC,KAAG;AACvB,gBAAI,CAAC,MAAK,UAAU,IAAI,GAAG,GAAG;AAC7B,oBAAK,UAAU,IAAI,GAAG;AACtB,kBAAI,IAAI,iBAAiB;AACxB,oBAAI,uBAAuB,AAAO,SAAS,SAAS,MAAM,QAAQ;AAClE,gBAAO,SAAS,SAAS,MAAM,UAAU,IAAI,eAAe;;AAE7D,oBAAK,eAAe,eAAe,KAAK,KAAK;;AAG9C,mBAAO;UACR,CAAC;;aAII;AACN,aAAK,UAAU,QAAQ,SAAC,KAAG;AAC1B,cAAI,IAAI,iBAAiB;AACxB,YAAO,SAAS,SAAS,MAAM,UAAU,IAAI,oBAAqB;;AAEnE,gBAAK,eAAe,cAAc,KAAK,KAAK;QAC7C,CAAC;AAED,aAAK,UAAU,MAAK;;AAErB,WAAK,kBAAkB,qBAAqB,KAAK;IAClD;;;;;;WAEA,SAAuB,eAA8B,QAAe;AACnE,UAAM,QAAQ,KAAK,SAAS,aAAa;AACzC,YAAM,SAAS;AAEf,WAAK,kBAAkB,mBAAmB,KAAK;IAChD;;;;;;WAEA,SAAkB,eAA4B;AAA9C,UAAA,QAAA;AACC,UAAI,KAAK,UAAU,WAAW,GAAG;AAChC,YAAM,UAAQ,KAAK,SAAS,aAAa;AACzC,YAAM,OAAK,QAAM;AAEjB,aAAK,UAAU,QAAQ,SAAC,KAAG;AAC1B,cAAI,IAAI,OAAO,MAAI;AAClB,kBAAK,eAAe,eAAe,IAAI,OAAO,OAAK;;QAErD,CAAC;;IAEH;;;;;;WAEA,SAAiB,eAA4B;AAA7C,UAAA,QAAA;AACC,UAAM,SAAwB,cAAe;AAC7C,UAAI;AACJ,UAAI,UAAU,KAAK,WAAW,QAAW;AACxC,qBAAa;iBAEL,UAAU,GAAG;AACrB,qBAAa;iBAEL,UAAU,GAAG;AACrB,qBAAa;aAET;AAEJ;;AAGD,UAAM,QAAQ,KAAK,SAAS,aAAa;AACzC,UAAM,KAAK,MAAM;AAEjB,UAAI,KAAK,WAAW,WAAW,GAAG;AACjC,YAAM,WAAS,KAAK,cAAc,MAAM,OAAO,MAAM,IAAI;AAEzD,YAAI,UAAQ;AACX,eAAK,WAAW,QAAQ,SAAC,KAAG;AAC3B,gBAAI,IAAI,OAAO,MAAM,IAAI,MAAM,SAAS,QAAM,GAAG;AAChD,oBAAK,eAAe,YAAY,IAAI,OAAO,KAAK;;UAElD,CAAC;;AAGF,aAAK,WAAW,SAAS;;AAG1B,UAAI,KAAK,UAAU,WAAW,GAAG;AAChC,aAAK,UAAU,QAAQ,SAAC,KAAG;AAC1B,cAAI,IAAI,OAAO,IAAI;AAClB,kBAAK,eAAe,aAAa,IAAI,OAAO,KAAK;;QAEnD,CAAC;AAED,aAAK,UAAU,SAAS;;IAE1B;;;;;;WAEA,SAAqB,eAA4B;AAAjD,UAAA,QAAA;AACC,UAAM,QAAQ,KAAK,SAAS,aAAa;AACzC,UAAM,SAAS,KAAK,cAAc,MAAM,OAAO,MAAM,IAAI;AAEzD,UAAI,QAAQ;AACX,oBAAY,QAAQ,SAAC,KAAG;AACvB,cAAI,MAAK,eAAe,YAAY,KAAK,KAAK,GAAG;AAChD,mBAAO;iBACD;AACN,mBAAO;;QAET,CAAC;;IAEH;;;;;;WAEA,SAAe,eAAyB;AAAxC,UAAA,QAAA;AACC,UAAM,QAAQ,KAAK,SAAS,aAAa;AACzC,UAAM,SAAS,KAAK,cAAc,MAAM,OAAO,MAAM,IAAI;AAEzD,UAAI,QAAQ;AACX,oBAAY,QAAQ,SAAC,KAAG;AACvB,cAAI,MAAK,eAAe,SAAS,KAAK,KAAK,GAAG;AAC7C,mBAAO;iBACD;AACN,mBAAO;;QAET,CAAC;;IAEH;;;;;;WAEA,SAAiB,KAAa,GAAkB;AAAhD,UAAA,QAAA;AACC,UAAI,KAAK,WAAW,SAAS,QAAW;AACvC,YAAM,aAAW,EAAC;AAElB,aAAK,WAAW,OAAO,IAAI,gBAAgB,WAAA;AAC1C,iBAAO,MAAK,WAAW;AACvB,qBAAS,QAAO;QACjB,CAAC;;AAGF,aAAO,KAAK,WAAW,KAAK,UAAS;IACtC;;;;;;WAEA,SAAgB,MAAc,GAAyD;AACtF,UAAI,SAAS;AACb,UAAI,QAAuB;AAE3B,uBAAc;AACb,gBAAQ;AACR,iBAAS;MACV;AAEA,aAAO,IAAI,cAAc;QACxB,IAAI,SAAS,WAAA;AACZ,cAAI,UAAU,MAAM;AACnB,yBAAa,KAAK;;AAGnB,gBAAK;QACN,CAAC;QAED,AAAO,iBAAiB,KAAK,MAAM,AAAO,iBAAiB,IAAI,GAAG,SAAC,GAAC;AACnE,mBAAS;AAET,cAAI,UAAU,MAAM;AACnB,yBAAa,KAAK;;AAGnB,kBAAQ,OAAO,WAAW,OAAO,CAAC;QACnC,CAAC;QAED,eAAe,QAAQ,MAAM,SAAC,IAAE;AAC/B,cAAI,UAAU,MAAM;AACnB,yBAAa,KAAK;AAClB,oBAAQ;;AAGT,YAAE,IAAI,MAAM;AAEZ,mBAAS;QACV,CAAC;OACD;IACF;;;;;;WAGA,SAAW,KAA0B;AAArC,UAAA,QAAA;AACC,cAAQ;aACF;aACA;aACA;AACJ,iBAAO,KAAK,iBAAiB,eAAe,WAAA;AAC3C,gBAAM,WAAW,SAAC,QAA8B,QAAe;AAC9D,oBAAK,wBAAwB,EAAE,QAAQ,OAAM;AAE7C,cAAO,KAAK,QAAQ,SAAC,OAAK;AACzB,sBAAK,yBAAyB,OAAO,MAAM;cAC5C,CAAC;YACF;AAEA,mBAAO,IAAI,cAAc;cACxB,MAAK,gBAAgB,eAAe,QAAQ;cAC5C,MAAK,gBAAgB,eAAe,QAAQ;aAC5C;UACF,CAAC;aACG;AACJ,iBAAO,KAAK,iBAAiB,aAAa,WAAA;AACzC,gBAAI,UAAU,MAAK,gBAAgB,aAAa,SAAC,QAAQ,QAAM;AAC9D,cAAO,KAAK,QAAQ,SAAC,OAAK;AACzB,sBAAK,uBAAuB,OAAO,MAAM;cAC1C,CAAC;AACD,oBAAK,wBAAwB,EAAE,QAAQ,OAAM;YAC9C,CAAC;AAED,gBAAI,gBAAgB,MAAK,gBAAgB,iBAAiB,SAAC,QAAQ,QAAM;AACxE,cAAO,KAAK,QAAQ,SAAC,OAAK;AACzB,sBAAK,uBAAuB,OAAO,MAAM;cAC1C,CAAC;AACD,oBAAK,wBAAwB,EAAE,QAAQ,OAAM;YAC9C,CAAC;AAED,mBAAO,IAAI,SAAS,WAAA;AACnB,sBAAQ,QAAO;AACf,4BAAc,QAAO;YACtB,CAAC;UACF,CAAC;aACG;aACA;aACA;aACA;aASA;aACA;AACJ,iBAAO,KAAK,iBAAiB,eAAe,WAAA;AAG3C,gBAAM,YAAY,eAAe,MAAK,MAAM,eAAe,SAAC,QAAM;AACjE,cAAO,KAAK,QAAQ,SAAC,IAAE;AACtB,sBAAK,mBAAmB,EAAE;cAC3B,CAAC;YACF,CAAC;AAGD,gBAAM,YAAY,MAAK,gBAAgB,eAAe,SAAC,IAAwB;AAE9E,cAAO,KAAK,IAAI,SAAC,KAAE;AAClB,sBAAK,kBAAkB,GAAE;cAC1B,CAAC;YAEF,CAAC;AAED,gBAAM,UAAU,MAAK,gBAAgB,aAAa,SAAC,IAAwB;AAC1E,cAAO,KAAK,IAAI,SAAC,KAAE;AAClB,sBAAK,iBAAiB,GAAE;cACzB,CAAC;YACF,CAAC;AAED,gBAAM,gBAAgB,MAAK,gBAAgB,iBAAiB,SAAC,IAAwB;AACpF,cAAO,KAAK,IAAI,SAAC,KAAE;AAClB,sBAAK,iBAAiB,GAAE;cACzB,CAAC;YACF,CAAC;AAED,mBAAO,IAAI,SAAS,WAAA;AACnB,wBAAU,QAAO;AACjB,wBAAU,QAAO;AACjB,sBAAQ,QAAO;AACf,4BAAc,QAAO;YACtB,CAAC;UACF,CAAC;aACG;AACJ,iBAAO,KAAK,iBAAiB,YAAY,WAAA;AACxC,mBAAO,MAAK,gBAAgB,YAAY,SAAC,IAAE;AAC1C,cAAO,KAAK,IAAI,SAAC,KAAE;AAClB,sBAAK,qBAAqB,GAAE;cAC7B,CAAC;YACF,CAAC;UACF,CAAC;aACG;AACJ,iBAAO,KAAK,iBAAiB,SAAS,WAAA;AACrC,mBAAO,AAAO,iBAAiB,QAAQ,AAAO,iBAAiB,OAAO,GAAG,SAAC,OAAiB;AAC1F,oBAAK,eAAe,KAAK;YAC1B,GAAG,EAAE,SAAS,MAAK,CAAE;UACtB,CAAC;;IAEJ;;;;;;WAEA,SAAgD,QAA6B,KAAU,UAA0D,SAAW;AAA5J,UAAA,QAAA;AACC,UAAI,SAAkC,KAAK,QAAQ;AAEnD,UAAI,WAAW,QAAW;AACzB,iBAAS,KAAK,QAAQ,OAAO;UAC5B,UAAU,KAAK,WAAW,GAAG;UAC7B,WAAW,CAAA;UACX,aAAa;UACb,SAAS;;;AAIX,UAAM,WAAW,EAAE,QAAQ,SAAS,UAAU,UAAU,MAAK;AAE7D,aAAQ,UAAU,KAAK,QAAQ;AAE/B,aAAO,IAAI,SAAS,WAAA;AACnB,iBAAS,WAAW;AAEpB,YAAI,OAAQ,aAAa;AACxB,iBAAQ,UAAU;eAEZ;AACN,UAAO,YAAY,OAAQ,WAAW,QAAQ;AAE9C,cAAI,OAAQ,UAAU,WAAW,GAAG;AACnC,mBAAQ,SAAS,QAAO;AACxB,mBAAO,MAAK,QAAQ;;;MAGvB,CAAC;IACF;;;;;;WAEA,SAAiB,MAA2B,SAAwB;AAApE,UAAA,QAAA;AAGC,WAAK,OAAO,IAAI;AAEhB,UAAI,CAAC,SAAS;AACb,kBAAU,CAAA;;AAGX,UAAI,QAAgB,KAAK;AAGzB,UAAI,QAAQ,YAAa,QAAQ,WAAW,KAAK,QAAS;AACzD,YAAI,WAAW,QAAQ,WAAW,KAAK;AACvC,YAAI,WAAW,OAAO;AACrB,kBAAQ,WAAW,KAAK;;;AAI1B,UAAI,QAAQ,aAAc,QAAQ,YAAY,KAAK,SAAU;AAC5D,YAAI,WAAW,QAAQ,YAAY,KAAK;AACxC,YAAI,WAAW,OAAO;AACrB,kBAAQ,WAAW,KAAK;;;AAI1B,UAAI,QAAQ,YAAa,QAAQ,WAAW,KAAK,QAAS;AACzD,YAAI,WAAW,QAAQ,WAAW,KAAK;AACvC,YAAI,WAAW,OAAO;AACrB,kBAAQ,WAAW,KAAK;;;AAI1B,UAAI,QAAQ,aAAc,QAAQ,YAAY,KAAK,SAAU;AAC5D,YAAI,WAAW,QAAQ,YAAY,KAAK;AACxC,YAAI,WAAW,OAAO;AACrB,kBAAQ,WAAW,KAAK;;;AAK1B,UAAI,QAAQ,oBAAoB;AAC/B,iBAAS,KAAK;;AAIf,UAAM,WAAgC,CAAA;AAGtC,UAAI,cAAc;AAClB,UAAI,cAAc,KAAK;AACvB,UAAI,eAAe,KAAK;AACxB,UAAM,SAAS,SAAS,cAAc,QAAQ;AAC9C,UAAI,SAAS,KAAK,YAAY;AAC7B,sBAAc;AACd,sBAAc,KAAK,SAAS,QAAQ,KAAK;AACzC,uBAAe,KAAK,UAAU,QAAQ,KAAK;;AAG5C,aAAO,QAAQ;AACf,aAAO,SAAS;AAGhB,aAAO,MAAM,WAAW;AACxB,aAAO,MAAM,MAAM;AACnB,WAAK,KAAK,YAAY,MAAM;AAC5B,eAAS,KAAK,MAAM;AAGpB,UAAM,UAAU,OAAO,WAAW,IAAI;AAEtC,UAAI,QAAQ;AACZ,UAAI,SAAS;AACb,UAAI,eAAe;AAEnB,MAAO,KAAK,KAAK,QAAQ,SAAC,OAAK;AAC9B,YAAI,SAAS,MAAM,SAAS;AAC3B,cAAI,MAAM,WAAW,aAAa;AACjC,2BAAe;AAEf,kBAAM,iBAAiB,MAAM;AAC7B,kBAAM,oBAAoB,MAAM;AAEhC,kBAAM,OAAO,SAAS,cAAc,QAAQ;AAG5C,kBAAK,KAAK,MAAM,WAAW;AAC3B,kBAAK,KAAK,MAAM,MAAM;AACtB,kBAAK,KAAK,YAAY,MAAM,IAAI;AAChC,qBAAS,KAAK,MAAM,IAAI;AAExB,kBAAM,KAAK,QAAQ;AACnB,kBAAM,KAAK,SAAS;AAEpB,kBAAM,UAAU,MAAM,KAAK,WAAW,IAAI;AAE1C,kBAAM,QAAQ;AACd,kBAAM,QAAQ;;;MAIjB,CAAC;AAED,UAAI,cAAc;AACjB,aAAK,eAAe;AACpB,aAAK,OAAO,IAAI;AAChB,aAAK,eAAe;;AAGrB,MAAO,KAAK,KAAK,QAAQ,SAAC,OAAK;AAC9B,YAAI,SAAS,MAAM,SAAS;AAG3B,kBAAQ,UAAU,MAAM,MAAM,GAAG,CAAC;AAGlC,cAAI,MAAM,gBAAgB;AACzB,kBAAM,OAAO,MAAM;AACnB,kBAAM,iBAAiB;;AAGxB,cAAI,MAAM,mBAAmB;AAC5B,kBAAM,UAAU,MAAM;AACtB,kBAAM,oBAAoB;;AAG3B,cAAI,QAAQ,MAAM,KAAK,aAAa;AACnC,oBAAQ,MAAM,KAAK;;AAEpB,cAAI,SAAS,MAAM,KAAK,cAAc;AACrC,qBAAS,MAAM,KAAK;;AAGrB,gBAAM,QAAQ;;MAEhB,CAAC;AAED,aAAO,MAAM,QAAQ,QAAQ;AAC7B,aAAO,MAAM,SAAS,SAAS;AAE/B,MAAO,KAAK,UAAU,SAAC,SAAM;AAC5B,cAAK,KAAK,MAAM,WAAW;AAC3B,cAAK,KAAK,MAAM,MAAM;AACtB,cAAK,KAAK,YAAY,OAAM;MAC7B,CAAC;AAED,aAAO;IACR;;AAED,SAAA;AAAA,EAnkCoC,aAAa;;;AChuFjD,aAAa,KAAyB,UAAuC;AAC5E,MAAI,OAAO,MAAM;AAChB,0BAAsB,QAAQ;SAExB;AACN,eAAW,WAAA;AACV,4BAAsB,QAAQ;IAC/B,GAAG,MAAO,GAAG;;AAEf;AAsCA,IAAA,OAAA,WAAA;AAiMC,iBAAsB,IAA0B,UAA8B,QAAe;AAA7C,QAAA,aAAA,QAAA;AAAA,iBAAA,CAAA;IAA4B;AA5L5E,WAAA,eAAA,MAAA,OAAA;;;;;;AACA,WAAA,eAAA,MAAA,UAAA;;;;;;AAEA,WAAA,eAAA,MAAA,YAAA;;;;aAA8B;;AAC9B,WAAA,eAAA,MAAA,mBAAA;;;;aAAqC;;AACrC,WAAA,eAAA,MAAA,UAAA;;;;aAA6C,CAAA;;AAC7C,WAAA,eAAA,MAAA,iBAAA;;;;aAAqD,CAAA;;AACrD,WAAA,eAAA,MAAA,gBAAA;;;;aAAoD,CAAA;;AACpD,WAAA,eAAA,MAAA,mBAAA;;;;aAAsD,CAAA;;AAEtD,WAAA,eAAA,MAAA,WAAA;;;;aAA4D;;AAC5D,WAAA,eAAA,MAAA,YAAA;;;;aAA2D,CAAA;;AAO3D,WAAA,eAAA,MAAA,UAAA;;;;aAA4D,IAAI,gBAAe;;AAM/E,WAAA,eAAA,MAAA,iBAAA;;;;aAAsC;;AAEtC,WAAA,eAAA,MAAA,eAAA;;;;aAAyC,CAAA;;AAEzC,WAAA,eAAA,MAAA,aAAA;;;;;;AAEA,WAAA,eAAA,MAAA,kBAAA;;;;;;AAKA,WAAA,eAAA,MAAA,aAAA;;;;;;AAKA,WAAA,eAAA,MAAA,oBAAA;;;;;;AAEA,WAAA,eAAA,MAAA,YAAA;;;;;;AAOA,WAAA,eAAA,MAAA,YAAA;;;;aAA4B,SAAS,IAAI,MAAM,CAAA,CAAE;;AAOjD,WAAA,eAAA,MAAA,UAAA;;;;aAAyB;;AASzB,WAAA,eAAA,MAAA,OAAA;;;;aAAsB;;AAWtB,WAAA,eAAA,MAAA,YAAA;;;;;;AASA,WAAA,eAAA,MAAA,OAAA;;;;;;AAOA,WAAA,eAAA,MAAA,mBAAA;;;;aAA0C,gBAAgB,IAAI,MAAM,CAAA,CAAE;;AAOtE,WAAA,eAAA,MAAA,iBAAA;;;;aAAsC,cAAc,IAAI,MAAM,CAAA,CAAE;;AAOhE,WAAA,eAAA,MAAA,qBAAA;;;;aAA8C,kBAAkB,IAAI,MAAM,CAAA,CAAE;;AAU5E,WAAA,eAAA,MAAA,YAAA;;;;aAA0B;;AAG1B,WAAA,eAAA,MAAA,eAAA;;;;aAAkC,CAAA;;AAElC,WAAA,eAAA,MAAA,sBAAA;;;;aAAwC;;AACxC,WAAA,eAAA,MAAA,0BAAA;;;;;;AACA,WAAA,eAAA,MAAA,kBAAA;;;;;;AACA,WAAA,eAAA,MAAA,YAAA;;;;;;AACA,WAAA,eAAA,MAAA,sBAAA;;;;;;AACA,WAAA,eAAA,MAAA,4BAAA;;;;;;AACA,WAAA,eAAA,MAAA,uBAAA;;;;;;AAEA,WAAA,eAAA,MAAA,SAAA;;;;;;AAKA,WAAA,eAAA,MAAA,SAAA;;;;;;AAOA,WAAA,eAAA,MAAA,mBAAA;;;;;;AAQA,WAAA,eAAA,MAAA,kBAAA;;;;aAAwC,eAAe,IAAI,MAAM,CAAA,CAAE;;AAQnE,WAAA,eAAA,MAAA,oBAAA;;;;aAA0C,iBAAiB,IAAI,MAAM,CAAA,CAAE;;AAQvE,WAAA,eAAA,MAAA,cAAA;;;;aAAoC,WAAW,IAAI,MAAM,CAAA,CAAE;;AAS3D,WAAA,eAAA,MAAA,cAAA;;;;aAA6B;;AAE7B,WAAA,eAAA,MAAA,aAAA;;;;aAA8B;;AAE9B,WAAA,eAAA,MAAA,eAAA;;;;aAAiC;;AACjC,WAAA,eAAA,MAAA,cAAA;;;;aAAyC,CAAA;;AAEzC,WAAA,eAAA,MAAA,yBAAA;;;;;;AAEA,WAAA,eAAA,MAAA,aAAA;;;;aAAmC,CAAA;;AAEnC,WAAA,eAAA,MAAA,yBAAA;;;;;;AACA,WAAA,eAAA,MAAA,0BAAA;;;;aAAgD,CAAA;;AAI/C,QAAI,CAAC,QAAQ;AACZ,YAAM,IAAI,MAAM,yDAAyD;;AAG1E,QAAI,SAAS,qBAAqB,MAAM;AACvC,eAAS,oBAAoB;;AAG9B,QAAI;AAEJ,QAAI,SAAS,mBAAmB;AAC/B,mBAAa,AAAO,kBAAiB;;AAGtC,SAAK,YAAY,IAAI,eAAe,UAAU;AAE9C,QAAI;AAEJ,QAAI,cAAc,aAAa;AAC9B,YAAM;WAEF;AACJ,YAAM,SAAS,eAAe,EAAE;;AAGjC,IAAO,KAAK,SAAS,cAAc,SAAC,MAAI;AACvC,UAAI,KAAK,QAAQ,KAAK;AACrB,cAAM,IAAI,MAAM,qDAAqD;;IAEvE,CAAC;AAED,SAAK,kBAAkB,gBAAgB,IAAI,MAAM,CAAA,CAAE;AAEnD,QAAI,QAAQ,MAAM;AACjB,YAAM,IAAI,MAAM,0CAA0C,KAAK,GAAG;;AAGnE,SAAK,MAAM;AAEX,QAAI,QAAwB,SAAS,cAAc,KAAK;AACxD,UAAM,MAAM,WAAW;AACvB,UAAM,MAAM,SAAS;AACrB,QAAI,YAAY,KAAK;AAErB,SAAK,SAAS;AAEd,SAAK,sBAAqB;AAE1B,aAAS,aAAa,KAAK,IAAI;EAChC;;;;;WAEA,SAAkB,IAA0B,UAAwB;AACnE,UAAM,OAAO,IAAI,MAAK,IAAI,UAAU,IAAI;AACxC,WAAK,MAAK;AACV,aAAO;IACR;;;;;;WAEA,SAAe,IAAwB;AACtC,UAAI;AAEJ,UAAI,cAAc,aAAa;AAC9B,cAAM;aAEF;AACJ,cAAM,SAAS,eAAe,EAAE;;AAGjC,UAAI,KAAK;AACR,eAAO,KAAK,IAAI,WAAW,SAAS,GAAG;AACtC,cAAI,YAAY,KAAK,IAAI,WAAW,EAAE;;AAEvC,aAAK,MAAM;AACX,aAAK,kBAAiB;AACtB,aAAK,OAAM;;IAGb;;;;;;WAGA,WAAA;AACC,UAAI,KAAK,OAAO;AACf,YAAM,IAAI,KAAK,IAAI;AACnB,YAAM,IAAI,KAAK,IAAI;AACnB,YAAK,KAAK,OAAS,KAAK,IAAK;AAC5B,eAAK,MAAM,KAAI;eAEX;AACJ,eAAK,MAAM,KAAI;;;IAGlB;;;;;;WAEA,WAAA;AACC,UAAI,CAAC,KAAK,OAAO;AAChB,YAAM,OAAO,KAAK,iBAAiB,SAAS,KAAK,UAAU,IAAI,MAAM;UACpE,aAAa;UACb,qBAAqB;UACrB,UAAU;UACV,oBAAoB;UACpB,YAAY;UACZ,cAAc;UACd,eAAe;UACf,aAAa;UACb,OAAO;UACP,GAAG,QAAQ,GAAG;UACd,SAAS;UACT,aAAa;UACb,UAAU;UACV,iBAAiB;UACjB,YAAY,UAAU,IAAI,MAAM;YAC/B,MAAM,MAAM,OAAQ;YACpB,aAAa;YACb,UAAU;WACV;SACD,CAAC;AAEF,YAAM,UAAU,QAAQ,IAAI,MAAM;UACjC,oBAAoB;UACpB,YAAY;UACZ,cAAc;UACd,eAAe;UACf,aAAa;SACb;AACD,gBAAQ,MAAM,OAAO;UACpB,UAAU;SACV;AACD,gBAAQ,IAAI,YAAY,EAAG,OAAO;UACjC,MAAM,KAAK,gBAAgB,IAAI,YAAY;UAC3C,QAAQ,KAAK,gBAAgB,IAAI,MAAM;UACvC,eAAe;SACf;AACD,aAAK,IAAI,WAAW,OAAO;AAE3B,aAAK,OAAO,GAAG,SAAS,WAAA;AACvB,iBAAO,KAAK,6BAA6B,QAAQ;QAClD,CAAC;AAED,aAAK,OAAO,OAAO,SAAS,CAAA,CAAE;AAE9B,YAAM,IAAI,KAAK,SAAS,KAAK,SAAS,IAAI,MAAM;UAC/C,QAAQ,MAAM,QAAQ;UACtB,aAAa;UACb,SAAS;SACT,CAAC;AAEF,UAAE,OAAO,OAAO,SAAS,EAAE,QAAQ,MAAM,OAAQ,EAAC,CAAE;AAEpD,YAAM,KAAI,KAAK,SAAS,KAAK,SAAS,IAAI,MAAM;UAC/C,QAAQ,MAAM,OAAQ;UACtB,aAAa;UACb,SAAS;SACT,CAAC;AAEF,WAAE,OAAO,OAAO,SAAS,EAAE,QAAQ,MAAM,OAAQ,EAAC,CAAE;AAIpD,aAAK,QAAQ;AAEb,aAAK,YAAW;;IAElB;;;;;;WAEA,WAAA;AAAA,UAAA,QAAA;AACC,UAAM,WAAW,KAAK;AACtB,UAAM,gBAAgB,UAAU,IAAI,MAAM,EAAE,SAAS,MAAM,OAAO,KAAK,IAAI,aAAa,QAAQ,KAAK,IAAI,aAAY,CAAE;AACvH,WAAK,iBAAiB;AACtB,WAAK,eAAe,eAAe,KAAK,aAAa,IAAI,IAAI,CAAC;AAE9D,UAAM,YAAY,cAAc,SAAS,KAAK,UAAU,IAAI,MAAM,EAAE,SAAS,MAAM,OAAO,MAAM,QAAQ,KAAI,CAAE,CAAC;AAC/G,WAAK,YAAY;AAEjB,eAAS,OAAO,KAAK,IAAI,aAAa,KAAK,IAAI,YAAY;AAG3D,WAAK,OAAO,YAAY,SAAS,IAAI;AAKrC,WAAK,kBAAiB;AAGtB,WAAK,wBAAwB,SAAS,cAAc,KAAK;AACzD,WAAK,sBAAsB,MAAM,WAAW;AAC5C,WAAK,OAAO,YAAY,KAAK,qBAAqB;AAGlD,UAAM,qBAAqB,SAAS,cAAc,KAAK;AACvD,yBAAmB,aAAa,QAAQ,OAAO;AAC/C,yBAAmB,MAAM,SAAS;AAClC,yBAAmB,MAAM,UAAU;AACnC,yBAAmB,MAAM,WAAW;AACpC,yBAAmB,MAAM,MAAM;AAC/B,WAAK,sBAAsB;AAC3B,WAAK,OAAO,YAAY,KAAK,mBAAmB;AAEhD,UAAM,wBAAwB,SAAS,cAAc,KAAK;AAC1D,4BAAsB,MAAM,WAAW;AACvC,4BAAsB,MAAM,gBAAgB;AAC5C,4BAAsB,MAAM,MAAM;AAClC,4BAAsB,MAAM,OAAO;AACnC,4BAAsB,MAAM,WAAW;AACvC,4BAAsB,MAAM,QAAQ,KAAK,IAAI,cAAc;AAC3D,4BAAsB,MAAM,SAAS,KAAK,IAAI,eAAe;AAE7D,4BAAsB,aAAa,QAAQ,aAAa;AAExD,MAAO,eAAe,uBAAuB,KAAK;AAClD,WAAK,yBAAyB;AAC9B,WAAK,OAAO,YAAY,KAAK,sBAAsB;AAEnD,WAAK,2BAA2B,SAAS,cAAc,KAAK;AAC5D,WAAK,OAAO,YAAY,KAAK,wBAAwB;AAIrD,UAAI,AAAO,SAAS,gBAAgB,GAAG;AAEtC,aAAK,WAAW,KAAK,AAAO,iBAAiB,QAAQ,WAAW,SAAC,IAAiB;AACjF,cAAI,GAAG,WAAW,IAAI;AACrB,kBAAK,WAAW;;QAElB,CAAC,CAAC;AAEF,aAAK,WAAW,KAAK,AAAO,iBAAiB,QAAQ,SAAS,SAAC,IAAiB;AAC/E,cAAI,GAAG,WAAW,IAAI;AACrB,kBAAK,WAAW;;QAElB,CAAC,CAAC;AAEF,aAAK,WAAW,KAAK,AAAO,iBAAiB,uBAAuB,WAAW,SAAC,IAAiB;AAChG,cAAM,gBAAgB,MAAK;AAC3B,cAAI,eAAe;AAClB,gBAAI,GAAG,WAAW,IAAI;AAErB,cAAO,KAAI;AACX,oBAAK,iBAAiB;;AAEvB,gBAAI,cAAc;AAClB,gBAAI,cAAc;AAGlB,oBAAQ,GAAG;mBACL;AACJ,mBAAG,eAAc;AACjB,oBAAM,YAAY,SAAS,SAAS,IAAI,WAAW,OAAO,CAAC;AAC3D,8BAAc,OAAO,SAAS,SAAS;kBACtC,MAAM;kBACN,eAAe,UAAU;kBACzB,OAAO,UAAU;kBACjB,WAAW;kBACX,QAAQ;iBACR;AACD;mBACI;AACJ,8BAAc;AACd;mBACI;AACJ,8BAAc;AACd;mBACI;AACJ,8BAAc;AACd;mBACI;AACJ,8BAAc;AACd;;AAEA;;AAGF,gBAAI,eAAe,KAAK,eAAe,GAAG;AACzC,iBAAG,eAAc;AAEjB,kBAAI,CAAC,cAAc,WAAU,GAAI;AAEhC,sBAAK,qBAAqB;kBACzB,GAAG;kBACH,GAAG;;AAGJ,oBAAM,YAAY,SAAS,SAAS,IAAI,WAAW,aAAa;kBAC/D,SAAS;kBACT,SAAS;iBACT,CAAC;AAEF,oBAAI,cAAc,OAAO,UAAU,aAAa,GAAG;AAClD,gCAAc,OAAO,SAAS,eAAe;oBAC5C,MAAM;oBACN,eAAe,UAAU;oBACzB,OAAO,UAAU;oBACjB,WAAW;oBACX,QAAQ;mBACR;;qBAIE;;AAML,kBAAM,YAAY,MAAK;AACvB,wBAAU,KAAK;AACf,wBAAU,KAAK;AACf,kBAAM,YAAY,SAAS,SAAS,IAAI,WAAW,aAAa;gBAC/D,SAAS,UAAU;gBACnB,SAAS,UAAU;eACnB,GAAG,KAAK;AAET,kBAAI,cAAc,OAAO,UAAU,mBAAmB,GAAG;AACxD,8BAAc,OAAO,SAAS,qBAAqB;kBAClD,MAAM;kBACN,eAAe,UAAU;kBACzB,OAAO,UAAU;kBACjB,WAAW;kBACX,QAAQ;iBACR;;;;QAKL,CAAC,CAAC;AAEF,aAAK,WAAW,KAAK,AAAO,iBAAiB,uBAAuB,SAAS,SAAC,IAAiB;AAC9F,cAAI,MAAK,gBAAgB;AACxB,gBAAM,gBAAgB,MAAK;AAC3B,gBAAM,UAAU,GAAG;AACnB,oBAAQ;mBACF;mBACA;mBACA;mBACA;AACJ,oBAAI,cAAc,WAAU,GAAI;AAE/B,sBAAM,YAAY,MAAK;AACvB,sBAAM,UAAU,SAAS,SAAS,IAAI,WAAW,WAAW;oBAC3D,SAAS,UAAU;oBACnB,SAAS,UAAU;mBACnB,CAAC;AAEF,sBAAI,cAAc,OAAO,UAAU,iBAAiB,GAAG;AACtD,kCAAc,OAAO,SAAS,mBAAmB;sBAChD,MAAM;sBACN,eAAe,QAAQ;sBACvB,OAAO,QAAQ;sBACf,WAAW;sBACX,QAAQ;qBACR;;AAGF,wBAAK,qBAAqB;AAG1B;2BAEQ,cAAc,IAAI,gBAAgB,GAAG;AAE7C,sBAAM,UAAQ,cAAc,IAAI,gBAAgB;AAChD,sBAAM,QAAQ,MAAK,YAAY,OAAO,SAAA,MAAI;AAAI,2BAAA,KAAK,IAAI,gBAAgB,KAAK;kBAA9B,CAAmC;AACjF,sBAAI,QAAQ,MAAM,QAAQ,aAAa;AACvC,sBAAM,YAAY,MAAM,SAAS;AACjC,2BAAU,WAAW,MAAM,WAAW,KAAM,IAAI;AAChD,sBAAI,QAAQ,GAAG;AACd,4BAAQ;6BAEA,QAAQ,WAAW;AAC3B,4BAAQ;;AAET,kBAAO,MAAM,MAAM,OAAO,WAAW,cAAc,EAAG,GAAG;;AAE1D;;;QAGJ,CAAC,CAAC;;AAGH,WAAK,aAAY;AACjB,WAAK,UAAU,CAAA,CAAE;AAEjB,WAAK,YAAW;AAEhB,UAAI,CAAC,KAAK,YAAW,GAAI;AACxB,aAAK,cAAa;;IAEpB;;;;;;WAEA,WAAA;AAAA,UAAA,QAAA;AACC,UAAI,KAAK,uBAAuB;AAC/B,aAAK,sBAAsB,QAAO;;AAEnC,WAAK,wBAAwB,IAAI,aAAa,KAAK,KAAK,WAAA;AACvD,YAAI,MAAK,YAAY;AACpB,gBAAK,OAAM;;MAEb,CAAC;AACD,WAAK,WAAW,KAAK,KAAK,qBAAqB;IAChD;;;;;;WAMA,WAAA;AACC,UAAM,MAAM,KAAK;AACjB,UAAM,IAAI,IAAI;AACd,UAAM,IAAI,IAAI;AACd,UAAI,IAAI,KAAK,IAAI,GAAG;AACnB,YAAM,uBAAuB,KAAK;AAClC,6BAAqB,MAAM,QAAQ,IAAI;AACvC,6BAAqB,MAAM,SAAS,IAAI;AAExC,YAAM,wBAAwB,KAAK;AACnC,8BAAsB,MAAM,QAAQ,IAAI;AACxC,8BAAsB,MAAM,SAAS,IAAI;AAEzC,aAAK,UAAU,OAAO,GAAG,CAAC;AAE1B,YAAM,gBAAgB,KAAK;AAE3B,sBAAc,WAAW,SAAS,CAAC;AACnC,sBAAc,WAAW,UAAU,CAAC;AACpC,aAAK,QAAO;AACZ,aAAK,YAAW;;IAElB;;;;;;WAEA,WAAA;AACC,WAAK,UAAU,OAAO,KAAK,eAAe,QAAQ;AAElD,UAAI,KAAK,oBAAoB;AAC5B,aAAK,oBAAmB;AACxB,aAAK,qBAAqB;;IAE5B;;;;;;WAEA,SAAoB,aAAmB;AACtC,MAAO,KAAK,KAAK,UAAU,SAAC,GAAC;AAC5B,UAAE,WAAW;MACd,CAAC;IACF;;;;;;WAEA,SAAuB,aAAmB;AACzC,MAAO,OAAO,KAAK,aAAa,SAAC,WAAS;AACzC,eAAO,CAAC,UAAU,cAAc,WAAW;MAC5C,CAAC;IACF;;;;;;WAEA,WAAA;AAAA,UAAA,QAAA;AAEC,UAAI,aAAwC,CAAA;AAE5C,aAAO,KAAK,iBAAiB;AAE5B,aAAK,kBAAkB;AAEvB,QAAQ,KAAK,KAAK,aAAa,EAAE,QAAQ,SAAC,KAAG;AAC5C,cAAM,SAAS,MAAK,cAAc;AAElC,iBAAO,MAAK,cAAc;AAE1B,cAAI,CAAC,OAAO,WAAU,GAAI;AACzB,uBAAW,OAAO,OAAO;AACzB,mBAAO,iBAAgB;;QAEzB,CAAC;;AAGF,MAAQ,KAAK,UAAU,EAAE,QAAQ,SAAC,KAAG;AACpC,mBAAW,KAAK,gBAAe;MAChC,CAAC;AAED,UAAM,UAAyB,CAAA;AAG/B,MAAQ,KAAK,KAAK,MAAM,EAAE,QAAQ,SAAC,KAAG;AACrC,YAAM,SAAS,MAAK,OAAO;AAE3B,YAAI,OAAO,WAAU,GAAI;AACxB,iBAAO,MAAK,OAAO,OAAO;eAEpB;AACN,kBAAQ,KAAK,MAAM;AACnB,iBAAO,eAAc;;MAEvB,CAAC;AAGD,cAAQ,QAAQ,SAAC,QAAM;AACtB,eAAO,SAAQ;AACf,eAAO,MAAK,OAAO,OAAO;AAC1B,eAAO,YAAW;MACnB,CAAC;AAED,WAAK,WAAW;AAEhB,UAAM,SAAmC,CAAA;AACzC,UAAM,SAAyB,CAAA;AAE/B,MAAQ,KAAK,KAAK,YAAY,EAAE,QAAQ,SAAC,KAAG;AAC3C,YAAM,SAAS,MAAK,aAAa;AAEjC,eAAO,MAAK,aAAa;AAEzB,YAAI,CAAC,OAAO,WAAU,GAAI;AACzB,iBAAO,OAAO,OAAO,OAAO,MAAK;AACjC,iBAAO,KAAK,MAAM;;MAEpB,CAAC;AAGD,aAAO,KAAK,SAAC,IAAG,IAAC;AAChB,eAAO,AAAO,QAAQ,OAAO,GAAE,MAAM,OAAO,GAAE,IAAI;MACnD,CAAC;AAGD,aAAO,QAAQ,SAAC,QAAM;AACrB,eAAO,cAAa;MACrB,CAAC;AAGD,UAAM,iBAAiB,KAAK;AAC5B,MAAQ,KAAK,cAAc,EAAE,QAAQ,SAAC,KAAG;AACxC,YAAM,SAAS,eAAe;AAE9B,eAAO,eAAe;AAEtB,YAAI,CAAC,OAAO,WAAU,GAAI;AACzB,iBAAO,gBAAe;;MAExB,CAAC;AAGD,cAAQ,QAAQ,SAAC,QAAM;AACtB,eAAO,cAAa;MACrB,CAAC;IAEF;;;;;;WAEA,SAAqB,aAAmB;AACvC,UAAI,KAAK,OAAO,UAAU,cAAc,GAAG;AAC1C,aAAK,OAAO,SAAS,gBAAgB;UACpC,MAAM;UACN,QAAQ;UACR,WAAW;SACX;;AAGF,WAAK,qBAAoB;AACzB,WAAK,YAAY,WAAW;AAC5B,WAAK,eAAe,WAAW;AAC/B,WAAK,YAAW;AAChB,WAAK,QAAO;AACZ,WAAK,sBAAqB;AAE1B,UAAI,KAAK,OAAO,UAAU,YAAY,GAAG;AACxC,aAAK,OAAO,SAAS,cAAc;UAClC,MAAM;UACN,QAAQ;UACR,WAAW;SACX;;AAIF,aAAO,KAAK,SAAS,WAAW,KAC/B,KAAK,YAAY,WAAW,KAC5B,CAAC,KAAK;IACR;;;;;;WAEA,SAAmB,aAAmB;AACrC,UAAI,CAAC,KAAK,WAAU,GAAI;AACvB,aAAK,gBAAgB;AAErB,YAAM,OAAO,KAAK,aAAa,WAAW;AAG1C,YAAI,MAAM;AACT,eAAK,UAAU;AACf,eAAK,gBAAgB;eAEf;AACN,cAAI,KAAK,KAAK,KAAK,OAAQ;;;IAG9B;;;;;;WAEA,WAAA;AACC,UAAI,CAAC,KAAK,WAAU,GAAI;AACvB,mBAAU;AACT,cAAM,cAAc,YAAY,IAAG;AAEnC,eAAK,gBAAgB;AAErB,cAAM,OAAO,KAAK,aAAa,WAAW;AAE1C,cAAI,MAAM;AACT,iBAAK,gBAAgB;AACrB;;;;IAIJ;;;;;;WAEA,WAAA;AAAA,UAAA,QAAA;AACC,UAAI,KAAK,YAAY,MAAM;AAC1B,aAAK,gBAAgB;AAErB,aAAK,UAAU,SAAC,aAAW;AAC1B,gBAAK,WAAW,WAAW;QAC5B;AAEA,YAAI,KAAK,KAAK,KAAK,OAAQ;;IAE7B;;;;;;WAEA,SAAuB,QAAc;AACpC,UAAI,KAAK,OAAO,OAAO,SAAS,QAAW;AAC1C,aAAK,WAAW;AAChB,aAAK,OAAO,OAAO,OAAO;AAC1B,aAAK,aAAY;;IAEnB;;;;;;WAEA,SAAuB,QAAe;AACrC,UAAI,KAAK,cAAc,OAAO,SAAS,QAAW;AACjD,aAAK,WAAW;AAChB,aAAK,kBAAkB;AACvB,aAAK,cAAc,OAAO,OAAO;AACjC,aAAK,aAAY;;IAEnB;;;;;;WAEA,SAAuB,QAAe;AACrC,UAAI,KAAK,aAAa,OAAO,SAAS,QAAW;AAChD,aAAK,WAAW;AAChB,aAAK,aAAa,OAAO,OAAO;AAChC,aAAK,aAAY;;IAEnB;;;;;;WAEA,SAAyB,QAAc;AACtC,UAAI,KAAK,gBAAgB,OAAO,SAAS,QAAW;AACnD,aAAK,WAAW;AAChB,aAAK,gBAAgB,OAAO,OAAO;AACnC,aAAK,aAAY;;IAEnB;;;;;;WAEA,SAAqB,WAAqB;AAEzC,UAAI,KAAK,YAAY,QAAQ,SAAS,MAAM,IAAI;AAC/C,aAAK,YAAY,KAAK,SAAS;AAC/B,aAAK,aAAY;;IAEnB;;;;;;WAEA,WAAA;AACC,WAAK,WAAW;IACjB;;;;;;WAEA,WAAA;AAAA,UAAA,QAAA;AACC,WAAK,OAAO,KAAK,cAAc,WAAA;AAC9B,cAAK,WAAW;AAChB,cAAK,aAAY;MAClB,CAAC;IACF;;;;;;WAEA,SAAiB,GAAgC;AAAjD,UAAA,QAAA;AACC,WAAK,SAAS,KAAK,CAAC;AACpB,WAAK,aAAY;AAEjB,aAAO,IAAI,SAAS,WAAA;AACnB,QAAO,YAAY,MAAK,UAAU,CAAC;MACpC,CAAC;IACF;;;;;;WAOA,WAAA;AACC,aAAO,KAAK,IAAI;IACjB;;;;;;WAOA,WAAA;AACC,aAAO,KAAK,IAAI;IACjB;;;;;;WAKA,WAAA;AACC,UAAI,CAAC,KAAK,aAAa;AACtB,aAAK,cAAc;AAEnB,aAAK,eAAe,QAAO;AAC3B,aAAK,UAAU,QAAO;AACtB,aAAK,iBAAiB,QAAO;AAC7B,aAAK,eAAe,QAAO;AAC3B,aAAK,gBAAgB,QAAO;AAE5B,QAAO,KAAK,KAAK,YAAY,SAAC,IAAC;AAC9B,aAAE,QAAO;QACV,CAAC;AAED,YAAI,KAAK,QAAQ;AAChB,UAAO,cAAc,KAAK,MAAM;;AAGjC,QAAO,OAAO,SAAS,cAAc,IAAI;;IAE3C;;;;;;WAOA,WAAA;AACC,aAAO,KAAK;IACb;;;;;;WAQA,SAAmB,MAAY;AAC9B,WAAK,oBAAqB,YAAY,AAAO,UAAU,IAAI;IAC5D;;;;;;WAQA,SAAiB,QAAoB;AACpC,WAAK,eAAe,IAAI,UAAU,MAAM;AAGxC,UAAM,mBAAmB,KAAK;AAC9B,UAAI,kBAAkB;AACrB,yBAAiB,aAAY;;AAI9B,UAAM,kBAAkB,KAAK;AAC7B,UAAI,iBAAiB;AACpB,wBAAgB,aAAY;;IAE9B;;;;;;WAEA,WAAA;AACC,UAAI,CAAC,KAAK,kBAAkB;AAC3B,YAAM,mBAAmB,KAAK,eAAe,SAAS,KAAK,UAAU,IAAI,MAAM,EAAE,UAAU,YAAY,YAAY,OAAO,OAAO,MAAM,QAAQ,MAAM,OAAO,GAAE,CAAE,CAAC;AACjK,aAAK,mBAAmB;AAExB,YAAM,UAAU,QAAQ,IAAI,MAAM,CAAA,CAAE;AACpC,aAAK,UAAU,IAAI,WAAW,OAAO;AACrC,gBAAQ,KAAK,CAAC;AACd,aAAK,WAAW;;IAElB;;;;;;WAMA,SAA8B,QAAc;AAC3C,UAAI,OAAO,IAAI,WAAW,GAAG;AAC5B,QAAO,QAAQ,KAAK,aAAa,MAAM;aAEnC;AACJ,QAAO,OAAO,KAAK,aAAa,MAAM;;AAEvC,WAAK,sBAAqB;IAC3B;;;;;;WAEA,SAAgC,QAAc;AAC7C,MAAO,OAAO,KAAK,aAAa,MAAM;AACtC,WAAK,sBAAqB;IAC3B;;;;;;WAEA,WAAA;AAAA,UAAA,QAAA;AAEC,WAAK,YAAY,KAAK,SAAC,IAAW,GAAS;AAC1C,YAAM,SAAS,GAAE,IAAI,iBAAiB,CAAC;AACvC,YAAM,SAAS,EAAE,IAAI,iBAAiB,CAAC;AACvC,YAAI,UAAU,QAAQ;AACrB,iBAAO;mBAEC,SAAS,QAAQ;AACzB,iBAAO;eAEH;AACJ,iBAAO;;MAET,CAAC;AAED,UAAM,SAAiC,CAAA;AACvC,MAAO,KAAK,KAAK,aAAa,SAAC,MAAM,OAAK;AACzC,YAAI,CAAC,KAAK,WAAW,cAAc,GAAG;AACrC,gBAAK,kBAAkB,OAAO,IAAI;eAE9B;AACJ,gBAAK,kBAAkB,OAAO,IAAI;;AAEnC,YAAM,QAAQ,KAAK,IAAI,gBAAgB;AACvC,YAAI,OAAO;AACV,cAAI,OAAO,QAAQ,KAAK,MAAM,IAAI;AAEjC,iBAAK,WAAW,cAAc,EAAG,IAAI,aAAa,YAAY,IAAI;iBAE9D;AACJ,mBAAO,KAAK,KAAK;;;MAGpB,CAAC;IAEF;;;;;;WAEA,WAAA;AACC,UAAI,KAAK,gBAAgB;AACxB,aAAK,sBAAsB,KAAK,cAAc;AAC9C,aAAK,sBAAsB,KAAK,cAAc;;IAEhD;;;;;;WAEA,SAA6B,QAAgB,cAA6B;AAGzE,UAAI,CAAC,cAAc;AAClB,uBAAe,OAAO,WAAW,cAAc,EAAG;;AAGnD,UAAI,CAAC,cAAc;AAClB;;AAGD,UAAI,OAAO,IAAI,SAAS,KAAK,OAAO,IAAI,MAAM,KAAK,aAAa,CAAC,OAAO,SAAQ,GAAI;AACnF,YAAI,aAAa,aAAa,UAAU,KAAK,MAAM;AAClD,uBAAa,aAAa,YAAY,KAAK,KAAK,QAAQ;;aAGrD;AACJ,qBAAa,gBAAgB,UAAU;;AAGxC,UAAM,OAAO,OAAO,IAAI,MAAM;AAC9B,UAAI,MAAM;AACT,qBAAa,aAAa,QAAQ,IAAI;aAElC;AACJ,qBAAa,gBAAgB,MAAM;;AAGpC,UAAM,YAAY,OAAO,IAAI,WAAW;AACxC,UAAI,WAAW;AACd,YAAM,QAAQ,eAAe,QAAQ,SAAS;AAC9C,qBAAa,aAAa,cAAc,KAAK;aAEzC;AACJ,qBAAa,gBAAgB,YAAY;;AAG1C,UAAM,WAAW,OAAO,IAAI,UAAU;AACtC,UAAI,UAAU;AACb,qBAAa,aAAa,aAAa,QAAQ;aAE3C;AACJ,qBAAa,gBAAgB,WAAW;;AAGzC,UAAM,cAAc,OAAO,IAAI,aAAa;AAC5C,UAAI,eAAe,MAAM;AACxB,qBAAa,aAAa,gBAAgB,cAAc,SAAS,OAAO;aAEpE;AACJ,qBAAa,gBAAgB,cAAc;;AAG5C,UAAI,OAAO,IAAI,YAAY,GAAG;AAC7B,qBAAa,aAAa,eAAe,QAAQ;aAE7C;AACJ,qBAAa,gBAAgB,aAAa;;AAG3C,UAAM,kBAAkB,OAAO,IAAI,iBAAiB;AACpD,UAAI,iBAAiB;AACpB,qBAAa,aAAa,oBAAoB,eAAe;aAEzD;AACJ,qBAAa,gBAAgB,kBAAkB;;AAGhD,UAAM,eAAe,OAAO,IAAI,cAAc;AAC9C,UAAI,cAAc;AACjB,qBAAa,aAAa,iBAAiB,YAAY;aAEnD;AACJ,qBAAa,gBAAgB,eAAe;;AAG7C,UAAM,eAAe,OAAO,IAAI,cAAc;AAC9C,UAAI,cAAc;AACjB,qBAAa,aAAa,iBAAiB,YAAY;aAEnD;AACJ,qBAAa,gBAAgB,eAAe;;AAG7C,UAAM,eAAe,OAAO,IAAI,cAAc;AAC9C,UAAI,cAAc;AACjB,qBAAa,aAAa,iBAAiB,YAAY;aAEnD;AACJ,qBAAa,gBAAgB,eAAe;;AAG7C,UAAM,gBAAgB,OAAO,IAAI,eAAe;AAChD,UAAI,eAAe;AAClB,qBAAa,aAAa,kBAAkB,aAAa;aAErD;AACJ,qBAAa,gBAAgB,gBAAgB;;AAG9C,UAAM,eAAe,OAAO,IAAI,cAAc;AAC9C,UAAI,cAAc;AACjB,qBAAa,aAAa,iBAAiB,YAAY;aAEnD;AACJ,qBAAa,gBAAgB,eAAe;;IAE9C;;;;;;WAEA,SAAyB,OAAe,QAAc;AAAtD,UAAA,QAAA;AAEC,UAAI,OAAO,WAAW,cAAc,GAAG;AACtC;;AAID,UAAM,eAAe,SAAS,cAAc,KAAK;AACjD,UAAI,OAAO,IAAI,MAAM,KAAK,WAAW;AACpC,qBAAa,WAAW,KAAK;;AAE9B,mBAAa,MAAM,WAAW;AAC9B,MAAO,eAAe,cAAc,KAAK;AAEzC,UAAM,YAA8B,CAAA;AAEpC,aAAO,WAAW,gBAAgB;QACjC,KAAK;QACL;OACA;AAED,WAAK,sBAAsB,MAAM;AAEjC,gBAAU,KAAK,AAAO,iBAAiB,cAAc,SAAS,SAAC,IAAc;AAC5E,cAAK,aAAa,IAAI,KAAK;MAC5B,CAAC,CAAC;AAEF,gBAAU,KAAK,AAAO,iBAAiB,cAAc,QAAQ,SAAC,IAAc;AAC3E,cAAK,YAAY,IAAI,KAAK;MAC3B,CAAC,CAAC;AAEF,WAAK,kBAAkB,OAAO,MAAM;IAErC;;;;;;WAEA,SAA2B,QAAc;AACxC,MAAO,OAAO,KAAK,aAAa,MAAM;AACtC,UAAM,eAAe,OAAO,WAAW,cAAc;AACrD,UAAI,cAAc;AACjB,YAAM,YAAY,KAAK;AACvB,kBAAU,YAAY,aAAa,GAAG;AACtC,QAAO,KAAK,aAAa,WAAW,SAAC,IAAC;AACrC,aAAE,QAAO;QACV,CAAC;;IAEH;;;;;;WAEA,SAAyB,QAAc;AACtC,UAAM,eAAe,OAAO,WAAW,cAAc;AACrD,mBAAa,IAAI,MAAM,UAAU;IAClC;;;;;;WAEA,SAA4B,OAAe,QAAc;AAGxD,UAAM,YAAY,KAAK;AACvB,UAAM,eAAe,OAAO,WAAW,cAAc,EAAG;AAExD,UAAI,iBAAiB,KAAK,uBAAwB,SAAS,QAAQ;AAElE;;AAGD,UAAM,OAAO,KAAK,uBAAwB,SAAS,QAAQ;AAC3D,UAAI,MAAM;AACT,kBAAU,aAAa,cAAc,IAAI;aAErC;AACJ,kBAAU,OAAO,YAAY;;IAE/B;;;;;;WAEA,SAAgC,QAAc;AAC7C,UAAM,SAAS,OAAO,aAAY;AAElC,UAAM,QAAQ,OAAO,SAAS,OAAO,OAAO,OAAO,MAAK,IAAK,OAAO,QAAQ,OAAO;AACnF,UAAM,SAAS,OAAO,OAAO,OAAO,SAAS,OAAO,OAAM,IAAK,OAAO,SAAS,OAAO;AAEtF,UAAM,eAAe,OAAO,WAAW,cAAc,EAAG;AACxD,mBAAa,MAAM,MAAO,OAAO,MAAM,IAAK;AAC5C,mBAAa,MAAM,OAAQ,OAAO,OAAO,IAAK;AAC9C,mBAAa,MAAM,QAAS,QAAQ,IAAK;AACzC,mBAAa,MAAM,SAAU,SAAS,IAAK;IAE5C;;;;;;WAEA,SAAuB,IAAgB,OAAa;AAEnD,UAAM,UAAU,KAAK,YAAY;AAGjC,UAAI,CAAC,QAAQ,cAAa,GAAI;AAC7B,aAAK,WAA2B,GAAG,QAAQ,KAAK,WAAW,KAAK,CAAC;AACjE;;AAID,WAAK,sBAAsB,OAAO;AAGlC,WAAK,iBAAiB;AAEtB,UAAI,QAAQ,OAAO,UAAU,OAAO,GAAG;AACtC,gBAAQ,OAAO,SAAS,SAAS;UAChC,MAAM;UACN,eAAe;UACf,QAAQ;SACR;;IAEH;;;;;;WAEA,SAAqB,IAAoB,WAAiB;AACzD,UAAI,oBAAoB,MAAM,KAAK,SAAS,iBAAiB;QAC5D;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QAEC,KAAK,GAAG,CAAC,CAAC;AAEZ,UAAI,QAAQ,kBAAkB,QAAQ,EAAE,IAAI;AAE5C,UAAI,QAAQ,GAAG;AACd,gBAAQ,kBAAkB,SAAS;iBAE3B,SAAS,kBAAkB,QAAQ;AAC3C,gBAAQ;;AAGK,wBAAkB,OAAQ,MAAK;IAC9C;;;;;;WAEA,SAAsB,IAAgB,QAAc;AACnD,UAAM,UAAU,KAAK;AACrB,UAAI,WAAW,QAAQ,OAAO,UAAU,MAAM,GAAG;AAChD,gBAAQ,OAAO,SAAS,QAAQ;UAC/B,MAAM;UACN,eAAe;UACf,QAAQ;SACR;;AAEF,WAAK,iBAAiB;IACvB;;;;;;WAKA,SAAqB,QAAY;AAChC,UAAM,OAAO,AAAO,UAAU,OAAO,SAAQ,CAAE;AAC/C,UAAI,iBAAiB,OAAO,WAAW,gBAAgB;AACvD,UAAI,OAAO,IAAI,MAAM,KAAK,aAAa,QAAQ,IAAI;AAClD,YAAI,CAAC,gBAAgB;AACpB,2BAAiB,KAAK,oBAAoB,MAAM;;AAEjD,YAAI,eAAe,aAAa,MAAM;AACrC,yBAAe,YAAY;;iBAGpB,gBAAgB;AACxB,uBAAe,OAAM;AACrB,eAAO,cAAc,gBAAgB;;IAEvC;;;;;;WAEA,SAA2B,QAAY;AACtC,UAAM,YAAY,KAAK;AACvB,UAAM,iBAAiB,SAAS,cAAc,KAAK;AACnD,qBAAe,MAAM,WAAW;AAChC,qBAAe,MAAM,UAAU;AAE/B,MAAO,eAAe,gBAAgB,KAAK;AAE3C,WAAK,sBAAsB,QAAQ,cAAc;AACjD,gBAAU,OAAO,cAAc;AAC/B,aAAO,WAAW,kBAAkB,cAAc;AAClD,aAAO;IACR;;;;;;WAEA,SAAgC,QAAc;AAC7C,WAAK,qBAAqB;AAC1B,UAAM,eAAe,OAAO,WAAW,cAAc;AACrD,UAAI,OAAO,IAAI,WAAW,GAAG;AAC5B,YAAI,cAAc;AACjB,eAAK,sBAAsB,MAAM;AACjC,eAAK,sBAAsB,MAAM;;iBAM1B,cAAc;AACtB,aAAK,oBAAoB,MAAM;;IAGjC;;;;;;WAQA,SAAe,QAAc;AAC5B,aAAO,KAAK,mBAAmB;IAChC;;;;;;WAQA,SAA2B,QAAa;AACvC,UAAM,OAAO,KAAK,IAAI,sBAAqB;AAC3C,aAAO;QACN,GAAG,OAAM,IAAI,KAAK;QAClB,GAAG,OAAM,IAAI,KAAK;;IAEpB;;;;;;WAQA,SAA2B,QAAa;AACvC,UAAM,OAAO,KAAK,IAAI,sBAAqB;AAC3C,aAAO;QACN,GAAG,OAAM,IAAI,KAAK;QAClB,GAAG,OAAM,IAAI,KAAK;;IAEpB;;;;;;WAKA,SAAwC,UAAW;AAClD,WAAK,WAAW,KAAK,QAAQ;AAC7B,aAAO;IACR;;;;;;WAEA,WAAA;AACC,UAAM,SAAS,OAAO,iBAAiB,KAAK,GAAG;AAC/C,UAAI,WAAW;AACf,MAAQ,MAAK,QAAQ,SAAC,KAAK,KAAG;AAC7B,YAAI,AAAM,SAAS,GAAG,KAAK,IAAI,MAAM,OAAO,GAAG;AAC9C,sBAAY;;MAEd,CAAC;AACD,UAAM,UAAU,YAAY,KAAK;AACjC,UAAI,SAAS;AACZ,aAAK,YAAY;;AAElB,aAAO;IACR;;;;;;WAEA,WAAA;AACC,UAAI,KAAK,sBAAqB,GAAI;AACjC,aAAK,uBAAuB,KAAK,SAAS;;IAE5C;;;;;;WAEA,SAAiC,QAAc;AAA/C,UAAA,QAAA;AACC,UAAI,kBAAkB,WAAW;AAChC,eAAO,SAAS,KAAK,SAAC,OAAK;AAC1B,gBAAK,uBAAuB,KAAK;QAClC,CAAC;iBAEO,kBAAkB,MAAM;AAChC,eAAO,gBAAe;;IAExB;;;;;;WAeA,WAAA;AACC,eAAS,IAAI,GAAG,IAAI,SAAS,SAAS,QAAQ,KAAK;AAClD,YAAI,SAAS,SAAS,GAAG,MAAM,aAAa,GAAG;AAC9C,iBAAO;;;AAGT,aAAO;IACR;;;;;;WAEA,WAAA;AACC,UAAI,KAAK,OAAO;AACf,aAAK,MAAM,IAAI,eAAe,IAAI;;IAEpC;;AAKA,SAAA,eAAW,MAAA,WAAA,kBAAc;SAAzB,WAAA;AACC,aAAO,KAAK,UAAU;IACvB;SAKA,SAA0B,OAAc;AACvC,WAAK,UAAU,iBAAiB;IACjC;;;;AAWA,SAAA,eAAW,MAAA,WAAA,iBAAa;SAOxB,WAAA;AACC,aAAO,KAAK,UAAU;IACvB;SATA,SAAyB,OAAc;AACtC,WAAK,UAAU,gBAAgB;IAChC;;;;AAmBA,SAAA,eAAW,MAAA,WAAA,wBAAoB;SAO/B,WAAA;AACC,aAAO,KAAK,UAAU;IACvB;SATA,SAAgC,OAAa;AAC5C,WAAK,UAAU,uBAAuB;IACvC;;;;;;;;WASA,SAAwB,QAAiB;AAAzC,UAAA,QAAA;AAGC,UAAM,YAAY,KAAK;AAGvB,UAAM,cAAc,SAAS,cAAc,KAAK;AAChD,aAAO,WAAW,eAAe,WAAW;AAG5C,kBAAY,MAAM,WAAW;AAC7B,kBAAY,MAAM,WAAW;AAG7B,UAAI,OAAO,OAAO,UAAU,OAAO,GAAG;AACrC,aAAK,WAAW,KAAK,AAAO,iBAA4C,aAAa,SAAS,SAAC,IAAiB;AAC/G,cAAM,YAAY,MAAK,UAAU,SAAS,EAAE;AAC5C,iBAAO,OAAO,SAAS,SAAS;YAC/B,MAAM;YACN,eAAe,UAAU;YACzB,OAAO,UAAU;YACjB,WAAW;YACX;WACA;QACF,CAAC,CAAC;;AAGH,WAAK,qBAAqB,MAAM;AAEhC,gBAAU,OAAO,WAAW;AAE5B,MAAO,QAAQ,KAAK,wBAAwB,MAAM;AAElD,aAAO;IACR;;;;;;WAEA,WAAA;AAAA,UAAA,QAAA;AACC,MAAO,KAAK,KAAK,wBAAwB,SAAC,QAAM;AAC/C,cAAK,qBAAqB,MAAM;MACjC,CAAC;IACF;;;;;;WAEA,SAA4B,QAAiB;AAC5C,UAAM,cAAc,OAAO,WAAW,aAAa;AACnD,UAAI,aAAa;AAGhB,YAAM,iBAAiB,CAAC,cAAc,gBAAgB,iBAAiB,eAAe,YAAY,aAAa,YAAY,WAAW;AACtI,QAAO,KAAK,gBAAgB,SAAC,SAAY;AACxC,cAAM,QAAQ,OAAO,IAAI,OAAO;AAChC,cAAI,OAAO;AACV,wBAAY,MAAM,WAAW,QAAQ;iBAEjC;AACJ,wBAAY,MAAM,WAAW;;QAE/B,CAAC;AAGD,oBAAY,MAAM,UAAU,OAAO,iBAAgB,IAAK;AAGxD,YAAI,OAAO,cAAa,GAAI;AAC3B,sBAAY,MAAM,UAAU;eAExB;AACJ,sBAAY,MAAM,UAAU;;AAI7B,YAAM,SAAS,OAAO,aAAY;AAClC,oBAAY,MAAM,MAAO,OAAO,MAAO;AACvC,oBAAY,MAAM,OAAQ,OAAO,OAAQ;AAGzC,YAAM,QAAQ,OAAO,IAAI,OAAO;AAChC,YAAM,SAAS,OAAO,IAAI,QAAQ;AAElC,YAAI,IAAY;AAChB,YAAI,IAAY;AAEhB,YAAI,OAAO;AACV,cAAI,OAAO,MAAK;;AAGjB,YAAI,QAAQ;AACX,cAAI,OAAO,OAAM;;AAGlB,YAAI,CAAC,SAAS,CAAC,QAAQ;AACtB,sBAAY,MAAM,QAAQ;AAC1B,sBAAY,MAAM,SAAS;AAC3B,cAAM,OAAO,YAAY,sBAAqB;AAC9C,cAAI,KAAK;AACT,cAAI,KAAK;AACT,iBAAO,WAAW,YAAY,CAAC;AAC/B,iBAAO,WAAW,aAAa,CAAC;eAE5B;AACJ,iBAAO,cAAc,UAAU;AAC/B,iBAAO,cAAc,WAAW;;AAGjC,YAAI,IAAI,GAAG;AACV,sBAAY,MAAM,WAAY,IAAK;;AAEpC,YAAI,IAAI,GAAG;AACV,sBAAY,MAAM,YAAa,IAAK;;;IAIvC;;;;;;WAEA,SAAuB,QAAmB,MAAY;AACrD,UAAI,cAAc,OAAO,WAAW,aAAa;AACjD,UAAI,CAAC,aAAa;AACjB,sBAAc,KAAK,iBAAiB,MAAM;;AAE3C,UAAI,YAAY,aAAa,MAAM;AAClC,oBAAY,YAAY;;IAE1B;;;;;;WAEA,SAA0B,QAAiB;AAC1C,UAAI,cAAc,OAAO,WAAW,aAAa;AACjD,UAAI,aAAa;AAChB,aAAK,sBAAuB,YAAY,WAAW;;AAEpD,MAAO,OAAO,KAAK,wBAAwB,MAAM;IAClD;;AACD,SAAA;AAAA,EApmDA;;;AC5EA,IAAI;AAKJ,kBAAkB,SAA4B,MAAY,SAAgB;AACzE,MAAM,KAAK,KAAK;AAChB,MAAM,SAAS,GAAG,IAAI,iBAAiB,EAAG,MAAK;AAC/C,MAAM,OAAO,GAAG,IAAI,MAAM,EAAG,MAAK;AAClC,MAAM,SAAS,GAAG,IAAI,uBAAuB,EAAG,MAAM,IAAI;AAG1D,MAAI,CAAC,OAAO;AACX,QAAM,aAAW,IAAI,cAAc;MAElC,IAAI,UAAU,SAAS,cAAc;QACpC,SAAS;QACT,UAAU;QACV,YAAY;QACZ,WAAW;QACX,OAAO;QACP,QAAQ;OACR;MAED,IAAI,UAAU,SAAS,sBAAsB;QAC5C,OAAO;QACP,QAAQ;QACR,SAAS;QACT,UAAU;QACV,YAAY;QACZ,cAAc,GAAG,IAAI,YAAY,EAAG,MAAM,GAAG;QAC7C,WAAW;OACX;MAED,IAAI,UAAU,SAAS,sBAAsB;QAC5C,OAAO;QACP,QAAQ;QACR,SAAS;QACT,UAAU;QACV,YAAY;QACZ,cAAc;QACd,eAAe;QACf,cAAc,GAAG,IAAI,YAAY,EAAG,MAAM,GAAG;QAC7C,WAAW;OACX;MAED,IAAI,UAAU,SAAS,6BAA6B;QACnD,WAAW;QACX,WAAW;QACX,UAAU;QACV,kBAAkB;QAClB,gBAAgB;OAChB;MAED,IAAI,UAAU,SAAS,sBAAsB;QAC5C,WAAW;QACX,WAAW;QACX,kBAAkB;QAClB,cAAc;QACd,eAAe;QACf,cAAc,GAAG,IAAI,YAAY,EAAG,MAAK;QAEzC,iBAAiB;QACjB,sBAAsB,sBAAsB;QAC5C,cAAc,sBAAsB;QACpC,SAAS;OACT;MAED,IAAI,UAAU,SAAS,yBAAyB;QAC/C,aAAa;QACb,UAAU;OACV;MAED,IAAI,UAAU,SAAS,oBAAoB;QAC1C,WAAW;QACX,UAAU;OACV;MAED,IAAI,UAAU,SAAS,wBAAwB;QAC9C,WAAW;OACX;MAED,IAAI,UAAU,SAAS,4BAA4B;QAClD,WAAW;QACX,WAAW;OACX;MAED,IAAI,UAAU,SAAS,yBAAyB;QAC/C,WAAW;QACX,WAAW;OACX;MAED,IAAI,UAAU,SAAS,6BAA6B;QACnD,kBAAkB;OAClB;MAED,IAAI,UAAU,SAAS,yGAAyG;QAC/H,UAAU,eAAe;QACzB,iBAAiB;QACjB,WAAW;QACX,UAAU;OACV;MAED,IAAI,UAAU,SAAS,2BAA2B;QACjD,SAAS;OACT;MAED,IAAI,UAAU,SAAS,qBAAqB;QAC3C,eAAe;QACf,SAAS,GAAG,IAAI,qBAAqB,EAAG,MAAK;QAC7C,eAAe;QACf,cAAc;QACd,mBAAmB;QACnB,kBAAkB;QAClB,UAAU;QACV,WAAW;QACX,aAAa;QACb,iBAAiB;QACjB,UAAU;QACV,UAAU,eAAe,GAAG,IAAI,uBAAuB,EAAG,MAAK;QAC/D,cAAc,GAAG,IAAI,iBAAiB,EAAG,MAAK;OAC9C;MAED,IAAI,UAAU,SAAS,2BAA2B;QACjD,cAAc,GAAG,IAAI,sBAAsB,EAAG,MAAK;OACnD;MAED,IAAI,UAAU,SAAS,uCAAuC;QAC7D,SAAS,GAAG,IAAI,mBAAmB,EAAG,MAAK;QAC3C,UAAU,eAAe,GAAG,IAAI,qBAAqB,EAAG,MAAK;QAC7D,cAAc,GAAG,IAAI,eAAe,EAAG,MAAK;OAC5C;MAED,IAAI,UAAU,SAAS,6CAA6C;QACnE,cAAc,GAAG,IAAI,oBAAoB,EAAG,MAAK;OACjD;KAED;AAED,YAAQ,IAAI,gBAAgB,WAAA;AAC3B,cAAQ;AACR,iBAAS,QAAO;IACjB,CAAC;;AAGF,SAAO,MAAM,UAAS;AACvB;AAuCA,IAAA,QAAA,SAAA,QAAA;AAA2B,YAAA,QAAA,MAAA;AAA3B,oBAAA;;EAgIA;;;;;WAtHC,WAAA;AAAA,UAAA,QAAA;AAEC,aAAA,UAAM,qBAAoB,KAAA,IAAA;AAG1B,WAAK,eAAe,kBAAkB,IAAI;AAG1C,eAAS,AAAO,cAAc,KAAK,MAAM,GAAG,GAAG,KAAK,KAAK;AAGzD,UAAM,YAAY,SAAS,cAAc,KAAK;AAC9C,gBAAU,YAAY;AACtB,gBAAU,MAAM,UAAU;AAC1B,WAAK,KAAK,OAAO,YAAY,SAAS;AACtC,WAAK,WAAW,aAAa,SAAS;AAEtC,UAAM,UAAU,SAAS,cAAc,KAAK;AAC5C,cAAQ,YAAY;AACpB,gBAAU,YAAY,OAAO;AAC7B,WAAK,WAAW,WAAW,OAAO;AAElC,MAAO,iBAAiB,SAAS,SAAS,WAAA;AACzC,cAAK,OAAM;MACZ,CAAC;AAED,UAAM,UAAU,SAAS,cAAc,KAAK;AAC5C,cAAQ,YAAY;AACpB,gBAAU,YAAY,OAAO;AAC7B,WAAK,WAAW,WAAW,OAAO;AAElC,UAAM,UAAU,SAAS,cAAc,KAAK;AAC5C,cAAQ,YAAY;AACpB,cAAQ,YAAY,OAAO;AAC3B,WAAK,WAAW,WAAW,OAAO;AAElC,UAAM,OAAO,KAAK,IAAI,SAAS;AAC/B,UAAI,MAAM;AACT,gBAAQ,YAAY;;AAIrB,UAAI,AAAO,SAAS,gBAAgB,GAAG;AACtC,aAAK,WAAW,KAAK,AAAO,iBAAiB,UAAU,WAAW,SAAC,IAAiB;AACnF,cAAI,MAAK,OAAM,KAAM,GAAG,WAAW,IAAI;AACtC,kBAAK,OAAM;;QAEb,CAAC,CAAC;;IAEJ;;;;;;WAEA,WAAA;AACC,aAAA,UAAM,eAAc,KAAA,IAAA;AAEpB,UAAI,KAAK,QAAQ,SAAS,GAAG;AAC5B,aAAK,WAAW,SAAS,EAAE,YAAY,KAAK,IAAI,WAAW,EAAE;;IAE/D;;;;;;WAOA,WAAA;AACC,aAAO,KAAK,WAAW,WAAW,EAAE,MAAM,WAAW;IACtD;;;;;;WAKA,WAAA;AACC,WAAK,WAAW,WAAW,EAAE,MAAM,UAAU;AAC7C,UAAI,KAAK,IAAI,gBAAgB,GAAG;AAC/B,aAAK,MAAM,UAAU,sBAAsB;;AAE5C,WAAK,OAAO,SAAS,UAAU;QAC9B,MAAM;QACN,QAAQ;OACR;IACF;;;;;;WAKA,WAAA;AACC,WAAK,WAAW,WAAW,EAAE,MAAM,UAAU;AAC7C,UAAI,KAAK,IAAI,gBAAgB,GAAG;AAC/B,aAAK,MAAM,UAAU,sBAAsB;;AAE5C,WAAK,OAAO,SAAS,UAAU;QAC9B,MAAM;QACN,QAAQ;OACR;IACF;;;;;;WAKA,WAAA;AACC,WAAK,WAAW,WAAW,EAAE,MAAM,UAAU;AAC7C,UAAI,KAAK,IAAI,gBAAgB,GAAG;AAC/B,aAAK,MAAM,UAAU,sBAAsB;;AAE5C,WAAK,OAAO,SAAS,aAAa;QACjC,MAAM;QACN,QAAQ;OACR;IACF;;;;;;WAKA,WAAA;AACC,aAAA,UAAM,QAAO,KAAA,IAAA;AACb,WAAK,KAAK,IAAI,YAAY,KAAK,WAAW,WAAW,CAAC;IACvD;;AA7HA,SAAA,eAAA,QAAA,aAAA;;;;WAAkC;;AAClC,SAAA,eAAA,QAAA,cAAA;;;;WAA0C,OAAO,WAAW,OAAO,CAAC,OAAM,SAAS,CAAC;;AA8HrF,SAAA;EAhI2B,MAAM;;;ACxIjC,IAAA,SAAA,SAAA,QAAA;AAA4B,YAAA,SAAA,MAAA;AAA5B,qBAAA;AAAA,QAAA,QAAA,WAAA,QAAA,OAAA,MAAA,MAAA,SAAA,KAAA;AAQC,WAAA,eAAA,OAAA,UAAA;;;;;;AAKA,WAAA,eAAA,OAAA,UAAA;;;;;;;EAwBD;;;;;WAtBC,WAAA;AAEC,aAAA,UAAM,qBAAoB,KAAA,IAAA;IAC3B;;;;;;WAEA,WAAA;AACC,aAAA,UAAM,eAAc,KAAA,IAAA;AAEpB,UAAI,KAAK,QAAQ,QAAQ,GAAG;AAC3B,YAAM,SAAS,KAAK,IAAI,QAAQ;AAChC,YAAI,QAAQ;AACX,iBAAO,OAAO,EAAE,UAAU,YAAY,MAAM,SAAQ,CAAE;AACtD,eAAK,WAAW,KAAK,MAAM;;;AAI7B,UAAI,KAAK,QAAQ,WAAW,KAAK,KAAK,QAAQ,WAAW,GAAG;AAC3D,YAAI,KAAK,QAAQ;AAChB,eAAK,OAAO,gBAAgB,IAAI;;;IAGnC;;AAnCA,SAAA,eAAA,SAAA,aAAA;;;;WAAkC;;AAClC,SAAA,eAAA,SAAA,cAAA;;;;WAA0C,OAAO,WAAW,OAAO,CAAC,QAAO,SAAS,CAAC;;AAmCtF,SAAA;EArC4B,MAAM;;;ACzClC,IAAA,SAAA,SAAA,QAAA;AAA4B,YAAA,SAAA,MAAA;AAA5B,qBAAA;;EAuBA;;;;;WAfC,WAAA;AACC,aAAA,UAAM,eAAc,KAAA,IAAA;AAEpB,UAAI,KAAK,QAAQ,QAAQ,GAAG;AAC3B,aAAK,SAAS;;IAEhB;;;;;;WAEA,WAAA;AACC,aAAA,UAAM,SAAQ,KAAA,IAAA;AAEd,UAAI,KAAK,QAAQ;AAChB,aAAK,SAAS,WAAW,GAAG,GAAG,KAAK,IAAI,UAAU,EAAE,CAAC;;IAEvD;;AAjBA,SAAA,eAAA,SAAA,aAAA;;;;WAAkC;;AAClC,SAAA,eAAA,SAAA,cAAA;;;;WAA0C,SAAS,WAAW,OAAO,CAAC,QAAO,SAAS,CAAC;;AAiBxF,SAAA;EAvB4B,QAAQ;;;ACKpC,IAAA,UAAA,SAAA,QAAA;AAA6B,YAAA,UAAA,MAAA;AAA7B,sBAAA;;EAuBA;;;;;WAfC,WAAA;AACC,aAAA,UAAM,eAAc,KAAA,IAAA;AAEpB,UAAI,KAAK,QAAQ,SAAS,KAAK,KAAK,QAAQ,SAAS,KAAK,KAAK,QAAQ,UAAU,GAAG;AACnF,aAAK,SAAS;;IAEhB;;;;;;WAEA,WAAA;AACC,aAAA,UAAM,SAAQ,KAAA,IAAA;AAEd,UAAI,KAAK,QAAQ;AAChB,aAAK,SAAS,YAAY,GAAG,GAAG,KAAK,IAAI,KAAK,IAAI,SAAS,CAAC,GAAG,KAAK,IAAI,KAAK,IAAI,SAAS,CAAC,CAAC;;IAE9F;;AAjBA,SAAA,eAAA,UAAA,aAAA;;;;WAAkC;;AAClC,SAAA,eAAA,UAAA,cAAA;;;;WAA0C,SAAS,WAAW,OAAO,CAAC,SAAQ,SAAS,CAAC;;AAiBzF,SAAA;EAvB6B,QAAQ;;;ACOrC,IAAA,OAAA,SAAA,QAAA;AAA0B,YAAA,OAAA,MAAA;AAA1B,mBAAA;;EAuCA;;;;;WA/BC,WAAA;AACC,aAAA,UAAM,eAAc,KAAA,IAAA;AAEpB,UAAI,KAAK,QAAQ,QAAQ,KAAK,KAAK,QAAQ,aAAa,KAAK,KAAK,QAAQ,QAAQ,GAAG;AACpF,aAAK,SAAS;;IAEhB;;;;;;WAEA,WAAA;AACC,aAAA,UAAM,SAAQ,KAAA,IAAA;AAEd,UAAI,KAAK,QAAQ;AAChB,YAAM,UAAU,KAAK;AACrB,YAAM,IAAI,KAAK,IAAI,UAAU,CAAC;AAC9B,YAAM,KAAK,AAAO,gBAAgB,KAAK,IAAI,eAAe,CAAC,GAAG,CAAC;AAC/D,YAAM,SAAS,KAAK,IAAI,UAAU,CAAC;AACnC,YAAM,OAAO,KAAK,KAAK;AACvB,YAAI,QAAQ,KAAK,KAAK,IAAI;AAE1B,gBAAQ,OAAO,GAAG,CAAE,CAAC;AAErB,iBAAS,IAAI,GAAG,IAAI,QAAQ,KAAK;AAChC,kBAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,KAAK,IAAI,KAAK,IAAI,CAAC;AACvD,mBAAS;AAET,kBAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,IAAI,KAAK,IAAI,KAAK,IAAI,EAAE;AACzD,mBAAS;;AAEV,gBAAQ,OAAO,GAAG,CAAC,CAAC;;IAEtB;;AAjCA,SAAA,eAAA,OAAA,aAAA;;;;WAAkC;;AAClC,SAAA,eAAA,OAAA,cAAA;;;;WAA0C,SAAS,WAAW,OAAO,CAAC,MAAK,SAAS,CAAC;;AAiCtF,SAAA;EAvC0B,QAAQ;;;ACDlC,IAAA,WAAA,SAAA,QAAA;AAAuC,YAAA,WAAA,MAAA;AAAvC,uBAAA;;EAuDA;;;;;WA/CC,WAAA;AAEC,aAAA,UAAM,qBAAoB,KAAA,IAAA;IAC3B;;;;;;WAKA,SAAe,SAAe;AAC7B,aAAO;QACN,cAAc,SAAC,SAAiB,QAAc;QAAO;;IAEvD;;;;;;WAEA,WAAA;AACC,aAAA,UAAM,SAAQ,KAAA,IAAA;IAOf;;;;;;WAKA,SAAiB,QAAc;AAC9B,UAAM,iBAAiB,KAAK,IAAI,QAAQ;AACxC,UAAI,gBAAgB;AACnB,YAAI,SAAS,eAAe,aAAY;AAExC,YAAM,MAAK,OAAO,QAAQ,EAAE,GAAG,OAAO,MAAM,GAAG,OAAO,IAAG,CAAE;AAC3D,YAAM,KAAK,OAAO,QAAQ,EAAE,GAAG,OAAO,OAAO,GAAG,OAAO,IAAG,CAAE;AAC5D,YAAM,KAAK,OAAO,QAAQ,EAAE,GAAG,OAAO,OAAO,GAAG,OAAO,OAAM,CAAE;AAC/D,YAAM,KAAK,OAAO,QAAQ,EAAE,GAAG,OAAO,MAAM,GAAG,OAAO,OAAM,CAAE;AAE9D,eAAO;UACN,MAAM,KAAK,IAAI,IAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;UACrC,KAAK,KAAK,IAAI,IAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;UACpC,OAAO,KAAK,IAAI,IAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;UACtC,QAAQ,KAAK,IAAI,IAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;;;AAGzC,aAAO,OAAO,SAAS,eAAc;IACtC;;AAhDA,SAAA,eAAA,WAAA,aAAA;;;;WAAkC;;AAClC,SAAA,eAAA,WAAA,cAAA;;;;WAA0C,OAAO,WAAW,OAAO,CAAC,UAAS,SAAS,CAAC;;AAiDxF,SAAA;EAvDuC,MAAM;;;ACD7C,IAAA,iBAAA,SAAA,QAAA;AAAoC,YAAA,iBAAA,MAAA;AAApC,6BAAA;;EAyEA;;;;;WA9DC,SAAe,QAAc;AAC5B,UAAM,WAAW,KAAK,IAAI,YAAY,CAAC;AACvC,UAAI,SAAS,KAAK,UAAU,MAAM;AAElC,UAAI,IAAI,OAAO,QAAQ;AACvB,UAAI,IAAI,OAAO,SAAS;AACxB,UAAI,IAAI,OAAO,OAAO;AACtB,UAAI,IAAI,OAAO,UAAU;AAEzB,UAAI,OAAM,AAAM,IAAI,QAAQ;AAC5B,UAAI,OAAM,AAAM,IAAI,QAAQ;AAE5B,UAAI,IAAI,OAAO,KAAI;AACnB,UAAI,IAAI,OAAO,KAAI;AAEnB,UAAI,SAAS,KAAK,IAAI,GAAG,CAAC;AAE1B,UAAM,WAAW,KAAK,MAAM,UAAU,qBACrC,GACA,GACA,IAAI,SAAS,MACb,IAAI,SAAS,IAAG;AAGjB,UAAM,QAAQ,KAAK,IAAI,OAAO;AAC9B,UAAI,OAAO;AACV,YAAI,MAAI;AACR,QAAO,KAAK,OAAO,SAAC,MAAI;AAEvB,cAAI,SAAS,KAAK;AAElB,cAAI,CAAC,AAAM,SAAS,MAAM,GAAG;AAC5B,qBAAS,MAAK,OAAM,SAAS;;AAG9B,cAAI,UAAU,KAAK;AAEnB,cAAI,CAAC,AAAM,SAAS,OAAO,GAAG;AAC7B,sBAAU;;AAGX,cAAI,SAAQ,KAAK;AAEjB,cAAI,QAAO;AAEV,gBAAM,UAAU,KAAK;AACrB,gBAAI,SAAS;AACZ,uBAAQ,MAAM,QAAQ,QAAO,OAAO;;AAGrC,gBAAM,WAAW,KAAK;AACtB,gBAAI,UAAU;AACb,uBAAQ,MAAM,SAAS,QAAO,QAAQ;;AAGvC,qBAAS,aAAa,QAAQ,UAAU,OAAM,IAAI,MAAM,OAAM,IAAI,MAAM,OAAM,IAAI,MAAM,UAAU,GAAG;;AAEtG;QACD,CAAC;;AAEF,aAAO;IACR;;AAnEA,SAAA,eAAA,iBAAA,aAAA;;;;WAAkC;;AAClC,SAAA,eAAA,iBAAA,cAAA;;;;WAA0C,SAAS,WAAW,OAAO,CAAC,gBAAe,SAAS,CAAC;;AAmEhG,SAAA;EAzEoC,QAAQ;;;AC0C5C,IAAA,aAAA,SAAA,QAAA;AAAgC,YAAA,aAAA,MAAA;AAAhC,yBAAA;AAAA,QAAA,QAAA,WAAA,QAAA,OAAA,MAAA,MAAA,SAAA,KAAA;AAOC,WAAA,eAAA,OAAA,kBAAA;;;;aAA4C,MAAK,SAAS,KAAK,UAAU,IAAI,MAAK,OAAO,CAAA,CAAE,CAAC;;AAO5F,WAAA,eAAA,OAAA,mBAAA;;;;aAA6C,MAAK,SAAS,KAAK,UAAU,IAAI,MAAK,OAAO,CAAA,CAAE,CAAC;;AAO7F,WAAA,eAAA,OAAA,cAAA;;;;aAAoC,MAAK,eAAe,SAAS,KAAK,MAAM,IAAI,MAAK,OAAO,EAAE,WAAW,CAAC,OAAO,EAAC,CAAE,CAAC;;AAOrH,WAAA,eAAA,OAAA,YAAA;;;;aAAkC,MAAK,eAAe,SAAS,KAAK,MAAM,IAAI,MAAK,OAAO,EAAE,WAAW,CAAC,KAAK,EAAC,CAAE,CAAC;;AA+BjH,WAAA,eAAA,OAAA,WAAA;;;;aAA0D,IAAI,aAC7D,SAAS,IAAI,CAAA,CAAE,GACf,WAAA;AAAM,eAAA,iBAAiB,KAAK,MAAK,OAAO;UACvC,WAAW,AAAO,UAAU,MAAK,QAAQ,SAAS,IAAI,aAAa,CAAA,CAAE,GAAG,CAAC,MAAK,IAAI,aAAa,GAAG,cAAc,QAAQ,CAAC;WACvH,CAAC,MAAK,QAAQ,QAAQ,CAAC;MAFpB,CAEqB;;;EAqI7B;;;;;WA/JC,WAAA;AACC,WAAK,UAAU,YAAY,AAAO,UAAU,KAAK,UAAU,WAAW,CAAC,cAAc,KAAK,UAAU,WAAW,CAAC;AAChH,aAAA,UAAM,UAAS,KAAA,IAAA;AACf,WAAK,IAAI,WAAW,QAAQ,IAAI,KAAK,OAAO;QAC3C,WAAW,CAAC,YAAY;OACxB,CAAC;IACH;;;;;;WAKA,WAAA;AACC,UAAM,SAAS,KAAK,QAAQ,KAAI;AAChC,aAAO,OAAO,OAAO,YAAY,CAAA,CAAE;AACnC,aAAO;IACR;;;;;;WAwBA,SAAiB,OAAe,MAAe,QAAa;AAC3D,UAAM,UAAU,KAAK,WAAU;AAC/B,UAAI,WAAW,AAAM,SAAS,KAAK,GAAG;AAErC,YAAM,aAAa,KAAK,IAAI,cAAc,CAAC;AAC3C,YAAM,WAAW,KAAK,IAAI,YAAY,CAAC;AAEvC,YAAM,IAAK,SAAQ,cAAe,YAAW;AAC7C,YAAM,aAAa,KAAK,IAAI,YAAY;AACxC,YAAM,WAAW,KAAK,IAAI,UAAU;AAEpC,YAAI,CAAC,MAAM;AACV,iBAAO,KAAK,mBAAkB,EAAG,OAAO,KAAK;;AAG9C,YAAI,CAAC,QAAO;AACX,mBAAQ,MAAM,YAAY,GAAG,YAAY,QAAQ;;AAGlD,gBAAQ,MAAM,IAAI,QAAQ,IAAI;AAC9B,YAAI,IAAC;AAEL,YAAI,KAAK,IAAI,aAAa,KAAK,YAAY;AAC1C,cAAI,KAAK,gBAAgB,SAAS,EAAE,GAAG,GAAG,GAAG,KAAK,YAAW,IAAM,KAAI,GAAE,CAAE;eAEvE;AACJ,cAAI,KAAK,gBAAgB,SAAS,EAAE,GAAG,KAAK,WAAU,IAAK,GAAG,GAAG,EAAC,CAAE;;AAGrE,YAAI,aAAa,QAAQ,IAAI,YAAY;AACzC,YAAI,YAAY;AACf,qBAAW,IAAI,QAAQ,MAAM,YAAY,GAAG,YAAY,QAAQ,CAAC;;AAElE,gBAAQ,IAAI,WAAW,CAAC;AACxB,gBAAQ,KAAI;;IAEd;;;;;;WAEA,WAAA;AACC,aAAA,UAAM,iBAAgB,KAAA,IAAA;AAEtB,UAAM,iBAAiB,KAAK;AAC5B,UAAM,cAAc,KAAK,IAAI,aAAa;AAC1C,UAAM,aAAa,KAAK;AACxB,UAAM,WAAW,KAAK;AACtB,UAAM,UAAU,KAAK,WAAU;AAE/B,UAAI,KAAK,QAAQ,aAAa,GAAG;AAChC,YAAI,eAAe,YAAY;AAC9B,eAAK,gBAAgB,OAAO,EAAE,QAAQ,KAAK,MAAM,gBAAgB,QAAQ,KAAI,CAAE;AAC/E,eAAK,IAAI,UAAU,KAAK,MAAM,gBAAgB;AAC9C,qBAAW,OAAO,EAAE,GAAG,MAAM,GAAG,QAAW,SAAS,MAAM,SAAS,KAAI,CAAE;AACzE,mBAAS,OAAO,EAAE,GAAG,GAAG,GAAG,QAAW,SAAS,GAAG,SAAS,KAAI,CAAE;AACjE,yBAAe,OAAO,EAAE,QAAQ,MAAM,OAAO,OAAS,CAAE;AACxD,cAAI,SAAS;AACZ,oBAAQ,IAAI,sBAAsB,YAAY;;eAG3C;AACJ,eAAK,gBAAgB,OAAO,EAAE,QAAQ,KAAK,MAAM,kBAAkB,OAAO,KAAI,CAAE;AAChF,eAAK,IAAI,UAAU,KAAK,MAAM,cAAc;AAC5C,qBAAW,OAAO,EAAE,GAAG,GAAG,GAAG,QAAW,SAAS,GAAG,SAAS,EAAC,CAAE;AAChE,mBAAS,OAAO,EAAE,GAAG,MAAM,GAAG,QAAW,SAAS,MAAM,SAAS,EAAC,CAAE;AACpE,yBAAe,OAAO,EAAE,OAAO,MAAM,QAAQ,OAAS,CAAE;AACxD,cAAI,SAAS;AACZ,oBAAQ,IAAI,sBAAsB,UAAU;;;;AAK/C,UAAI,KAAK,QAAQ,WAAW,GAAG;AAC9B,YAAM,YAAY,KAAK,IAAI,aAAa,CAAC;AACzC,YAAM,aAAa,KAAK,IAAI,YAAY;AACxC,YAAM,WAAW,KAAK,IAAI,UAAU;AACpC,aAAK,gBAAgB,SAAS,MAAK;AACnC,YAAI,YAAY,GAAG;AAClB,mBAAS,IAAI,GAAG,IAAI,WAAW,KAAK;AACnC,gBAAM,SAAS,KAAK,WAAU;AAE9B,gBAAI,eAAe,YAAY;AAC9B,mBAAK,gBAAgB,SAAS,UAAU,QAAQ,CAAC;mBAE7C;AACJ,mBAAK,gBAAgB,SAAS,KAAK,MAAM;;AAG1C,gBAAI,cAAc,UAAU;AAC3B,qBAAO,IAAI,QAAQ,MAAM,YAAY,IAAI,WAAW,YAAY,QAAQ,CAAC;;;mBAInE,aAAa,GAAG;AACxB,cAAM,SAAS,KAAK,WAAU;AAC9B,eAAK,gBAAgB,SAAS,KAAK,MAAM;AACzC,cAAM,WAAW,eAAe,IAAI,KAAK,OAAO,EAAE,OAAO,CAAC,EAAE,OAAO,WAAU,GAAI,EAAE,OAAO,SAAQ,CAAE,EAAC,CAAE;AAEvG,cAAI,eAAe,YAAY;AAC9B,qBAAS,IAAI,YAAY,EAAE;AAC3B,gBAAI,QAAQ,SAAS,IAAI,OAAO;AAChC,gBAAI,OAAO;AACV,oBAAM,QAAO;;iBAGV;AACJ,qBAAS,IAAI,YAAY,CAAC;;AAE3B,cAAI,cAAc,UAAU;AAC3B,mBAAO,IAAI,gBAAgB,QAAQ;;;;AAKtC,UAAI,KAAK,QAAQ,WAAW,KAAK,KAAK,QAAQ,YAAY,GAAG;AAC5D,mBAAW,IAAI,QAAQ,KAAK,IAAI,aAAa,KAAK,mBAAkB,EAAG,OAAO,KAAK,IAAI,cAAc,CAAC,CAAC,CAAC,CAAC;;AAG1G,UAAI,KAAK,QAAQ,SAAS,KAAK,KAAK,QAAQ,UAAU,GAAG;AACxD,iBAAS,IAAI,QAAQ,KAAK,IAAI,WAAW,KAAK,mBAAkB,EAAG,OAAO,KAAK,IAAI,YAAY,CAAC,CAAC,CAAC,CAAC;;IAErG;;AArKA,SAAA,eAAA,aAAA,aAAA;;;;WAAkC;;AAClC,SAAA,eAAA,aAAA,cAAA;;;;WAA0C,UAAU,WAAW,OAAO,CAAC,YAAW,SAAS,CAAC;;AAqK7F,SAAA;EApMgC,SAAS;;;ACyDzC,IAAA,SAAA,SAAA,QAAA;AAA4B,YAAA,SAAA,MAAA;AAA5B,qBAAA;AAAA,QAAA,QAAA,WAAA,QAAA,OAAA,MAAA,MAAA,SAAA,KAAA;AAqBC,WAAA,eAAA,OAAA,kBAAA;;;;aAA0D,IAAI,aAC7D,SAAS,IAAI,CAAA,CAAE,GACf,WAAA;AAAM,eAAA,UAAU,KAAK,MAAK,OAAO;UAChC,WAAW,AAAO,UAAU,MAAK,eAAe,SAAS,IAAI,aAAa,CAAA,CAAE,GAAG,CAAC,UAAU,MAAM,CAAC;UACjG,eAAe,AAAO,UAAU,MAAK,eAAe,SAAS,IAAI,iBAAiB,CAAA,CAAE,GAAG,CAAC,eAAe,CAAC;UACxG,YAAY,iBAAiB,IAAI,MAAK,OAAO;YAC5C,WAAW,AAAO,UAAU,MAAK,eAAe,SAAS,IAAI,aAAa,CAAA,CAAE,GAAG,CAAC,UAAU,QAAQ,YAAY,CAAC;YAC/G,eAAe,AAAO,UAAU,MAAK,eAAe,SAAS,IAAI,iBAAiB,CAAA,CAAE,GAAG,CAAC,eAAe,CAAC;WACxG;WACC,CAAC,MAAK,eAAe,QAAQ,CAAC;MAP3B,CAO4B;;AA6BnC,WAAA,eAAA,OAAA,WAAA;;;;aAAmD,IAAI,aACtD,SAAS,IAAI,CAAA,CAAE,GACf,WAAA;AAAM,eAAA,UAAU,KAAK,MAAK,OAAO;UAChC,WAAW,AAAO,UAAU,MAAK,QAAQ,SAAS,IAAI,aAAa,CAAA,CAAE,GAAG,CAAC,UAAU,QAAQ,CAAC;WAC1F,CAAC,MAAK,QAAQ,QAAQ,CAAC;MAFpB,CAEqB;;AAiB5B,WAAA,eAAA,OAAA,UAAA;;;;aAA8C,IAAI,aACjD,SAAS,IAAI,CAAA,CAAE,GACf,WAAA;AAAM,eAAA,MAAM,KAAK,MAAK,OAAO;UAC5B,WAAW,AAAO,UAAU,MAAK,OAAO,SAAS,IAAI,aAAa,CAAA,CAAE,GAAG,CAAC,UAAU,OAAO,CAAC;WACxF,CAAC,MAAK,OAAO,QAAQ,CAAC;MAFnB,CAEoB;;AAiB3B,WAAA,eAAA,OAAA,eAAA;;;;aAAmD,IAAI,aACtD,SAAS,IAAI,CAAA,CAAE,GACf,WAAA;AAAM,eAAA,MAAM,KAAK,MAAK,OAAO;UAC5B,WAAW,AAAO,UAAU,MAAK,YAAY,SAAS,IAAI,aAAa,CAAA,CAAE,GAAG,CAAC,UAAU,SAAS,OAAO,CAAC;WACtG,CAAC,MAAK,YAAY,QAAQ,CAAC;MAFxB,CAEyB;;AAiBhC,WAAA,eAAA,OAAA,oBAAA;;;;aAAmE,IAAI,aACtE,SAAS,IAAI,CAAA,CAAE,GACf,WAAA;AAAM,eAAA,iBAAiB,KAAK,MAAK,OAAO;UACvC,WAAW,AAAO,UAAU,MAAK,iBAAiB,SAAS,IAAI,aAAa,CAAA,CAAE,GAAG,CAAC,UAAU,UAAU,WAAW,CAAC;WAChH,CAAC,MAAK,iBAAiB,QAAQ,CAAC;MAF7B,CAE8B;;;EA+NtC;;;;;WA5VC,WAAA;AACC,WAAK,UAAU,YAAY,AAAO,UAAU,KAAK,UAAU,WAAW,CAAC,QAAQ,CAAC;AAChF,WAAK,OAAO,KAAK,QAAQ,UAAU,MAAM;AACzC,aAAA,UAAM,UAAS,KAAA,IAAA;IAChB;;;;;;WA+BA,SAAyB,UAA6C;AACrE,UAAM,gBAAgB,KAAK,SAAS,KAAK,KAAK,eAAe,KAAI,CAAE;AACnE,oBAAc,aAAa,QAAQ;AACnC,WAAK,eAAe,KAAK,aAAa;AACtC,oBAAc,OAAO,OAAO,YAAY,CAAA,CAAE;AAC1C,aAAO;IACR;;;;;;WAKA,WAAA;AACC,UAAM,SAAS,KAAK,QAAQ,KAAI;AAChC,WAAK,QAAQ,KAAK,MAAM;AACxB,aAAO,OAAO,OAAO,YAAY,CAAA,CAAE;AACnC,aAAO;IACR;;;;;;WAiBA,WAAA;AACC,UAAM,QAAQ,KAAK,OAAO,KAAI;AAC9B,YAAM,OAAO,OAAO,YAAY,CAAA,CAAE;AAClC,aAAO;IACR;;;;;;WAiBA,WAAA;AACC,UAAM,aAAa,KAAK,YAAY,KAAI;AACxC,iBAAW,OAAO,OAAO,YAAY,CAAA,CAAE;AACvC,aAAO;IACR;;;;;;WAiBA,WAAA;AACC,UAAM,kBAAkB,KAAK,iBAAiB,KAAI;AAClD,sBAAgB,OAAO,OAAO,YAAY,CAAA,CAAE;AAC5C,aAAO;IACR;;;;;;WAeA,SAA0B,UAA6C;AAAvE,UAAA,QAAA;AACC,aAAA,UAAM,gBAAe,KAAA,MAAC,QAAQ;AAE9B,UAAM,gBAAgB,KAAK,kBAAkB,QAAQ;AAErD,UAAM,YAAY,KAAK,IAAI,WAAW;AACtC,UAAM,YAAY,KAAK,IAAI,WAAW;AACtC,UAAM,cAAc,KAAK,IAAI,aAAa;AAE1C,UAAI,eAAe;AAClB,YAAM,cAAc,KAAK,IAAI,eAAe,eAAe;AAE3D,YAAM,SAAO,SAAS;AAEtB,YAAI,UAAQ,OAAK,KAAK;AACrB,iBAAK,IAAS,kBAAkB,QAAQ;;AAGzC,sBAAc,aAAa,QAAQ;AACnC,iBAAS,IAAI,iBAAiB,aAAa;AAE3C,YAAM,SAAS,KAAK,WAAU;AAC9B,YAAI,QAAQ;AACX,wBAAc,SAAS,KAAK,MAAM;AAClC,iBAAO,aAAa,QAAQ;AAC5B,mBAAS,IAAI,UAAU,MAAM;AAE7B,cAAM,mBAAmB,KAAK,IAAI,kBAAkB;AAEpD,cAAM,oBAAkB,OAAO,SAAS,KAAK,KAAK,oBAAmB,CAAE;AAEvE,cAAI,OAAO,SAAS,IAAI,MAAM;AAC9B,cAAI,SAAS,SAAS,IAAI,QAAQ;AAElC,mBAAS,IAAI,mBAAmB,iBAAe;AAE/C,cAAI,UAAQ,OAAK,KAAK;AACrB,mBAAO,OAAK,IAAI,WAAkB,IAAI;AACtC,qBAAS,OAAK,IAAI,aAAoB,MAAM;;AAG7C,cAAI,CAAC,QAAQ;AACZ,qBAAS;;AAGV,cAAI,CAAC,kBAAkB;AACtB,gBAAI,UAAQ,OAAK,oBAAoB;AACpC,qBAAK,mBAAkB;;iBAGpB;AACJ,gBAAI,OAAK,IAAI;AACZ,qBAAK,GAAG,WAAkB,WAAA;AACzB,kCAAgB,IAAI,QAAQ,OAAK,IAAI,SAAgB,CAAC;cACvD,CAAC;AAED,qBAAK,GAAG,aAAoB,WAAA;AAC3B,kCAAgB,IAAI,UAAU,OAAK,IAAI,WAAkB,CAAC;cAC3D,CAAC;;;AAIH,4BAAgB,OAAO,EAAE,MAAM,OAAM,CAAE;AAGvC,cAAM,YAAY,OAAK;AACvB,cAAI,aAAa,UAAU,oBAAoB;AAC9C,sBAAU,mBAAmB,MAAW;;;AAK1C,YAAM,UAAQ,KAAK,UAAS;AAE5B,YAAI,SAAO;AACV,wBAAc,SAAS,KAAK,OAAK;AACjC,kBAAM,aAAa,QAAQ;AAC3B,mBAAS,IAAI,SAAS,OAAK;AAE3B,kBAAM,KAAK,GAAG,QAAQ,WAAA;AACrB,0BAAc,IAAI,aAAa,QAAM,KAAK,SAAQ,IAAK,OAAO,MAAK,GAAG,uBAAuB,CAAC;UAC/F,CAAC;AAED,cAAI,UAAQ,OAAK,KAAK;AACrB,qBAAS,IAAI,QAAQ,OAAK,IAAI,SAAgB,CAAW;;AAG1D,cAAI,SAAO,SAAS,IAAI,MAAM;AAE9B,cAAI,QAAM;AACT,oBAAM,IAAI,QAAQ,MAAI;;;AAIxB,YAAM,aAAa,KAAK,eAAc;AACtC,YAAI,YAAY;AACf,wBAAc,SAAS,KAAK,UAAU;AACtC,qBAAW,aAAa,QAAQ;AAChC,mBAAS,IAAI,cAAc,UAAU;;AAGtC,YAAI,UAAQ,OAAK,MAAM;AAEtB,eAAK,WAAW,KAAK,OAAK,GAAG,WAAW,SAAC,SAAO;AAC/C,0BAAc,IAAI,YAAY,CAAC,OAAO;UACvC,CAAC,CAAC;AAEF,cAAI,CAAC,OAAK,IAAI,SAAS,GAAG;AACzB,0BAAc,IAAI,YAAY,IAAI;;AAGnC,cAAI,eAAe,QAAQ;AAC1B,gBAAI,iBAAiB;AACrB,gBAAI,eAAe,UAAU;AAC5B,+BAAiB;;AAElB,iBAAK,gBAAgB,gBAAgB,QAAM,QAAQ;;;AAKrD,aAAK,SAAS,OAAO,KAAK,SAAC,IAAG,GAAC;AAC9B,cAAI,UAAU,GAAE,SAAU;AAC1B,cAAI,UAAU,EAAE,SAAU;AAC1B,cAAI,WAAW,SAAS;AACvB,gBAAI,SAAS,MAAK,KAAK,QAAQ,OAAO;AACtC,gBAAI,SAAS,MAAK,KAAK,QAAQ,OAAO;AACtC,gBAAI,SAAS,QAAQ;AACpB,qBAAO;uBAEC,SAAS,QAAQ;AACzB,qBAAO;;;AAGT,iBAAO;QACR,CAAC;;IAGH;;;;;;WAGA,SAA0B,WAAsB,MAAmB,UAA6C;AAAhH,UAAA,QAAA;AACC,gBAAU,IAAI,mBAAmB,SAAS;AAC1C,gBAAU,OAAO,GAAG,eAAe,WAAA;AAClC,YAAM,YAAY,KAAK;AACvB,YAAI,aAAa,UAAU,eAAe;AACzC,oBAAU,cAAc,IAAW;;MAErC,CAAC;AAED,gBAAU,OAAO,GAAG,cAAc,WAAA;AACjC,YAAM,YAAY,KAAK;AACvB,YAAI,aAAa,UAAU,eAAe;AACzC,oBAAU,gBAAgB,IAAW;;MAEvC,CAAC;AAED,gBAAU,OAAO,GAAG,SAAS,WAAA;AAC5B,YAAM,YAAY,SAAS,IAAI,OAAO,EAAE,KAAK,SAAQ;AAErD,YAAI,KAAK,QAAQ,KAAK,YAAa,MAAK,SAAQ,KAAM,KAAK,IAAI,SAAS,MAAM,QAAQ;AACrF,eAAK,KAAI;AACT,oBAAU,IAAI,YAAY,KAAK;AAC/B,gBAAK,MAAM,YAAY,MAAK,GAAG,YAAY,MAAK,MAAM,QAAQ,SAAS,CAAC;mBAEhE,KAAK,MAAM;AACnB,eAAK,KAAI;AACT,oBAAU,IAAI,YAAY,IAAI;AAC9B,gBAAK,MAAM,YAAY,MAAK,GAAG,aAAa,MAAK,MAAM,QAAQ,SAAS,CAAC;;MAE3E,CAAC;IACF;;;;;;WAMA,SAAuB,UAA6C;AAEnE,UAAM,cAAc,SAAS;AAC7B,UAAI,eAAe,YAAY,KAAK;AACnC,YAAM,KAAK,YAAY,IAAI,gBAAgB;AAC3C,YAAI,MAAM,UAAU;AACnB,sBAAY,IAAI,kBAAkB,MAAS;;;AAK7C,UAAI,gBAAgB,SAAS,IAAI,eAAe;AAChD,UAAI,eAAe;AAClB,aAAK,eAAe,YAAY,aAAa;AAC7C,sBAAc,QAAO;;AAGtB,UAAI,SAAS,SAAS,IAAI,QAAQ;AAClC,UAAI,QAAQ;AACX,aAAK,QAAQ,YAAY,MAAM;AAC/B,eAAO,QAAO;;AAGf,UAAI,kBAAkB,SAAS,IAAI,iBAAiB;AACpD,UAAI,iBAAiB;AACpB,aAAK,iBAAiB,YAAY,eAAe;AACjD,wBAAgB,QAAO;;AAGxB,UAAI,QAAQ,SAAS,IAAI,OAAO;AAChC,UAAI,OAAO;AACV,aAAK,OAAO,YAAY,KAAK;AAC7B,cAAM,QAAO;;AAGd,UAAI,aAAa,SAAS,IAAI,YAAY;AAC1C,UAAI,YAAY;AACf,aAAK,YAAY,YAAY,UAAU;AACvC,mBAAW,QAAO;;IAGpB;;AArVA,SAAA,eAAA,SAAA,aAAA;;;;WAAkC;;AAClC,SAAA,eAAA,SAAA,cAAA;;;;WAA0C,OAAO,WAAW,OAAO,CAAC,QAAO,SAAS,CAAC;;AAqVtF,SAAA;EA7V4B,MAAM;;;ACxH5B,uBAAwB,SAAoB,UAAqC;AACtF,WAAS,KAAI,GAAG,MAAM,SAAS,QAAQ,KAAI,KAAK,MAAK;AACpD,QAAM,SAAS,SAAS;AACxB,QAAI,OAAO,SAAS,GAAG;AACtB,UAAI,aAAa,OAAO;AACxB,UAAI,WAAW,SAAS,GAAG;AAC1B,YAAI,aAAa,WAAW;AAC5B,gBAAQ,OAAO,WAAW,GAAG,WAAW,CAAC;AACzC,iBAAS,IAAI,GAAG,QAAM,OAAO,QAAQ,IAAI,OAAK,KAAK;AAClD,eAAK,SAAS,OAAO,EAAE;;;;;AAK5B;AAKM,cAAe,SAAoB,QAAqB;AAC7D,WAAS,IAAI,GAAG,MAAM,OAAO,QAAQ,IAAI,KAAK,KAAK;AAClD,QAAM,SAAQ,OAAO;AACrB,YAAQ,OAAO,OAAM,GAAG,OAAM,CAAC;;AAEjC;;;ACLA,IAAA,OAAA,SAAA,QAAA;AAA0B,YAAA,OAAA,MAAA;AAA1B,mBAAA;;EA0CA;;;;;WAlCC,WAAA;AACC,aAAA,UAAM,eAAc,KAAA,IAAA;AAEpB,UAAI,KAAK,QAAQ,QAAQ,KAAK,KAAK,QAAQ,UAAU,KAAK,KAAK,cAAc,KAAK,eAAe,OAAO,KAAK,KAAK,eAAe,QAAQ,GAAG;AAC3I,aAAK,SAAS;;IAEhB;;;;;;WAEA,WAAA;AACC,aAAA,UAAM,SAAQ,KAAA,IAAA;AAEd,UAAI,KAAK,QAAQ;AAEhB,YAAM,SAAS,KAAK,IAAI,QAAQ;AAChC,YAAM,WAAW,KAAK,IAAI,UAAU;AAEpC,YAAI,UAAU,OAAO,SAAS,GAAG;AAChC,cAAI,SAAQ,OAAO;AAEnB,eAAK,SAAS,OAAO,OAAM,GAAG,OAAM,CAAC;AACrC,UAAM,cAAc,KAAK,UAAU,CAAC,CAAC,MAAM,CAAC,CAAC;mBAErC,UAAU;AAClB,UAAM,cAAc,KAAK,UAAU,QAAQ;mBAEnC,CAAC,KAAK,IAAI,MAAM,GAAG;AAC3B,cAAI,IAAI,KAAK,MAAK;AAClB,cAAI,IAAI,KAAK,OAAM;AAEnB,eAAK,SAAS,OAAO,GAAG,CAAC;AACzB,eAAK,SAAS,OAAO,GAAG,CAAC;;;IAG5B;;AApCA,SAAA,eAAA,OAAA,aAAA;;;;WAAkC;;AAClC,SAAA,eAAA,OAAA,cAAA;;;;WAA0C,SAAS,WAAW,OAAO,CAAC,MAAK,SAAS,CAAC;;AAoCtF,SAAA;EA1C0B,QAAQ;;;ACyClC,IAAA,UAAA,SAAA,QAAA;AAA6B,YAAA,UAAA,MAAA;AAA7B,sBAAA;AAAA,QAAA,QAAA,WAAA,QAAA,OAAA,MAAA,MAAA,SAAA,KAAA;AAKC,WAAA,eAAA,OAAA,YAAA;;;;aAA4B,MAAK,MAAM,UAAU,YAAY,MAAS;;;EAmGvE;;;;;WA9FC,WAAA;AACC,aAAA,UAAM,SAAQ,KAAA,IAAA;AAEd,UAAI,KAAK,QAAQ,OAAO,GAAG;AAC1B,YAAM,QAAQ,KAAK,IAAI,OAAO;AAC9B,aAAK,SAAS,QAAQ,AAAM,SAAS,KAAK,IAAI,QAAQ;;AAGvD,UAAI,KAAK,QAAQ,QAAQ,GAAG;AAC3B,YAAM,SAAS,KAAK,IAAI,QAAQ;AAChC,aAAK,SAAS,SAAS,AAAM,SAAS,MAAM,IAAI,SAAS;;AAG1D,UAAI,KAAK,QAAQ,aAAa,GAAG;AAChC,aAAK,SAAS,MAAK;AACnB,YAAM,cAAc,KAAK,IAAI,aAAa;AAC1C,aAAK,SAAS,cAAc,eAAe,OAAO,SAAY;;AAG/D,UAAI,KAAK,QAAQ,YAAY,GAAG;AAC/B,aAAK,SAAS,MAAK;AACnB,aAAK,SAAS,aAAa,KAAK,IAAI,YAAY;;AAGjD,UAAI,KAAK,QAAQ,eAAe,GAAG;AAClC,aAAK,SAAS,MAAK;AACnB,aAAK,SAAS,gBAAgB,KAAK,IAAI,eAAe;;AAGvD,UAAI,KAAK,QAAQ,eAAe,GAAG;AAClC,aAAK,SAAS,MAAK;AACnB,aAAK,SAAS,gBAAgB,KAAK,IAAI,eAAe;;AAGvD,UAAI,KAAK,QAAQ,eAAe,GAAG;AAClC,aAAK,SAAS,MAAK;AACnB,aAAK,SAAS,gBAAgB,KAAK,IAAI,eAAe;;AAGvD,UAAI,KAAK,QAAQ,KAAK,GAAG;AACxB,aAAK,SAAS,MAAK;AACnB,aAAK,MAAK;;IAEZ;;;;;;WAEA,WAAA;AAAA,UAAA,QAAA;AACC,UAAM,MAAM,KAAK,IAAI,KAAK;AAC1B,UAAI,KAAK;AACR,YAAM,UAAQ,IAAI,MAAK;AAEvB,gBAAM,MAAM;AACZ,gBAAM,OAAM,EAAG,KAAK,WAAA;AACnB,gBAAK,SAAS,QAAQ;AACtB,gBAAK,YAAW;QACjB,CAAC,EAAE,MAAM,SAAC,QAAW;QAErB,CAAC;;IAEH;;;;;;WAEA,WAAA;AACC,aAAA,UAAM,YAAW,KAAA,IAAA;AAEjB,UAAM,QAAQ,KAAK,SAAS;AAC5B,UAAI,OAAO;AACV,YAAI,IAAI,KAAK,WAAW,SAAS,KAAK,IAAI,OAAO,CAAC;AAClD,YAAI,IAAI,KAAK,WAAW,UAAU,KAAK,IAAI,QAAQ,CAAC;AACpD,YAAM,IAAI,MAAM,SAAS,MAAM,SAAS,MAAM,QAAQ,MAAM,SAAS;AAErE,YAAI,AAAM,SAAS,CAAC,KAAK,AAAM,SAAS,CAAC,GAAG;AAC3C,eAAK,SAAS,QAAQ;AACtB,eAAK,SAAS,SAAS;mBAEf,AAAM,SAAS,CAAC,KAAK,GAAG;AAChC,cAAI,IAAI;mBAEA,AAAM,SAAS,CAAC,KAAK,GAAG;AAChC,cAAI,IAAI;eAEJ;AACJ,cAAI,MAAM;AACV,cAAI,MAAM;;AAGX,YAAI,AAAM,SAAS,CAAC,GAAG;AACtB,eAAK,SAAS,QAAQ;;AAEvB,YAAI,AAAM,SAAS,CAAC,GAAG;AACtB,eAAK,SAAS,SAAS;;AAExB,aAAK,gBAAe;AACpB,aAAK,UAAS;;IAEhB;;AAhGA,SAAA,eAAA,UAAA,aAAA;;;;WAAkC;;AAClC,SAAA,eAAA,UAAA,cAAA;;;;WAA0C,OAAO,WAAW,OAAO,CAAC,SAAQ,SAAS,CAAC;;AAgGvF,SAAA;EAxG6B,MAAM;;;AC5CnC,IAAA,aAAA,SAAA,QAAA;AAAgC,YAAA,aAAA,MAAA;AAAhC,yBAAA;AAAA,QAAA,QAAA,WAAA,QAAA,OAAA,MAAA,MAAA,SAAA,KAAA;AAKC,WAAA,eAAA,OAAA,YAAA;;;;aAA+B,MAAK,MAAM,UAAU,eAAe,IAAI,MAAK,SAAS;;;EA6CtF;;;;;WA3CC,WAAA;AACC,aAAA,UAAM,UAAS,KAAA,IAAA;IAChB;;;;;;WAKA,WAAA;AACC,aAAA,UAAM,eAAc,KAAA,IAAA;AAEpB,WAAK,SAAS,MAAK;AAEnB,UAAI,KAAK,QAAQ,UAAU,GAAG;AAC7B,aAAK,SAAS,WAAW,KAAK,IAAI,UAAU;AAC5C,aAAK,gBAAe;;AAGrB,UAAI,KAAK,QAAQ,QAAQ,GAAG;AAC3B,aAAK,SAAS,SAAS,KAAK,IAAI,QAAQ;AACxC,aAAK,gBAAe;;AAGrB,UAAI,KAAK,QAAQ,YAAY,GAAG;AAC/B,aAAK,SAAS,aAAc,MAAK,IAAI,cAAc,CAAC,IAAK,MAAY;AACrE,aAAK,gBAAe;;AAGrB,UAAI,KAAK,QAAQ,QAAQ,GAAG;AAC3B,aAAK,SAAS,SAAS,KAAK,IAAI,QAAQ;AACxC,aAAK,gBAAe;;AAGrB,UAAI,KAAK,QAAQ,aAAa,GAAG;AAChC,aAAK,SAAS,cAAc,KAAK,IAAI,aAAa;AAClD,aAAK,gBAAe;;AAGrB,UAAI,KAAK,QAAQ,SAAS,GAAG;AAC5B,aAAK,SAAS,UAAU,KAAK,IAAI,SAAS;AAC1C,aAAK,gBAAe;;IAEtB;;AArCA,SAAA,eAAA,aAAA,aAAA;;;;WAAkC;;AAClC,SAAA,eAAA,aAAA,cAAA;;;;WAA0C,KAAK,WAAW,OAAO,CAAC,YAAW,SAAS,CAAC;;AAsCxF,SAAA;EAlDgC,IAAI;;;AC4EpC,IAAA,cAAA,SAAA,QAAA;AAAiC,YAAA,cAAA,MAAA;AAAjC,0BAAA;AAAA,QAAA,QAAA,WAAA,QAAA,OAAA,MAAA,MAAA,SAAA,KAAA;AAUC,WAAA,eAAA,OAAA,YAAA;;;;aAA8B;;;EA6J/B;;;;;WA3JC,WAAA;AACC,WAAK,UAAU,KAAK,YAAY,SAAS;AACzC,aAAA,UAAM,UAAS,KAAA,IAAA;IAChB;;;;;;WAGA,WAAA;AACC,WAAK,QAAQ,KAAK,SAAS,KAAK,WAAW,IAAI,KAAK,OAAO,CAAA,CAAE,CAAC;IAC/D;;;;;;WAOA,WAAA;AACC,UAAM,gBAAgB,KAAK,WAAW,UAAU,CAAC;AACjD,UAAM,qBAAqB,KAAK,WAAW,eAAe,CAAC;AAC3D,UAAM,aAAa,KAAK,IAAI,cAAc,CAAC;AAC3C,aAAO,qBAAqB,AAAO,gBAAgB,YAAY,gBAAgB,kBAAkB;IAClG;;;;;;WAOA,WAAA;AACC,UAAM,SAAS,KAAK,IAAI,UAAU,KAAK;AACvC,aAAO,KAAK,WAAU,IAAK,KAAK,IAAI,UAAU,CAAC,IAAK,UAAS,KAAK;IACnE;;;;;;WAEA,WAAA;AACC,aAAA,UAAM,gBAAe,KAAA,IAAA;AAErB,UAAI,KAAK,QAAQ,YAAY,KAAK,KAAK,eAAe,QAAQ,KAAK,KAAK,eAAe,aAAa,KAAK,KAAK,QAAQ,YAAY,KAAK,KAAK,QAAQ,QAAQ,KAAK,KAAK,QAAQ,QAAQ,KAAK,KAAK,QAAQ,aAAa,KAAK,KAAK,QAAQ,UAAU,GAAG;AAEnP,YAAM,WAAW,KAAK,IAAI,YAAY,UAAU;AAEhD,YAAM,SAAS,KAAK,IAAI,UAAU,KAAK;AAEvC,YAAM,gBAAc,KAAK,IAAI,aAAa;AAC1C,YAAI,aAAa,AAAM,eAAe,KAAK,IAAI,cAAc,CAAC,CAAC;AAE/D,aAAK,MAAM,IAAI,cAAc,KAAK,IAAI,cAAc,CAAC,CAAC;AACtD,aAAK,MAAM,IAAI,UAAU,MAAM;AAE/B,YAAM,OAAM,AAAM,IAAI,UAAU;AAChC,YAAM,OAAM,AAAM,IAAI,UAAU;AAEhC,YAAI,aAAa,KAAK,WAAU;AAChC,YAAI,SAAS,KAAK,OAAM;AAExB,aAAK,SAAS,QAAQ;AAEtB,YAAI,YAAY,YAAY;AAE3B,eAAK,OAAO;YACX,YAAY;YACZ,eAAe;YACf,aAAa;YACb,cAAc;WACd;AAID,eAAK,MAAM,IAAI,eAAe,aAAW;AACzC,eAAK,MAAM,IAAI,UAAU,MAAM;eAG3B;AACJ,cAAI,cAAc,GAAG;AACpB,yBAAa;AACb,qBAAS;;AAIV,cAAI,KAAI,SAAS;AACjB,cAAI,KAAI,SAAS;AAEjB,cAAI,YAAY,UAAU;AAEzB,iBAAK,OAAO,KAAK,EAAC;AAClB,iBAAK,OAAO,KAAK,EAAC;AAElB,gBAAK,aAAa,MAAQ,aAAa,OAAQ,iBAAe,QAAQ;AACrE,mBAAK,SAAS,QAAQ;AACtB,mBAAK,WAAW;mBAEZ;AACJ,mBAAK,SAAS,QAAQ,aAAa;AACnC,mBAAK,WAAW;;AAEjB,iBAAK,OAAO,WAAW;qBAEf,YAAY,YAAY;AAChC,iBAAK,OAAO,WAAW,GAAG;AAC1B,iBAAK,OAAO,WAAW,GAAG;AAC1B,iBAAK,OAAO,KAAK,EAAC;AAClB,iBAAK,OAAO,KAAK,EAAC;qBAEV,YAAY,WAAW;AAC/B,iBAAK,OAAO,KAAK,EAAC;AAClB,iBAAK,OAAO,KAAK,EAAC;;;AAIpB,aAAK,kBAAiB;AACtB,aAAK,gBAAe;;IAEtB;;;;;;WAGA,WAAA;AAEC,UAAM,WAAW,KAAK,IAAI,YAAY,SAAS;AAC/C,UAAM,SAAS,KAAK,IAAI,UAAU,KAAK;AAEvC,UAAI,KAAK;AACT,UAAI,KAAK;AACT,UAAI,aAAa,KAAK,IAAI,cAAc,CAAC;AACzC,UAAI,SAAS,KAAK,YAAW;AAC7B,UAAI,IAAI,OAAO,QAAQ,OAAO;AAC9B,UAAI,IAAI,OAAO,SAAS,OAAO;AAE/B,UAAI,YAAY,UAAU;AACzB,YAAI,KAAK,UAAU;AAClB,cAAI,UAAU,KAAK,IAAI,SAAS;AAChC,cAAI,mBAAmB,SAAS;AAC/B,gBAAI,IAAK,KAAI,QAAQ,QAAQ;;AAG9B,eAAK,IAAI,AAAM,IAAI,UAAU;AAC7B,eAAK,IAAI,AAAM,IAAI,UAAU;;iBAGtB,CAAC,UAAU,YAAY,YAAY;AAC3C,aAAK,IAAI,IAAI,AAAM,IAAI,UAAU;AACjC,aAAK,IAAI,IAAI,AAAM,IAAI,UAAU;;AAIlC,WAAK,OAAO,MAAM,EAAE;AACpB,WAAK,OAAO,MAAM,EAAE;AAEpB,aAAA,UAAM,gBAAe,KAAA,IAAA;IACtB;;AAKA,SAAA,eAAW,aAAA,WAAA,QAAI;SAAf,WAAA;AACC,aAAO,KAAK;IACb;;;;AA9JA,SAAA,eAAA,cAAA,aAAA;;;;WAAkC;;AAClC,SAAA,eAAA,cAAA,cAAA;;;;WAA0C,MAAM,WAAW,OAAO,CAAC,aAAY,SAAS,CAAC;;AA+J1F,SAAA;EAvKiC,KAAK;;;ACvFtC,IAAA,WAAA,SAAA,QAAA;AAA8B,YAAA,WAAA,MAAA;AAA9B,uBAAA;;EAuCA;;;;;WA/BC,WAAA;AACC,aAAA,UAAM,eAAc,KAAA,IAAA;AAEpB,UAAI,KAAK,QAAQ,OAAO,KAAK,KAAK,QAAQ,QAAQ,KAAK,KAAK,eAAe,OAAO,KAAK,KAAK,eAAe,QAAQ,GAAG;AACrH,aAAK,SAAS;;IAEhB;;;;;;WAEA,WAAA;AACC,aAAA,UAAM,SAAQ,KAAA,IAAA;AAEd,UAAI,KAAK,UAAU,CAAC,KAAK,IAAI,MAAM,GAAG;AACrC,aAAK,MAAK;;IAEZ;;;;;;WAEA,WAAA;AACC,UAAM,IAAI,KAAK,MAAK;AACpB,UAAM,IAAI,KAAK,OAAM;AACrB,UAAM,UAAU,KAAK;AACrB,cAAQ,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC;AAC5B,cAAQ,OAAO,GAAG,CAAC,IAAI,CAAC;AACxB,cAAQ,OAAO,IAAI,GAAG,IAAI,CAAC;AAC3B,cAAQ,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC;IAE7B;;;;;;WAEA,WAAA;AACC,WAAK,UAAS;AACd,WAAK,SAAS;IACf;;AAjCA,SAAA,eAAA,WAAA,aAAA;;;;WAAkC;;AAClC,SAAA,eAAA,WAAA,cAAA;;;;WAA0C,SAAS,WAAW,OAAO,CAAC,UAAS,SAAS,CAAC;;AAiC1F,SAAA;EAvC8B,QAAQ;;;AC2DtC,IAAA,YAAA,SAAA,QAAA;AAA+B,YAAA,YAAA,MAAA;AAA/B,wBAAA;AAAA,QAAA,QAAA,WAAA,QAAA,OAAA,MAAA,MAAA,SAAA,KAAA;AAsBC,WAAA,eAAA,OAAA,SAAA;;;;aAAiC,MAAK,WAAU;;AAKhD,WAAA,eAAA,OAAA,aAAA;;;;aAA2B,MAAK,YAAW;;AAK3C,WAAA,eAAA,OAAA,WAAA;;;;aAAyB,MAAK,YAAW;;AAEzC,WAAA,eAAA,OAAA,cAAA;;;;aAAgC;;AAEhC,WAAA,eAAA,OAAA,cAAA;;;;aAAgC;;AAEhC,WAAA,eAAA,OAAA,YAAA;;;;aAA8B;;AAE9B,WAAA,eAAA,OAAA,cAAA;;;;aAAgC;;AAEhC,WAAA,eAAA,OAAA,aAAA;;;;;;;EAyWD;;;;;WAjZC,WAAA;AACC,WAAK,UAAU,YAAY,AAAO,UAAU,KAAK,UAAU,WAAW,CAAC,aAAa,KAAK,UAAU,WAAW,CAAC;AAC/G,UAAI,CAAC,KAAK,UAAU,YAAY;AAC/B,aAAK,UAAU,aAAa,iBAAiB,IAAI,KAAK,OAAO;UAC5D,WAAW,AAAO,UAAU,KAAK,UAAU,WAAW,CAAC,QAAQ,YAAY,CAAC;SAC5E;;IAEH;;;;;;WAmCA,WAAA;AACC,aAAO,KAAK,SAAS,KAAK,OAAO,IAAI,KAAK,OAAO;QAChD,WAAW,CAAC,UAAU,UAAU,KAAK,IAAI,aAAa,CAAC;QAAG,MAAM,SAAS,IAAI,KAAK,OAAO;UACxF,WAAW,CAAC,MAAM;SAClB;OACD,CAAC;IACH;;;;;;WAEA,WAAA;AACC,aAAO,KAAK,SAAS,KAAK,iBAAiB,IAAI,KAAK,OAAO;QAC1D,WAAW,CAAC,SAAS,KAAK,IAAI,aAAa,CAAC;OAC5C,CAAC;IACH;;;;;;WAEA,SAA2B,WAAyB;AAApD,UAAA,QAAA;AACC,UAAI,WAAW;AACd,aAAK,WAAW,KACf,UAAU,OAAO,GAAG,WAAW,WAAA;AAC9B,gBAAK,cAAc,UAAU,KAAK;AAClC,gBAAK,aAAa;QACnB,CAAC,CAAC;;IAGL;;;;;;WAEA,WAAA;AAAA,UAAA,QAAA;AACC,WAAK,qBAAoB;AACzB,aAAA,UAAM,UAAS,KAAA,IAAA;AAEf,UAAM,YAAY,KAAK;AACvB,UAAM,UAAU,KAAK;AACrB,UAAM,QAAQ,KAAK;AACnB,UAAM,aAAa,KAAK,IAAI,YAAY;AAExC,UAAI,YAAY;AACf,aAAK,WAAW,KACf,WAAW,OAAO,GAAG,SAAS,SAAC,OAAK;AACnC,gBAAK,cAAc,UAAU,IAAI;AACjC,cAAM,SAAQ,MAAK,SAAS,QAAQ,MAAM,KAAK;AAE/C,cAAM,IAAI,MAAK,MAAK;AACpB,cAAM,IAAI,MAAK,OAAM;AAErB,cAAM,cAAc,MAAK,IAAI,aAAa;AAE1C,cAAI;AAEJ,cAAI,eAAe,YAAY;AAC9B,wBAAa,QAAM,IAAI,MAAM,OAAM,IAAK,KAAK;iBAEzC;AACJ,wBAAa,QAAM,IAAI,MAAM,MAAK,IAAK,KAAK;;AAG7C,cAAI;AACJ,cAAI;AAEJ,cAAI,eAAe,YAAY;AAC9B,4BAAgB,YAAY;AAC5B,kBAAM;iBAEF;AACJ,4BAAgB,YAAY;AAC5B,kBAAM;;AAIP,cAAM,WAAW,MAAK,IAAI,qBAAqB,CAAC;AAChD,cAAI,WAAW,GAAG;AACjB,kBAAK,aAAa;AAClB,kBAAK,iBAAiB,MAAK,MAAM,QAAQ,EAAE,KAAU,IAAI,eAAe,UAAoB,QAAQ,MAAK,IAAI,iBAAiB,EAAC,CAAE,CAAC;iBAE9H;AACJ,kBAAK,MAAM,IAAI,KAAK,aAAa;AACjC,kBAAK,MAAM,OAAO,GAAG,cAAc,WAAA;AAClC,oBAAK,cAAc,UAAU,KAAK;YACnC,CAAC;;QAEH,CAAC,CAAC;;AAIJ,WAAK,WAAW,KAAK,MAAM,OAAO,GAAG,YAAY,SAAC,OAAK;AAEtD,YAAI,CAAC,AAAO,aAAa,MAAM,eAAe,KAAI,GAAG;AACpD;;AAGD,YAAM,WAAW,MAAK,IAAI,qBAAqB,CAAC;AAChD,YAAM,SAAS,MAAK,IAAI,iBAAiB;AAEzC,cAAK,QAAQ,EAAE,KAAK,SAAS,IAAI,GAAG,UAAoB,OAAc,CAAE;AACxE,cAAK,QAAQ,EAAE,KAAK,OAAO,IAAI,GAAG,UAAoB,OAAc,CAAE;MACvE,CAAC,CAAC;AAEF,WAAK,WAAW,KAAK,UAAU,OAAO,GAAG,eAAe,WAAA;AACvD,cAAK,cAAc,UAAU,IAAI;AACjC,cAAK,aAAa;AAClB,cAAK,YAAY;MAClB,CAAC,CAAC;AAEF,WAAK,WAAW,KAAK,QAAQ,OAAO,GAAG,eAAe,WAAA;AACrD,cAAK,cAAc,UAAU,IAAI;AACjC,cAAK,WAAW;AAChB,cAAK,YAAY;MAClB,CAAC,CAAC;AAEF,WAAK,WAAW,KAAK,MAAM,OAAO,GAAG,eAAe,WAAA;AACnD,cAAK,cAAc,UAAU,IAAI;AACjC,cAAK,aAAa;AAClB,cAAK,YAAY;MAClB,CAAC,CAAC;AAEF,WAAK,WAAW,KAAK,UAAU,OAAO,GAAG,mBAAmB,WAAA;AAC3D,YAAI,MAAK,YAAY;AACpB,gBAAK,cAAc,UAAU,KAAK;;AAEnC,cAAK,aAAa;MACnB,CAAC,CAAC;AAEF,WAAK,WAAW,KAAK,QAAQ,OAAO,GAAG,mBAAmB,WAAA;AACzD,YAAI,MAAK,UAAU;AAClB,gBAAK,cAAc,UAAU,KAAK;;AAEnC,cAAK,WAAW;MACjB,CAAC,CAAC;AAEF,WAAK,WAAW,KAAK,MAAM,OAAO,GAAG,mBAAmB,WAAA;AACvD,YAAI,MAAK,YAAY;AACpB,gBAAK,cAAc,UAAU,KAAK;;AAEnC,cAAK,aAAa;MACnB,CAAC,CAAC;AAEF,WAAK,WAAW,KAAK,UAAU,GAAG,KAAK,WAAA;AACtC,cAAK,aAAY;MAClB,CAAC,CAAC;AAEF,WAAK,WAAW,KAAK,QAAQ,GAAG,KAAK,WAAA;AACpC,cAAK,aAAY;MAClB,CAAC,CAAC;AAEF,WAAK,WAAW,KAAK,UAAU,GAAG,KAAK,WAAA;AACtC,cAAK,aAAY;MAClB,CAAC,CAAC;AAEF,WAAK,WAAW,KAAK,QAAQ,GAAG,KAAK,WAAA;AACpC,cAAK,aAAY;MAClB,CAAC,CAAC;AAEF,WAAK,WAAW,KAAK,MAAM,OAAO,GAAG,mBAAmB,WAAA;AACvD,cAAK,oBAAmB;MACzB,CAAC,CAAC;AAEF,UAAI,KAAK,IAAI,aAAa,KAAK,YAAY;AAC1C,kBAAU,IAAI,KAAK,CAAC;AACpB,gBAAQ,IAAI,KAAK,CAAC;AAElB,aAAK,WAAW,KAAK,MAAM,SAAS,IAAI,KAAK,SAAC,OAAK;AAClD,iBAAO,KAAK,IAAI,KAAK,IAAI,OAAO,KAAK,GAAG,MAAK,OAAM,IAAK,MAAM,OAAM,CAAE,GAAG,CAAC;QAC3E,CAAC,CAAC;AAEF,aAAK,WAAW,KAAK,MAAM,SAAS,IAAI,KAAK,SAAC,QAAM;AACnD,iBAAO,MAAK,MAAK,IAAK;QACvB,CAAC,CAAC;AAEF,aAAK,WAAW,KAAK,UAAU,SAAS,IAAI,KAAK,SAAC,QAAM;AACvD,iBAAO,MAAK,MAAK,IAAK;QACvB,CAAC,CAAC;AAEF,aAAK,WAAW,KAAK,QAAQ,SAAS,IAAI,KAAK,SAAC,QAAM;AACrD,iBAAO,MAAK,MAAK,IAAK;QACvB,CAAC,CAAC;AAEF,aAAK,WAAW,KAAK,UAAU,SAAS,IAAI,KAAK,SAAC,OAAK;AACtD,iBAAO,KAAK,IAAI,KAAK,IAAI,OAAO,KAAK,GAAG,MAAK,OAAM,CAAE,GAAG,CAAC;QAC1D,CAAC,CAAC;AAEF,aAAK,WAAW,KAAK,QAAQ,SAAS,IAAI,KAAK,SAAC,OAAK;AACpD,iBAAO,KAAK,IAAI,KAAK,IAAI,OAAO,KAAK,GAAG,MAAK,OAAM,CAAE,GAAG,CAAC;QAC1D,CAAC,CAAC;aAEE;AACJ,kBAAU,IAAI,KAAK,CAAC;AACpB,gBAAQ,IAAI,KAAK,CAAC;AAElB,aAAK,WAAW,KAAK,MAAM,SAAS,IAAI,KAAK,SAAC,OAAK;AAClD,iBAAO,KAAK,IAAI,KAAK,IAAI,OAAO,KAAK,GAAG,MAAK,MAAK,IAAK,MAAM,MAAK,CAAE,GAAG,CAAC;QACzE,CAAC,CAAC;AAEF,aAAK,WAAW,KAAK,MAAM,SAAS,IAAI,KAAK,SAAC,QAAM;AACnD,iBAAO,MAAK,OAAM,IAAK;QACxB,CAAC,CAAC;AAEF,aAAK,WAAW,KAAK,UAAU,SAAS,IAAI,KAAK,SAAC,QAAM;AACvD,iBAAO,MAAK,OAAM,IAAK;QACxB,CAAC,CAAC;AAEF,aAAK,WAAW,KAAK,QAAQ,SAAS,IAAI,KAAK,SAAC,QAAM;AACrD,iBAAO,MAAK,OAAM,IAAK;QACxB,CAAC,CAAC;AAEF,aAAK,WAAW,KAAK,UAAU,SAAS,IAAI,KAAK,SAAC,OAAK;AACtD,iBAAO,KAAK,IAAI,KAAK,IAAI,OAAO,KAAK,GAAG,MAAK,MAAK,CAAE,GAAG,CAAC;QACzD,CAAC,CAAC;AAEF,aAAK,WAAW,KAAK,QAAQ,SAAS,IAAI,KAAK,SAAC,OAAK;AACpD,iBAAO,KAAK,IAAI,KAAK,IAAI,OAAO,KAAK,GAAG,MAAK,MAAK,CAAE,GAAG,CAAC;QACzD,CAAC,CAAC;;IAEJ;;;;;;WAEA,WAAA;AACC,aAAA,UAAM,gBAAe,KAAA,IAAA;AAErB,UAAI,KAAK,QAAQ,KAAK,KAAK,KAAK,QAAQ,OAAO,KAAK,KAAK,YAAY;AACpE,aAAK,YAAW;;IAElB;;;;;;WAEA,WAAA;AACC,aAAA,UAAM,SAAQ,KAAA,IAAA;AACd,UAAI,KAAK,QAAQ,OAAO,KAAK,KAAK,QAAQ,KAAK,GAAG;AACjD,YAAM,YAAY;AAClB,YAAI,KAAK,OAAO,UAAU,SAAS,GAAG;AACrC,eAAK,OAAO,SAAS,WAAW,EAAE,MAAM,WAAW,QAAQ,MAAM,OAAO,KAAK,IAAI,SAAS,CAAC,GAAG,KAAK,KAAK,IAAI,OAAO,CAAC,GAAG,MAAM,KAAK,UAAS,CAAE;;;IAGhJ;;;;;;WAKA,WAAA;AACC,UAAM,YAAY,KAAK;AACvB,UAAM,UAAU,KAAK;AAErB,UAAM,cAAc,KAAK,IAAI,aAAa;AAC1C,UAAM,SAAS,KAAK,OAAM;AAC1B,UAAM,QAAQ,KAAK,MAAK;AAExB,UAAI,eAAe,YAAY;AAC9B,kBAAU,IAAI,KAAK,SAAS,KAAK,IAAI,SAAS,CAAC,CAAC;AAChD,gBAAQ,IAAI,KAAK,SAAS,KAAK,IAAI,OAAO,CAAC,CAAC;aAExC;AACJ,kBAAU,IAAI,KAAK,QAAQ,KAAK,IAAI,SAAS,CAAC,CAAC;AAC/C,gBAAQ,IAAI,KAAK,QAAQ,KAAK,IAAI,OAAO,CAAC,CAAC;;AAG5C,UAAM,gBAAgB,KAAK,WAAW,sBAAsB;AAC5D,UAAM,OAAO,KAAK,MAAM,KAAK,IAAI,SAAS,CAAC,IAAI,GAAG;AAClD,UAAM,KAAK,KAAK,MAAM,KAAK,IAAI,OAAO,CAAC,IAAI,GAAG;AAC9C,UAAI;AACJ,UAAI;AACJ,UAAI,eAAe;AAClB,oBAAY,cAAc,KAAK,MAAM,KAAK,IAAI,SAAS,CAAC,CAAC;AACzD,kBAAU,cAAc,KAAK,MAAM,KAAK,IAAI,OAAO,CAAC,CAAC;aAEjD;AACJ,oBAAY,OAAO;AACnB,kBAAU,KAAK;;AAGhB,gBAAU,IAAI,aAAa,KAAK,GAAG,WAAW,QAAW,SAAS,CAAC;AACnE,gBAAU,IAAI,gBAAgB,KAAK,IAAI;AACvC,gBAAU,IAAI,iBAAiB,OAAO,GAAG;AAEzC,gBAAU,IAAI,gBAAgB,GAAG;AACjC,gBAAU,IAAI,gBAAgB,KAAK;AAEnC,cAAQ,IAAI,aAAa,KAAK,GAAG,SAAS,QAAW,OAAO,CAAC;AAC7D,cAAQ,IAAI,gBAAgB,KAAK,EAAE;AACnC,cAAQ,IAAI,iBAAiB,KAAK,GAAG;AAErC,cAAQ,IAAI,gBAAgB,GAAG;AAC/B,cAAQ,IAAI,gBAAgB,KAAK;IAClC;;;;;;WAEA,WAAA;AACC,UAAM,QAAQ,KAAK;AACnB,UAAM,YAAY,KAAK;AACvB,UAAM,UAAU,KAAK;AAErB,UAAM,SAAS,KAAK,OAAM;AAC1B,UAAM,QAAQ,KAAK,MAAK;AAExB,UAAI,KAAK,UAAU,EAAC;AACpB,UAAI,KAAK,QAAQ,EAAC;AAElB,UAAI,KAAK,UAAU,EAAC;AACpB,UAAI,KAAK,QAAQ,EAAC;AAElB,UAAI,QAAgB;AACpB,UAAI,MAAc;AAElB,UAAI,KAAK,IAAI,aAAa,KAAK,YAAY;AAC1C,YAAI,AAAM,SAAS,EAAE,KAAK,AAAM,SAAS,EAAE,GAAG;AAC7C,cAAI,CAAC,KAAK,cAAc,CAAC,MAAM,WAAU,GAAI;AAC5C,kBAAM,IAAI,UAAU,KAAK,EAAE;AAC3B,kBAAM,IAAI,KAAK,EAAE;;AAElB,kBAAQ,KAAK;AACb,gBAAM,KAAK;;aAGR;AACJ,YAAI,AAAM,SAAS,EAAE,KAAK,AAAM,SAAS,EAAE,GAAG;AAC7C,cAAI,CAAC,KAAK,cAAc,CAAC,MAAM,WAAU,GAAI;AAC5C,kBAAM,IAAI,SAAS,KAAK,EAAE;AAC1B,kBAAM,IAAI,KAAK,EAAE;;AAElB,kBAAQ,KAAK;AACb,gBAAM,KAAK;;;AAIb,UAAI,KAAK,WAAW,QAAQ,KAAM,MAAK,IAAI,OAAO,KAAK,SAAS,KAAK,IAAI,KAAK,KAAK,MAAM;AACxF,aAAK,IAAI,SAAS,KAAK;AACvB,aAAK,IAAI,OAAO,GAAG;;AAGpB,UAAM,gBAAgB,KAAK,WAAW,sBAAsB;AAC5D,UAAM,OAAO,KAAK,MAAM,KAAK,IAAI,SAAS,CAAC,IAAI,GAAG;AAClD,UAAM,KAAK,KAAK,MAAM,KAAK,IAAI,OAAO,CAAC,IAAI,GAAG;AAC9C,UAAI;AACJ,UAAI;AACJ,UAAI,eAAe;AAClB,oBAAY,cAAc,KAAK,MAAM,KAAK,IAAI,SAAS,CAAC,CAAC;AACzD,kBAAU,cAAc,KAAK,MAAM,KAAK,IAAI,OAAO,CAAC,CAAC;aAEjD;AACJ,oBAAY,OAAO;AACnB,kBAAU,KAAK;;AAGhB,YAAM,IAAI,aAAa,KAAK,GAAG,iBAAiB,QAAW,WAAW,OAAO,CAAC;AAC9E,YAAM,IAAI,gBAAgB,KAAK,IAAI;AACnC,YAAM,IAAI,iBAAiB,OAAO,GAAG;IACtC;;;;;;WAGA,WAAA;AAEC,UAAM,QAAQ,KAAK;AACnB,UAAM,YAAY,KAAK;AACvB,UAAM,UAAU,KAAK;AAErB,UAAI,KAAK,IAAI,aAAa,KAAK,YAAY;AAC1C,YAAM,YAAY,MAAM,OAAM;AAC9B,kBAAU,IAAI,KAAK,MAAM,EAAC,CAAE;AAC5B,gBAAQ,IAAI,KAAK,MAAM,EAAC,IAAK,SAAS;aAElC;AACJ,YAAM,YAAY,MAAM,MAAK;AAC7B,kBAAU,IAAI,KAAK,MAAM,EAAC,CAAE;AAC5B,gBAAQ,IAAI,KAAK,MAAM,EAAC,IAAK,SAAS;;IAExC;;AAnYA,SAAA,eAAA,YAAA,aAAA;;;;WAAkC;;AAClC,SAAA,eAAA,YAAA,cAAA;;;;WAA0C,UAAU,WAAW,OAAO,CAAC,WAAU,SAAS,CAAC;;AAmY5F,SAAA;EAnZ+B,SAAS;;;AC1DxC,IAAA,SAAA,SAAA,QAAA;AAA4B,YAAA,SAAA,MAAA;AAA5B,qBAAA;;EA2BA;;;;;WAjBC,WAAA;AACC,WAAK,qBAAoB;AACzB,aAAA,UAAM,UAAS,KAAA,IAAA;AAEf,WAAK,QAAQ,WAAW,WAAW,KAAK;AACxC,WAAK,MAAM,WAAW,WAAW,KAAK;IACvC;;;;;;WAKA,WAAA;AACC,aAAA,UAAM,YAAW,KAAA,IAAA;AACjB,UAAM,YAAY,KAAK;AACvB,WAAK,QAAQ,OAAO,EAAE,GAAG,UAAU,EAAC,GAAI,GAAG,UAAU,EAAC,EAAE,CAAE;AAC1D,WAAK,OAAO,OAAO,KAAK,IAAI,OAAO,CAAC;IACrC;;AApBA,SAAA,eAAA,SAAA,aAAA;;;;WAAkC;;AAClC,SAAA,eAAA,SAAA,cAAA;;;;WAA0C,UAAU,WAAW,OAAO,CAAC,QAAO,SAAS,CAAC;;AAoBzF,SAAA;EA3B4B,SAAS;;;ACfrC,IAAM,KAAK,KAAK;AAAhB,IACI,MAAM,IAAI;AADd,IAEI,UAAU;AAFd,IAGI,aAAa,MAAM;AAEvB,gBAAgB;AACd,OAAK,MAAM,KAAK,MAChB,KAAK,MAAM,KAAK,MAAM;AACtB,OAAK,IAAI;AACX;AAEA,gBAAgB;AACd,SAAO,IAAI;AACb;AAEA,KAAK,YAAY,KAAK,YAAY;AAAA,EAChC,aAAa;AAAA,EACb,QAAQ,SAAS,IAAG,IAAG;AACrB,SAAK,KAAK,MAAO,MAAK,MAAM,KAAK,MAAM,CAAC,MAAK,MAAO,MAAK,MAAM,KAAK,MAAM,CAAC;AAAA,EAC7E;AAAA,EACA,WAAW,WAAW;AACpB,QAAI,KAAK,QAAQ,MAAM;AACrB,WAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK;AACrC,WAAK,KAAK;AAAA,IACZ;AAAA,EACF;AAAA,EACA,QAAQ,SAAS,IAAG,IAAG;AACrB,SAAK,KAAK,MAAO,MAAK,MAAM,CAAC,MAAK,MAAO,MAAK,MAAM,CAAC;AAAA,EACvD;AAAA,EACA,kBAAkB,SAAS,IAAI,IAAI,IAAG,IAAG;AACvC,SAAK,KAAK,MAAO,CAAC,KAAM,MAAO,CAAC,KAAM,MAAO,MAAK,MAAM,CAAC,MAAK,MAAO,MAAK,MAAM,CAAC;AAAA,EACnF;AAAA,EACA,eAAe,SAAS,IAAI,IAAI,IAAI,IAAI,IAAG,IAAG;AAC5C,SAAK,KAAK,MAAO,CAAC,KAAM,MAAO,CAAC,KAAM,MAAO,CAAC,KAAM,MAAO,CAAC,KAAM,MAAO,MAAK,MAAM,CAAC,MAAK,MAAO,MAAK,MAAM,CAAC;AAAA,EAC/G;AAAA,EACA,OAAO,SAAS,IAAI,IAAI,IAAI,IAAI,GAAG;AACjC,SAAK,CAAC,IAAI,KAAK,CAAC,IAAI,KAAK,CAAC,IAAI,KAAK,CAAC,IAAI,IAAI,CAAC;AAC7C,QAAI,KAAK,KAAK,KACV,KAAK,KAAK,KACV,MAAM,KAAK,IACX,MAAM,KAAK,IACX,MAAM,KAAK,IACX,MAAM,KAAK,IACX,QAAQ,MAAM,MAAM,MAAM;AAG9B,QAAI,IAAI;AAAG,YAAM,IAAI,MAAM,sBAAsB,CAAC;AAGlD,QAAI,KAAK,QAAQ,MAAM;AACrB,WAAK,KAAK,MAAO,MAAK,MAAM,MAAM,MAAO,MAAK,MAAM;AAAA,IACtD,WAGS,CAAE,SAAQ;AAAS;AAAA,aAKnB,CAAE,MAAK,IAAI,MAAM,MAAM,MAAM,GAAG,IAAI,YAAY,CAAC,GAAG;AAC3D,WAAK,KAAK,MAAO,MAAK,MAAM,MAAM,MAAO,MAAK,MAAM;AAAA,IACtD,OAGK;AACH,UAAI,MAAM,KAAK,IACX,MAAM,KAAK,IACX,QAAQ,MAAM,MAAM,MAAM,KAC1B,QAAQ,MAAM,MAAM,MAAM,KAC1B,MAAM,KAAK,KAAK,KAAK,GACrB,MAAM,KAAK,KAAK,KAAK,GACrB,IAAI,IAAI,KAAK,IAAK,MAAK,KAAK,KAAM,SAAQ,QAAQ,SAAU,KAAI,MAAM,IAAI,KAAK,CAAC,GAChF,MAAM,IAAI,KACV,MAAM,IAAI;AAGd,UAAI,KAAK,IAAI,MAAM,CAAC,IAAI,SAAS;AAC/B,aAAK,KAAK,MAAO,MAAK,MAAM,OAAO,MAAO,MAAK,MAAM;AAAA,MACvD;AAEA,WAAK,KAAK,MAAM,IAAI,MAAM,IAAI,UAAW,CAAE,OAAM,MAAM,MAAM,OAAQ,MAAO,MAAK,MAAM,KAAK,MAAM,OAAO,MAAO,MAAK,MAAM,KAAK,MAAM;AAAA,IACxI;AAAA,EACF;AAAA,EACA,KAAK,SAAS,IAAG,IAAG,GAAG,IAAI,IAAI,KAAK;AAClC,SAAI,CAAC,IAAG,KAAI,CAAC,IAAG,IAAI,CAAC,GAAG,MAAM,CAAC,CAAC;AAChC,QAAI,KAAK,IAAI,KAAK,IAAI,EAAE,GACpB,KAAK,IAAI,KAAK,IAAI,EAAE,GACpB,KAAK,KAAI,IACT,KAAK,KAAI,IACT,KAAK,IAAI,KACT,KAAK,MAAM,KAAK,KAAK,KAAK;AAG9B,QAAI,IAAI;AAAG,YAAM,IAAI,MAAM,sBAAsB,CAAC;AAGlD,QAAI,KAAK,QAAQ,MAAM;AACrB,WAAK,KAAK,MAAM,KAAK,MAAM;AAAA,IAC7B,WAGS,KAAK,IAAI,KAAK,MAAM,EAAE,IAAI,WAAW,KAAK,IAAI,KAAK,MAAM,EAAE,IAAI,SAAS;AAC/E,WAAK,KAAK,MAAM,KAAK,MAAM;AAAA,IAC7B;AAGA,QAAI,CAAC;AAAG;AAGR,QAAI,KAAK;AAAG,WAAK,KAAK,MAAM;AAG5B,QAAI,KAAK,YAAY;AACnB,WAAK,KAAK,MAAM,IAAI,MAAM,IAAI,UAAU,KAAK,MAAO,MAAI,MAAM,MAAO,MAAI,MAAM,MAAM,IAAI,MAAM,IAAI,UAAU,KAAK,MAAO,MAAK,MAAM,MAAM,MAAO,MAAK,MAAM;AAAA,IAC9J,WAGS,KAAK,SAAS;AACrB,WAAK,KAAK,MAAM,IAAI,MAAM,IAAI,QAAS,CAAE,OAAM,MAAO,MAAM,KAAK,MAAO,MAAK,MAAM,KAAI,IAAI,KAAK,IAAI,EAAE,KAAK,MAAO,MAAK,MAAM,KAAI,IAAI,KAAK,IAAI,EAAE;AAAA,IAClJ;AAAA,EACF;AAAA,EACA,MAAM,SAAS,IAAG,IAAG,GAAG,GAAG;AACzB,SAAK,KAAK,MAAO,MAAK,MAAM,KAAK,MAAM,CAAC,MAAK,MAAO,MAAK,MAAM,KAAK,MAAM,CAAC,MAAK,MAAO,CAAC,IAAK,MAAO,CAAC,IAAK,MAAO,CAAC,IAAK;AAAA,EACzH;AAAA,EACA,UAAU,WAAW;AACnB,WAAO,KAAK;AAAA,EACd;AACF;AAEA,IAAO,eAAQ;;;ACjIA,0BAAS,IAAG;AACzB,SAAO,oBAAoB;AACzB,WAAO;AAAA,EACT;AACF;;;ACJO,IAAM,MAAM,KAAK;AACjB,IAAM,QAAQ,KAAK;AACnB,IAAM,OAAM,KAAK;AACjB,IAAM,MAAM,KAAK;AACjB,IAAM,MAAM,KAAK;AACjB,IAAM,OAAM,KAAK;AACjB,IAAM,OAAO,KAAK;AAElB,IAAM,WAAU;AAChB,IAAM,MAAK,KAAK;AAChB,IAAM,SAAS,MAAK;AACpB,IAAM,OAAM,IAAI;AAEhB,cAAc,IAAG;AACtB,SAAO,KAAI,IAAI,IAAI,KAAI,KAAK,MAAK,KAAK,KAAK,EAAC;AAC9C;AAEO,cAAc,IAAG;AACtB,SAAO,MAAK,IAAI,SAAS,MAAK,KAAK,CAAC,SAAS,KAAK,KAAK,EAAC;AAC1D;;;ACfA,wBAAwB,GAAG;AACzB,SAAO,EAAE;AACX;AAEA,wBAAwB,GAAG;AACzB,SAAO,EAAE;AACX;AAEA,uBAAuB,GAAG;AACxB,SAAO,EAAE;AACX;AAEA,qBAAqB,GAAG;AACtB,SAAO,EAAE;AACX;AAEA,qBAAqB,GAAG;AACtB,SAAO,KAAK,EAAE;AAChB;AAEA,mBAAmB,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI;AACjD,MAAI,MAAM,KAAK,IAAI,MAAM,KAAK,IAC1B,MAAM,KAAK,IAAI,MAAM,KAAK,IAC1B,IAAI,MAAM,MAAM,MAAM;AAC1B,MAAI,IAAI,IAAI;AAAS;AACrB,MAAK,OAAO,MAAK,MAAM,MAAO,MAAK,OAAO;AAC1C,SAAO,CAAC,KAAK,IAAI,KAAK,KAAK,IAAI,GAAG;AACpC;AAIA,wBAAwB,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI;AAClD,MAAI,MAAM,KAAK,IACX,MAAM,KAAK,IACX,KAAM,MAAK,KAAK,CAAC,MAAM,KAAK,MAAM,MAAM,MAAM,GAAG,GACjD,KAAK,KAAK,KACV,KAAK,CAAC,KAAK,KACX,MAAM,KAAK,IACX,MAAM,KAAK,IACX,MAAM,KAAK,IACX,MAAM,KAAK,IACX,MAAO,OAAM,OAAO,GACpB,MAAO,OAAM,OAAO,GACpB,KAAK,MAAM,KACX,KAAK,MAAM,KACX,KAAK,KAAK,KAAK,KAAK,IACpB,IAAI,KAAK,IACT,IAAI,MAAM,MAAM,MAAM,KACtB,IAAK,MAAK,IAAI,KAAK,KAAK,KAAK,IAAI,GAAG,IAAI,IAAI,KAAK,IAAI,CAAC,CAAC,GACvD,MAAO,KAAI,KAAK,KAAK,KAAK,IAC1B,MAAO,EAAC,IAAI,KAAK,KAAK,KAAK,IAC3B,MAAO,KAAI,KAAK,KAAK,KAAK,IAC1B,MAAO,EAAC,IAAI,KAAK,KAAK,KAAK,IAC3B,MAAM,MAAM,KACZ,MAAM,MAAM,KACZ,MAAM,MAAM,KACZ,MAAM,MAAM;AAIhB,MAAI,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM;AAAK,UAAM,KAAK,MAAM;AAEpE,SAAO;AAAA,IACL,IAAI;AAAA,IACJ,IAAI;AAAA,IACJ,KAAK,CAAC;AAAA,IACN,KAAK,CAAC;AAAA,IACN,KAAK,MAAO,MAAK,IAAI;AAAA,IACrB,KAAK,MAAO,MAAK,IAAI;AAAA,EACvB;AACF;AAEe,uBAAW;AACxB,MAAI,cAAc,gBACd,cAAc,gBACd,eAAe,iBAAS,CAAC,GACzB,YAAY,MACZ,aAAa,eACb,WAAW,aACX,WAAW,aACX,UAAU;AAEd,iBAAe;AACb,QAAI,QACA,GACA,KAAK,CAAC,YAAY,MAAM,MAAM,SAAS,GACvC,KAAK,CAAC,YAAY,MAAM,MAAM,SAAS,GACvC,KAAK,WAAW,MAAM,MAAM,SAAS,IAAI,QACzC,KAAK,SAAS,MAAM,MAAM,SAAS,IAAI,QACvC,KAAK,IAAI,KAAK,EAAE,GAChB,KAAK,KAAK;AAEd,QAAI,CAAC;AAAS,gBAAU,SAAS,aAAK;AAGtC,QAAI,KAAK;AAAI,UAAI,IAAI,KAAK,IAAI,KAAK;AAGnC,QAAI,CAAE,MAAK;AAAU,cAAQ,OAAO,GAAG,CAAC;AAAA,aAG/B,KAAK,OAAM,UAAS;AAC3B,cAAQ,OAAO,KAAK,KAAI,EAAE,GAAG,KAAK,KAAI,EAAE,CAAC;AACzC,cAAQ,IAAI,GAAG,GAAG,IAAI,IAAI,IAAI,CAAC,EAAE;AACjC,UAAI,KAAK,UAAS;AAChB,gBAAQ,OAAO,KAAK,KAAI,EAAE,GAAG,KAAK,KAAI,EAAE,CAAC;AACzC,gBAAQ,IAAI,GAAG,GAAG,IAAI,IAAI,IAAI,EAAE;AAAA,MAClC;AAAA,IACF,OAGK;AACH,UAAI,MAAM,IACN,MAAM,IACN,MAAM,IACN,MAAM,IACN,MAAM,IACN,MAAM,IACN,KAAK,SAAS,MAAM,MAAM,SAAS,IAAI,GACvC,KAAM,KAAK,YAAa,aAAY,CAAC,UAAU,MAAM,MAAM,SAAS,IAAI,KAAK,KAAK,KAAK,KAAK,EAAE,IAC9F,KAAK,IAAI,IAAI,KAAK,EAAE,IAAI,GAAG,CAAC,aAAa,MAAM,MAAM,SAAS,CAAC,GAC/D,MAAM,IACN,MAAM,IACN,IACA;AAGJ,UAAI,KAAK,UAAS;AAChB,YAAI,MAAK,KAAK,KAAK,KAAK,KAAI,EAAE,CAAC,GAC3B,KAAK,KAAK,KAAK,KAAK,KAAI,EAAE,CAAC;AAC/B,YAAK,QAAO,MAAK,KAAK;AAAS,iBAAO,KAAK,IAAI,IAAK,OAAO,KAAI,OAAO;AAAA;AACjE,gBAAM,GAAG,MAAM,MAAO,MAAK,MAAM;AACtC,YAAK,QAAO,KAAK,KAAK;AAAS,gBAAO,KAAK,IAAI,IAAK,OAAO,IAAI,OAAO;AAAA;AACjE,gBAAM,GAAG,MAAM,MAAO,MAAK,MAAM;AAAA,MACxC;AAEA,UAAI,MAAM,KAAK,KAAI,GAAG,GAClB,MAAM,KAAK,KAAI,GAAG,GAClB,MAAM,KAAK,KAAI,GAAG,GAClB,MAAM,KAAK,KAAI,GAAG;AAGtB,UAAI,KAAK,UAAS;AAChB,YAAI,MAAM,KAAK,KAAI,GAAG,GAClB,MAAM,KAAK,KAAI,GAAG,GAClB,MAAM,KAAK,KAAI,GAAG,GAClB,MAAM,KAAK,KAAI,GAAG,GAClB;AAGJ,YAAI,KAAK,OAAO,MAAK,UAAU,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,GAAG,IAAI;AACvE,cAAI,KAAK,MAAM,GAAG,IACd,KAAK,MAAM,GAAG,IACd,KAAK,MAAM,GAAG,IACd,KAAK,MAAM,GAAG,IACd,KAAK,IAAI,KAAI,KAAM,MAAK,KAAK,KAAK,MAAO,MAAK,KAAK,KAAK,KAAK,EAAE,IAAI,KAAK,KAAK,KAAK,KAAK,EAAE,EAAE,IAAI,CAAC,GAChG,KAAK,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,EAAE;AAC3C,gBAAM,IAAI,IAAK,MAAK,MAAO,MAAK,EAAE;AAClC,gBAAM,IAAI,IAAK,MAAK,MAAO,MAAK,EAAE;AAAA,QACpC;AAAA,MACF;AAGA,UAAI,CAAE,OAAM;AAAU,gBAAQ,OAAO,KAAK,GAAG;AAAA,eAGpC,MAAM,UAAS;AACtB,aAAK,eAAe,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,EAAE;AACnD,aAAK,eAAe,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,EAAE;AAEnD,gBAAQ,OAAO,GAAG,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,GAAG;AAG7C,YAAI,MAAM;AAAI,kBAAQ,IAAI,GAAG,IAAI,GAAG,IAAI,KAAK,MAAM,GAAG,KAAK,GAAG,GAAG,GAAG,MAAM,GAAG,KAAK,GAAG,GAAG,GAAG,CAAC,EAAE;AAAA,aAGzF;AACH,kBAAQ,IAAI,GAAG,IAAI,GAAG,IAAI,KAAK,MAAM,GAAG,KAAK,GAAG,GAAG,GAAG,MAAM,GAAG,KAAK,GAAG,GAAG,GAAG,CAAC,EAAE;AAChF,kBAAQ,IAAI,GAAG,GAAG,IAAI,MAAM,GAAG,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,GAAG,GAAG,MAAM,GAAG,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,GAAG,GAAG,CAAC,EAAE;AACvG,kBAAQ,IAAI,GAAG,IAAI,GAAG,IAAI,KAAK,MAAM,GAAG,KAAK,GAAG,GAAG,GAAG,MAAM,GAAG,KAAK,GAAG,GAAG,GAAG,CAAC,EAAE;AAAA,QAClF;AAAA,MACF;AAGK,gBAAQ,OAAO,KAAK,GAAG,GAAG,QAAQ,IAAI,GAAG,GAAG,IAAI,KAAK,KAAK,CAAC,EAAE;AAIlE,UAAI,CAAE,MAAK,aAAY,CAAE,OAAM;AAAU,gBAAQ,OAAO,KAAK,GAAG;AAAA,eAGvD,MAAM,UAAS;AACtB,aAAK,eAAe,KAAK,KAAK,KAAK,KAAK,IAAI,CAAC,KAAK,EAAE;AACpD,aAAK,eAAe,KAAK,KAAK,KAAK,KAAK,IAAI,CAAC,KAAK,EAAE;AAEpD,gBAAQ,OAAO,GAAG,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,GAAG;AAG7C,YAAI,MAAM;AAAI,kBAAQ,IAAI,GAAG,IAAI,GAAG,IAAI,KAAK,MAAM,GAAG,KAAK,GAAG,GAAG,GAAG,MAAM,GAAG,KAAK,GAAG,GAAG,GAAG,CAAC,EAAE;AAAA,aAGzF;AACH,kBAAQ,IAAI,GAAG,IAAI,GAAG,IAAI,KAAK,MAAM,GAAG,KAAK,GAAG,GAAG,GAAG,MAAM,GAAG,KAAK,GAAG,GAAG,GAAG,CAAC,EAAE;AAChF,kBAAQ,IAAI,GAAG,GAAG,IAAI,MAAM,GAAG,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,GAAG,GAAG,MAAM,GAAG,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,GAAG,GAAG,EAAE;AACtG,kBAAQ,IAAI,GAAG,IAAI,GAAG,IAAI,KAAK,MAAM,GAAG,KAAK,GAAG,GAAG,GAAG,MAAM,GAAG,KAAK,GAAG,GAAG,GAAG,CAAC,EAAE;AAAA,QAClF;AAAA,MACF;AAGK,gBAAQ,IAAI,GAAG,GAAG,IAAI,KAAK,KAAK,EAAE;AAAA,IACzC;AAEA,YAAQ,UAAU;AAElB,QAAI;AAAQ,aAAO,UAAU,MAAM,SAAS,MAAM;AAAA,EACpD;AAEA,MAAI,WAAW,WAAW;AACxB,QAAI,IAAK,EAAC,YAAY,MAAM,MAAM,SAAS,IAAI,CAAC,YAAY,MAAM,MAAM,SAAS,KAAK,GAClF,KAAK,EAAC,WAAW,MAAM,MAAM,SAAS,IAAI,CAAC,SAAS,MAAM,MAAM,SAAS,KAAK,IAAI,MAAK;AAC3F,WAAO,CAAC,KAAI,EAAC,IAAI,GAAG,KAAI,EAAC,IAAI,CAAC;AAAA,EAChC;AAEA,MAAI,cAAc,SAAS,GAAG;AAC5B,WAAO,UAAU,SAAU,eAAc,OAAO,MAAM,aAAa,IAAI,iBAAS,CAAC,CAAC,GAAG,OAAO;AAAA,EAC9F;AAEA,MAAI,cAAc,SAAS,GAAG;AAC5B,WAAO,UAAU,SAAU,eAAc,OAAO,MAAM,aAAa,IAAI,iBAAS,CAAC,CAAC,GAAG,OAAO;AAAA,EAC9F;AAEA,MAAI,eAAe,SAAS,GAAG;AAC7B,WAAO,UAAU,SAAU,gBAAe,OAAO,MAAM,aAAa,IAAI,iBAAS,CAAC,CAAC,GAAG,OAAO;AAAA,EAC/F;AAEA,MAAI,YAAY,SAAS,GAAG;AAC1B,WAAO,UAAU,SAAU,aAAY,KAAK,OAAO,OAAO,OAAO,MAAM,aAAa,IAAI,iBAAS,CAAC,CAAC,GAAG,OAAO;AAAA,EAC/G;AAEA,MAAI,aAAa,SAAS,GAAG;AAC3B,WAAO,UAAU,SAAU,cAAa,OAAO,MAAM,aAAa,IAAI,iBAAS,CAAC,CAAC,GAAG,OAAO;AAAA,EAC7F;AAEA,MAAI,WAAW,SAAS,GAAG;AACzB,WAAO,UAAU,SAAU,YAAW,OAAO,MAAM,aAAa,IAAI,iBAAS,CAAC,CAAC,GAAG,OAAO;AAAA,EAC3F;AAEA,MAAI,WAAW,SAAS,GAAG;AACzB,WAAO,UAAU,SAAU,YAAW,OAAO,MAAM,aAAa,IAAI,iBAAS,CAAC,CAAC,GAAG,OAAO;AAAA,EAC3F;AAEA,MAAI,UAAU,SAAS,GAAG;AACxB,WAAO,UAAU,SAAW,WAAU,KAAK,OAAO,OAAO,GAAI,OAAO;AAAA,EACtE;AAEA,SAAO;AACT;;;ACpQO,IAAI,QAAQ,MAAM,UAAU;;;ACAnC,gBAAgB,SAAS;AACvB,OAAK,WAAW;AAClB;AAEA,OAAO,YAAY;AAAA,EACjB,WAAW,WAAW;AACpB,SAAK,QAAQ;AAAA,EACf;AAAA,EACA,SAAS,WAAW;AAClB,SAAK,QAAQ;AAAA,EACf;AAAA,EACA,WAAW,WAAW;AACpB,SAAK,SAAS;AAAA,EAChB;AAAA,EACA,SAAS,WAAW;AAClB,QAAI,KAAK,SAAU,KAAK,UAAU,KAAK,KAAK,WAAW;AAAI,WAAK,SAAS,UAAU;AACnF,SAAK,QAAQ,IAAI,KAAK;AAAA,EACxB;AAAA,EACA,OAAO,SAAS,IAAG,IAAG;AACpB,SAAI,CAAC,IAAG,KAAI,CAAC;AACb,YAAQ,KAAK;AAAA,WACN;AAAG,aAAK,SAAS;AAAG,aAAK,QAAQ,KAAK,SAAS,OAAO,IAAG,EAAC,IAAI,KAAK,SAAS,OAAO,IAAG,EAAC;AAAG;AAAA,WAC1F;AAAG,aAAK,SAAS;AAAA;AACb,aAAK,SAAS,OAAO,IAAG,EAAC;AAAG;AAAA;AAAA,EAEzC;AACF;AAEe,wBAAS,SAAS;AAC/B,SAAO,IAAI,OAAO,OAAO;AAC3B;;;AC5BO,IAAI,oBAAoB,YAAY,cAAW;AAEtD,gBAAgB,OAAO;AACrB,OAAK,SAAS;AAChB;AAEA,OAAO,YAAY;AAAA,EACjB,WAAW,WAAW;AACpB,SAAK,OAAO,UAAU;AAAA,EACxB;AAAA,EACA,SAAS,WAAW;AAClB,SAAK,OAAO,QAAQ;AAAA,EACtB;AAAA,EACA,WAAW,WAAW;AACpB,SAAK,OAAO,UAAU;AAAA,EACxB;AAAA,EACA,SAAS,WAAW;AAClB,SAAK,OAAO,QAAQ;AAAA,EACtB;AAAA,EACA,OAAO,SAAS,IAAG,GAAG;AACpB,SAAK,OAAO,MAAM,IAAI,KAAK,IAAI,EAAC,GAAG,IAAI,CAAC,KAAK,IAAI,EAAC,CAAC;AAAA,EACrD;AACF;AAEe,qBAAqB,OAAO;AAEzC,kBAAgB,SAAS;AACvB,WAAO,IAAI,OAAO,MAAM,OAAO,CAAC;AAAA,EAClC;AAEA,SAAO,SAAS;AAEhB,SAAO;AACT;;;ACjCA,IAAM,QAAQ,KAAK,CAAC;;;ACApB,IAAM,QAAQ,KAAK,IAAI,CAAC;AACxB,IAAM,UAAU,QAAQ;;;ACAxB,IAAM,KAAK,KAAI,MAAK,EAAE,IAAI,KAAI,IAAI,MAAK,EAAE;AACzC,IAAM,KAAK,KAAI,OAAM,EAAE,IAAI;AAC3B,IAAM,KAAK,CAAC,KAAI,OAAM,EAAE,IAAI;;;ACH5B,IAAM,SAAQ,KAAK,CAAC;;;ACApB,IAAM,SAAQ,KAAK,CAAC;;;ACCpB,IAAM,IAAI,KAAK,CAAC,IAAI;AACpB,IAAM,IAAI,IAAI,KAAK,EAAE;AACrB,IAAM,IAAK,KAAI,IAAI,KAAK;;;ACLT,wBAAW;AAAC;;;ACApB,eAAe,MAAM,IAAG,IAAG;AAChC,OAAK,SAAS,cACX,KAAI,KAAK,MAAM,KAAK,OAAO,GAC3B,KAAI,KAAK,MAAM,KAAK,OAAO,GAC3B,MAAK,MAAM,IAAI,KAAK,OAAO,GAC3B,MAAK,MAAM,IAAI,KAAK,OAAO,GAC3B,MAAK,MAAM,IAAI,KAAK,MAAM,MAAK,GAC/B,MAAK,MAAM,IAAI,KAAK,MAAM,MAAK,CAClC;AACF;AAEO,eAAe,SAAS;AAC7B,OAAK,WAAW;AAClB;AAEA,MAAM,YAAY;AAAA,EAChB,WAAW,WAAW;AACpB,SAAK,QAAQ;AAAA,EACf;AAAA,EACA,SAAS,WAAW;AAClB,SAAK,QAAQ;AAAA,EACf;AAAA,EACA,WAAW,WAAW;AACpB,SAAK,MAAM,KAAK,MAChB,KAAK,MAAM,KAAK,MAAM;AACtB,SAAK,SAAS;AAAA,EAChB;AAAA,EACA,SAAS,WAAW;AAClB,YAAQ,KAAK;AAAA,WACN;AAAG,cAAM,MAAM,KAAK,KAAK,KAAK,GAAG;AAAA,WACjC;AAAG,aAAK,SAAS,OAAO,KAAK,KAAK,KAAK,GAAG;AAAG;AAAA;AAEpD,QAAI,KAAK,SAAU,KAAK,UAAU,KAAK,KAAK,WAAW;AAAI,WAAK,SAAS,UAAU;AACnF,SAAK,QAAQ,IAAI,KAAK;AAAA,EACxB;AAAA,EACA,OAAO,SAAS,IAAG,IAAG;AACpB,SAAI,CAAC,IAAG,KAAI,CAAC;AACb,YAAQ,KAAK;AAAA,WACN;AAAG,aAAK,SAAS;AAAG,aAAK,QAAQ,KAAK,SAAS,OAAO,IAAG,EAAC,IAAI,KAAK,SAAS,OAAO,IAAG,EAAC;AAAG;AAAA,WAC1F;AAAG,aAAK,SAAS;AAAG;AAAA,WACpB;AAAG,aAAK,SAAS;AAAG,aAAK,SAAS,OAAQ,KAAI,KAAK,MAAM,KAAK,OAAO,GAAI,KAAI,KAAK,MAAM,KAAK,OAAO,CAAC;AAAA;AACjG,cAAM,MAAM,IAAG,EAAC;AAAG;AAAA;AAE9B,SAAK,MAAM,KAAK,KAAK,KAAK,MAAM;AAChC,SAAK,MAAM,KAAK,KAAK,KAAK,MAAM;AAAA,EAClC;AACF;;;AC3CA,qBAAqB,SAAS;AAC5B,OAAK,WAAW;AAClB;AAEA,YAAY,YAAY;AAAA,EACtB,WAAW;AAAA,EACX,SAAS;AAAA,EACT,WAAW,WAAW;AACpB,SAAK,MAAM,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM,KAAK,MACjD,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM;AACvD,SAAK,SAAS;AAAA,EAChB;AAAA,EACA,SAAS,WAAW;AAClB,YAAQ,KAAK;AAAA,WACN,GAAG;AACN,aAAK,SAAS,OAAO,KAAK,KAAK,KAAK,GAAG;AACvC,aAAK,SAAS,UAAU;AACxB;AAAA,MACF;AAAA,WACK,GAAG;AACN,aAAK,SAAS,OAAQ,MAAK,MAAM,IAAI,KAAK,OAAO,GAAI,MAAK,MAAM,IAAI,KAAK,OAAO,CAAC;AACjF,aAAK,SAAS,OAAQ,MAAK,MAAM,IAAI,KAAK,OAAO,GAAI,MAAK,MAAM,IAAI,KAAK,OAAO,CAAC;AACjF,aAAK,SAAS,UAAU;AACxB;AAAA,MACF;AAAA,WACK,GAAG;AACN,aAAK,MAAM,KAAK,KAAK,KAAK,GAAG;AAC7B,aAAK,MAAM,KAAK,KAAK,KAAK,GAAG;AAC7B,aAAK,MAAM,KAAK,KAAK,KAAK,GAAG;AAC7B;AAAA,MACF;AAAA;AAAA,EAEJ;AAAA,EACA,OAAO,SAAS,IAAG,IAAG;AACpB,SAAI,CAAC,IAAG,KAAI,CAAC;AACb,YAAQ,KAAK;AAAA,WACN;AAAG,aAAK,SAAS;AAAG,aAAK,MAAM,IAAG,KAAK,MAAM;AAAG;AAAA,WAChD;AAAG,aAAK,SAAS;AAAG,aAAK,MAAM,IAAG,KAAK,MAAM;AAAG;AAAA,WAChD;AAAG,aAAK,SAAS;AAAG,aAAK,MAAM,IAAG,KAAK,MAAM;AAAG,aAAK,SAAS,OAAQ,MAAK,MAAM,IAAI,KAAK,MAAM,MAAK,GAAI,MAAK,MAAM,IAAI,KAAK,MAAM,MAAK,CAAC;AAAG;AAAA;AACxI,cAAM,MAAM,IAAG,EAAC;AAAG;AAAA;AAE9B,SAAK,MAAM,KAAK,KAAK,KAAK,MAAM;AAChC,SAAK,MAAM,KAAK,KAAK,KAAK,MAAM;AAAA,EAClC;AACF;;;AC7CA,mBAAmB,SAAS;AAC1B,OAAK,WAAW;AAClB;AAEA,UAAU,YAAY;AAAA,EACpB,WAAW,WAAW;AACpB,SAAK,QAAQ;AAAA,EACf;AAAA,EACA,SAAS,WAAW;AAClB,SAAK,QAAQ;AAAA,EACf;AAAA,EACA,WAAW,WAAW;AACpB,SAAK,MAAM,KAAK,MAChB,KAAK,MAAM,KAAK,MAAM;AACtB,SAAK,SAAS;AAAA,EAChB;AAAA,EACA,SAAS,WAAW;AAClB,QAAI,KAAK,SAAU,KAAK,UAAU,KAAK,KAAK,WAAW;AAAI,WAAK,SAAS,UAAU;AACnF,SAAK,QAAQ,IAAI,KAAK;AAAA,EACxB;AAAA,EACA,OAAO,SAAS,IAAG,IAAG;AACpB,SAAI,CAAC,IAAG,KAAI,CAAC;AACb,YAAQ,KAAK;AAAA,WACN;AAAG,aAAK,SAAS;AAAG;AAAA,WACpB;AAAG,aAAK,SAAS;AAAG;AAAA,WACpB;AAAG,aAAK,SAAS;AAAG,YAAI,KAAM,MAAK,MAAM,IAAI,KAAK,MAAM,MAAK,GAAG,KAAM,MAAK,MAAM,IAAI,KAAK,MAAM,MAAK;AAAG,aAAK,QAAQ,KAAK,SAAS,OAAO,IAAI,EAAE,IAAI,KAAK,SAAS,OAAO,IAAI,EAAE;AAAG;AAAA,WAClL;AAAG,aAAK,SAAS;AAAA;AACb,cAAM,MAAM,IAAG,EAAC;AAAG;AAAA;AAE9B,SAAK,MAAM,KAAK,KAAK,KAAK,MAAM;AAChC,SAAK,MAAM,KAAK,KAAK,KAAK,MAAM;AAAA,EAClC;AACF;;;AChCA,gBAAgB,SAAS,MAAM;AAC7B,OAAK,SAAS,IAAI,MAAM,OAAO;AAC/B,OAAK,QAAQ;AACf;AAEA,OAAO,YAAY;AAAA,EACjB,WAAW,WAAW;AACpB,SAAK,KAAK,CAAC;AACX,SAAK,KAAK,CAAC;AACX,SAAK,OAAO,UAAU;AAAA,EACxB;AAAA,EACA,SAAS,WAAW;AAClB,QAAI,KAAI,KAAK,IACT,KAAI,KAAK,IACT,IAAI,GAAE,SAAS;AAEnB,QAAI,IAAI,GAAG;AACT,UAAI,KAAK,GAAE,IACP,KAAK,GAAE,IACP,KAAK,GAAE,KAAK,IACZ,KAAK,GAAE,KAAK,IACZ,IAAI,IACJ;AAEJ,aAAO,EAAE,KAAK,GAAG;AACf,YAAI,IAAI;AACR,aAAK,OAAO,MACV,KAAK,QAAQ,GAAE,KAAM,KAAI,KAAK,SAAU,MAAK,IAAI,KACjD,KAAK,QAAQ,GAAE,KAAM,KAAI,KAAK,SAAU,MAAK,IAAI,GACnD;AAAA,MACF;AAAA,IACF;AAEA,SAAK,KAAK,KAAK,KAAK;AACpB,SAAK,OAAO,QAAQ;AAAA,EACtB;AAAA,EACA,OAAO,SAAS,IAAG,IAAG;AACpB,SAAK,GAAG,KAAK,CAAC,EAAC;AACf,SAAK,GAAG,KAAK,CAAC,EAAC;AAAA,EACjB;AACF;AAEA,IAAO,iBAAS,gBAAgB,MAAM;AAEpC,kBAAgB,SAAS;AACvB,WAAO,SAAS,IAAI,IAAI,MAAM,OAAO,IAAI,IAAI,OAAO,SAAS,IAAI;AAAA,EACnE;AAEA,SAAO,OAAO,SAAS,OAAM;AAC3B,WAAO,OAAO,CAAC,KAAI;AAAA,EACrB;AAEA,SAAO;AACT,EAAG,IAAI;;;ACvDA,gBAAe,MAAM,IAAG,IAAG;AAChC,OAAK,SAAS,cACZ,KAAK,MAAM,KAAK,KAAM,MAAK,MAAM,KAAK,MACtC,KAAK,MAAM,KAAK,KAAM,MAAK,MAAM,KAAK,MACtC,KAAK,MAAM,KAAK,KAAM,MAAK,MAAM,KACjC,KAAK,MAAM,KAAK,KAAM,MAAK,MAAM,KACjC,KAAK,KACL,KAAK,GACP;AACF;AAEO,kBAAkB,SAAS,SAAS;AACzC,OAAK,WAAW;AAChB,OAAK,KAAM,KAAI,WAAW;AAC5B;AAEA,SAAS,YAAY;AAAA,EACnB,WAAW,WAAW;AACpB,SAAK,QAAQ;AAAA,EACf;AAAA,EACA,SAAS,WAAW;AAClB,SAAK,QAAQ;AAAA,EACf;AAAA,EACA,WAAW,WAAW;AACpB,SAAK,MAAM,KAAK,MAAM,KAAK,MAC3B,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM;AACjC,SAAK,SAAS;AAAA,EAChB;AAAA,EACA,SAAS,WAAW;AAClB,YAAQ,KAAK;AAAA,WACN;AAAG,aAAK,SAAS,OAAO,KAAK,KAAK,KAAK,GAAG;AAAG;AAAA,WAC7C;AAAG,eAAM,MAAM,KAAK,KAAK,KAAK,GAAG;AAAG;AAAA;AAE3C,QAAI,KAAK,SAAU,KAAK,UAAU,KAAK,KAAK,WAAW;AAAI,WAAK,SAAS,UAAU;AACnF,SAAK,QAAQ,IAAI,KAAK;AAAA,EACxB;AAAA,EACA,OAAO,SAAS,IAAG,IAAG;AACpB,SAAI,CAAC,IAAG,KAAI,CAAC;AACb,YAAQ,KAAK;AAAA,WACN;AAAG,aAAK,SAAS;AAAG,aAAK,QAAQ,KAAK,SAAS,OAAO,IAAG,EAAC,IAAI,KAAK,SAAS,OAAO,IAAG,EAAC;AAAG;AAAA,WAC1F;AAAG,aAAK,SAAS;AAAG,aAAK,MAAM,IAAG,KAAK,MAAM;AAAG;AAAA,WAChD;AAAG,aAAK,SAAS;AAAA;AACb,eAAM,MAAM,IAAG,EAAC;AAAG;AAAA;AAE9B,SAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM;AACrD,SAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM;AAAA,EACvD;AACF;AAEA,IAAO,mBAAS,iBAAgB,SAAS;AAEvC,oBAAkB,SAAS;AACzB,WAAO,IAAI,SAAS,SAAS,OAAO;AAAA,EACtC;AAEA,WAAS,UAAU,SAAS,UAAS;AACnC,WAAO,QAAO,CAAC,QAAO;AAAA,EACxB;AAEA,SAAO;AACT,EAAG,CAAC;;;ACzDG,wBAAwB,SAAS,SAAS;AAC/C,OAAK,WAAW;AAChB,OAAK,KAAM,KAAI,WAAW;AAC5B;AAEA,eAAe,YAAY;AAAA,EACzB,WAAW;AAAA,EACX,SAAS;AAAA,EACT,WAAW,WAAW;AACpB,SAAK,MAAM,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM,KAAK,MAC5D,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM;AAClE,SAAK,SAAS;AAAA,EAChB;AAAA,EACA,SAAS,WAAW;AAClB,YAAQ,KAAK;AAAA,WACN,GAAG;AACN,aAAK,SAAS,OAAO,KAAK,KAAK,KAAK,GAAG;AACvC,aAAK,SAAS,UAAU;AACxB;AAAA,MACF;AAAA,WACK,GAAG;AACN,aAAK,SAAS,OAAO,KAAK,KAAK,KAAK,GAAG;AACvC,aAAK,SAAS,UAAU;AACxB;AAAA,MACF;AAAA,WACK,GAAG;AACN,aAAK,MAAM,KAAK,KAAK,KAAK,GAAG;AAC7B,aAAK,MAAM,KAAK,KAAK,KAAK,GAAG;AAC7B,aAAK,MAAM,KAAK,KAAK,KAAK,GAAG;AAC7B;AAAA,MACF;AAAA;AAAA,EAEJ;AAAA,EACA,OAAO,SAAS,IAAG,IAAG;AACpB,SAAI,CAAC,IAAG,KAAI,CAAC;AACb,YAAQ,KAAK;AAAA,WACN;AAAG,aAAK,SAAS;AAAG,aAAK,MAAM,IAAG,KAAK,MAAM;AAAG;AAAA,WAChD;AAAG,aAAK,SAAS;AAAG,aAAK,SAAS,OAAO,KAAK,MAAM,IAAG,KAAK,MAAM,EAAC;AAAG;AAAA,WACtE;AAAG,aAAK,SAAS;AAAG,aAAK,MAAM,IAAG,KAAK,MAAM;AAAG;AAAA;AAC5C,eAAM,MAAM,IAAG,EAAC;AAAG;AAAA;AAE9B,SAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM;AACrD,SAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM;AAAA,EACvD;AACF;AAEA,IAAO,yBAAS,iBAAgB,SAAS;AAEvC,oBAAkB,SAAS;AACzB,WAAO,IAAI,eAAe,SAAS,OAAO;AAAA,EAC5C;AAEA,WAAS,UAAU,SAAS,UAAS;AACnC,WAAO,QAAO,CAAC,QAAO;AAAA,EACxB;AAEA,SAAO;AACT,EAAG,CAAC;;;AC1DG,sBAAsB,SAAS,SAAS;AAC7C,OAAK,WAAW;AAChB,OAAK,KAAM,KAAI,WAAW;AAC5B;AAEA,aAAa,YAAY;AAAA,EACvB,WAAW,WAAW;AACpB,SAAK,QAAQ;AAAA,EACf;AAAA,EACA,SAAS,WAAW;AAClB,SAAK,QAAQ;AAAA,EACf;AAAA,EACA,WAAW,WAAW;AACpB,SAAK,MAAM,KAAK,MAAM,KAAK,MAC3B,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM;AACjC,SAAK,SAAS;AAAA,EAChB;AAAA,EACA,SAAS,WAAW;AAClB,QAAI,KAAK,SAAU,KAAK,UAAU,KAAK,KAAK,WAAW;AAAI,WAAK,SAAS,UAAU;AACnF,SAAK,QAAQ,IAAI,KAAK;AAAA,EACxB;AAAA,EACA,OAAO,SAAS,IAAG,IAAG;AACpB,SAAI,CAAC,IAAG,KAAI,CAAC;AACb,YAAQ,KAAK;AAAA,WACN;AAAG,aAAK,SAAS;AAAG;AAAA,WACpB;AAAG,aAAK,SAAS;AAAG;AAAA,WACpB;AAAG,aAAK,SAAS;AAAG,aAAK,QAAQ,KAAK,SAAS,OAAO,KAAK,KAAK,KAAK,GAAG,IAAI,KAAK,SAAS,OAAO,KAAK,KAAK,KAAK,GAAG;AAAG;AAAA,WACtH;AAAG,aAAK,SAAS;AAAA;AACb,eAAM,MAAM,IAAG,EAAC;AAAG;AAAA;AAE9B,SAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM;AACrD,SAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM;AAAA,EACvD;AACF;AAEA,IAAO,uBAAS,iBAAgB,SAAS;AAEvC,oBAAkB,SAAS;AACzB,WAAO,IAAI,aAAa,SAAS,OAAO;AAAA,EAC1C;AAEA,WAAS,UAAU,SAAS,UAAS;AACnC,WAAO,QAAO,CAAC,QAAO;AAAA,EACxB;AAEA,SAAO;AACT,EAAG,CAAC;;;AC7CG,gBAAe,MAAM,IAAG,IAAG;AAChC,MAAI,KAAK,KAAK,KACV,KAAK,KAAK,KACV,MAAK,KAAK,KACV,MAAK,KAAK;AAEd,MAAI,KAAK,SAAS,UAAS;AACzB,QAAI,KAAI,IAAI,KAAK,UAAU,IAAI,KAAK,SAAS,KAAK,SAAS,KAAK,SAC5D,IAAI,IAAI,KAAK,SAAU,MAAK,SAAS,KAAK;AAC9C,SAAM,MAAK,KAAI,KAAK,MAAM,KAAK,UAAU,KAAK,MAAM,KAAK,WAAW;AACpE,SAAM,MAAK,KAAI,KAAK,MAAM,KAAK,UAAU,KAAK,MAAM,KAAK,WAAW;AAAA,EACtE;AAEA,MAAI,KAAK,SAAS,UAAS;AACzB,QAAI,IAAI,IAAI,KAAK,UAAU,IAAI,KAAK,SAAS,KAAK,SAAS,KAAK,SAC5D,IAAI,IAAI,KAAK,SAAU,MAAK,SAAS,KAAK;AAC9C,UAAM,OAAK,IAAI,KAAK,MAAM,KAAK,UAAU,KAAI,KAAK,WAAW;AAC7D,UAAM,OAAK,IAAI,KAAK,MAAM,KAAK,UAAU,KAAI,KAAK,WAAW;AAAA,EAC/D;AAEA,OAAK,SAAS,cAAc,IAAI,IAAI,KAAI,KAAI,KAAK,KAAK,KAAK,GAAG;AAChE;AAEA,oBAAoB,SAAS,OAAO;AAClC,OAAK,WAAW;AAChB,OAAK,SAAS;AAChB;AAEA,WAAW,YAAY;AAAA,EACrB,WAAW,WAAW;AACpB,SAAK,QAAQ;AAAA,EACf;AAAA,EACA,SAAS,WAAW;AAClB,SAAK,QAAQ;AAAA,EACf;AAAA,EACA,WAAW,WAAW;AACpB,SAAK,MAAM,KAAK,MAAM,KAAK,MAC3B,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM;AACjC,SAAK,SAAS,KAAK,SAAS,KAAK,SACjC,KAAK,UAAU,KAAK,UAAU,KAAK,UACnC,KAAK,SAAS;AAAA,EAChB;AAAA,EACA,SAAS,WAAW;AAClB,YAAQ,KAAK;AAAA,WACN;AAAG,aAAK,SAAS,OAAO,KAAK,KAAK,KAAK,GAAG;AAAG;AAAA,WAC7C;AAAG,aAAK,MAAM,KAAK,KAAK,KAAK,GAAG;AAAG;AAAA;AAE1C,QAAI,KAAK,SAAU,KAAK,UAAU,KAAK,KAAK,WAAW;AAAI,WAAK,SAAS,UAAU;AACnF,SAAK,QAAQ,IAAI,KAAK;AAAA,EACxB;AAAA,EACA,OAAO,SAAS,IAAG,IAAG;AACpB,SAAI,CAAC,IAAG,KAAI,CAAC;AAEb,QAAI,KAAK,QAAQ;AACf,UAAI,MAAM,KAAK,MAAM,IACjB,MAAM,KAAK,MAAM;AACrB,WAAK,SAAS,KAAK,KAAK,KAAK,UAAU,KAAK,IAAI,MAAM,MAAM,MAAM,KAAK,KAAK,MAAM,CAAC;AAAA,IACrF;AAEA,YAAQ,KAAK;AAAA,WACN;AAAG,aAAK,SAAS;AAAG,aAAK,QAAQ,KAAK,SAAS,OAAO,IAAG,EAAC,IAAI,KAAK,SAAS,OAAO,IAAG,EAAC;AAAG;AAAA,WAC1F;AAAG,aAAK,SAAS;AAAG;AAAA,WACpB;AAAG,aAAK,SAAS;AAAA;AACb,eAAM,MAAM,IAAG,EAAC;AAAG;AAAA;AAG9B,SAAK,SAAS,KAAK,QAAQ,KAAK,SAAS,KAAK;AAC9C,SAAK,UAAU,KAAK,SAAS,KAAK,UAAU,KAAK;AACjD,SAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM;AACrD,SAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM;AAAA,EACvD;AACF;AAEA,IAAO,qBAAS,iBAAgB,OAAO;AAErC,sBAAoB,SAAS;AAC3B,WAAO,QAAQ,IAAI,WAAW,SAAS,KAAK,IAAI,IAAI,SAAS,SAAS,CAAC;AAAA,EACzE;AAEA,aAAW,QAAQ,SAAS,QAAO;AACjC,WAAO,QAAO,CAAC,MAAK;AAAA,EACtB;AAEA,SAAO;AACT,EAAG,GAAG;;;ACnFN,0BAA0B,SAAS,OAAO;AACxC,OAAK,WAAW;AAChB,OAAK,SAAS;AAChB;AAEA,iBAAiB,YAAY;AAAA,EAC3B,WAAW;AAAA,EACX,SAAS;AAAA,EACT,WAAW,WAAW;AACpB,SAAK,MAAM,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM,KAAK,MAC5D,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM;AAClE,SAAK,SAAS,KAAK,SAAS,KAAK,SACjC,KAAK,UAAU,KAAK,UAAU,KAAK,UACnC,KAAK,SAAS;AAAA,EAChB;AAAA,EACA,SAAS,WAAW;AAClB,YAAQ,KAAK;AAAA,WACN,GAAG;AACN,aAAK,SAAS,OAAO,KAAK,KAAK,KAAK,GAAG;AACvC,aAAK,SAAS,UAAU;AACxB;AAAA,MACF;AAAA,WACK,GAAG;AACN,aAAK,SAAS,OAAO,KAAK,KAAK,KAAK,GAAG;AACvC,aAAK,SAAS,UAAU;AACxB;AAAA,MACF;AAAA,WACK,GAAG;AACN,aAAK,MAAM,KAAK,KAAK,KAAK,GAAG;AAC7B,aAAK,MAAM,KAAK,KAAK,KAAK,GAAG;AAC7B,aAAK,MAAM,KAAK,KAAK,KAAK,GAAG;AAC7B;AAAA,MACF;AAAA;AAAA,EAEJ;AAAA,EACA,OAAO,SAAS,IAAG,IAAG;AACpB,SAAI,CAAC,IAAG,KAAI,CAAC;AAEb,QAAI,KAAK,QAAQ;AACf,UAAI,MAAM,KAAK,MAAM,IACjB,MAAM,KAAK,MAAM;AACrB,WAAK,SAAS,KAAK,KAAK,KAAK,UAAU,KAAK,IAAI,MAAM,MAAM,MAAM,KAAK,KAAK,MAAM,CAAC;AAAA,IACrF;AAEA,YAAQ,KAAK;AAAA,WACN;AAAG,aAAK,SAAS;AAAG,aAAK,MAAM,IAAG,KAAK,MAAM;AAAG;AAAA,WAChD;AAAG,aAAK,SAAS;AAAG,aAAK,SAAS,OAAO,KAAK,MAAM,IAAG,KAAK,MAAM,EAAC;AAAG;AAAA,WACtE;AAAG,aAAK,SAAS;AAAG,aAAK,MAAM,IAAG,KAAK,MAAM;AAAG;AAAA;AAC5C,eAAM,MAAM,IAAG,EAAC;AAAG;AAAA;AAG9B,SAAK,SAAS,KAAK,QAAQ,KAAK,SAAS,KAAK;AAC9C,SAAK,UAAU,KAAK,SAAS,KAAK,UAAU,KAAK;AACjD,SAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM;AACrD,SAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM;AAAA,EACvD;AACF;AAEA,IAAO,2BAAS,iBAAgB,OAAO;AAErC,sBAAoB,SAAS;AAC3B,WAAO,QAAQ,IAAI,iBAAiB,SAAS,KAAK,IAAI,IAAI,eAAe,SAAS,CAAC;AAAA,EACrF;AAEA,aAAW,QAAQ,SAAS,QAAO;AACjC,WAAO,QAAO,CAAC,MAAK;AAAA,EACtB;AAEA,SAAO;AACT,EAAG,GAAG;;;ACtEN,wBAAwB,SAAS,OAAO;AACtC,OAAK,WAAW;AAChB,OAAK,SAAS;AAChB;AAEA,eAAe,YAAY;AAAA,EACzB,WAAW,WAAW;AACpB,SAAK,QAAQ;AAAA,EACf;AAAA,EACA,SAAS,WAAW;AAClB,SAAK,QAAQ;AAAA,EACf;AAAA,EACA,WAAW,WAAW;AACpB,SAAK,MAAM,KAAK,MAAM,KAAK,MAC3B,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM;AACjC,SAAK,SAAS,KAAK,SAAS,KAAK,SACjC,KAAK,UAAU,KAAK,UAAU,KAAK,UACnC,KAAK,SAAS;AAAA,EAChB;AAAA,EACA,SAAS,WAAW;AAClB,QAAI,KAAK,SAAU,KAAK,UAAU,KAAK,KAAK,WAAW;AAAI,WAAK,SAAS,UAAU;AACnF,SAAK,QAAQ,IAAI,KAAK;AAAA,EACxB;AAAA,EACA,OAAO,SAAS,IAAG,IAAG;AACpB,SAAI,CAAC,IAAG,KAAI,CAAC;AAEb,QAAI,KAAK,QAAQ;AACf,UAAI,MAAM,KAAK,MAAM,IACjB,MAAM,KAAK,MAAM;AACrB,WAAK,SAAS,KAAK,KAAK,KAAK,UAAU,KAAK,IAAI,MAAM,MAAM,MAAM,KAAK,KAAK,MAAM,CAAC;AAAA,IACrF;AAEA,YAAQ,KAAK;AAAA,WACN;AAAG,aAAK,SAAS;AAAG;AAAA,WACpB;AAAG,aAAK,SAAS;AAAG;AAAA,WACpB;AAAG,aAAK,SAAS;AAAG,aAAK,QAAQ,KAAK,SAAS,OAAO,KAAK,KAAK,KAAK,GAAG,IAAI,KAAK,SAAS,OAAO,KAAK,KAAK,KAAK,GAAG;AAAG;AAAA,WACtH;AAAG,aAAK,SAAS;AAAA;AACb,eAAM,MAAM,IAAG,EAAC;AAAG;AAAA;AAG9B,SAAK,SAAS,KAAK,QAAQ,KAAK,SAAS,KAAK;AAC9C,SAAK,UAAU,KAAK,SAAS,KAAK,UAAU,KAAK;AACjD,SAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM;AACrD,SAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM;AAAA,EACvD;AACF;AAEA,IAAO,yBAAS,iBAAgB,OAAO;AAErC,sBAAoB,SAAS;AAC3B,WAAO,QAAQ,IAAI,eAAe,SAAS,KAAK,IAAI,IAAI,aAAa,SAAS,CAAC;AAAA,EACjF;AAEA,aAAW,QAAQ,SAAS,QAAO;AACjC,WAAO,QAAO,CAAC,MAAK;AAAA,EACtB;AAEA,SAAO;AACT,EAAG,GAAG;;;AC3DN,sBAAsB,SAAS;AAC7B,OAAK,WAAW;AAClB;AAEA,aAAa,YAAY;AAAA,EACvB,WAAW;AAAA,EACX,SAAS;AAAA,EACT,WAAW,WAAW;AACpB,SAAK,SAAS;AAAA,EAChB;AAAA,EACA,SAAS,WAAW;AAClB,QAAI,KAAK;AAAQ,WAAK,SAAS,UAAU;AAAA,EAC3C;AAAA,EACA,OAAO,SAAS,IAAG,IAAG;AACpB,SAAI,CAAC,IAAG,KAAI,CAAC;AACb,QAAI,KAAK;AAAQ,WAAK,SAAS,OAAO,IAAG,EAAC;AAAA;AACrC,WAAK,SAAS,GAAG,KAAK,SAAS,OAAO,IAAG,EAAC;AAAA,EACjD;AACF;;;ACpBA,cAAc,IAAG;AACf,SAAO,KAAI,IAAI,KAAK;AACtB;AAMA,gBAAgB,MAAM,IAAI,IAAI;AAC5B,MAAI,KAAK,KAAK,MAAM,KAAK,KACrB,KAAK,KAAK,KAAK,KACf,KAAM,MAAK,MAAM,KAAK,OAAQ,OAAM,KAAK,KAAK,KAC9C,KAAM,MAAK,KAAK,OAAQ,OAAM,KAAK,KAAK,KACxC,IAAK,MAAK,KAAK,KAAK,MAAO,MAAK;AACpC,SAAQ,MAAK,EAAE,IAAI,KAAK,EAAE,KAAK,KAAK,IAAI,KAAK,IAAI,EAAE,GAAG,KAAK,IAAI,EAAE,GAAG,MAAM,KAAK,IAAI,CAAC,CAAC,KAAK;AAC5F;AAGA,gBAAgB,MAAM,GAAG;AACvB,MAAI,IAAI,KAAK,MAAM,KAAK;AACxB,SAAO,IAAK,KAAK,MAAK,MAAM,KAAK,OAAO,IAAI,KAAK,IAAI;AACvD;AAKA,gBAAe,MAAM,IAAI,IAAI;AAC3B,MAAI,KAAK,KAAK,KACV,KAAK,KAAK,KACV,KAAK,KAAK,KACV,KAAK,KAAK,KACV,KAAM,MAAK,MAAM;AACrB,OAAK,SAAS,cAAc,KAAK,IAAI,KAAK,KAAK,IAAI,KAAK,IAAI,KAAK,KAAK,IAAI,IAAI,EAAE;AAClF;AAEA,mBAAmB,SAAS;AAC1B,OAAK,WAAW;AAClB;AAEA,UAAU,YAAY;AAAA,EACpB,WAAW,WAAW;AACpB,SAAK,QAAQ;AAAA,EACf;AAAA,EACA,SAAS,WAAW;AAClB,SAAK,QAAQ;AAAA,EACf;AAAA,EACA,WAAW,WAAW;AACpB,SAAK,MAAM,KAAK,MAChB,KAAK,MAAM,KAAK,MAChB,KAAK,MAAM;AACX,SAAK,SAAS;AAAA,EAChB;AAAA,EACA,SAAS,WAAW;AAClB,YAAQ,KAAK;AAAA,WACN;AAAG,aAAK,SAAS,OAAO,KAAK,KAAK,KAAK,GAAG;AAAG;AAAA,WAC7C;AAAG,eAAM,MAAM,KAAK,KAAK,OAAO,MAAM,KAAK,GAAG,CAAC;AAAG;AAAA;AAEzD,QAAI,KAAK,SAAU,KAAK,UAAU,KAAK,KAAK,WAAW;AAAI,WAAK,SAAS,UAAU;AACnF,SAAK,QAAQ,IAAI,KAAK;AAAA,EACxB;AAAA,EACA,OAAO,SAAS,IAAG,IAAG;AACpB,QAAI,KAAK;AAET,SAAI,CAAC,IAAG,KAAI,CAAC;AACb,QAAI,OAAM,KAAK,OAAO,OAAM,KAAK;AAAK;AACtC,YAAQ,KAAK;AAAA,WACN;AAAG,aAAK,SAAS;AAAG,aAAK,QAAQ,KAAK,SAAS,OAAO,IAAG,EAAC,IAAI,KAAK,SAAS,OAAO,IAAG,EAAC;AAAG;AAAA,WAC1F;AAAG,aAAK,SAAS;AAAG;AAAA,WACpB;AAAG,aAAK,SAAS;AAAG,eAAM,MAAM,OAAO,MAAM,KAAK,OAAO,MAAM,IAAG,EAAC,CAAC,GAAG,EAAE;AAAG;AAAA;AACxE,eAAM,MAAM,KAAK,KAAK,KAAK,OAAO,MAAM,IAAG,EAAC,CAAC;AAAG;AAAA;AAG3D,SAAK,MAAM,KAAK,KAAK,KAAK,MAAM;AAChC,SAAK,MAAM,KAAK,KAAK,KAAK,MAAM;AAChC,SAAK,MAAM;AAAA,EACb;AACF;AAEA,mBAAmB,SAAS;AAC1B,OAAK,WAAW,IAAI,eAAe,OAAO;AAC5C;AAEA,AAAC,WAAU,YAAY,OAAO,OAAO,UAAU,SAAS,GAAG,QAAQ,SAAS,IAAG,IAAG;AAChF,YAAU,UAAU,MAAM,KAAK,MAAM,IAAG,EAAC;AAC3C;AAEA,wBAAwB,SAAS;AAC/B,OAAK,WAAW;AAClB;AAEA,eAAe,YAAY;AAAA,EACzB,QAAQ,SAAS,IAAG,IAAG;AAAE,SAAK,SAAS,OAAO,IAAG,EAAC;AAAA,EAAG;AAAA,EACrD,WAAW,WAAW;AAAE,SAAK,SAAS,UAAU;AAAA,EAAG;AAAA,EACnD,QAAQ,SAAS,IAAG,IAAG;AAAE,SAAK,SAAS,OAAO,IAAG,EAAC;AAAA,EAAG;AAAA,EACrD,eAAe,SAAS,IAAI,IAAI,IAAI,IAAI,IAAG,IAAG;AAAE,SAAK,SAAS,cAAc,IAAI,IAAI,IAAI,IAAI,IAAG,EAAC;AAAA,EAAG;AACrG;;;AC/FA,iBAAiB,SAAS;AACxB,OAAK,WAAW;AAClB;AAEA,QAAQ,YAAY;AAAA,EAClB,WAAW,WAAW;AACpB,SAAK,QAAQ;AAAA,EACf;AAAA,EACA,SAAS,WAAW;AAClB,SAAK,QAAQ;AAAA,EACf;AAAA,EACA,WAAW,WAAW;AACpB,SAAK,KAAK,CAAC;AACX,SAAK,KAAK,CAAC;AAAA,EACb;AAAA,EACA,SAAS,WAAW;AAClB,QAAI,KAAI,KAAK,IACT,KAAI,KAAK,IACT,IAAI,GAAE;AAEV,QAAI,GAAG;AACL,WAAK,QAAQ,KAAK,SAAS,OAAO,GAAE,IAAI,GAAE,EAAE,IAAI,KAAK,SAAS,OAAO,GAAE,IAAI,GAAE,EAAE;AAC/E,UAAI,MAAM,GAAG;AACX,aAAK,SAAS,OAAO,GAAE,IAAI,GAAE,EAAE;AAAA,MACjC,OAAO;AACL,YAAI,KAAK,cAAc,EAAC,GACpB,KAAK,cAAc,EAAC;AACxB,iBAAS,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,EAAE,IAAI,EAAE,IAAI;AAC3C,eAAK,SAAS,cAAc,GAAG,GAAG,KAAK,GAAG,GAAG,KAAK,GAAG,GAAG,KAAK,GAAG,GAAG,KAAK,GAAE,KAAK,GAAE,GAAG;AAAA,QACtF;AAAA,MACF;AAAA,IACF;AAEA,QAAI,KAAK,SAAU,KAAK,UAAU,KAAK,MAAM;AAAI,WAAK,SAAS,UAAU;AACzE,SAAK,QAAQ,IAAI,KAAK;AACtB,SAAK,KAAK,KAAK,KAAK;AAAA,EACtB;AAAA,EACA,OAAO,SAAS,IAAG,IAAG;AACpB,SAAK,GAAG,KAAK,CAAC,EAAC;AACf,SAAK,GAAG,KAAK,CAAC,EAAC;AAAA,EACjB;AACF;AAGA,uBAAuB,IAAG;AACxB,MAAI,GACA,IAAI,GAAE,SAAS,GACf,GACA,KAAI,IAAI,MAAM,CAAC,GACf,IAAI,IAAI,MAAM,CAAC,GACf,IAAI,IAAI,MAAM,CAAC;AACnB,KAAE,KAAK,GAAG,EAAE,KAAK,GAAG,EAAE,KAAK,GAAE,KAAK,IAAI,GAAE;AACxC,OAAK,IAAI,GAAG,IAAI,IAAI,GAAG,EAAE;AAAG,OAAE,KAAK,GAAG,EAAE,KAAK,GAAG,EAAE,KAAK,IAAI,GAAE,KAAK,IAAI,GAAE,IAAI;AAC5E,KAAE,IAAI,KAAK,GAAG,EAAE,IAAI,KAAK,GAAG,EAAE,IAAI,KAAK,IAAI,GAAE,IAAI,KAAK,GAAE;AACxD,OAAK,IAAI,GAAG,IAAI,GAAG,EAAE;AAAG,QAAI,GAAE,KAAK,EAAE,IAAI,IAAI,EAAE,MAAM,GAAG,EAAE,MAAM,IAAI,EAAE,IAAI;AAC1E,KAAE,IAAI,KAAK,EAAE,IAAI,KAAK,EAAE,IAAI;AAC5B,OAAK,IAAI,IAAI,GAAG,KAAK,GAAG,EAAE;AAAG,OAAE,KAAM,GAAE,KAAK,GAAE,IAAI,MAAM,EAAE;AAC1D,IAAE,IAAI,KAAM,IAAE,KAAK,GAAE,IAAI,MAAM;AAC/B,OAAK,IAAI,GAAG,IAAI,IAAI,GAAG,EAAE;AAAG,MAAE,KAAK,IAAI,GAAE,IAAI,KAAK,GAAE,IAAI;AACxD,SAAO,CAAC,IAAG,CAAC;AACd;;;AC5DA,cAAc,SAAS,GAAG;AACxB,OAAK,WAAW;AAChB,OAAK,KAAK;AACZ;AAEA,KAAK,YAAY;AAAA,EACf,WAAW,WAAW;AACpB,SAAK,QAAQ;AAAA,EACf;AAAA,EACA,SAAS,WAAW;AAClB,SAAK,QAAQ;AAAA,EACf;AAAA,EACA,WAAW,WAAW;AACpB,SAAK,KAAK,KAAK,KAAK;AACpB,SAAK,SAAS;AAAA,EAChB;AAAA,EACA,SAAS,WAAW;AAClB,QAAI,IAAI,KAAK,MAAM,KAAK,KAAK,KAAK,KAAK,WAAW;AAAG,WAAK,SAAS,OAAO,KAAK,IAAI,KAAK,EAAE;AAC1F,QAAI,KAAK,SAAU,KAAK,UAAU,KAAK,KAAK,WAAW;AAAI,WAAK,SAAS,UAAU;AACnF,QAAI,KAAK,SAAS;AAAG,WAAK,KAAK,IAAI,KAAK,IAAI,KAAK,QAAQ,IAAI,KAAK;AAAA,EACpE;AAAA,EACA,OAAO,SAAS,IAAG,IAAG;AACpB,SAAI,CAAC,IAAG,KAAI,CAAC;AACb,YAAQ,KAAK;AAAA,WACN;AAAG,aAAK,SAAS;AAAG,aAAK,QAAQ,KAAK,SAAS,OAAO,IAAG,EAAC,IAAI,KAAK,SAAS,OAAO,IAAG,EAAC;AAAG;AAAA,WAC1F;AAAG,aAAK,SAAS;AAAA,eACb;AACP,YAAI,KAAK,MAAM,GAAG;AAChB,eAAK,SAAS,OAAO,KAAK,IAAI,EAAC;AAC/B,eAAK,SAAS,OAAO,IAAG,EAAC;AAAA,QAC3B,OAAO;AACL,cAAI,KAAK,KAAK,KAAM,KAAI,KAAK,MAAM,KAAI,KAAK;AAC5C,eAAK,SAAS,OAAO,IAAI,KAAK,EAAE;AAChC,eAAK,SAAS,OAAO,IAAI,EAAC;AAAA,QAC5B;AACA;AAAA,MACF;AAAA;AAEF,SAAK,KAAK,IAAG,KAAK,KAAK;AAAA,EACzB;AACF;;;ACqBA,IAAA,QAAA,SAAA,QAAA;AAA2B,YAAA,QAAA,MAAA;AAA3B,oBAAA;AAAA,QAAA,QAAA,WAAA,QAAA,OAAA,MAAA,MAAA,SAAA,KAAA;AAWC,WAAA,eAAA,OAAA,MAAA;;;;aAAoB;;AAKpB,WAAA,eAAA,OAAA,MAAA;;;;aAAoB;;AAEpB,WAAA,eAAA,OAAA,cAAA;;;;aAAuB,YAAG;;;EAoG3B;;;;;WAlGC,WAAA;AACC,UAAI,WAAW,KAAK,IAAI,UAAU;AAClC,UAAI,WAAW,KAAK,IAAI,UAAU;AAElC,UAAI,KAAI;AACR,UAAI,KAAI;AAER,UAAI,AAAM,SAAS,QAAQ,GAAG;AAC7B,aAAI;;AAGL,UAAI,AAAM,SAAS,QAAQ,GAAG;AAC7B,aAAI;;AAGL,UAAI,SAAS,KAAK,IAAI,UAAU,CAAC;AACjC,UAAI,cAAc,KAAK,IAAI,eAAe,CAAC;AAE3C,UAAI,UAAU,KAAK,IAAI,WAAW,CAAC;AACnC,UAAI,eAAe,KAAK,IAAI,gBAAgB,CAAC;AAE7C,gBAAU;AACV,qBAAe;AAEf,UAAI,cAAc,GAAG;AACpB,sBAAc,SAAS;;AAGxB,UAAI,oBAAoB,SAAS;AAChC,aAAI,KAAK,KAAM,eAAe,UAAS,eAAe,SAAS;;AAGhE,UAAI,oBAAoB,SAAS;AAChC,aAAI,KAAK,KAAM,eAAe,UAAS,eAAe,SAAS;;AAGhE,UAAI,KAAK,IAAI,KAAK,KAAK,OAAO,eAAe,GAAG;AAC/C,aAAI;AACJ,aAAI;;AAIL,aAAO,EAAE,GAAC,IAAE,GAAC,GAAA;IACd;;;;;;WACA,WAAA;AACC,aAAA,UAAM,eAAc,KAAA,IAAA;AAEpB,UAAI,KAAK,QAAQ,QAAQ,KAAK,KAAK,QAAQ,KAAK,KAAK,KAAK,QAAQ,aAAa,KAAK,KAAK,QAAQ,YAAY,KAAK,KAAK,QAAQ,SAAS,KAAK,KAAK,QAAQ,cAAc,KAAK,KAAK,QAAQ,cAAc,GAAG;AAC1M,aAAK,SAAS;;IAEhB;;;;;;WAEA,WAAA;AACC,aAAA,UAAM,SAAQ,KAAA,IAAA;AAEd,UAAI,KAAK,QAAQ;AAChB,YAAI,aAAa,KAAK,IAAI,cAAc,CAAC;AACzC,YAAI,QAAM,KAAK,IAAI,OAAO,CAAC;AAC3B,YAAM,YAAY,KAAK;AAEvB,YAAG,QAAM,GAAE;AACV,uBAAa,aAAa;AAC1B,kBAAM,QAAM;;AAGb,YAAG,QAAM,KAAI;AACZ,oBAAU,aAAa,KAAK,IAAI,gBAAgB,CAAC,CAAC;;AAEnD,kBAAU,QAAQ,KAAK,QAAe;AAEtC,YAAI,SAAS,KAAK,IAAI,UAAU,CAAC;AACjC,YAAI,cAAc,KAAK,IAAI,eAAe,CAAC;AAE3C,YAAI,UAAU,KAAK,IAAI,WAAW,CAAC;AACnC,YAAI,eAAe,KAAK,IAAI,gBAAgB,CAAC;AAE7C,kBAAU;AACV,uBAAe;AAEf,YAAI,cAAc,GAAG;AACpB,wBAAc,SAAS;;AAGxB,kBAAU,EAAE,aAA0B,aAAa,QAAQ,YAAa,cAAa,MAAY,SAAS,UAAW,cAAa,QAAM,MAAY,QAAO,CAAE;AAE7J,YAAI,cAAc,aAAa,QAAM;AAErC,aAAK,KAAK,AAAM,IAAI,WAAW;AAC/B,aAAK,KAAK,AAAM,IAAI,WAAW;;AAGhC,UAAI,KAAK,QAAQ,aAAa,GAAG;AAChC,YAAM,cAAc,KAAK,IAAI,eAAe,CAAC;AAC7C,aAAK,OAAO,MAAM,KAAK,KAAK,WAAW;AACvC,aAAK,OAAO,MAAM,KAAK,KAAK,WAAW;AACvC,aAAK,kBAAiB;;IAExB;;AAhHA,SAAA,eAAA,QAAA,aAAA;;;;WAAkC;;AAClC,SAAA,eAAA,QAAA,cAAA;;;;WAA0C,SAAS,WAAW,OAAO,CAAC,OAAM,SAAS,CAAC;;AAgHvF,SAAA;EAtH2B,QAAQ;;;ACpCnC,IAAA,OAAA,SAAA,QAAA;AAA0B,YAAA,OAAA,MAAA;AAA1B,mBAAA;;EAOA;AAFC,SAAA,eAAA,OAAA,aAAA;;;;WAAkC;;AAClC,SAAA,eAAA,OAAA,cAAA;;;;WAA0C,KAAK,WAAW,OAAO,CAAC,MAAK,SAAS,CAAC;;AAClF,SAAA;EAP0B,IAAI;;;ACd9B,mBAAmB,UAA+B,MAAU;AAC3D,MAAI,OAAO;AACX,MAAI,QAAQ;AACZ,MAAI,MAAM;AACV,MAAI,OAAO;AACX,MAAI,SAAS;AACb,MAAI,SAAS;AACb,MAAI,cAAc;AAClB,MAAI,UAAU;AAEd,WAAS,cAAc,IAAI,EAAE,QAAQ,SAAC,IAAC;AACtC,YAAQ,GAAE;WACJ;AACJ,eAAO,CAAC,GAAE;AACV;WACI;AACJ,gBAAS,CAAC,GAAE,QAAS;AACrB;WACI;AACJ,cAAM,CAAC,GAAE;AACT;WACI;AACJ,eAAO,CAAC,GAAE;AACV;WACI;AACJ,iBAAS,CAAC,GAAE;AACZ;WACI;AACJ,iBAAS,CAAC,GAAE;AACZ;WACI;AACJ,sBAAc,CAAC,GAAE;AACjB;WACI;AACJ,gBAAQ,GAAE;eACJ;AACJ,sBAAU;AACV;eACI;AACJ,sBAAU;AACV;eACI;AACJ,sBAAU;AACV;eACI;AACJ,sBAAU;AACV;eACI;AACJ,sBAAU;AACV;eACI;AACJ,sBAAU;AACV;eACI;AACJ,sBAAU;AACV;;;EAGL,CAAC;AAED,MAAI,SAAS,IAAI;AAChB,WAAO;;AAGR,SAAO,EAAE,MAAM,OAAO,KAAK,MAAM,QAAQ,QAAQ,aAAa,QAAO;AACtE;AAGA,mBAAmB,UAA+B,MAAU;AACrD,MAAA,KAA0D,UAAU,UAAU,IAAI,GAAhF,OAAI,GAAA,MAAE,QAAK,GAAA,OAAE,MAAG,GAAA,KAAE,OAAI,GAAA,MAAE,SAAM,GAAA,QAAE,SAAM,GAAA,QAAE,cAAW,GAAA;AAC3D,SAAO,KAAK,IAAI,MAAM,OAAO,KAAK,MAAM,QAAQ,QAAQ,WAAW;AACpE;AAGA,IAAA,WAAA,WAAA;AAiBC,qBAAY,UAA8B,QAAe;AAhBzD,WAAA,eAAA,MAAA,QAAA;;;;;;AACA,WAAA,eAAA,MAAA,QAAA;;;;;;AAEA,WAAA,eAAA,MAAA,QAAA;;;;;;AAcC,QAAI,CAAC,QAAQ;AACZ,YAAM,IAAI,MAAM,yDAAyD;;AAG1E,SAAK,OAAO;AAEZ,SAAK,OAAO,IAAI,KAAK,eAAe,OAAO;MAC1C,QAAQ;MACR,UAAU;MACV,MAAM;MACN,OAAO;MACP,KAAK;MACL,MAAM;MACN,QAAQ;MACR,QAAQ;MACR,SAAS;MACT,wBAAwB;KACjB;AAER,SAAK,OAAO,IAAI,KAAK,eAAe,OAAO;MAC1C,QAAQ;MACR,UAAU;MACV,MAAM;MACN,OAAO;MACP,KAAK;MACL,MAAM;MACN,QAAQ;MACR,QAAQ;MACR,SAAS;MACT,wBAAwB;KACjB;EACT;;;;;WApCA,SAA0E,UAA4B;AACrG,aAAQ,IAAI,KAAK,UAAU,IAAI;IAChC;;;;;;WAoCA,SAAa,MAAU;AACtB,UAAM,SAAS,KAAK,UAAU,IAAI;AAClC,UAAM,aAAa,KAAK,kBAAiB;AACzC,UAAM,SAAS,IAAI,KAAK,IAAI;AAC5B,aAAO,cAAc,OAAO,cAAa,IAAM,UAAS,WAAW;AAEnE,UAAM,gBAAgB,OAAO,kBAAiB;AAE9C,UAAI,cAAc,eAAe;AAChC,eAAO,cAAc,OAAO,cAAa,IAAK,gBAAgB,UAAU;;AAGzE,aAAO;IACR;;;;;;WAEA,SAAU,MAAU;AACnB,UAAM,MAAM,UAAU,KAAK,MAAM,IAAI;AACrC,UAAM,MAAM,UAAU,KAAK,MAAM,IAAI;AACrC,aAAQ,OAAM,OAAO;IACtB;;;;;;WAEA,SAAU,MAAU;AACnB,aAAO,UAAU,KAAK,MAAM,IAAI;IACjC;;AACD,SAAA;AAAA,EA3EA;;;AC9CA,IAAA,iBAAA,SAAA,QAAA;AAAoC,YAAA,iBAAA,MAAA;AAApC,6BAAA;;EAsFA;;;;;WA3EC,SAAe,QAAc;AAC5B,UAAM,SAAS,KAAK,UAAU,MAAM;AAEpC,UAAI,KAAI;AACR,UAAI,KAAI;AAER,UAAI,IAAI,OAAO,QAAQ;AACvB,UAAI,IAAI,OAAO,SAAS;AACxB,UAAI,IAAI,OAAO,OAAO;AACtB,UAAI,IAAI,OAAO,UAAU;AAEzB,UAAM,QAAQ,IAAI;AAClB,UAAM,SAAS,IAAI;AAEnB,UAAI,SAAS,OAAO,IAAI,QAAe;AACvC,UAAI,AAAM,SAAS,MAAM,GAAG;AAC3B,aAAI;AACJ,aAAI;aAEA;AACJ,iBAAS,KAAK,IAAI,OAAO,MAAM,IAAI;AACnC,aAAI,QAAQ;AACZ,aAAI,SAAS;;AAGd,UAAI,KAAK,KAAK,IAAI,GAAG;AACrB,UAAI,KAAK,KAAK,IAAI,GAAG;AACrB,UAAI,MAAM,MAAM;AACf,aAAI,AAAO,gBAAgB,IAAI,KAAK;;AAGrC,UAAI,MAAM,MAAM;AACf,aAAI,AAAO,gBAAgB,IAAI,MAAM;;AAGtC,UAAM,WAAW,KAAK,MAAM,UAAU,qBAAqB,IAAG,IAAG,GAAG,IAAG,IAAG,MAAM;AAChF,UAAM,QAAQ,KAAK,IAAI,OAAO;AAC9B,UAAI,OAAO;AACV,YAAI,MAAI;AACR,QAAO,KAAK,OAAO,SAAC,MAAI;AAEvB,cAAI,SAAS,KAAK;AAElB,cAAI,CAAC,AAAM,SAAS,MAAM,GAAG;AAC5B,qBAAS,MAAK,OAAM,SAAS;;AAG9B,cAAI,UAAU,KAAK;AAEnB,cAAI,CAAC,AAAM,SAAS,OAAO,GAAG;AAC7B,sBAAU;;AAGX,cAAI,SAAQ,KAAK;AAEjB,cAAI,QAAO;AAEV,gBAAM,UAAU,KAAK;AACrB,gBAAI,SAAS;AACZ,uBAAQ,MAAM,QAAQ,QAAO,OAAO;;AAGrC,gBAAM,WAAW,KAAK;AACtB,gBAAI,UAAU;AACb,uBAAQ,MAAM,SAAS,QAAO,QAAQ;;AAGvC,qBAAS,aAAa,QAAQ,UAAU,OAAM,IAAI,MAAM,OAAM,IAAI,MAAM,OAAM,IAAI,MAAM,UAAU,GAAG;;AAEtG;QACD,CAAC;;AAGF,aAAO;IACR;;AAhFA,SAAA,eAAA,iBAAA,aAAA;;;;WAAkC;;AAClC,SAAA,eAAA,iBAAA,cAAA;;;;WAA0C,SAAS,WAAW,OAAO,CAAC,gBAAe,SAAS,CAAC;;AAgFhG,SAAA;EAtFoC,QAAQ;;;ACiE5C,IAAA,UAAA,SAAA,QAAA;AAA6B,YAAA,UAAA,MAAA;AAA7B,sBAAA;AAAA,QAAA,QAAA,WAAA,QAAA,OAAA,MAAA,MAAA,SAAA,KAAA;AAYC,WAAA,eAAA,OAAA,YAAA;;;;aAA6B,MAAK,MAAM,UAAU,aAAY;;AAC9D,WAAA,eAAA,OAAA,sBAAA;;;;aAAuC,MAAK,MAAM,UAAU,aAAY;;AAExE,WAAA,eAAA,OAAA,UAAA;;;;aAAmB;;AAEnB,WAAA,eAAA,OAAA,YAAA;;;;;;;EA0CD;;;;;WA1DC,WAAA;AAEC,aAAA,UAAM,qBAAoB,KAAA,IAAA;IAC3B;;AAeA,SAAA,eAAW,SAAA,WAAA,WAAO;SAAlB,WAAA;AACC,aAAO,KAAK;IACb;;;;;;;;WAEA,WAAA;IAA0B;;;;;;WAE1B,WAAA;AACC,aAAA,UAAM,eAAc,KAAA,IAAA;AAEpB,UAAI,KAAK,QAAQ,YAAY,KAAK,KAAK,QAAQ,OAAO,KAAK,KAAK,QAAQ,QAAQ,KAAK,KAAK,QAAQ,UAAU,KAAK,KAAK,QAAQ,OAAO,KAAK,KAAK,QAAQ,aAAa,KAAK,KAAK,QAAQ,iBAAiB,KAAK,KAAK,QAAQ,kBAAkB,KAAK,KAAK,QAAQ,cAAc,KAAK,KAAK,QAAQ,MAAM,KAAK,KAAK,QAAQ,aAAa,GAAG;AACpU,aAAK,SAAS;;IAEhB;;;;;;WAEA,WAAA;AACC,aAAA,UAAM,SAAQ,KAAA,IAAA;AAEd,UAAI,KAAK,QAAQ;AAChB,YAAM,aAAa,KAAK,IAAI,cAAc,EAAE;AAC5C,YAAM,QAAQ,KAAK,IAAI,SAAS,GAAG;AACnC,YAAM,SAAS,KAAK,IAAI,UAAU,GAAG;AACrC,YAAM,OAAO,KAAK,IAAI,MAAM;AAC5B,YAAM,cAAc,KAAK,IAAI,eAAe,CAAC;AAE7C,aAAK,SAAS,MAAK;AACnB,aAAK,mBAAmB,MAAK;AAE7B,YAAI,QAAS,cAAc,GAAI;AAC9B,eAAK,mBAAmB,UAAU,MAAM,WAAW;AACnD,eAAK,mBAAmB,SAAS,GAAG,GAAG,OAAO,MAAM;AACpD,eAAK,mBAAmB,QAAO;;AAGhC,aAAK,SAAS,QAAQ,KAAK,IAAI,YAAY,CAAC;AAE5C,aAAK,MAAK;AAEV,aAAK,WAAW,KAAK,MAAM,UAAU,cAAc,KAAK,UAAU,KAAK,oBAAoB,YAAY,OAAO,MAAM;;IAEtH;;AAjDA,SAAA,eAAA,UAAA,aAAA;;;;WAAkC;;AAClC,SAAA,eAAA,UAAA,cAAA;;;;WAA0C,OAAO,WAAW,OAAO,CAAC,SAAQ,SAAS,CAAC;;AAiDvF,SAAA;EA3D6B,MAAM;;;AC3DnC,IAAA,gBAAA,SAAA,QAAA;AAAmC,YAAA,gBAAA,MAAA;AAAnC,4BAAA;;EA4EA;;;;;WApEC,WAAA;AACC,aAAA,UAAM,eAAc,KAAA,IAAA;AAEpB,UAAI,KAAK,QAAQ,KAAK,GAAG;AACxB,aAAK,SAAS;;IAEhB;;;;;;WAEA,WAAA;AACC,aAAA,UAAM,MAAK,KAAA,IAAA;AAEX,UAAM,YAAY,KAAK,IAAI,aAAa,KAAK;AAC7C,UAAM,WAAW,KAAK,IAAI,YAAY,IAAI;AAC1C,UAAM,MAAM,KAAK,IAAI,OAAO,CAAC;AAC7B,UAAM,WAAW,KAAK,IAAI,YAAY,CAAC;AACvC,UAAI,IAAI,KAAK,IAAI,SAAS,GAAG;AAC7B,UAAI,IAAI,KAAK,IAAI,UAAU,GAAG;AAC9B,UAAI,SAAS,KAAK,IAAI,UAAU,CAAC;AAEjC,UAAI,QAAQ,SAAS,IAAI;AACzB,UAAI,QAAQ,SAAS,IAAI;AAEzB,UAAI,OAAO,KAAK,MAAM,IAAI,KAAK;AAC/B,UAAI,OAAO,KAAK,MAAM,IAAI,KAAK;AAE/B,cAAQ,IAAI;AACZ,cAAQ,IAAI;AAEZ,UAAI,YAAY,GAAG;AAElB,aAAK,SAAS,IAAI,QAAQ,AAAM,IAAI,QAAQ;AAC5C,aAAK,SAAS,IAAI,QAAQ,AAAM,IAAI,QAAQ;;AAG7C,UAAM,SAAQ,KAAK,IAAI,OAAO;AAC9B,UAAM,eAAe,KAAK,IAAI,cAAc;AAC5C,UAAI,UAAS,cAAc;AAC1B,aAAK,SAAS,UAAU,QAAO,YAAY;;AAG5C,eAAS,IAAI,YAAY,IAAI,IAAI,CAAC,OAAO,GAAG,IAAI,OAAO,GAAG,KAAK;AAC9D,iBAAS,IAAI,YAAY,IAAI,IAAI,CAAC,OAAO,GAAG,IAAI,OAAO,GAAG,KAAK;AAC9D,cAAI,CAAC,aAAe,KAAI,MAAM,KAAM,KAAI,MAAM,KAAQ,KAAI,MAAM,KAAM,KAAI,MAAM,GAAI;AACnF,gBAAI,KAAI,IAAI;AACZ,gBAAI,KAAI,IAAI;AACZ,gBAAI,UAAU;AACb,oBAAK,QAAQ,MAAM;AACnB,oBAAK,QAAQ,MAAM;;AAEpB,iBAAK,SAAS,WAAW,KAAI,QAAQ,KAAI,QAAQ,MAAM;;;;AAK1D,UAAI,WAAW;AACd,YAAI,IAAI,IAAI,MAAM;AAClB,YAAI,IAAI,IAAI,MAAM;aAEd;AACJ,aAAK;AACL,aAAK;;AAGN,UAAI,UAAS,cAAc;AAC1B,aAAK,SAAS,QAAO;;IAGvB;;AAtEA,SAAA,eAAA,gBAAA,aAAA;;;;WAAkC;;AAClC,SAAA,eAAA,gBAAA,cAAA;;;;WAA0C,QAAQ,WAAW,OAAO,CAAC,eAAc,SAAS,CAAC;;AAsE9F,SAAA;EA5EmC,OAAO;;;ACvB1C,IAAA,cAAA,SAAA,QAAA;AAAiC,YAAA,cAAA,MAAA;AAAjC,0BAAA;;EA2DA;;;;;WAnDC,WAAA;AACC,aAAA,UAAM,eAAc,KAAA,IAAA;AAEpB,UAAI,KAAK,QAAQ,KAAK,GAAG;AACxB,aAAK,SAAS;;IAEhB;;;;;;WAEA,WAAA;AACC,aAAA,UAAM,MAAK,KAAA,IAAA;AAEX,UAAM,IAAI,KAAK,IAAI,SAAS,GAAG;AAC/B,UAAM,IAAI,KAAK,IAAI,UAAU,GAAG;AAChC,UAAM,MAAM,KAAK,IAAI,OAAO,CAAC;AAC7B,UAAM,cAAc,KAAK,IAAI,eAAe,CAAC;AAE7C,UAAI,CAAC,KAAK;AACT,aAAK,SAAS,OAAO,GAAG,CAAC;AACzB,aAAK,SAAS,OAAO,GAAG,CAAC;aAErB;AACJ,YAAI,OAAO,MAAM;AACjB,YAAI,QAAQ,IAAI;AAEhB,iBAAS,IAAI,CAAC,OAAO,IAAI,QAAQ,GAAG,KAAK;AACxC,cAAM,KAAI,KAAK,MAAM,IAAI,OAAO,OAAO,CAAC,IAAI;AAC5C,eAAK,SAAS,OAAO,CAAC,GAAG,EAAC;AAC1B,eAAK,SAAS,OAAO,IAAI,GAAG,EAAC;;;AAI/B,WAAK,SAAS,UAAU,aAAa,KAAK,IAAI,OAAO,GAAG,KAAK,IAAI,cAAc,CAAC;AAEhF,UAAI,kBAAkB,KAAK,IAAI,iBAAiB;AAChD,UAAI,AAAM,SAAS,eAAe,GAAG;AACpC,YAAI,kBAAkB,KAAK;AAC1B,4BAAkB,CAAC,CAAC;eAEhB;AACJ,4BAAkB,CAAC,eAAe;;;AAGpC,WAAK,SAAS,YAAY,eAA2B;AAErD,UAAM,mBAAmB,KAAK,IAAI,kBAAkB;AACpD,UAAI,kBAAkB;AACrB,aAAK,SAAS,kBAAkB,gBAAgB;;AAGjD,WAAK,SAAS,UAAS;IACxB;;AArDA,SAAA,eAAA,cAAA,aAAA;;;;WAAkC;;AAClC,SAAA,eAAA,cAAA,cAAA;;;;WAA0C,QAAQ,WAAW,OAAO,CAAC,aAAY,SAAS,CAAC;;AAqD5F,SAAA;EA3DiC,OAAO;;;AC8BxC,IAAA,mBAAA,SAAA,QAAA;AAAsC,YAAA,mBAAA,MAAA;AAAtC,+BAAA;;EA4EA;;;;;WArEC,WAAA;AACC,aAAA,UAAM,eAAc,KAAA,IAAA;AAEpB,UAAI,KAAK,QAAQ,KAAK,GAAG;AACxB,aAAK,SAAS;;IAEhB;;;;;;WAEA,WAAA;AACC,aAAA,UAAM,MAAK,KAAA,IAAA;AAEX,UAAM,YAAY,KAAK,IAAI,aAAa,KAAK;AAC7C,UAAM,WAAW,KAAK,IAAI,YAAY,IAAI;AAC1C,UAAM,MAAM,KAAK,IAAI,OAAO,CAAC;AAC7B,UAAM,WAAW,KAAK,IAAI,YAAY,CAAC;AACvC,UAAI,IAAI,KAAK,IAAI,SAAS,GAAG;AAC7B,UAAI,IAAI,KAAK,IAAI,UAAU,GAAG;AAC9B,UAAI,QAAQ,KAAK,IAAI,YAAY,CAAC;AAClC,UAAI,QAAQ,KAAK,IAAI,aAAa,CAAC;AAGnC,UAAI,QAAQ,QAAQ;AACpB,UAAI,QAAQ,QAAQ;AAEpB,UAAI,OAAO,KAAK,MAAM,IAAI,KAAK;AAC/B,UAAI,OAAO,KAAK,MAAM,IAAI,KAAK;AAE/B,cAAQ,IAAI;AACZ,cAAQ,IAAI;AAEZ,UAAI,YAAY,GAAG;AAElB,aAAK,SAAS,IAAI,QAAQ,IAAI,AAAM,IAAI,QAAQ;AAChD,aAAK,SAAS,IAAI,CAAC,QAAQ,IAAI,AAAM,IAAI,QAAQ;;AAGlD,eAAS,IAAI,YAAY,IAAI,IAAI,CAAC,OAAO,GAAG,IAAI,OAAO,GAAG,KAAK;AAC9D,iBAAS,IAAI,YAAY,IAAI,IAAI,CAAC,OAAO,GAAG,IAAI,OAAO,GAAG,KAAK;AAC9D,cAAI,CAAC,aAAe,KAAI,MAAM,KAAM,KAAI,MAAM,KAAQ,KAAI,MAAM,KAAM,KAAI,MAAM,GAAI;AACnF,gBAAI,KAAI,IAAI;AACZ,gBAAI,KAAI,IAAI;AACZ,gBAAI,UAAU;AACb,oBAAM,SAAQ,SAAS;AACvB,oBAAM,SAAQ,SAAS;;AAExB,iBAAK,SAAS,SAAS,IAAG,IAAG,OAAO,KAAK;;;;AAK5C,UAAI,WAAW;AACd,YAAI,IAAI,IAAI,MAAM;AAClB,YAAI,IAAI,IAAI,MAAM;aAEd;AACJ,aAAK;AACL,aAAK;;AAGN,UAAM,SAAQ,KAAK,IAAI,OAAO;AAC9B,UAAM,eAAe,KAAK,IAAI,cAAc;AAC5C,UAAI,UAAS,cAAc;AAG1B,aAAK,SAAS,UAAU,QAAO,YAAY;AAC3C,aAAK,SAAS,QAAO;;IAGvB;;AAvEA,SAAA,eAAA,mBAAA,aAAA;;;;WAAkC;;AAClC,SAAA,eAAA,mBAAA,cAAA;;;;WAA0C,QAAQ,WAAW,OAAO,CAAC,kBAAiB,SAAS,CAAC;;AAuEjG,SAAA;EA5EsC,OAAO;;;ACsC7C,IAAA,WAAA,SAAA,QAAA;AAA8B,YAAA,WAAA,MAAA;AAA9B,uBAAA;;EAgGA;;;;;WAvFC,WAAA;AAEC,aAAA,UAAM,qBAAoB,KAAA,IAAA;IAC3B;;;;;;WAEA,WAAA;AACC,UAAI,KAAK,QAAQ,QAAQ,GAAG;AAC3B,aAAK,MAAK;;IAEZ;;;;;;WAKA,WAAA;AACC,WAAK,WAAW,eAAe,KAAK,WAAW,eAAe,CAAC,IAAI,CAAC;AACpE,UAAM,OAAO,KAAK,WAAW,aAAa;AAC1C,UAAM,SAAS,KAAK,IAAI,UAAU,CAAC,KAAK,IAAI,aAAa,MAAM,QAAQ,QAAQ,CAAC,CAAC,CAAC;AAClF,UAAI,CAAC,KAAK,WAAW,WAAW,GAAG;AAClC,aAAK,WAAW,aAAa,OAAO,MAAM;;AAG3C,UAAM,MAAM,KAAK,WAAW,WAAW;AAEvC,UAAM,QAAQ;AACd,UAAM,cAAc,KAAK,IAAI,aAAa;AAC1C,UAAM,QAAQ,KAAK,IAAI,OAAO;AAC9B,eAAS,IAAI,OAAO,IAAI,KAAK,KAAK;AACjC,YAAI,OAAO;AACV,iBAAO,KAAK,OAAO,EAAE;eAEjB;AACJ,cAAM,MAAM,OAAO,GAAI,MAAK;AAC5B,cAAI,IAAI,IAAI,IAAK,aAAY,OAAO,KAAK;AACzC,iBAAO,IAAI;AAAG,iBAAK;AAEnB,cAAI,KAAI,IAAI,IAAK,aAAY,cAAc,KAAK;AAEhD,cAAI,KAAI;AAAG,iBAAI;AACf,cAAI,KAAI;AAAG,iBAAI;AAEf,cAAI,IAAI,IAAI,IAAK,aAAY,aAAa,KAAK;AAE/C,iBAAO,IAAI;AAAG,iBAAK;AACnB,iBAAO,KAAK,MAAM,QAAQ,GAAG,IAAG,CAAC,CAAC;;;IAGrC;;;;;;WAUA,SAAgB,OAAa;AAC5B,UAAM,SAAS,KAAK,IAAI,UAAU,CAAA,CAAE;AACpC,UAAM,aAAa,KAAK,IAAI,YAAY;AACxC,UAAI,SAAS,OAAO,QAAQ;AAC3B,aAAK,eAAc;AACnB,eAAO,KAAK,SAAS,KAAK;;AAG3B,aAAO,cAAc,OAAO,MAAM,SAAS,OAAO,QAAQ,UAAW,IAAI,OAAO;IACjF;;;;;;WAOA,WAAA;AACC,UAAI,cAAc,KAAK,WAAW,eAAe,KAAK,IAAI,cAAc,CAAC,CAAC;AAC1E,WAAK,WAAW,eAAe,cAAc,KAAK,IAAI,QAAQ,CAAC,CAAC;AAChE,aAAO,KAAK,SAAS,WAAW;IACjC;;;;;;WAMA,WAAA;AACC,WAAK,WAAW,eAAe,KAAK,IAAI,cAAc,CAAC,CAAC;AACxD,WAAK,WAAW,eAAe,CAAC;IACjC;;AA9FA,SAAA,eAAA,WAAA,aAAA;;;;WAAkC;;AAClC,SAAA,eAAA,WAAA,cAAA;;;;WAA0C,OAAO,WAAW,OAAO,CAAC,UAAS,SAAS,CAAC;;AA8FxF,SAAA;EAhG8B,MAAM;;;ACxEpC,IAAA,aAAA,WAAA;AAAA,yBAAA;EA2CA;;;;;WAlCC,SAAoB,OAAe,SAA4B;AAC9D,gBAAU,KAAK,eAAe,OAAO;AACrC,UAAI;AACH,YAAI,AAAM,SAAS,KAAK,GAAG;AAC1B,cAAI,OAAQ,KAAK,MAAM,KAAK;AAC5B,cAAI,QAAQ,WAAW,AAAM,QAAQ,IAAI,GAAG;AAC3C,iBAAK,QAAO;;AAEb,iBAAO;mBAEC,AAAM,QAAQ,KAAK,KAAK,AAAM,SAAS,KAAK,GAAG;AACvD,iBAAO;eAEH;AACJ,gBAAM;;eAEC,GAAP;AACD,eAAO;;IAET;;;;;;WAEA,SAAgC,SAA4B;AAC3D,UAAM,aAAiC,CAAA;AACvC,UAAM,WAAW;QAChB,SAAS;;AAEV,UAAI,CAAC,SAAS;AACb,kBAAU,CAAA;;AAEX,MAAQ,MAAK,UAAU,SAAC,KAAK,KAAG;AAC/B,mBAAW,OAAO,QAAS,QAAQ;MACpC,CAAC;AACD,aAAO;IACR;;AACD,SAAA;AAAA,EA3CA;AAyFA,IAAA,YAAA,WAAA;AAAA,wBAAA;EAkLA;;;;;WAzKC,SAAoB,OAAe,SAA2B;AAC7D,gBAAU,KAAK,eAAe,OAAO;AAGrC,UAAI,OAAO,KAAK,WAAW,OAAO,QAAQ,SAAU;AAGpD,UAAI,MAAa,CAAA,GAChB,OAAiB,CAAA,GACjB,KACA;AAGD,WAAK,IAAI,GAAG,IAAI,QAAQ,UAAW,KAAK;AACvC,aAAK,MAAK;;AAIX,UAAI,QAAQ,gBAAgB;AAC3B,eAAO,KAAK,MAAK;AAGjB,iBAAS,KAAI,GAAG,KAAI,KAAK,QAAQ,MAAK;AAErC,gBAAM,KAAK,OAAM,OAAO,KAAK,IAAG,QAAQ,eAAe,EAAE,IAAI;AAG7D,cAAI,AAAO,QAAP,IAAY;AACf,kBAAM,QAAQ;;AAGf,eAAK,MAAK;;;AAKZ,UAAI;AACJ,aAAO,MAAM;AACZ,cAAM,QAAQ,UAAU,KAAK,IAAG,IAAK,KAAK,MAAK;AAE/C,YAAI,CAAC,KAAK;AACT;;AAGD,YAAI,QAAQ,aAAa,IAAI,WAAW,KAAK,IAAI,OAAO,IAAI;AAC3D;;AAGD,YAAI,YAAiB,CAAA;AACrB,aAAK,IAAI,GAAG,IAAI,IAAI,QAAQ,KAAK;AAChC,gBAAM,AAAc,KAAK,OAAnB,SAAwB,QAAQ,IAAI,KAAK;AAC/C,oBAAU,OAAO,IAAI;;AAEtB,YAAI,KAAK,SAAS;;AAGnB,aAAO;IACR;;;;;;WAKA,SAAyB,MAAc,WAAiB;AAIvD,kBAAa,aAAa;AAG1B,UAAI,aAAa,IAAI,OAGnB,QAAQ,YAAY,mDAMR,YAAY,cAEzB,IAAI;AAML,UAAI,UAAiB;QACpB,CAAA;;AAKD,UAAI,aAAa;AAIjB,aAAO,MAAM;AACZ,qBAAa,WAAW,KAAK,IAAI;AAEjC,YAAI,CAAC,YAAY;AAChB;;AAID,YAAI,sBAAsB,WAAW;AAMrC,YACC,oBAAoB,UACnB,wBAAwB,WACxB;AAID,kBAAQ,KAAK,CAAA,CAAE;;AAOhB,YAAI,kBAAe;AACnB,YAAI,WAAW,IAAI;AAIlB,4BAAkB,WAAW,GAAG,QAC/B,IAAI,OAAO,MAAQ,GAAG,GACtB,GAAI;eAGC;AAGN,4BAAkB,WAAW;;AAM9B,gBAAQ,QAAQ,SAAS,GAAG,KAAK,eAAe;;AAIjD,aAAQ;IACT;;;;;;WAEA,SAAgC,SAA2B;AAC1D,UAAM,aAAgC,CAAA;AACtC,UAAM,WAAW;QAChB,WAAW;QACX,SAAS;QACT,UAAU;QACV,WAAW;QACX,gBAAgB;;AAEjB,UAAI,CAAC,SAAS;AACb,kBAAU,CAAA;;AAEX,MAAQ,MAAK,UAAU,SAAC,KAAK,KAAG;AAC/B,mBAAW,OAAO,QAAS,QAAQ;MACpC,CAAC;AACD,aAAO;IAER;;AAED,SAAA;AAAA,EAlLA;;;ACtDA,IAAA,gBAAA,SAAA,QAAA;AAAmC,YAAA,gBAAA,MAAA;AAAnC,4BAAA;AAAA,QAAA,QAAA,WAAA,QAAA,OAAA,MAAA,MAAA,SAAA,KAAA;AAIC,WAAA,eAAA,OAAA,eAAA;;;;aAAiC;;AACjC,WAAA,eAAA,OAAA,iBAAA;;;;aAAmC;;AACnC,WAAA,eAAA,OAAA,gBAAA;;;;aAAkC;;AAClC,WAAA,eAAA,OAAA,eAAA;;;;aAAiC;;AACjC,WAAA,eAAA,OAAA,cAAA;;;;aAAgC;;;EA+GjC;;;;;WA7GC,WAAA;AAAA,UAAA,QAAA;AACC,aAAA,UAAM,UAAS,KAAA,IAAA;AACf,WAAK,eAAc;AACnB,WAAK,GAAG,cAAc,WAAA;AAAM,eAAA,MAAK,eAAc;MAAnB,CAAqB;AACjD,WAAK,GAAG,cAAc,WAAA;AAAM,eAAA,MAAK,eAAc;MAAnB,CAAqB;AACjD,WAAK,GAAG,iBAAiB,WAAA;AAAM,eAAA,MAAK,eAAc;MAAnB,CAAqB;AACpD,WAAK,GAAG,eAAe,WAAA;AAAM,eAAA,MAAK,eAAc;MAAnB,CAAqB;AAClD,WAAK,GAAG,WAAW,WAAA;AAAM,eAAA,MAAK,eAAc;MAAnB,CAAqB;IAC/C;;;;;;WAEA,WAAA;AACC,UAAI,KAAK,QAAQ,YAAY,KAAK,KAAK,QAAQ,YAAY,GAAG;AAC7D,aAAK,cAAc,KAAK,IAAI,YAAY,KAAM,KAAK,IAAI,YAAY,EAAG,SAAS;;AAEhF,UAAI,KAAK,QAAQ,eAAe,GAAG;AAClC,aAAK,gBAAgB,KAAK,IAAI,eAAe,KAAM,KAAK,IAAI,eAAe,EAAG,SAAS;;AAExF,UAAI,KAAK,QAAQ,aAAa,GAAG;AAChC,aAAK,eAAe,KAAK,IAAI,aAAa,KAAM,KAAK,IAAI,aAAa,EAAG,SAAS;;AAEnF,UAAI,KAAK,QAAQ,SAAS,GAAG;AAC5B,aAAK,cAAc,KAAK,IAAI,SAAS,KAAK;;AAE3C,WAAK,mBAAkB;IACxB;;;;;;WAEA,WAAA;AAAA,UAAA,QAAA;AACC,UAAM,aAAuB,CAAA;AAC7B,MAAO,KAAK,CAAC,cAAc,iBAAiB,aAAa,GAAG,SAAC,OAAU;AACtE,QAAO,KAAK,MAAK,IAAI,OAAO,CAAA,CAAE,GAAG,SAAC,OAAK;AACtC,cAAM,QAAiB,MAAO,MAAM,GAAG;AACvC,gBAAM,IAAG;AACT,iBAAO,MAAM,SAAS,GAAG;AACxB,uBAAW,KAAK,MAAM,KAAK,GAAG,CAAC;AAC/B,kBAAM,IAAG;;QAEX,CAAC;MACF,CAAC;AACD,WAAK,aAAa,WAAW,SAAS;AACtC,WAAK,WAAW,cAAc,UAAU;IACzC;;;;;;WAOA,SAAmB,MAAgC;AAAnD,UAAA,QAAA;AACC,UAAI,AAAM,QAAQ,IAAI,KAAM,MAAK,eAAe,KAAK,iBAAiB,KAAK,gBAAgB,KAAK,cAAc;AAC7G,QAAO,KAAK,MAAM,SAAC,KAAG;AACrB,gBAAK,WAAW,GAAG;QACpB,CAAC;;IAEH;;;;;;WAOA,SAAkB,KAA+B,QAAmB;AAApE,UAAA,QAAA;AAAiD,UAAA,WAAA,QAAA;AAAA,iBAAA;MAAmB;AACnE,MAAQ,MAAK,KAAK,SAAC,KAAU,QAAM;AAClC,YAAM,YAAoB,SAAS;AACnC,YAAI,MAAK,aAAa;AACrB,cAAI,OAAO,MAAK,cAAc,IAAI,IAAI;;AAEvC,YAAI,MAAK,eAAe;AACvB,cAAI,OAAO,MAAK,eAAe,WAAW,IAAI,IAAI;;AAEnD,YAAI,MAAK,aAAa;AACrB,cAAI,OAAO,MAAK,aAAa,WAAW,IAAI,IAAI;;AAEjD,YAAI,MAAK,cAAc;AACtB,cAAI,OAAO,MAAK,cAAc,WAAW,IAAI,IAAI;;AAElD,YAAI,MAAK,cAAoB,MAAM,WAAW,cAAc,CAAA,CAAE,EAAE,QAAQ,SAAS,MAAM,MAAM,AAAM,SAAS,IAAI,IAAI,GAAG;AACtH,gBAAK,WAAW,IAAI,MAAM,YAAY,GAAG;;MAE3C,CAAC;IACF;;;;;;WAEA,SAAyB,OAAe,OAAU;AACjD,UAAI,KAAK,IAAI,eAAe,EAAG,QAAQ,KAAK,MAAM,IAAI;AACrD,eAAO,AAAM,SAAS,KAAK;;AAE5B,aAAO;IACR;;;;;;WAEA,SAAuB,OAAe,OAAU;AAC/C,UAAI,KAAK,IAAI,YAAY,EAAG,QAAQ,KAAK,MAAM,IAAI;AAClD,eAAO,KAAK,MAAM,cAAc,MAAM,OAAO,KAAK,IAAI,cAAc,EAAE,CAAC,EAAE,QAAO;;AAEjF,aAAO;IACR;;;;;;WAEA,SAAwB,OAAU;AACjC,UAAK,UAAS,QAAQ,SAAS,OAAO,KAAK,IAAI,SAAS,KAAK,MAAM;AAClE,eAAO,KAAK,IAAI,SAAS;;AAE1B,aAAO;IACR;;;;;;WAEA,SAAwB,OAAe,OAAU;AAChD,UAAI,KAAK,IAAI,aAAa,EAAG,QAAQ,KAAK,MAAM,IAAI;AACnD,eAAO,MAAM,QAAQ,KAAK;;AAE3B,aAAO;IACR;;AAED,SAAA;AAAA,EAvHmC,MAAM;;;ACrDzC;;;;;AAwGM,cAAkB,KAAa,QAAY,SAA4B;AAC5E,SAAO,IAAI,QAA2B,SAAC,SAAS,OAAK;AAGpD,QAAI,SAAS,WAAW,QAAQ,QAAQ,gBAAgB;AAGxD,QAAI,MAAM,IAAI,eAAc;AAC5B,QAAI,SAAS,WAAA;AACZ,UAAI,IAAI,WAAW,KAAK;AAEvB,YAAI,WAAQ;AACZ,YAAI;AAEJ,YAAI,QAAQ;AACX,mBAAO,IAAI;AACX,mBAAS,MAAK,EAAE,KAAK,SAAC,WAAa;AAClC,gBAAI,UAA4B;cAC/B;cACA,OAAO;cACP,UAAU;cACV,MAAM;cACN,MAAM,IAAI,kBAAkB,cAAc;cAC1C;;AAED,oBAAQ,OAAM;UACf,CAAC;AACD;eAEI;AACJ,qBAAW,IAAI,gBAAgB,IAAI;;AAGpC,YAAI,SAA4B;UAC/B;UACA,OAAO;UACP;UACA,MAAM;UACN,MAAM,IAAI,kBAAkB,cAAc;UAC1C;;AAED,gBAAQ,MAAM;aAEV;AACJ,cAAM;UACL;UACA,OAAO;UACP,MAAM,IAAI,kBAAkB,cAAc;UAC1C;SACA;;IAEH;AACA,QAAI,UAAU,WAAA;AACb,YAAM;QACL;QACA,OAAO;QACP,MAAM,IAAI,kBAAkB,cAAc;QAC1C;OACA;IACF;AAGA,QAAI,KAAK,OAAO,KAAK,IAAI;AAEzB,QAAI,WAAW,QAAQ,iBAAiB;AACvC,UAAI,kBAAkB;;AAIvB,QAAI,WAAW,MAAM;AAEpB,UAAI,QAAQ,kBAAkB,MAAM;AACnC,iBAAS,IAAI,GAAG,IAAI,QAAQ,eAAe,QAAQ,KAAK;AACvD,cAAI,SAAS,QAAQ,eAAe;AACpC,cAAI,iBAAiB,OAAO,KAAK,OAAO,KAAK;;;AAI/C,UAAI,QAAQ,gBAAgB,MAAM;AACjC,YAAI,eAAe,QAAQ;;;AAK7B,QAAI,KAAI;EAET,CAAC;AAEF;AAQM,kBAAmB,MAAU;AAClC,SAAO,IAAI,QAAgB,SAAC,SAAS,OAAK;AACzC,QAAM,SAAS,IAAI,WAAU;AAE7B,WAAO,SAAS,SAAA,QAAM;AACrB,cAAgB,OAAO,MAAM;IAC9B;AAEA,WAAO,UAAU,SAAC,GAAC;AAClB,YAAM,CAAC;IACR;AAEA,WAAO,WAAW,IAAI;EACvB,CAAC;AACF;",
  "names": []
}
