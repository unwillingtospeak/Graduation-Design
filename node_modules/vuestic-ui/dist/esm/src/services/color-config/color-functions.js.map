{"version":3,"file":"color-functions.js","sources":["../../../../../src/services/color-config/color-functions.ts"],"sourcesContent":["// import colortranslator, { ColorTranslator as CTClass } from 'colortranslator'\nimport { ColorTranslator } from 'colortranslator'\nimport { HSLObject, ColorInput } from 'colortranslator/dist/@types'\n\n/** This is a hack for cjs and esm build when we can transpile colortranslator */\n// const ColorTranslator = CTClass || colortranslator.ColorTranslator\n\nexport const colorToRgba = (color: ColorInput, opacity: number) => {\n  return new ColorTranslator(color).setA(opacity).RGBA\n}\n\nexport const getTextColor = (color: ColorInput, darkColor = 'dark', lightColor = 'white') => {\n  const { R, G, B } = new ColorTranslator(color)\n  const isLightBackground = Math.sqrt(R * R * 0.241 + G * G * 0.691 + B * B * 0.068) > 130\n  return isLightBackground ? darkColor : lightColor\n}\n\nexport const getBoxShadowColor = (color: ColorInput) => {\n  return new ColorTranslator(color).setA(0.4).RGBA\n}\n\nexport const getHoverColor = (color: ColorInput) => {\n  return new ColorTranslator(color).setA(0.2).RGBA\n}\n\nexport const getFocusColor = (color: ColorInput) => {\n  return new ColorTranslator(color).setA(0.3).RGBA\n}\n\nexport const shiftHSLAColor = (color: ColorInput, offset: { h?: number; s?: number; l?: number; a?: number }) => {\n  const result = new ColorTranslator(color)\n\n  if (offset.h) { result.setH(result.H + offset.h) }\n\n  if (offset.s) { result.setS(result.S + offset.s) }\n\n  if (offset.l) { result.setL(result.L + offset.l) }\n\n  if (offset.a) { result.setA(result.A + offset.a) }\n\n  return result.HSLA\n}\n\nexport const setHSLAColor = (color: ColorInput, newColor: { h?: number; s?: number; l?: number; a?: number }) => {\n  const result = new ColorTranslator(color)\n\n  if (newColor.h !== undefined) { result.setH(newColor.h) }\n\n  if (newColor.s !== undefined) { result.setS(newColor.s) }\n\n  if (newColor.l !== undefined) { result.setL(newColor.l) }\n\n  if (newColor.a !== undefined) { result.setA(newColor.a) }\n\n  return result.HSLA\n}\n\n/**\n * This method guesses second color for gradient based on first one.\n * Calculation method should differ for different colors, so we split color circle\n * in zones.\n *\n * @param color\n */\nexport const shiftGradientColor = (color: ColorInput): string => {\n  const newColor = ColorTranslator.toHSLA(color, false) as HSLObject\n\n  // Gray\n  if (newColor.s < 10) {\n    return shiftHSLAColor(newColor, { h: 2, s: 5, l: 10 })\n  }\n  // Unsaturated (too pale, gray-ish, monotone)\n  // For unsaturated color, hue change does nothing.\n  if (newColor.s < 30) {\n    return shiftHSLAColor(newColor, { s: -14, l: 11 })\n  }\n  // Red\n  if ((newColor.h >= 0 && newColor.h < 44) || (newColor.h >= 285)) {\n    return shiftHSLAColor(newColor, { h: 11, s: 27, l: 8 })\n  }\n  // Yellow\n  if (newColor.h >= 44 && newColor.h < 85) {\n    return shiftHSLAColor(newColor, { h: 3, l: 9 })\n  }\n  // Green\n  if (newColor.h >= 85 && newColor.h < 165) {\n    return shiftHSLAColor(newColor, { h: 16, l: 14 })\n  }\n  // Blue\n  if (newColor.h >= 165 && newColor.h < 285) {\n    return shiftHSLAColor(newColor, { h: -15, s: 3, l: 2 })\n  }\n\n  throw new Error('This method should handle all colors. But it didn\\'t for some reason.')\n}\n\nexport const getGradientBackground = (color: string) => {\n  const colorLeft = shiftGradientColor(color)\n  const colorRight = ColorTranslator.toHSLA(color)\n\n  return `linear-gradient(to right, ${colorLeft}, ${colorRight})`\n}\n\n/**\n * Check if color is valid hsl, hsla, rga, rgba or hex color\n * Taken from https://www.regextester.com/103656\n * Check options <or> isCSSVariable(prop) <or> CSS.supports('color', prop) deleted due to problems with SSR and opacity\n * Details are in the discussion: https://github.com/epicmaxco/vuestic-ui/pull/1589\n * @param strColor\n */\nexport const isColor = (strColor: string): boolean => {\n  // Need to use Regex instead of DOM methods because we support SSR\n  const cssColorRegex = /^#([\\da-f]{3}){1,2}$|^#([\\da-f]{4}){1,2}$|(rgb|hsl)a?\\((\\s*-?\\d+%?\\s*,){2}(\\s*-?\\d+%?\\s*,?\\s*\\)?)(,\\s*(0?\\.\\d+)?|1)?\\)/\n\n  return cssColorRegex.test(strColor.toLocaleLowerCase())\n}\n\nexport const isCSSVariable = (strColor: string): boolean => /var\\(--.+\\)/.test(strColor)\n"],"names":[],"mappings":"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"}