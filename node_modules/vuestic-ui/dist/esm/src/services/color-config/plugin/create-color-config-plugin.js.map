{"version":3,"file":"create-color-config-plugin.js","sources":["../../../../../../src/services/color-config/plugin/create-color-config-plugin.ts"],"sourcesContent":["import { App, watch } from 'vue'\nimport { GlobalConfig } from '../../global-config/global-config'\nimport { isServer } from '../../../utils/ssr-utils'\nimport { getGlobalProperty } from '../../../vuestic-plugin/utils'\n\nexport const setCSSVariable = (name: string, value: string, root: HTMLElement) => {\n  root.style.setProperty(`--va-${name}`, value)\n}\n\nexport const createColorConfigPlugin = (app: App) => {\n  const globalConfig = getGlobalProperty(app, '$vaConfig').globalConfig\n\n  /** Renders CSS variables string. Use this in SSR mode */\n  const renderCSSVariables = (colors: GlobalConfig['colors'] = globalConfig.value.colors) => {\n    if (!colors) { return }\n\n    const colorNames = Object.keys(colors)\n    return colorNames.map((key) => `--va-${key}: ${colors[key]}`).join(';')\n  }\n\n  const updateColors = (newValue: GlobalConfig['colors']) => {\n    if (!newValue) { return }\n    if (isServer()) { return }\n\n    const root = document.documentElement\n\n    const colorNames = Object.keys(newValue)\n    colorNames.forEach((key) => {\n      setCSSVariable(key, newValue[key], root)\n    })\n  }\n\n  updateColors(globalConfig.value.colors)\n\n  watch(() => globalConfig.value.colors, (newValue) => {\n    updateColors(newValue)\n  }, { immediate: true, deep: true })\n\n  return {\n    // Let's have this method for a while, it is used in nuxt plugin that uses `latest` vuestic-ui version.\n    /** @deprecated it's typo here, lol */\n    renderCSSVarialbes: renderCSSVariables,\n    renderCSSVariables,\n    updateColors,\n  }\n}\n"],"names":[],"mappings":";;;AAKO,MAAM,iBAAiB,CAAC,MAAc,OAAe,SAAsB;AAChF,OAAK,MAAM,YAAY,QAAQ,QAAQ,KAAK;AAC9C;AAEa,MAAA,0BAA0B,CAAC,QAAa;AACnD,QAAM,eAAe,kBAAkB,KAAK,WAAW,EAAE;AAGzD,QAAM,qBAAqB,CAAC,SAAiC,aAAa,MAAM,WAAW;AACzF,QAAI,CAAC,QAAQ;AAAE;AAAA,IAAO;AAEhB,UAAA,aAAa,OAAO,KAAK,MAAM;AAC9B,WAAA,WAAW,IAAI,CAAC,QAAQ,QAAQ,QAAQ,OAAO,MAAM,EAAE,KAAK,GAAG;AAAA,EAAA;AAGlE,QAAA,eAAe,CAAC,aAAqC;AACzD,QAAI,CAAC,UAAU;AAAE;AAAA,IAAO;AACxB,QAAI,YAAY;AAAE;AAAA,IAAO;AAEzB,UAAM,OAAO,SAAS;AAEhB,UAAA,aAAa,OAAO,KAAK,QAAQ;AAC5B,eAAA,QAAQ,CAAC,QAAQ;AACX,qBAAA,KAAK,SAAS,MAAM,IAAI;AAAA,IAAA,CACxC;AAAA,EAAA;AAGU,eAAA,aAAa,MAAM,MAAM;AAEtC,QAAM,MAAM,aAAa,MAAM,QAAQ,CAAC,aAAa;AACnD,iBAAa,QAAQ;AAAA,KACpB,EAAE,WAAW,MAAM,MAAM,KAAM,CAAA;AAE3B,SAAA;AAAA,IAGL,oBAAoB;AAAA,IACpB;AAAA,IACA;AAAA,EAAA;AAEJ;;"}