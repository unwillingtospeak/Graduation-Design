{"version":3,"file":"VaTimePicker.js","sources":["../../../../../src/components/va-time-picker/VaTimePicker.vue"],"sourcesContent":["<template>\n  <div\n    class=\"va-time-picker\"\n    :class=\"computedClasses\"\n    :style=\"computedStyles\"\n  >\n    <VaTimePickerColumn\n      v-for=\"(column, idx) in columns\" :key=\"idx\"\n      :ref=\"setItemRef\"\n      :items=\"column.items\"\n      :tabindex=\"disabled ? -1 : 0\"\n      :cell-height=\"$props.cellHeight\"\n      v-model:activeItemIndex=\"column.activeItem.value\"\n      @keydown.right.stop.prevent=\"focusNext()\"\n      @keydown.tab.exact.stop.prevent=\"focusNext()\"\n      @keydown.left.stop.prevent=\"focusPrev()\"\n      @keydown.shift.tab.stop.prevent=\"focusPrev()\"\n      @focus=\"activeColumnIndex = idx\"\n    />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, computed, PropType } from 'vue'\nimport { useTimePicker } from './hooks/useTimePicker'\n\nimport { VaTimePickerColumn } from './components/VaTimePickerColumn'\n\nimport {\n  useStatefulProps,\n  useStatefulEmits,\n  useStateful,\n  useFormProps,\n  useForm,\n  useArrayRefs,\n  useCSSVariables,\n} from '../../composables'\n\nexport default defineComponent({\n  name: 'VaTimePicker',\n\n  components: { VaTimePickerColumn },\n\n  props: {\n    ...useStatefulProps,\n    ...useFormProps,\n    modelValue: { type: Date, required: false },\n    ampm: { type: Boolean, default: false },\n    hidePeriodSwitch: { type: Boolean, default: false },\n    periodUpdatesModelValue: { type: Boolean, default: true }, // Update model value when switching period automatically\n    view: { type: String as PropType<'hours' | 'minutes' | 'seconds'>, default: 'minutes' },\n    hoursFilter: { type: Function as PropType<(h: number) => boolean> },\n    minutesFilter: { type: Function as PropType<(h: number) => boolean> },\n    secondsFilter: { type: Function as PropType<(h: number) => boolean> },\n    framed: { type: Boolean, default: false },\n    cellHeight: { type: Number, default: 30 },\n    visibleCellsCount: { type: Number, default: 7 },\n  },\n\n  emits: useStatefulEmits,\n\n  setup (props, { emit }) {\n    const { valueComputed } = useStateful(props, emit)\n    const { columns, isPM } = useTimePicker(props, valueComputed)\n\n    const { setItemRef, itemRefs: pickers } = useArrayRefs()\n\n    const activeColumnIndex = ref<number>()\n\n    const focus = (idx = 0): void => {\n      pickers.value[idx]?.focus()\n    }\n\n    const blur = (idx?: number): void => {\n      idx ? pickers.value[idx]?.blur() : pickers.value.forEach((el) => el?.blur())\n    }\n\n    const { computedClasses: computedFormClasses } = useForm('va-time-picker', props)\n\n    const focusNext = () => {\n      const nextIndex = (activeColumnIndex?.value || 0) + 1\n\n      activeColumnIndex.value = nextIndex % columns.value.length\n      focus(activeColumnIndex.value)\n    }\n\n    const focusPrev = () => {\n      const nextIndex = (activeColumnIndex?.value || 0) - 1 + columns.value.length\n\n      activeColumnIndex.value = nextIndex % columns.value.length\n      focus(activeColumnIndex.value)\n    }\n\n    const computedClasses = computed(() => ({\n      ...computedFormClasses,\n      'va-time-picker--framed': props.framed,\n    }))\n\n    const computedStyles = useCSSVariables('va-time-picker', () => {\n      const gapHeight = (props.visibleCellsCount - 1) / 2 * props.cellHeight\n\n      return {\n        height: `${props.cellHeight * props.visibleCellsCount}px`,\n        'cell-height': `${props.cellHeight}px`,\n        'column-gap-height': `${gapHeight}px`,\n      }\n    })\n\n    return {\n      columns,\n      computedStyles,\n      computedClasses,\n      isPM,\n      pickers,\n      setItemRef,\n\n      focusNext,\n      focusPrev,\n      activeColumnIndex,\n\n      focus,\n      blur,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n  @import './_variables.scss';\n\n  @mixin after-overlay {\n    position: relative;\n\n    &::after {\n      content: '';\n      position: absolute;\n      height: 100%;\n      width: 100%;\n      z-index: 1;\n    }\n  }\n\n  .va-time-picker {\n    display: var(--va-time-picker-display);\n    justify-content: center;\n    overflow: hidden;\n    height: var(--va-time-picker-height);\n    font-family: var(--va-font-family);\n\n    &--readonly {\n      @include after-overlay();\n    }\n\n    &--disabled {\n      @include after-overlay();\n\n      opacity: var(--va-time-picker-disabled-opacity);\n    }\n\n    &--framed {\n      position: relative;\n\n      &::before {\n        content: \"\";\n        height: var(--va-time-picker-cell-height);\n        width: 100%;\n        position: absolute;\n        top: 50%;\n        left: 0;\n        transform: translateY(-50%);\n        border-top: 1px solid var(--va-divider);\n        border-bottom: 1px solid var(--va-divider);\n        z-index: 0;\n      }\n    }\n  }\n</style>\n"],"names":["_createElementBlock","_normalizeClass","_normalizeStyle","_openBlock","_Fragment","_renderList","_createBlock","_withKeys","_withModifiers"],"mappings":"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"}