{"version":3,"file":"useRows.js","sources":["../../../../../../src/components/va-data-table/hooks/useRows.ts"],"sourcesContent":["import { Ref, computed } from 'vue'\n\nimport { getValueByPath } from '../../../services/utils'\n\nimport type {\n  DataTableColumnInternal,\n  DataTableItem,\n  DataTableCell,\n  DataTableRow,\n  DataTableItemKey,\n} from '../types'\n\nexport const getItemKey = (source: DataTableItem, itemsTrackBy: string | ((item: DataTableItem) => any)): DataTableItemKey => (\n  typeof itemsTrackBy === 'function'\n    ? itemsTrackBy(source)\n    : getValueByPath(source, itemsTrackBy) || source\n)\n\ninterface useRowsProps {\n  items: DataTableItem[]\n  itemsTrackBy: string | ((item: DataTableItem) => any)\n  [prop: string]: unknown\n}\n\nconst buildTableCell = (\n  rowIndex: number,\n  rowKey: string,\n  rowData: DataTableItem,\n  column: DataTableColumnInternal,\n): DataTableCell => {\n  const source = getValueByPath(rowData, column.key)\n\n  return {\n    rowIndex,\n    rowKey,\n    rowData,\n    column,\n    source,\n    value: source?.toString?.() || '',\n  }\n}\n\nconst buildTableRow = (\n  source: DataTableItem,\n  initialIndex: number,\n  itemsTrackBy: string | ((item: DataTableItem) => any),\n  columns: DataTableColumnInternal[],\n): DataTableRow => {\n  const itemKey = getItemKey(source, itemsTrackBy)\n\n  return {\n    initialIndex,\n    itemKey,\n    source,\n    cells: columns.map(column => buildTableCell(initialIndex, itemKey, source, column)),\n  }\n}\n\nexport default function useRows (\n  columns: Ref<DataTableColumnInternal[]>,\n  props: useRowsProps,\n) {\n  const rowsComputed = computed(() => props.items\n    .map((rawItem, index) => buildTableRow(rawItem, index, props.itemsTrackBy, columns.value)))\n\n  return {\n    rowsComputed,\n  }\n}\n"],"names":[],"mappings":";;AAYO,MAAM,aAAa,CAAC,QAAuB,iBAChD,OAAO,iBAAiB,aACpB,aAAa,MAAM,IACnB,eAAe,QAAQ,YAAY,KAAK;AAS9C,MAAM,iBAAiB,CACrB,UACA,QACA,SACA,WACkB;;AAClB,QAAM,SAAS,eAAe,SAAS,OAAO,GAAG;AAE1C,SAAA;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,OAAO,wCAAQ,aAAR,oCAAwB;AAAA,EAAA;AAEnC;AAEA,MAAM,gBAAgB,CACpB,QACA,cACA,cACA,YACiB;AACX,QAAA,UAAU,WAAW,QAAQ,YAAY;AAExC,SAAA;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA,OAAO,QAAQ,IAAI,CAAA,WAAU,eAAe,cAAc,SAAS,QAAQ,MAAM,CAAC;AAAA,EAAA;AAEtF;AAEA,iBACE,SACA,OACA;AACA,QAAM,eAAe,SAAS,MAAM,MAAM,MACvC,IAAI,CAAC,SAAS,UAAU,cAAc,SAAS,OAAO,MAAM,cAAc,QAAQ,KAAK,CAAC,CAAC;AAErF,SAAA;AAAA,IACL;AAAA,EAAA;AAEJ;;"}