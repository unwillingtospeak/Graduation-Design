{"version":3,"file":"VaRating.js","sources":["../../../../../src/components/va-rating/VaRating.vue"],"sourcesContent":["<template>\n  <div\n    class=\"va-rating\"\n    :class=\"rootClass\"\n    :aria-label=\"`current rating ${$props.modelValue} of ${$props.max}`\"\n  >\n    <div\n      class=\"va-rating__item-wrapper\"\n      @keyup.left=\"onArrowKeyPress(-1)\"\n      @keyup.right=\"onArrowKeyPress(1)\"\n      @mouseenter=\"onMouseEnter\"\n      @mouseleave=\"onMouseLeave\"\n    >\n      <va-rating-item\n        v-for=\"itemNumber in $props.max\"\n        :key=\"itemNumber\"\n        v-bind=\"VaRatingItemProps\"\n        :aria-label=\"`vote rating ${itemNumber} of ${$props.max}`\"\n        :model-value=\"getItemValue(itemNumber - 1)\"\n        :tabindex=\"tabIndexComputed\"\n        :disabled=\"$props.disabled\"\n        :readonly=\"$props.readonly\"\n        @hover=\"isInteractionsEnabled && onItemHoveredValueUpdate(itemNumber - 1, $event)\"\n        @update:model-value=\"isInteractionsEnabled && onItemValueUpdate(itemNumber - 1, $event)\"\n      >\n        <template v-if=\"$props.numbers\" v-slot=\"{ props }\">\n          <VaRatingItemNumberButton\n            v-bind=\"VaRatingItemNumberButtonProps\"\n            :model-value=\"props.value\"\n            :item-number=\"itemNumber\"\n            @click=\"props.onClick\"\n          />\n        </template>\n      </va-rating-item>\n    </div>\n    <span\n      v-if=\"$props.texts && $props.texts.length === $props.max\"\n      class=\"va-rating__text-wrapper\"\n      :style=\"{ color: computedColor }\"\n    >\n      {{ $props.texts[Math.round(visibleValue) - 1] }}\n    </span>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed, PropType } from 'vue'\n\nimport { extractComponentProps, filterComponentProps } from '../../utils/child-props'\nimport { useForm, useFormProps } from '../../composables'\nimport { useRating, useRatingProps } from './hooks/useRating'\nimport { useVaRatingColors, useVaRatingColorsProps } from './hooks/useVaRatingColors'\n\nimport { RatingValue } from './types'\n\nimport VaRatingItem from './components/VaRatingItem/VaRatingItem.vue'\nimport VaRatingItemNumberButton from './components/VaRatingItemNumberButton.vue'\n\nconst VaRatingItemProps = extractComponentProps(VaRatingItem)\nconst VaRatingItemNumberButtonProps = extractComponentProps(VaRatingItemNumberButton, ['modelValue', 'itemNumber'])\n\nexport default defineComponent({\n  name: 'VaRating',\n  props: {\n    ...useRatingProps,\n    ...useVaRatingColorsProps,\n    ...useFormProps,\n    ...VaRatingItemProps,\n    ...VaRatingItemNumberButtonProps,\n    numbers: { type: Boolean, default: false },\n    halves: { type: Boolean, default: false },\n    max: { type: Number, default: 5 },\n    texts: { type: Array as PropType<string[]>, default: () => [] },\n  },\n  emits: ['update:modelValue'],\n  components: { VaRatingItem, VaRatingItemNumberButton },\n  setup (props) {\n    const { computedClasses: rootClass } = useForm('va-rating', props)\n    const rating = useRating(props)\n    const isInteractionsEnabled = computed(() => !props.disabled && !props.readonly)\n\n    return {\n      ...useVaRatingColors(props),\n      ...rating,\n      rootClass,\n      VaRatingItemProps: filterComponentProps(props, VaRatingItemProps),\n      VaRatingItemNumberButtonProps: filterComponentProps(props, VaRatingItemNumberButtonProps),\n      isInteractionsEnabled,\n      tabIndexComputed: computed(() => isInteractionsEnabled.value ? 0 : undefined),\n      onArrowKeyPress: (direction: 1 | -1) => {\n        const step = props.halves ? RatingValue.HALF : RatingValue.FULL\n        rating.onItemValueUpdate(rating.visibleValue.value, step * direction)\n      },\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"../../styles/resources\";\n@import 'variables';\n\n.va-rating {\n  display: var(--va-rating-display);\n  font-family: var(--va-font-family);\n\n  &__number-item {\n    @include normalize-button();\n\n    font-size: var(--va-rating-number-item-font-size);\n    margin: var(--va-rating-number-item-margin);\n    font-weight: var(--va-rating-number-item-font-weight);\n\n    @include flex-center();\n\n    cursor: pointer;\n\n    @at-root {\n      .va-rating--disabled & {\n        @include va-disabled();\n      }\n\n      .va-rating--readonly & {\n        cursor: default;\n      }\n    }\n  }\n\n  &__item-wrapper {\n    display: var(--va-rating-item-wrapper-display);\n    cursor: var(--va-rating-item-wrapper-cursor);\n\n    @at-root {\n      .va-rating--readonly &,\n      .va-rating--disabled & {\n        cursor: default;\n      }\n    }\n  }\n\n  &-item {\n    display: var(--va-rating-item-display);\n\n    @include flex-center();\n\n    .va-rating--disabled & {\n      @include va-disabled();\n\n      &__wrapper {\n        cursor: initial !important;\n      }\n    }\n\n    .va-rating--readonly & &__wrapper {\n      cursor: initial !important;\n    }\n  }\n\n  &__text-wrapper {\n    padding-left: 10px;\n  }\n}\n</style>\n"],"names":["VaRatingItem","_createElementBlock","_normalizeClass","_createElementVNode","_withKeys","_openBlock","_Fragment","_renderList","_createBlock","_mergeProps","_createSlots","_withCtx","_createVNode","_normalizeStyle","_toDisplayString","_createCommentVNode"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA,MAAM,oBAAoB,sBAAsBA,aAAY;AAC5D,MAAM,gCAAgC,sBAAsB,0BAA0B,CAAC,cAAc,YAAY,CAAC;AAElH,MAAK,YAAa,gBAAa;AAAA,EAC7B,MAAM;AAAA,EACN,OAAO,6FACF,iBACA,yBACA,eACA,oBACA,gCALE;AAAA,IAML,SAAS,EAAE,MAAM,SAAS,SAAS,MAAM;AAAA,IACzC,QAAQ,EAAE,MAAM,SAAS,SAAS,MAAM;AAAA,IACxC,KAAK,EAAE,MAAM,QAAQ,SAAS,EAAE;AAAA,IAChC,OAAO,EAAE,MAAM,OAA6B,SAAS,MAAM,CAAA,EAAG;AAAA,EAChE;AAAA,EACA,OAAO,CAAC,mBAAmB;AAAA,EAC3B,YAAY,EAAA,cAAEA,eAAc,yBAAyB;AAAA,EACrD,MAAO,OAAO;AACZ,UAAM,EAAE,iBAAiB,cAAc,QAAQ,aAAa,KAAK;AAC3D,UAAA,SAAS,UAAU,KAAK;AACxB,UAAA,wBAAwB,SAAS,MAAM,CAAC,MAAM,YAAY,CAAC,MAAM,QAAQ;AAExE,WAAA,gDACF,kBAAkB,KAAK,IACvB,SAFE;AAAA,MAGL;AAAA,MACA,mBAAmB,qBAAqB,OAAO,iBAAiB;AAAA,MAChE,+BAA+B,qBAAqB,OAAO,6BAA6B;AAAA,MACxF;AAAA,MACA,kBAAkB,SAAS,MAAM,sBAAsB,QAAQ,IAAI,MAAS;AAAA,MAC5E,iBAAiB,CAAC,cAAsB;AACtC,cAAM,OAAO,MAAM,SAAS,YAAY,OAAO,YAAY;AAC3D,eAAO,kBAAkB,OAAO,aAAa,OAAO,OAAO,SAAS;AAAA,MACtE;AAAA,IAAA;AAAA,EAEJ;AACF,CAAC;;;;;sBA9FCC,mBAyCM,OAAA;AAAA,IAxCJ,OAAKC,eAAC,CAAA,aACE,KAAS,SAAA,CAAA;AAAA,IAChB,cAAU,kBAAoB,KAAO,OAAA,iBAAiB,KAAO,OAAA;AAAA,EAAA,GAAA;AAAA,IAE9DC,mBA4BM,OAAA;AAAA,MA3BJ,OAAM;AAAA,MACL,SAAK;AAAA,QAAA,OAAA,MAAA,QAAA,KAAAC,SAAA,CAAA,WAAO,KAAe,gBAAA,EAAA,GAAA,CAAA,MAAA,CAAA;AAAA,QAAA,OAAA,MAAA,QAAA,KAAAA,SAAA,CAAA,WACd,KAAe,gBAAA,CAAA,GAAA,CAAA,OAAA,CAAA;AAAA,MAAA;AAAA,MAC5B,cAAU,OAAE,MAAA,QAAA,KAAA,IAAA,SAAA,KAAA,gBAAA,KAAA,aAAA,GAAA,IAAA;AAAA,MACZ,cAAU,OAAE,MAAA,QAAA,KAAA,IAAA,SAAA,KAAA,gBAAA,KAAA,aAAA,GAAA,IAAA;AAAA,IAAA,GAAA;AAAA,MAEbC,WAAA,IAAA,GAAAJ,mBAoBiBK,UAnBM,MAAAC,WAAA,KAAA,OAAO,KAAG,CAAxB,eAAU;AADnB,eAAAF,UAAA,GAAAG,YAoBiB,2BApBjBC,WAoBiB,EAlBd,KAAK,WAAA,GACE,KAAiB,mBAAA;AAAA,UACxB,cAAU,eAAiB,iBAAiB,KAAO,OAAA;AAAA,UACnD,eAAa,kBAAa,aAAU,CAAA;AAAA,UACpC,UAAU,KAAA;AAAA,UACV,UAAU,KAAO,OAAA;AAAA,UACjB,UAAU,KAAO,OAAA;AAAA,UACjB,SAAK,CAAE,WAAA,KAAA,yBAAyB,KAAyB,yBAAA,aAAU,GAAM,MAAM;AAAA,UAC/E,uBAAkB,CAAE,WAAA,KAAA,yBAAyB,KAAkB,kBAAA,aAAU,GAAM,MAAM;AAAA,QAAA,CAAA,GAAAC,YAAA,EAAA,GAAA,EAAA,GAAA;AAAA,UAEtE,KAAO,OAAA,UAAA;AAAA;YACrB,IAAAC,QAAA,CAKE,EANsC,YAAK;AAAA,cAC7CC,YAKE,qCALFH,WACU,KAIR,+BAJqC;AAAA,gBACpC,eAAa,MAAM;AAAA,gBACnB,eAAa;AAAA,gBACb,SAAO,MAAM;AAAA,cAAA,CAAA,GAAA,MAAA,IAAA,CAAA,eAAA,eAAA,SAAA,CAAA;AAAA;;;;;IAMd,KAAA,OAAO,SAAS,KAAO,OAAA,MAAM,WAAW,KAAA,OAAO,oBADvDR,mBAMO,QAAA;AAAA,MAAA,KAAA;AAAA,MAJL,OAAM;AAAA,MACL,OAAKY,wBAAW,KAAa,cAAA,CAAA;AAAA,IAAA,GAAAC,gBAE3B,KAAO,OAAA,MAAM,KAAK,MAAM,KAAY,YAAA,IAAA,EAAA,GAAA,CAAA,KAAAC,mBAAA,IAAA,IAAA;AAAA;;;;"}