var __defProp = Object.defineProperty;
var __defProps = Object.defineProperties;
var __getOwnPropDescs = Object.getOwnPropertyDescriptors;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a, b) => {
  for (var prop in b || (b = {}))
    if (__hasOwnProp.call(b, prop))
      __defNormalProp(a, prop, b[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b)) {
      if (__propIsEnum.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    }
  return a;
};
var __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));
import { ref, computed } from "vue";
import { i as isDate_1 } from "../../../../vendor.js";
const JANUARY_MONTH_INDEX = 0;
const DECEMBER_MONTH_INDEX = 11;
const addMonth = (view) => {
  if (view.month === DECEMBER_MONTH_INDEX) {
    return __spreadProps(__spreadValues({}, view), { year: view.year + 1, month: JANUARY_MONTH_INDEX });
  } else {
    return __spreadProps(__spreadValues({}, view), { month: view.month + 1 });
  }
};
const subMonth = (view) => {
  if (view.month === JANUARY_MONTH_INDEX) {
    return __spreadProps(__spreadValues({}, view), { year: view.year - 1, month: DECEMBER_MONTH_INDEX });
  } else {
    return __spreadProps(__spreadValues({}, view), { month: view.month - 1 });
  }
};
const getDefaultDate = (modelValue) => {
  if (isDate_1(modelValue)) {
    return modelValue;
  }
  if (isDate_1(modelValue == null ? void 0 : modelValue.start)) {
    return modelValue.start;
  }
  if (Array.isArray(modelValue) && isDate_1(modelValue[0])) {
    return modelValue[0];
  }
  return new Date();
};
const useView = (props, emit, defaultOverride) => {
  const defaultDate = getDefaultDate(props.modelValue);
  const defaultView = __spreadValues({
    type: "day",
    year: defaultDate.getFullYear(),
    month: defaultDate.getMonth()
  }, defaultOverride);
  const statefulView = ref(defaultView);
  const syncView = computed({
    get() {
      return __spreadValues(__spreadValues({}, statefulView.value), props.view);
    },
    set(view) {
      statefulView.value = view;
      emit("update:view", view);
    }
  });
  const next = () => {
    if (syncView.value.type === "day") {
      syncView.value = addMonth(syncView.value);
    } else if (syncView.value.type === "month") {
      syncView.value = __spreadProps(__spreadValues({}, syncView.value), { year: syncView.value.year + 1 });
    }
  };
  const prev = () => {
    if (syncView.value.type === "day") {
      syncView.value = subMonth(syncView.value);
    } else if (syncView.value.type === "month") {
      syncView.value = __spreadProps(__spreadValues({}, syncView.value), { year: syncView.value.year - 1 });
    }
  };
  return {
    syncView,
    next,
    prev
  };
};
export { useView as u };
//# sourceMappingURL=view.js.map
