{"version":3,"file":"VaImage.js","sources":["../../../../../src/components/va-image/VaImage.vue"],"sourcesContent":["<template>\n  <div class=\"va-image\" aria-live=\"polite\">\n    <div\n      v-if=\"loadingError\"\n      class=\"va-image__error\"\n    >\n      <slot name=\"error\" />\n    </div>\n\n    <div :style=\"paddingStyles\" />\n    <div\n      v-show=\"!loadingError && !loading\"\n      class=\"va-image__img\"\n    >\n      <img\n        :style=\"imageStyles\"\n        :src=\"$props.src\"\n        :alt=\"$props.alt\"\n        @error=\"handleError\"\n        @load=\"handleLoad\"\n      />\n    </div>\n    <div class=\"va-image__overlay\">\n      <slot />\n    </div>\n    <div\n      v-if=\"loading\"\n      class=\"va-image__loader\"\n    >\n      <slot name=\"loader\" />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed, watch, ref } from 'vue'\n\nexport default defineComponent({\n  name: 'VaImage',\n  emits: ['loaded', 'error'],\n  props: {\n    ratio: { type: Number, default: 1 },\n    contain: { type: Boolean, default: false },\n    src: { type: String, required: true },\n    alt: { type: String, default: '' },\n  },\n  setup (props, { emit }) {\n    const loading = ref(true)\n    const loadingError = ref(false)\n\n    const imageStyles = computed(() => ({\n      objectFit: props.contain ? 'contain' as const : 'cover' as const,\n    }))\n\n    const paddingStyles = computed(() => ({\n      paddingBottom: `${1 / props.ratio * 100}%`,\n    }))\n\n    const handleLoad = () => {\n      loading.value = false\n      emit('loaded', props.src)\n    }\n\n    const handleError = (err: Event) => {\n      loadingError.value = true\n      loading.value = false\n      emit('error', err)\n    }\n\n    watch(() => props.src, () => {\n      loading.value = true\n      loadingError.value = false\n    })\n\n    return {\n      loading,\n      loadingError,\n      imageStyles,\n      paddingStyles,\n      handleLoad,\n      handleError,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"../../styles/resources\";\n@import \"variables\";\n\n.va-image {\n  overflow: var(--va-image-overflow);\n  position: var(--va-image-position);\n  font-family: var(--va-font-family);\n\n  img {\n    height: 100%;\n    width: 100%;\n  }\n\n  &__img,\n  &__loader,\n  &__error,\n  &__overlay {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n  }\n\n  &__loader,\n  &__error,\n  &__overlay {\n    @include flex-center();\n  }\n}\n</style>\n"],"names":["_openBlock","_createElementBlock","_renderSlot","_createCommentVNode","_createElementVNode","_normalizeStyle","_withDirectives","_vShow"],"mappings":";;;AAqCA,MAAK,YAAa,gBAAa;AAAA,EAC7B,MAAM;AAAA,EACN,OAAO,CAAC,UAAU,OAAO;AAAA,EACzB,OAAO;AAAA,IACL,OAAO,EAAE,MAAM,QAAQ,SAAS,EAAE;AAAA,IAClC,SAAS,EAAE,MAAM,SAAS,SAAS,MAAM;AAAA,IACzC,KAAK,EAAE,MAAM,QAAQ,UAAU,KAAK;AAAA,IACpC,KAAK,EAAE,MAAM,QAAQ,SAAS,GAAG;AAAA,EACnC;AAAA,EACA,MAAO,OAAO,EAAE,QAAQ;AAChB,UAAA,UAAU,IAAI,IAAI;AAClB,UAAA,eAAe,IAAI,KAAK;AAExB,UAAA,cAAc,SAAS,MAAO;AAAA,MAClC,WAAW,MAAM,UAAU,YAAqB;AAAA,IAChD,EAAA;AAEI,UAAA,gBAAgB,SAAS,MAAO;AAAA,MACpC,eAAe,GAAG,IAAI,MAAM,QAAQ;AAAA,IACpC,EAAA;AAEF,UAAM,aAAa,MAAM;AACvB,cAAQ,QAAQ;AACX,WAAA,UAAU,MAAM,GAAG;AAAA,IAAA;AAGpB,UAAA,cAAc,CAAC,QAAe;AAClC,mBAAa,QAAQ;AACrB,cAAQ,QAAQ;AAChB,WAAK,SAAS,GAAG;AAAA,IAAA;AAGb,UAAA,MAAM,MAAM,KAAK,MAAM;AAC3B,cAAQ,QAAQ;AAChB,mBAAa,QAAQ;AAAA,IAAA,CACtB;AAEM,WAAA;AAAA,MACL;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IAAA;AAAA,EAEJ;AACF,CAAC;;EAlFM,OAAM;AAAA,EAAW,aAAU;;;;EAG5B,OAAM;;AAQN,MAAA,aAAA,EAAA,OAAM;;AAUH,MAAA,aAAA,EAAA,OAAM;;;EAKT,OAAM;;;AA1BV,SAAAA,UAAA,GAAAC,mBA8BM,OA9BN,YA8BM;AAAA,IA5BI,KAAA,eAAAD,WAAA,GADRC,mBAKM,OALN,YAKM;AAAA,MADJC,WAAqB,KAAA,QAAA,OAAA;AAAA,IAAA,CAAA,KAAAC,mBAAA,IAAA,IAAA;AAAA,IAGvBC,mBAA8B,OAAA;AAAA,MAAxB,OAAKC,eAAE,KAAa,aAAA;AAAA,IAAA,GAAA,MAAA,CAAA;AAAA,IAC1BC,eAAAF,mBAWM,OAXN,YAWM;AAAA,MAPJA,mBAME,OAAA;AAAA,QALC,OAAKC,eAAE,KAAW,WAAA;AAAA,QAClB,KAAK,KAAO,OAAA;AAAA,QACZ,KAAK,KAAO,OAAA;AAAA,QACZ,SAAK,OAAE,MAAA,QAAA,KAAA,IAAA,SAAA,KAAA,eAAA,KAAA,YAAA,GAAA,IAAA;AAAA,QACP,QAAI,OAAE,MAAA,QAAA,KAAA,IAAA,SAAA,KAAA,cAAA,KAAA,WAAA,GAAA,IAAA;AAAA,MAAA,GAAA,MAAA,IAAA,UAAA;AAAA;MARA,CAAAE,OAAA,CAAA,KAAA,gBAAY,CAAK,KAAO,OAAA;AAAA,IAAA,CAAA;AAAA,IAWnCH,mBAEM,OAFN,YAEM;AAAA,MADJF,WAAQ,KAAA,QAAA,SAAA;AAAA,IAAA,CAAA;AAAA,IAGF,KADR,UAAAF,WAAA,GAAAC,mBAKM,OALN,YAKM;AAAA,MADJC,WAAsB,KAAA,QAAA,QAAA;AAAA,IAAA,CAAA,KAAAC,mBAAA,IAAA,IAAA;AAAA;;;;"}