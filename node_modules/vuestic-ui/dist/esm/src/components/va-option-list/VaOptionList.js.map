{"version":3,"file":"VaOptionList.js","sources":["../../../../../src/components/va-option-list/VaOptionList.vue"],"sourcesContent":["<template>\n  <VaMessageListWrapper\n    :error=\"computedError\"\n    :error-messages=\"computedErrorMessages\"\n    :error-count=\"$props.errorCount\"\n  >\n    <ul class=\"va-option-list__list\">\n      <li\n        v-for=\"option in $props.options\"\n        :key=\"getKey(option)\"\n      >\n        <slot v-bind=\"{ option, selectedValue, isDisabled, getText, getValue }\">\n          <va-radio\n            v-if=\"$props.type === 'radio'\"\n            :ref=\"setItemRef\"\n            v-model=\"selectedValue\"\n            :label=\"getText(option)\"\n            :disabled=\"isDisabled(option)\"\n            :option=\"getValue(option)\"\n            v-bind=\"computedProps\"\n          />\n          <va-checkbox\n            v-else-if=\"$props.type === 'checkbox'\"\n            :ref=\"setItemRef\"\n            v-model=\"selectedValue\"\n            :label=\"getText(option)\"\n            :disabled=\"isDisabled(option)\"\n            :array-value=\"getValue(option)\"\n            v-bind=\"computedProps\"\n          />\n          <va-switch\n            v-else\n            :ref=\"setItemRef\"\n            v-model=\"selectedValue\"\n            :label=\"getText(option)\"\n            :disabled=\"isDisabled(option)\"\n            :array-value=\"getValue(option)\"\n            v-bind=\"computedProps\"\n          />\n        </slot>\n      </li>\n    </ul>\n  </VaMessageListWrapper>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, PropType, onMounted } from 'vue'\nimport pick from 'lodash/pick'\n\nimport { __DEV__ } from '../../utils/global-utils'\nimport {\n  useSelectableList, useSelectableListProps, SelectableOption,\n  useValidation, useValidationProps,\n  useStateful, useStatefulProps, useStatefulEmits,\n  useArrayRefs,\n} from '../../composables'\n\nimport { VaMessageListWrapper } from '../va-input'\nimport { VaCheckbox } from '../va-checkbox'\nimport { VaRadio } from '../va-radio'\nimport { VaSwitch } from '../va-switch'\n\ntype OptionListValue = SelectableOption | SelectableOption[] | null\n\nexport default defineComponent({\n  name: 'VaOptionList',\n  components: {\n    VaRadio,\n    VaCheckbox,\n    VaSwitch,\n    VaMessageListWrapper,\n  },\n  emits: [...useStatefulEmits],\n  props: {\n    ...useSelectableListProps,\n    ...useValidationProps,\n    ...useStatefulProps,\n    type: {\n      type: String as PropType<'radio' | 'checkbox' | 'switch'>,\n      default: 'checkbox',\n      validator: (type: any) => ['radio', 'checkbox', 'switch'].includes(type),\n    },\n    disabled: ({ type: Boolean, default: false }),\n    readonly: ({ type: Boolean, default: false }),\n    defaultValue: ({ type: [String, Number, Object, Array] as PropType<OptionListValue | null> }),\n    name: ({ type: String, default: '' }),\n    color: ({ type: String, default: 'primary' }),\n    leftLabel: ({ type: Boolean, default: false }),\n    modelValue: ({ type: [String, Number, Object, Array] as PropType<OptionListValue | null> }),\n  },\n\n  setup (props, { emit }) {\n    const { valueComputed } = useStateful(props, emit, props.defaultValue)\n\n    const { getValue, getText, getTrackBy, getDisabled } = useSelectableList(props)\n\n    const { itemRefs, setItemRef } = useArrayRefs()\n\n    const isRadio = computed(() => props.type === 'radio')\n\n    const selectedValue = computed({\n      get () {\n        const value = isRadio.value ? null : []\n\n        return valueComputed.value || value as OptionListValue\n      },\n      set (value: OptionListValue) {\n        if (props.readonly) { return }\n\n        if (isRadio.value && !Array.isArray(value)) {\n          valueComputed.value = value ? getValue(value) : value\n        } else {\n          valueComputed.value = Array.isArray(value)\n            ? value.map(getValue)\n            : [value ? getValue(value) : value]\n        }\n      },\n    })\n\n    const getKey = (option: SelectableOption) => getTrackBy(option)\n\n    const isDisabled = (option: SelectableOption) => props.disabled || getDisabled(option)\n\n    const reset = () => { valueComputed.value = undefined }\n\n    const focus = () => {\n      const firstActiveEl = Array.isArray(itemRefs.value) && itemRefs.value.find(el => !(el as HTMLInputElement).disabled)\n\n      if (firstActiveEl && typeof firstActiveEl.focus === 'function') {\n        firstActiveEl.focus()\n      }\n    }\n\n    const { computedError, computedErrorMessages } = useValidation(props, emit, reset, focus)\n\n    const computedProps = computed(() => pick(props, ['name', 'color', 'readonly', 'leftLabel']))\n\n    onMounted(() => {\n      if (__DEV__ && props.type !== 'radio' && !Array.isArray(props.modelValue)) {\n        console.warn(`Prop 'modelValue = ${props.modelValue}' has not a proper type!\\n For component property 'type = ${props.type}' it must be of type 'array'.`)\n      }\n    })\n\n    return {\n      selectedValue,\n      computedError,\n      computedErrorMessages,\n      getValue,\n      getText,\n      getKey,\n      isDisabled,\n      reset,\n      focus,\n      setItemRef,\n      computedProps,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import 'variables';\n\n.va-option-list {\n  &__list {\n    line-height: var(--va-option-list-line-height);\n  }\n}\n</style>\n"],"names":["pick","_createBlock","_createElementVNode","_openBlock","_createElementBlock","_Fragment","_renderList","_renderSlot","_normalizeProps","_guardReactiveProps","_mergeProps"],"mappings":"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"}