{"version":3,"file":"VaPagination.js","sources":["../../../../../src/components/va-pagination/VaPagination.vue"],"sourcesContent":["<template>\n  <va-button-group\n    v-if=\"showPagination\"\n    class=\"va-pagination\"\n    :flat=\"$props.flat\"\n    :size=\"$props.size\"\n    :color=\"$props.color\"\n    outline\n    @keydown.left.stop=\"onUserInput(currentValue - 1)\"\n    @keydown.right.stop=\"onUserInput(currentValue + 1)\"\n  >\n    <va-button\n      v-if=\"showBoundaryLinks\"\n      aria-label=\"go first page\"\n      :disabled=\"$props.disabled || currentValue === 1\"\n      :icon=\"$props.boundaryIconLeft\"\n      @click=\"onUserInput(1)\"\n    />\n    <va-button\n      v-if=\"showDirectionLinks\"\n      aria-label=\"go prev page\"\n      outline\n      :disabled=\"$props.disabled || currentValue === 1\"\n      :icon=\"$props.directionIconLeft\"\n      @click=\"onUserInput(currentValue - 1)\"\n    />\n    <slot v-if=\"!$props.input\">\n      <va-button\n        v-for=\"(n, i) in paginationRange\"\n        :key=\"i\"\n        class=\"va-pagination__numeric-button\"\n        outline\n        :aria-label=\"`go to ${n} page`\"\n        :aria-current=\"n === currentValue\"\n        :style=\"activeButtonStyle(n)\"\n        :disabled=\"$props.disabled || n === '...'\"\n        :class=\"{ 'va-button--ellipsis': n === '...'}\"\n        @click=\"onUserInput(n)\"\n      >\n        {{ n }}\n      </va-button>\n    </slot>\n    <input\n      v-else\n      ref=\"htmlInput\"\n      class=\"va-pagination__input va-button\"\n      aria-label=\"enter the page number to go\"\n      v-model=\"inputValue\"\n      :style=\"inputStyleComputed\"\n      :class=\"{ 'va-pagination__input--flat': $props.flat }\"\n      v-bind=\"inputAttributesComputed\"\n      @keydown.enter=\"changeValue\"\n      @focus=\"focusInput\"\n      @blur=\"changeValue\"\n    />\n    <va-button\n      v-if=\"showDirectionLinks\"\n      aria-label=\"go next page\"\n      outline\n      :disabled=\"$props.disabled || currentValue === lastPage\"\n      :icon=\"$props.directionIconRight\"\n      @click=\"onUserInput(currentValue + 1)\"\n    />\n    <va-button\n      v-if=\"showBoundaryLinks\"\n      aria-label=\"go last page\"\n      outline\n      :disabled=\"$props.disabled || currentValue === lastPage\"\n      :icon=\"$props.boundaryIconRight\"\n      @click=\"onUserInput(lastPage)\"\n    />\n  </va-button-group>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, watch, PropType, ref, computed, nextTick, shallowRef } from 'vue'\n\nimport { __DEV__ } from '../../utils/global-utils'\nimport { useColors, useTextColor, useStateful, useStatefulProps, useStatefulEmits } from '../../composables'\nimport { setPaginationRange } from './setPaginationRange'\n\nimport { VaButtonGroup } from '../va-button-group'\nimport { VaButton } from '../va-button'\n\nexport default defineComponent({\n  name: 'VaPagination',\n  components: { VaButtonGroup, VaButton },\n  emits: useStatefulEmits,\n  props: {\n    ...useStatefulProps,\n    modelValue: { type: Number, default: 1 },\n    visiblePages: { type: Number, default: 0 },\n    pages: { type: Number, default: 0 },\n    disabled: { type: Boolean, default: false },\n    color: { type: String, default: 'primary' },\n    size: {\n      type: String as PropType<'medium' | 'small' | 'large'>,\n      default: 'medium',\n      validator: (v: string) => ['medium', 'small', 'large'].includes(v),\n    },\n    boundaryLinks: { type: Boolean, default: true },\n    boundaryNumbers: { type: Boolean, default: false },\n    directionLinks: { type: Boolean, default: true },\n    input: { type: Boolean, default: false },\n    hideOnSinglePage: { type: Boolean, default: false },\n    flat: { type: Boolean, default: false },\n    total: { type: Number, default: null },\n    pageSize: { type: Number, default: null },\n    boundaryIconLeft: { type: String, default: 'first_page' },\n    boundaryIconRight: { type: String, default: 'last_page' },\n    directionIconLeft: { type: String, default: 'chevron_left' },\n    directionIconRight: { type: String, default: 'chevron_right' },\n  },\n\n  setup (props, { emit }) {\n    const htmlInput = shallowRef<HTMLInputElement>()\n\n    const inputValue = ref('')\n\n    const usedTotal = computed(() => !!((props.total || props.pageSize === 0) && props.pageSize))\n\n    const { valueComputed } = useStateful<number>(props, emit)\n\n    const { textColorComputed } = useTextColor()\n\n    const currentValue = computed({\n      get: () => usedTotal.value ? Math.ceil(valueComputed.value / props.pageSize) || 1 : valueComputed.value,\n      set: (value) => { valueComputed.value = value },\n    })\n\n    const paginationRange = computed(() => {\n      const { visiblePages, total, pageSize, boundaryNumbers, pages } = props\n\n      const value = currentValue.value || 1\n      const totalPages = usedTotal.value ? Math.ceil(total / pageSize) : pages\n\n      return setPaginationRange(value, visiblePages, totalPages, boundaryNumbers)\n    })\n\n    const lastPage = computed(() => usedTotal.value ? Math.ceil(props.total / props.pageSize) || 1 : props.pages)\n\n    const IsLstPageNotVisible = computed(() => (!!props.visiblePages && lastPage.value > props.visiblePages))\n\n    const showBoundaryLinks = computed(() => {\n      const { boundaryLinks, boundaryNumbers, input } = props\n\n      return input || (IsLstPageNotVisible.value && boundaryLinks && !boundaryNumbers)\n    })\n\n    const showDirectionLinks = computed(() => props.input || (IsLstPageNotVisible.value && props.directionLinks))\n\n    const showPagination = computed(() => lastPage.value > 1 || (!props.hideOnSinglePage && lastPage.value <= 1))\n\n    const focusInput = () => {\n      inputValue.value = `${currentValue.value}`\n\n      nextTick(() => htmlInput.value?.setSelectionRange(0, htmlInput.value.value.length))\n    }\n\n    const onUserInput = (pageNum: number | '...') => {\n      if (pageNum === '...' || pageNum < 1 || pageNum > lastPage.value) { return }\n\n      currentValue.value = usedTotal.value ? (pageNum - 1) * props.pageSize + 1 : pageNum\n    }\n\n    const resetInput = () => {\n      inputValue.value = ''\n      htmlInput.value?.blur()\n    }\n\n    const changeValue = () => {\n      if (+inputValue.value === currentValue.value) {\n        resetInput()\n      }\n\n      if (!inputValue.value.length) { return }\n\n      let pageNum = Number.parseInt(inputValue.value)\n\n      switch (true) {\n        case pageNum < 1:\n          pageNum = 1; break\n        case pageNum > lastPage.value:\n          pageNum = lastPage.value; break\n        case isNaN(pageNum):\n          pageNum = currentValue.value; break\n        default: break\n      }\n\n      onUserInput(pageNum)\n      resetInput()\n    }\n\n    const { getColor } = useColors()\n\n    const activeButtonStyle = (buttonValue: number | '...') => {\n      if (buttonValue === currentValue.value) {\n        return {\n          backgroundColor: getColor(props.color),\n          color: textColorComputed.value,\n        }\n      }\n\n      return {\n        color: getColor(props.color),\n      }\n    }\n\n    const inputStyleComputed = computed(() => ({\n      cursor: 'default',\n      color: getColor(props.color),\n      opacity: props.disabled ? 0.4 : 1,\n    }))\n\n    watch([usedTotal, () => props.pages], () => {\n      if (__DEV__ && usedTotal.value && props.pages) {\n        throw new Error('Please, use either `total` and `page-size` props, or `pages`.')\n      }\n    })\n\n    const inputAttributesComputed = computed(() => ({\n      disabled: props.disabled,\n      placeholder: `${currentValue.value}/${lastPage.value}`,\n    }))\n\n    return {\n      currentValue,\n      lastPage,\n      changeValue,\n      inputValue,\n      showPagination,\n      showBoundaryLinks,\n      onUserInput,\n      activeButtonStyle,\n      showDirectionLinks,\n      paginationRange,\n      focusInput,\n      inputStyleComputed,\n      inputAttributesComputed,\n    }\n  },\n})\n</script>\n\n<style lang='scss'>\n@import \"../../styles/resources\";\n@import \"variables\";\n\n.va-pagination {\n  font-family: var(--va-font-family);\n\n  &__input {\n    border-style: var(--va-pagination-input-border-style);\n    border-width: var(--va-pagination-input-border-width);\n    text-align: var(--va-pagination-input-text-align);\n    font-size: var(--va-pagination-input-font-size);\n\n    &--flat {\n      border-top-width: var(--va-pagination-input-flat-border-top-width);\n    }\n  }\n\n  &__numeric-button {\n    &.va-button {\n      .va-button__content {\n        // Remove paddings from button content\n        padding: 0;\n        justify-content: center;\n      }\n\n      // Add paddings to button content in min-width\n      &--normal {\n        .va-button__content {\n          min-width: calc(var(--va-button-content-px) * 2 + var(--va-pagination-button-content-width));\n        }\n      }\n\n      &--small {\n        .va-button__content {\n          min-width: calc(var(--va-button-sm-content-px) * 2 + var(--va-pagination-button-content-width));\n        }\n      }\n\n      &--large {\n        .va-button__content {\n          min-width: calc(var(--va-button-lg-content-px) * 2 + var(--va-pagination-button-content-width));\n        }\n      }\n    }\n  }\n\n  .va-button {\n    &.va-input {\n      cursor: default;\n    }\n\n    &--ellipsis {\n      cursor: default;\n      opacity: 1;\n    }\n\n    &--ellipsis > .va-button__content {\n      opacity: 0.4;\n    }\n\n    &--outline.va-button--disabled {\n      opacity: 1;\n    }\n\n    &--outline.va-button--disabled > .va-button__content {\n      opacity: 0.4;\n    }\n  }\n}\n</style>\n"],"names":["_openBlock","_createBlock","_withKeys","_withModifiers","_createCommentVNode","_renderSlot","_createElementBlock","_Fragment","_renderList","_normalizeClass","_normalizeStyle","_createTextVNode","_toDisplayString","_withDirectives","_mergeProps"],"mappings":"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"}