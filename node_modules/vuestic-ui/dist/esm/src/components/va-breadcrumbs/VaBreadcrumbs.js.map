{"version":3,"file":"VaBreadcrumbs.js","sources":["../../../../../src/components/va-breadcrumbs/VaBreadcrumbs.vue"],"sourcesContent":["<script lang=\"ts\">\nimport { computed, defineComponent, Fragment, h, ref, VNode } from 'vue'\n\nimport { useAlign, useAlignProps, useColors } from '../../composables'\nimport { hasOwnProperty } from '../../services/utils'\n\nexport default defineComponent({\n  name: 'VaBreadcrumbs',\n  props: {\n    ...useAlignProps,\n    separator: { type: String, default: '/' },\n    color: { type: String, default: 'gray' },\n    activeColor: { type: String, default: null },\n    separatorColor: { type: String, default: null },\n  },\n  setup (props, { slots }) {\n    const { alignComputed } = useAlign(props)\n\n    const { getColor } = useColors()\n    const computedThemesSeparatorColor = computed(() => {\n      return props.separatorColor ? getColor(props.separatorColor) : getColor(props.color)\n    })\n    const computedThemesActiveColor = computed(() => {\n      return props.activeColor ? getColor(props.activeColor) : getColor(props.color)\n    })\n\n    const childNodeFilter = (result: VNode[], node?: VNode) => {\n      const nodes = node && node.type === Fragment && node.children ? node.children as VNode[] : [node]\n\n      return [\n        ...result,\n        ...nodes.filter((node?: VNode) => !!(node?.type as any)?.name?.match(/VaBreadcrumbsItem$/)),\n      ]\n    }\n\n    const createSeparatorComponent = () => {\n      // Temp fix for https://github.com/intlify/vue-i18n-next/issues/412\n      // `separatorNode` can be moved outside this method after update vuestic's minimal vue version to 3.1.0\n      // testing: have to monitor errors after leaving breadcrumbs page in doc\n      const separatorNode = slots.separator ? slots.separator() : [props.separator]\n\n      return h('span', {\n        ariaHidden: true,\n        class: ['va-breadcrumbs__separator'],\n        style: [{ color: computedThemesSeparatorColor.value }],\n      }, separatorNode)\n    }\n\n    const isDisabledChild = (child: VNode) => {\n      const childPropData = child?.props\n      if (!childPropData || !hasOwnProperty(childPropData, 'disabled')) {\n        return false\n      }\n\n      if (childPropData.disabled === '') { // NOTE: by default empty attribute is ''\n        return true\n      }\n\n      return Boolean(childPropData.disabled)\n    }\n\n    const isAllChildLinks = ref(true)\n    const getChildren = () => {\n      const childNodes = (slots as any)?.default()?.reduce(childNodeFilter, []) || []\n      const childNodesLength = childNodes.length\n      const isLastIndexChildNodes = (index: number) => index === childNodesLength - 1\n      const isChildLink = (child: VNode) => {\n        const childPropData = child?.props\n        if (!childPropData || !hasOwnProperty(childPropData, 'to')) {\n          return false\n        }\n\n        return !!(childPropData.to && !childPropData.disabled)\n      }\n\n      const createChildComponent = (child: VNode, index: number) => h(\n        'span', {\n          class: 'va-breadcrumbs__item',\n          ariaCurrent: (isLastIndexChildNodes(index) && isChildLink(child)) ? 'location' : false,\n          style: {\n            color: (!isLastIndexChildNodes(index) && !isDisabledChild(child)) ? computedThemesActiveColor.value : null,\n          },\n        },\n        [child],\n      )\n\n      const children = [] as VNode[]\n\n      if (childNodesLength) {\n        childNodes.forEach((child: VNode, index: number) => {\n          if (isAllChildLinks.value && !isChildLink(child)) {\n            isAllChildLinks.value = false\n          }\n\n          children.push(createChildComponent(child, index))\n\n          if (!isLastIndexChildNodes(index)) {\n            children.push(createSeparatorComponent())\n          }\n        })\n      }\n\n      return children\n    }\n\n    return () => h('div', {\n      class: 'va-breadcrumbs',\n      style: alignComputed.value,\n      role: isAllChildLinks.value ? 'navigation' : undefined,\n      ariaLabel: isAllChildLinks.value ? 'breadcrumbs' : undefined,\n    }, getChildren())\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"variables\";\n\n.va-breadcrumbs {\n  display: var(--va-breadcrumbs-display);\n  width: var(--va-breadcrumbs-width);\n  justify-content: var(--va-breadcrumbs-justify-content);\n  font-family: var(--va-font-family);\n\n  &__item {\n    display: var(--va-breadcrumbs-item-display);\n  }\n\n  &__separator {\n    padding: var(--va-breadcrumbs-separator-padding);\n    display: var(--va-breadcrumbs-separator-display);\n  }\n}\n</style>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAMA,MAAK,YAAa,gBAAa;AAAA,EAC7B,MAAM;AAAA,EACN,OAAO,iCACF,gBADE;AAAA,IAEL,WAAW,EAAE,MAAM,QAAQ,SAAS,IAAI;AAAA,IACxC,OAAO,EAAE,MAAM,QAAQ,SAAS,OAAO;AAAA,IACvC,aAAa,EAAE,MAAM,QAAQ,SAAS,KAAK;AAAA,IAC3C,gBAAgB,EAAE,MAAM,QAAQ,SAAS,KAAK;AAAA,EAChD;AAAA,EACA,MAAO,OAAO,EAAE,SAAS;AACjB,UAAA,EAAE,kBAAkB,SAAS,KAAK;AAElC,UAAA,EAAE,aAAa;AACf,UAAA,+BAA+B,SAAS,MAAM;AAC3C,aAAA,MAAM,iBAAiB,SAAS,MAAM,cAAc,IAAI,SAAS,MAAM,KAAK;AAAA,IAAA,CACpF;AACK,UAAA,4BAA4B,SAAS,MAAM;AACxC,aAAA,MAAM,cAAc,SAAS,MAAM,WAAW,IAAI,SAAS,MAAM,KAAK;AAAA,IAAA,CAC9E;AAEK,UAAA,kBAAkB,CAAC,QAAiB,SAAiB;AACnD,YAAA,QAAQ,QAAQ,KAAK,SAAS,YAAY,KAAK,WAAW,KAAK,WAAsB,CAAC,IAAI;AAEzF,aAAA;AAAA,QACL,GAAG;AAAA,QACH,GAAG,MAAM,OAAO,CAAC;;AAAiB,kBAAC,CAAE,4CAAM,SAAN,mBAAoB,SAApB,mBAA0B,MAAM;AAAA,SAAqB;AAAA,MAAA;AAAA,IAC5F;AAGF,UAAM,2BAA2B,MAAM;AAI/B,YAAA,gBAAgB,MAAM,YAAY,MAAM,cAAc,CAAC,MAAM,SAAS;AAE5E,aAAO,EAAE,QAAQ;AAAA,QACf,YAAY;AAAA,QACZ,OAAO,CAAC,2BAA2B;AAAA,QACnC,OAAO,CAAC,EAAE,OAAO,6BAA6B,OAAO;AAAA,SACpD,aAAa;AAAA,IAAA;AAGZ,UAAA,kBAAkB,CAAC,UAAiB;AACxC,YAAM,gBAAgB,+BAAO;AAC7B,UAAI,CAAC,iBAAiB,CAAC,eAAe,eAAe,UAAU,GAAG;AACzD,eAAA;AAAA,MACT;AAEI,UAAA,cAAc,aAAa,IAAI;AAC1B,eAAA;AAAA,MACT;AAEO,aAAA,QAAQ,cAAc,QAAQ;AAAA,IAAA;AAGjC,UAAA,kBAAkB,IAAI,IAAI;AAChC,UAAM,cAAc,MAAM;;AAClB,YAAA,aAAc,sCAAe,cAAf,mBAA0B,OAAO,iBAAiB,CAAA,OAAO;AAC7E,YAAM,mBAAmB,WAAW;AACpC,YAAM,wBAAwB,CAAC,UAAkB,UAAU,mBAAmB;AACxE,YAAA,cAAc,CAAC,UAAiB;AACpC,cAAM,gBAAgB,+BAAO;AAC7B,YAAI,CAAC,iBAAiB,CAAC,eAAe,eAAe,IAAI,GAAG;AACnD,iBAAA;AAAA,QACT;AAEA,eAAO,CAAC,CAAgB,eAAA,MAAM,CAAC,cAAc;AAAA,MAAA;AAG/C,YAAM,uBAAuB,CAAC,OAAc,UAAkB,EAC5D,QAAQ;AAAA,QACN,OAAO;AAAA,QACP,aAAc,sBAAsB,KAAK,KAAK,YAAY,KAAK,IAAK,aAAa;AAAA,QACjF,OAAO;AAAA,UACL,OAAQ,CAAC,sBAAsB,KAAK,KAAK,CAAC,gBAAgB,KAAK,IAAK,0BAA0B,QAAQ;AAAA,QACxG;AAAA,MAAA,GAEF,CAAC,KAAK,CACR;AAEA,YAAM,WAAW,CAAA;AAEjB,UAAI,kBAAkB;AACT,mBAAA,QAAQ,CAAC,OAAc,UAAkB;AAClD,cAAI,gBAAgB,SAAS,CAAC,YAAY,KAAK,GAAG;AAChD,4BAAgB,QAAQ;AAAA,UAC1B;AAEA,mBAAS,KAAK,qBAAqB,OAAO,KAAK,CAAC;AAE5C,cAAA,CAAC,sBAAsB,KAAK,GAAG;AACxB,qBAAA,KAAK,0BAA0B;AAAA,UAC1C;AAAA,QAAA,CACD;AAAA,MACH;AAEO,aAAA;AAAA,IAAA;AAGF,WAAA,MAAM,EAAE,OAAO;AAAA,MACpB,OAAO;AAAA,MACP,OAAO,cAAc;AAAA,MACrB,MAAM,gBAAgB,QAAQ,eAAe;AAAA,MAC7C,WAAW,gBAAgB,QAAQ,gBAAgB;AAAA,IAAA,GAClD,YAAa,CAAA;AAAA,EAClB;AACF,CAAC;;"}