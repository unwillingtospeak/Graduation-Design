{"version":3,"file":"VaCollapse.js","sources":["../../../../../src/components/va-collapse/VaCollapse.vue"],"sourcesContent":["<template>\n  <div class=\"va-collapse\" :class=\"computedClasses\">\n    <div\n      class=\"va-collapse__header-wrapper\"\n      v-on=\"keyboardFocusListeners\"\n      @focus=\"$emit('focus')\"\n      @click=\"toggle\"\n      @keydown.enter=\"toggle\"\n      @keydown.space=\"toggle\"\n    >\n      <slot\n        name=\"header\"\n        v-bind=\"{\n          value: computedModelValue,\n          hasKeyboardFocus: hasKeyboardFocus,\n          bind: headerAttributes,\n          attributes: headerAttributes,\n        }\"\n      >\n        <div\n          v-bind=\"headerAttributes\"\n          class=\"va-collapse__header\"\n          :style=\"headerStyle\"\n        >\n          <va-icon\n            v-if=\"icon\"\n            class=\"va-collapse__header__icon\"\n            :name=\"icon\"\n            :color=\"textColorComputed\"\n          />\n          <div class=\"va-collapse__header__text\">\n            {{ header }}\n          </div>\n          <va-icon\n            class=\"va-collapse__header__icon\"\n            :name=\"computedModelValue ? 'expand_less' : 'expand_more'\"\n            :color=\"textColorComputed\"\n          />\n        </div>\n      </slot>\n    </div>\n    <div class=\"va-collapse__body-wrapper\" :style=\"contentStyle\">\n      <div\n        class=\"va-collapse_body\"\n        ref=\"body\"\n        role=\"region\"\n        :id=\"panelIdComputed\"\n        :aria-labelledby=\"headerIdComputed\"\n      >\n        <slot />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, ref, shallowRef } from 'vue'\nimport pick from 'lodash/pick.js'\n\nimport { useKeyboardOnlyFocus, useColors, useSyncProp, useTextColor, useBem, useResizeObserver } from '../../composables'\nimport { useAccordionItem } from '../va-accordion/hooks/useAccordion'\n\nimport { generateUniqueId } from '../../services/utils'\n\nimport { VaIcon } from '../va-icon'\n\nexport default defineComponent({\n  name: 'VaCollapse',\n  components: {\n    VaIcon,\n  },\n  props: {\n    modelValue: { type: Boolean, default: undefined },\n    disabled: { type: Boolean, default: false },\n    header: { type: String, default: '' },\n    icon: { type: String, default: '' },\n    solid: { type: Boolean, default: false },\n    color: { type: String, default: 'background' },\n    textColor: { type: String, default: '' },\n    colorAll: { type: Boolean, default: false },\n  },\n  emits: ['focus', 'update:modelValue'],\n\n  setup (props, { emit, slots }) {\n    const body = shallowRef<HTMLElement>()\n\n    const [computedModelValue] = useSyncProp('modelValue', props, emit, false)\n\n    const { getColor, getHoverColor } = useColors()\n    const { accordionProps, toggle } = useAccordionItem(computedModelValue)\n\n    const { textColorComputed } = useTextColor()\n\n    const bodyHeight = ref()\n    useResizeObserver([body], () => {\n      bodyHeight.value = body.value?.clientHeight ?? 0\n    })\n\n    const height = computed(() => computedModelValue.value ? bodyHeight.value : 0)\n\n    const { hasKeyboardFocus, keyboardFocusListeners } = useKeyboardOnlyFocus()\n\n    const getTransition = () => {\n      const duration = height.value / 1000 * 0.2\n      return `${duration > 0.2 ? duration : 0.2}s`\n    }\n\n    const getBackground = () => {\n      return props.color && props.colorAll\n        ? getHoverColor(getColor(props.color))\n        : ''\n    }\n\n    const uniqueId = computed(generateUniqueId)\n    const headerIdComputed = computed(() => `header-${uniqueId.value}`)\n    const panelIdComputed = computed(() => `panel-${uniqueId.value}`)\n    const tabIndexComputed = computed(() => props.disabled ? -1 : 0)\n\n    const headerAttributes = computed(() => ({\n      id: headerIdComputed.value,\n      tabindex: tabIndexComputed.value,\n      'aria-controls': panelIdComputed.value,\n      'aria-expanded': computedModelValue.value,\n      'aria-disabled': props.disabled,\n      role: 'button',\n    }))\n\n    const computedClasses = useBem('va-collapse', () => ({\n      ...pick(props, ['disabled', 'solid']),\n      expanded: computedModelValue.value,\n      active: props.solid && computedModelValue.value,\n      popout: !!(accordionProps.value.popout && computedModelValue.value),\n      inset: !!(accordionProps.value.inset && computedModelValue.value),\n    }))\n\n    return {\n      body,\n      height,\n\n      toggle,\n      computedModelValue,\n\n      hasKeyboardFocus,\n      keyboardFocusListeners,\n\n      textColorComputed,\n\n      headerIdComputed,\n      headerAttributes,\n      panelIdComputed,\n      tabIndexComputed,\n\n      computedClasses,\n\n      headerStyle: computed(() => ({\n        paddingLeft: props.icon && 0,\n        color: textColorComputed.value,\n        backgroundColor: props.color ? getColor(props.color) : '',\n      })),\n\n      contentStyle: computed(() => {\n        const hasContent = computedModelValue.value && !!slots.default?.()[0]\n\n        return {\n          visibility: hasContent ? 'visible' as const : 'hidden' as const,\n          height: `${height.value}px`,\n          transitionDuration: getTransition(),\n          background: hasContent ? getBackground() : '',\n        }\n      }),\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"../../styles/resources\";\n@import \"variables\";\n\n.va-collapse {\n  transition: var(--va-collapse-transition, var(--va-swing-transition));\n  font-family: var(--va-font-family);\n\n  &__body-wrapper {\n    position: relative;\n    transition: var(--va-collapse-body-transition);\n    overflow: hidden;\n  }\n\n  &__body {\n    position: absolute;\n    top: 0;\n    left: 0;\n  }\n\n  &__header {\n    display: var(--va-collapse-header-content-display);\n    justify-content: var(--va-collapse-header-content-justify-content);\n    cursor: var(--va-collapse-header-content-cursor);\n    background-color: var(--va-collapse-header-content-background-color);\n    box-shadow: var(--va-collapse-header-content-box-shadow, var(--va-block-box-shadow));\n    border-radius: var(--va-collapse-header-content-border-radius, var(--va-block-border-radius));\n    align-items: var(--va-collapse-header-content-align-items);\n    padding-top: var(--va-collapse-header-content-padding-top);\n    padding-bottom: var(--va-collapse-header-content-padding-bottom);\n    padding-left: var(--va-collapse-header-content-padding-left);\n\n    &__text {\n      width: var(--va-collapse-header-content-text-width);\n    }\n\n    &__icon {\n      @include flex-center();\n\n      min-width: var(--va-collapse-header-content-icon-min-width);\n      margin-left: var(--va-collapse-header-content-icon-margin-left);\n      margin-right: var(--va-collapse-header-content-icon-margin-right);\n      color: var(--va-collapse-header-content-icon-color);\n    }\n\n    &:focus {\n      @include focus-outline(var(--va-collapse-header-content-border-radius));\n    }\n  }\n\n  &--solid {\n    box-shadow: var(--va-collapse-solid-box-shadow);\n    border-radius: var(--va-collapse-solid-border-radius);\n\n    .va-collapse {\n      &__header {\n        border-radius: var(--va-collapse-solid-header-content-border-radius, var(--va-block-border-radius));\n        transition: var(--va-collapse-solid-header-content-transition);\n        box-shadow: var(--va-collapse-solid-header-content-box-shadow, var(--va-block-box-shadow));\n        background-color: var(--va-collapse-solid-header-content-background-color);\n      }\n\n      &__body {\n        border-radius: var(--va-collapse-solid-body-border-radius);\n        margin-top: var(--va-collapse-solid-body-margin-top);\n      }\n    }\n  }\n\n  &--popout {\n    margin: var(--va-collapse-popout-margin);\n  }\n\n  &--inset {\n    margin: var(--va-collapse-inset-margin);\n  }\n\n  &--disabled {\n    @include va-disabled();\n  }\n}\n</style>\n"],"names":["pick","_createElementBlock","_normalizeClass","_createElementVNode","_mergeProps","_toHandlers","_withKeys","_renderSlot","_normalizeProps","_guardReactiveProps","_openBlock","_createBlock","_createCommentVNode","_toDisplayString","_createVNode","_normalizeStyle"],"mappings":"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"}