{"version":3,"file":"VaBacktop.js","sources":["../../../../../src/components/va-backtop/VaBacktop.vue"],"sourcesContent":["<template>\n  <div\n    v-if=\"visible\"\n    class=\"va-backtop\"\n    role=\"button\"\n    aria-label=\"back to top\"\n    :style=\"computedStyle\"\n    @click=\"scrollToTop\"\n    @keydown.enter.stop=\"scrollToTop\"\n  >\n    <slot>\n      <va-button\n        aria-hidden=\"true\"\n        icon=\"expand_less\"\n        :color=\"color\"\n      />\n    </slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType, ref, computed, onMounted, onBeforeUnmount } from 'vue'\n\nimport { VaButton } from '../va-button'\n\nexport default defineComponent({\n  name: 'VaBacktop',\n  components: { VaButton },\n  props: {\n    target: {\n      type: [Object, String] as PropType<Element | string | undefined>,\n      default: undefined,\n    },\n    visibilityHeight: { type: Number, default: 300 },\n    speed: { type: Number, default: 50 },\n    verticalOffset: { type: String, default: '1rem' },\n    horizontalOffset: { type: String, default: '1rem' },\n    color: { type: String, default: '' },\n    horizontalPosition: {\n      type: String as PropType<'right' | 'left'>,\n      default: 'right',\n      validator: (value: string) => ['right', 'left'].includes(value),\n    },\n    verticalPosition: {\n      type: String as PropType<'bottom' | 'top'>,\n      default: 'bottom',\n      validator: (value: string) => ['bottom', 'top'].includes(value),\n    },\n  },\n  setup (props) {\n    const targetScrollValue = ref(0)\n\n    const computedStyle = computed(() => ({\n      [props.verticalPosition]: props.verticalOffset,\n      [props.horizontalPosition]: props.horizontalOffset,\n    }))\n\n    let targetElement: Element | Window\n\n    const getTargetElement = () => {\n      if (!props.target) { return window as Window }\n      if (typeof props.target === 'string') { return document.querySelector(props.target) as Element }\n      return props.target as Element\n    }\n\n    const scrolled = ref(false)\n    const interval = ref(0)\n    const scrollToTop = () => {\n      if (scrolled.value) { return }\n\n      scrolled.value = true\n\n      if (targetElement instanceof Window) {\n        window.scrollTo({\n          top: 0,\n          behavior: 'smooth',\n        })\n\n        return\n      }\n\n      interval.value = window.setInterval(() => {\n        if (targetElement instanceof Element) {\n          if (targetElement.scrollTop === 0) {\n            clearInterval(interval.value)\n            scrolled.value = false\n          } else {\n            const next = Math.floor(targetElement.scrollTop - props.speed)\n            targetElement.scrollTo(0, next)\n          }\n        }\n      }, 15)\n    }\n\n    const handleScroll = () => {\n      targetScrollValue.value = targetElement instanceof Window\n        ? targetElement.scrollY\n        : targetElement.scrollTop\n    }\n\n    const visible = computed(() => targetScrollValue.value > props.visibilityHeight)\n\n    onMounted(() => {\n      targetElement = getTargetElement()\n      targetElement.addEventListener('scroll', handleScroll, true)\n    })\n    onBeforeUnmount(() => targetElement?.removeEventListener('scroll', handleScroll))\n\n    return {\n      computedStyle,\n      visible,\n      scrollToTop,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"variables\";\n\n.va-backtop {\n  position: var(--va-backtop-position);\n  top: var(--va-backtop-top);\n  left: var(--va-backtop-left);\n  right: var(--va-backtop-right);\n  bottom: var(--va-backtop-bottom);\n  cursor: var(--va-backtop-cursor);\n  z-index: var(--va-backtop-z-index);\n  font-family: var(--va-font-family);\n}\n</style>\n"],"names":["_openBlock","_createElementBlock","_normalizeStyle","_renderSlot","_createVNode"],"mappings":"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"}