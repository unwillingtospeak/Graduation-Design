{"version":3,"file":"useHTMLElement.js","sources":["../../../../src/composables/useHTMLElement.ts"],"sourcesContent":["import { computed, getCurrentInstance, onBeforeUnmount, onMounted, onUpdated, isRef, Ref, shallowRef, DefineComponent } from 'vue'\n\nconst extractHTMLElement = (el: any): HTMLElement => el && '$el' in el ? el.$el : el\n\nexport const useTemplateRef = (key: string) => {\n  const vm = getCurrentInstance()!\n  const el = shallowRef<HTMLElement>()\n\n  const updateEl = () => {\n    el.value = vm.proxy?.$refs[key] as HTMLElement\n  }\n\n  onMounted(updateEl)\n  onUpdated(updateEl)\n  onBeforeUnmount(updateEl)\n\n  return el\n}\n\nexport const useHTMLElement = (key?: string | Ref<HTMLElement | DefineComponent | undefined>): Ref<HTMLElement> => {\n  if (isRef(key)) {\n    return computed({\n      get () { return extractHTMLElement(key.value) },\n      set (value) { key.value = value },\n    })\n  }\n\n  if (key) {\n    const el = useTemplateRef(key)\n    return computed({\n      get () { return extractHTMLElement(el.value) },\n      set (value) { el.value = value },\n    })\n  }\n\n  const el = shallowRef()\n  return computed({\n    set (value) {\n      el.value = extractHTMLElement(value)\n    },\n    get () { return el.value },\n  })\n}\n"],"names":[],"mappings":";AAEA,MAAM,qBAAqB,CAAC,OAAyB,MAAM,SAAS,KAAK,GAAG,MAAM;AAErE,MAAA,iBAAiB,CAAC,QAAgB;AAC7C,QAAM,KAAK;AACX,QAAM,KAAK;AAEX,QAAM,WAAW,MAAM;;AAClB,OAAA,QAAQ,SAAG,UAAH,mBAAU,MAAM;AAAA,EAAA;AAG7B,YAAU,QAAQ;AAClB,YAAU,QAAQ;AAClB,kBAAgB,QAAQ;AAEjB,SAAA;AACT;AAEa,MAAA,iBAAiB,CAAC,QAAoF;AAC7G,MAAA,MAAM,GAAG,GAAG;AACd,WAAO,SAAS;AAAA,MACd,MAAO;AAAS,eAAA,mBAAmB,IAAI,KAAK;AAAA,MAAE;AAAA,MAC9C,IAAK,OAAO;AAAE,YAAI,QAAQ;AAAA,MAAM;AAAA,IAAA,CACjC;AAAA,EACH;AAEA,MAAI,KAAK;AACD,UAAA,MAAK,eAAe,GAAG;AAC7B,WAAO,SAAS;AAAA,MACd,MAAO;AAAS,eAAA,mBAAmB,IAAG,KAAK;AAAA,MAAE;AAAA,MAC7C,IAAK,OAAO;AAAE,YAAG,QAAQ;AAAA,MAAM;AAAA,IAAA,CAChC;AAAA,EACH;AAEA,QAAM,KAAK;AACX,SAAO,SAAS;AAAA,IACd,IAAK,OAAO;AACP,SAAA,QAAQ,mBAAmB,KAAK;AAAA,IACrC;AAAA,IACA,MAAO;AAAE,aAAO,GAAG;AAAA,IAAM;AAAA,EAAA,CAC1B;AACH;;"}