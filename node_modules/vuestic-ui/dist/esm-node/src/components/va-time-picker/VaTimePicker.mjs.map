{"version":3,"file":"VaTimePicker.mjs","sources":["../../../../../src/components/va-time-picker/VaTimePicker.vue"],"sourcesContent":["<template>\n  <div\n    class=\"va-time-picker\"\n    :class=\"computedClasses\"\n    :style=\"computedStyles\"\n  >\n    <VaTimePickerColumn\n      v-for=\"(column, idx) in columns\" :key=\"idx\"\n      :ref=\"setItemRef\"\n      :items=\"column.items\"\n      :tabindex=\"disabled ? -1 : 0\"\n      :cell-height=\"$props.cellHeight\"\n      v-model:activeItemIndex=\"column.activeItem.value\"\n      @keydown.right.stop.prevent=\"focusNext()\"\n      @keydown.tab.exact.stop.prevent=\"focusNext()\"\n      @keydown.left.stop.prevent=\"focusPrev()\"\n      @keydown.shift.tab.stop.prevent=\"focusPrev()\"\n      @focus=\"activeColumnIndex = idx\"\n    />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, computed, PropType } from 'vue'\nimport { useTimePicker } from './hooks/useTimePicker'\n\nimport { VaTimePickerColumn } from './components/VaTimePickerColumn'\n\nimport {\n  useStatefulProps,\n  useStatefulEmits,\n  useStateful,\n  useFormProps,\n  useForm,\n  useArrayRefs,\n  useCSSVariables,\n} from '../../composables'\n\nexport default defineComponent({\n  name: 'VaTimePicker',\n\n  components: { VaTimePickerColumn },\n\n  props: {\n    ...useStatefulProps,\n    ...useFormProps,\n    modelValue: { type: Date, required: false },\n    ampm: { type: Boolean, default: false },\n    hidePeriodSwitch: { type: Boolean, default: false },\n    periodUpdatesModelValue: { type: Boolean, default: true }, // Update model value when switching period automatically\n    view: { type: String as PropType<'hours' | 'minutes' | 'seconds'>, default: 'minutes' },\n    hoursFilter: { type: Function as PropType<(h: number) => boolean> },\n    minutesFilter: { type: Function as PropType<(h: number) => boolean> },\n    secondsFilter: { type: Function as PropType<(h: number) => boolean> },\n    framed: { type: Boolean, default: false },\n    cellHeight: { type: Number, default: 30 },\n    visibleCellsCount: { type: Number, default: 7 },\n  },\n\n  emits: useStatefulEmits,\n\n  setup (props, { emit }) {\n    const { valueComputed } = useStateful(props, emit)\n    const { columns, isPM } = useTimePicker(props, valueComputed)\n\n    const { setItemRef, itemRefs: pickers } = useArrayRefs()\n\n    const activeColumnIndex = ref<number>()\n\n    const focus = (idx = 0): void => {\n      pickers.value[idx]?.focus()\n    }\n\n    const blur = (idx?: number): void => {\n      idx ? pickers.value[idx]?.blur() : pickers.value.forEach((el) => el?.blur())\n    }\n\n    const { computedClasses: computedFormClasses } = useForm('va-time-picker', props)\n\n    const focusNext = () => {\n      const nextIndex = (activeColumnIndex?.value || 0) + 1\n\n      activeColumnIndex.value = nextIndex % columns.value.length\n      focus(activeColumnIndex.value)\n    }\n\n    const focusPrev = () => {\n      const nextIndex = (activeColumnIndex?.value || 0) - 1 + columns.value.length\n\n      activeColumnIndex.value = nextIndex % columns.value.length\n      focus(activeColumnIndex.value)\n    }\n\n    const computedClasses = computed(() => ({\n      ...computedFormClasses,\n      'va-time-picker--framed': props.framed,\n    }))\n\n    const computedStyles = useCSSVariables('va-time-picker', () => {\n      const gapHeight = (props.visibleCellsCount - 1) / 2 * props.cellHeight\n\n      return {\n        height: `${props.cellHeight * props.visibleCellsCount}px`,\n        'cell-height': `${props.cellHeight}px`,\n        'column-gap-height': `${gapHeight}px`,\n      }\n    })\n\n    return {\n      columns,\n      computedStyles,\n      computedClasses,\n      isPM,\n      pickers,\n      setItemRef,\n\n      focusNext,\n      focusPrev,\n      activeColumnIndex,\n\n      focus,\n      blur,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n  @import './_variables.scss';\n\n  @mixin after-overlay {\n    position: relative;\n\n    &::after {\n      content: '';\n      position: absolute;\n      height: 100%;\n      width: 100%;\n      z-index: 1;\n    }\n  }\n\n  .va-time-picker {\n    display: var(--va-time-picker-display);\n    justify-content: center;\n    overflow: hidden;\n    height: var(--va-time-picker-height);\n    font-family: var(--va-font-family);\n\n    &--readonly {\n      @include after-overlay();\n    }\n\n    &--disabled {\n      @include after-overlay();\n\n      opacity: var(--va-time-picker-disabled-opacity);\n    }\n\n    &--framed {\n      position: relative;\n\n      &::before {\n        content: \"\";\n        height: var(--va-time-picker-cell-height);\n        width: 100%;\n        position: absolute;\n        top: 50%;\n        left: 0;\n        transform: translateY(-50%);\n        border-top: 1px solid var(--va-divider);\n        border-bottom: 1px solid var(--va-divider);\n        z-index: 0;\n      }\n    }\n  }\n</style>\n"],"names":["defineComponent","name","components","VaTimePickerColumn","props","__spreadProps","__spreadValues","useStatefulProps","useFormProps","modelValue","type","Date","required","ampm","Boolean","default","hidePeriodSwitch","periodUpdatesModelValue","view","String","hoursFilter","Function","minutesFilter","secondsFilter","framed","cellHeight","Number","visibleCellsCount","emits","useStatefulEmits","setup","emit","valueComputed","useStateful","columns","isPM","useTimePicker","setItemRef","itemRefs","pickers","useArrayRefs","activeColumnIndex","ref","focus","idx","_a","value","computedClasses","computedFormClasses","useForm","computed","computedStyles","useCSSVariables","gapHeight","height","focusNext","nextIndex","length","focusPrev","blur","forEach","el","_createElementBlock","class","_normalizeClass","_ctx","style","_normalizeStyle","_openBlock","_Fragment","_renderList","column","_createBlock","_component_VaTimePickerColumn","key","ref_for","items","tabindex","disabled","$props","activeItemIndex","activeItem","$event","onKeydown","_cache","_withKeys","_withModifiers","onFocus"],"mappings":"4sCAsCkBA,EAAa,CAC7BC,KAAM,eAENC,WAAY,CAAEC,mBAAAA,GAEdC,MAAOC,cACFC,eAAAA,eAAA,GAAAC,GACAC,GAFE,CAGLC,WAAY,CAAEC,KAAMC,KAAMC,UAAU,GACpCC,KAAM,CAAEH,KAAMI,QAASC,SAAS,GAChCC,iBAAkB,CAAEN,KAAMI,QAASC,SAAS,GAC5CE,wBAAyB,CAAEP,KAAMI,QAASC,SAAS,GACnDG,KAAM,CAAER,KAAMS,OAAqDJ,QAAS,WAC5EK,YAAa,CAAEV,KAAMW,UACrBC,cAAe,CAAEZ,KAAMW,UACvBE,cAAe,CAAEb,KAAMW,UACvBG,OAAQ,CAAEd,KAAMI,QAASC,SAAS,GAClCU,WAAY,CAAEf,KAAMgB,OAAQX,QAAS,IACrCY,kBAAmB,CAAEjB,KAAMgB,OAAQX,QAAS,KAG9Ca,MAAOC,EAEPC,MAAO1B,GAAO2B,KAAEA,IACd,MAAMC,cAAEA,GAAkBC,EAAY7B,EAAO2B,IACvCG,QAAEA,EAAAC,KAASA,GAASC,EAAchC,EAAO4B,IAEzCK,WAAEA,EAAYC,SAAUC,GAAYC,IAEpCC,EAAoBC,IAEpBC,MAAQ,CAACC,EAAM,WACX,OAAAC,EAAAN,EAAAO,MAAMF,KAAMC,EAAAF,UAOdI,gBAAiBC,GAAwBC,EAAQ,iBAAkB7C,GAgBrE2C,EAAkBG,GAAS,IAAO7C,cAAAC,eAAA,GACnC0C,GADmC,CAEtC,yBAA0B5C,EAAMoB,WAG5B2B,EAAiBC,EAAgB,kBAAkB,KACvD,MAAMC,GAAajD,EAAMuB,kBAAoB,GAAK,EAAIvB,EAAMqB,WAErD,MAAA,CACL6B,OAAWlD,EAAMqB,WAAarB,EAAMuB,kBAA5B,KACR,cAAe,GAAGvB,EAAMqB,eACxB,oBAAqB,GAAG4B,UAIrB,MAAA,CACLnB,QAAAA,EACAiB,eAAAA,EACAJ,gBAAAA,EACAZ,KAAAA,EACAI,QAAAA,EACAF,WAAAA,EAEAkB,UArCgB,KACV,MAAAC,IAAgC,MAAAf,OAAA,EAAAA,EAAAK,QAAS,GAAK,EAElCL,EAAAK,MAAQU,EAAYtB,EAAQY,MAAMW,OACpDd,MAAMF,EAAkBK,QAkCxBY,UA/BgB,KAChB,MAAMF,IAAgC,MAAAf,OAAA,EAAAA,EAAAK,QAAS,GAAK,EAAIZ,EAAQY,MAAMW,OAEpDhB,EAAAK,MAAQU,EAAYtB,EAAQY,MAAMW,OACpDd,MAAMF,EAAkBK,QA4BxBL,kBAAAA,EAEAE,MAAAA,MACAgB,KAhDYf,UACNA,EAAA,OAAAC,EAAAN,EAAQO,MAAMF,KAAMC,EAAAc,OAASpB,EAAQO,MAAMc,SAASC,GAAO,MAAAA,OAAA,EAAAA,EAAIF,sGAzEzEG,EAkBM,MAAA,CAjBJC,MAAKC,EAAC,CAAA,iBACEC,EAAelB,kBACtBmB,MAAKC,EAAEF,EAAcd,iBAAA,EAEtBiB,GAAA,GAAAN,EAYEO,EAXwB,KAAAC,EAAAL,EAAA/B,SAAO,CAAvBqC,EAAQ3B,SADlB4B,EAYEC,EAAA,CAXkCC,IAAK9B,EAAA+B,SAAA,EACtCjC,IAAKuB,EAAA5B,WACLuC,MAAOL,EAAOK,MACdC,SAAUZ,EAAQa,UAAA,EAAA,EAClB,cAAab,EAAOc,OAAAtD,WACbuD,gBAAiBT,EAAOU,WAAWnC,MAAlB,2BAAAoC,GAAAX,EAAOU,WAAWnC,MAAKoC,EAC/CC,UAAO,CAAAC,EAAA,KAAAA,EAAA,GAAAC,EAAAC,GAAAJ,GAAqBjB,EAASV,aAAA,CAAA,OAAA,YAAA,CAAA,WAAA6B,EAAA,KAAAA,EAAA,GAAAC,EAAAC,GAAAJ,GACLjB,EAASV,aAAA,CAAA,QAAA,OAAA,YAAA,CAAA,SAAA6B,EAAA,KAAAA,EAAA,GAAAC,EAAAC,GAAAJ,GACdjB,EAASP,aAAA,CAAA,OAAA,YAAA,CAAA,UAAA0B,EAAA,KAAAA,EAAA,GAAAC,EAAAC,GAAAJ,GACJjB,EAASP,aAAA,CAAA,QAAA,OAAA,YAAA,CAAA,UACzC6B,WAAOtB,EAAoBxB,kBAAAG,GAAA,KAAA,EAAA,CAAA,QAAA,WAAA,cAAA,kBAAA,2BAAA"}