var e=Object.defineProperty,t=Object.defineProperties,o=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,__defNormalProp=(t,o,r)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[o]=r,__spreadValues=(e,t)=>{for(var o in t||(t={}))n.call(t,o)&&__defNormalProp(e,o,t[o]);if(r)for(var o of r(t))l.call(t,o)&&__defNormalProp(e,o,t[o]);return e};import{defineComponent as p,shallowRef as i,ref as s,computed as a,watch as u,resolveComponent as c,openBlock as v,createElementBlock as d,withKeys as g,withModifiers as m,Fragment as O,renderList as y,toDisplayString as f,createCommentVNode as h,normalizeClass as b,normalizeStyle as S,createBlock as _,createElementVNode as x,withDirectives as k,createVNode as T,vShow as j}from"vue";import{s as B}from"../../../utils/scroll-to-element.mjs";import"../../../../vendor.mjs";import{a as C,u as P}from"../../../composables/useColors.mjs";import"../../../composables/useDropdown.mjs";import{V as I}from"../../va-icon/index.mjs";import{_ as w}from"../../../../plugin-vue_export-helper.mjs";const G=p({name:"VaSelectOptionList",components:{VaIcon:I},emits:["select-option","update:hoveredOption","no-previous-option-to-hover","scroll-bottom"],props:(N=__spreadValues({},C),F={options:{type:Array,default:()=>[]},noOptionsText:{type:String,default:"Items not found"},getSelectedState:{type:Function,required:!0},getText:{type:Function,required:!0},getTrackBy:{type:Function,required:!0},getGroupBy:{type:Function,required:!0},multiple:{type:Boolean,default:!1},search:{type:String,default:""},tabindex:{type:Number,default:0},hoveredOption:{type:[String,Number,Object],default:null}},t(N,o(F))),setup(e,{emit:t}){const{getColor:o,getHoverColor:r}=P(),n=i(),l=s({}),p=a({get:()=>e.hoveredOption||null,set:e=>t("update:hoveredOption",e)}),c=a((()=>e.search?e.options.filter((t=>{const o=e.getText(t).toString().toUpperCase(),r=e.search.toUpperCase();return o.includes(r)})):e.options)),v=a((()=>c.value.reduce(((t,o)=>{if("object"==typeof o&&o.group){const r=e.getGroupBy(o);t[r]||(t[r]=[]),t[r].push(o)}else t._noGroup.push(o);return t}),{_noGroup:[]}))),isHovered=t=>!!p.value&&("string"==typeof t?t===p.value:!!e.getTrackBy&&e.getTrackBy(p.value)===e.getTrackBy(t)),updateHoveredOption=e=>{p.value=e||null},d=a((()=>c.value.findIndex((t=>!!p.value&&e.getTrackBy(t)===e.getTrackBy(p.value))))),scrollToOption=t=>{if(!t)return;const o=l.value[e.getTrackBy(t)];o&&B(o)};u((()=>e.hoveredOption),(e=>e&&scrollToOption(e)));const g={hoverPreviousOption:()=>{p.value?c.value[d.value-1]?p.value=c.value[d.value-1]:t("no-previous-option-to-hover"):c.value.length&&updateHoveredOption(c.value.at(-1))},hoverNextOption:()=>{p.value?c.value[d.value+1]&&(p.value=c.value[d.value+1]):c.value.length&&updateHoveredOption(c.value[0])},hoverFirstOption:()=>{c.value.length>0&&updateHoveredOption(c.value[0])},focus:()=>{var e;null==(e=n.value)||e.focus({preventScroll:!0})},scrollToOption:scrollToOption};return __spreadValues({rootElement:n,getColor:o,filteredOptions:c,optionGroups:v,onScroll:e=>{const o=e.target;o&&o.scrollTop+o.clientHeight===o.scrollHeight&&t("scroll-bottom")},beforeUpdate:()=>{l.value={}},setItemRef:t=>o=>{o&&(l.value[e.getTrackBy(t)]=o)},selectOption:e=>t("select-option",e),getOptionIcon:e=>"object"==typeof e?e.icon:void 0,getOptionClass:t=>({"va-select-option-list__option":!0,"va-select-option-list__option--selected":e.getSelectedState(t)}),getOptionStyle:t=>({color:e.getSelectedState(t)?o(e.color):"inherit",backgroundColor:isHovered(t)?r(o(e.color)):"transparent"}),updateHoveredOption:updateHoveredOption},g)}});var N,F;const H=["tabindex"],q={key:0,class:"va-select-option-list__group-name"},$=["aria-selected","onClick","onMouseover"],E={key:0,class:"va-select-option-list no-options"};var U=w(G,[["render",function _sfc_render(e,t,o,r,n,l){const p=c("va-icon");return v(),d("div",{ref:"rootElement",class:"va-select-option-list",tabindex:e.tabindex,onKeydown:[t[0]||(t[0]=g(m(((...t)=>e.hoverPreviousOption&&e.hoverPreviousOption(...t)),["stop","prevent"]),["up"])),t[1]||(t[1]=g(m(((...t)=>e.hoverPreviousOption&&e.hoverPreviousOption(...t)),["stop","prevent"]),["left"])),t[2]||(t[2]=g(m(((...t)=>e.hoverNextOption&&e.hoverNextOption(...t)),["stop","prevent"]),["down"])),t[3]||(t[3]=g(m(((...t)=>e.hoverNextOption&&e.hoverNextOption(...t)),["stop","prevent"]),["right"]))],onScrollPassive:t[4]||(t[4]=(...t)=>e.onScroll&&e.onScroll(...t))},[(v(!0),d(O,null,y(e.optionGroups,((t,o)=>(v(),d(O,{key:o},["_noGroup"!==o?(v(),d("span",q,f(o),1)):h("",!0),(v(!0),d(O,null,y(t,(t=>(v(),d("div",{key:e.$props.getTrackBy(t),ref_for:!0,ref:e.setItemRef(t),role:"option","aria-selected":!!e.$props.getSelectedState(t),class:b(e.getOptionClass(t)),style:S(e.getOptionStyle(t)),onClick:o=>e.selectOption(t),onMouseover:o=>e.updateHoveredOption(t)},[e.getOptionIcon(t)?(v(),_(p,{key:0,size:"small",class:"va-select-option-list__option--icon",name:e.getOptionIcon(t)},null,8,["name"])):h("",!0),x("span",null,f(e.getText(t)),1),k(T(p,{class:"va-select-option-list__option--selected-icon",size:"small",name:"done",color:e.getColor(e.$props.color)},null,8,["color"]),[[j,e.$props.getSelectedState(t)]])],46,$)))),128))],64)))),128)),e.filteredOptions.length?h("",!0):(v(),d("div",E,f(e.noOptionsText),1))],40,H)}]]);export{U as _};

import './VaSelectOptionList.css';
//# sourceMappingURL=VaSelectOptionList.mjs.map
