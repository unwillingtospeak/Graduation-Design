var e=Object.defineProperty,o=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,__defNormalProp=(o,t,a)=>t in o?e(o,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[t]=a;import{defineComponent as s,shallowRef as n,computed as i,toRef as u,nextTick as c,openBlock as d,createElementBlock as p,normalizeClass as m,renderSlot as v,normalizeProps as f,guardReactiveProps as b,createBlock as h,Teleport as k,withModifiers as g,createCommentVNode as y}from"vue";import{p as C,k as O}from"../../../vendor.mjs";import{g as j}from"../../services/utils.mjs";import{u as w}from"../../composables/useBem.mjs";import{u as B}from"../../composables/useClickOutside.mjs";import"colortranslator";import{u as A}from"../../composables/useDebounce.mjs";import{u as M}from"../../composables/useHTMLElement.mjs";import{p as S,u as T}from"../../composables/useDropdown.mjs";import{a as D,u as P,b as E}from"../../composables/useStateful.mjs";import{u as _}from"../../composables/useDocument.mjs";import{u as N}from"../../composables/useIsMounted.mjs";import{u as R}from"./hooks/useAnchorSelector.mjs";import{u as x}from"./hooks/useCursorAnchor.mjs";import{u as H,a as L}from"./hooks/useDropdownNavigation.mjs";import{_ as $}from"../../../plugin-vue_export-helper.mjs";const W=s({name:"VaDropdown",props:(I=((e,o)=>{for(var t in o||(o={}))r.call(o,t)&&__defNormalProp(e,t,o[t]);if(a)for(var t of a(o))l.call(o,t)&&__defNormalProp(e,t,o[t]);return e})({},D),V={stateful:{default:!0},modelValue:{type:Boolean,default:!1},disabled:{type:Boolean},readonly:{type:Boolean},anchorSelector:{type:String,default:""},innerAnchorSelector:{type:String,default:""},target:{type:String,default:void 0},preventOverflow:{type:Boolean,default:!1},keepAnchorWidth:{type:Boolean,default:!1},isContentHoverable:{type:Boolean,default:!0},closeOnContentClick:{type:Boolean,default:!0},closeOnClickOutside:{type:Boolean,default:!0},closeOnAnchorClick:{type:Boolean,default:!0},hoverOverTimeout:{type:Number,default:30},hoverOutTimeout:{type:Number,default:200},offset:{type:[Array,Number],default:0},stickToEdges:{type:Boolean,default:!1},autoPlacement:{type:Boolean,default:!0},cursor:{type:Boolean,default:!1},trigger:{type:String,default:"click",validator:e=>["click","right-click","hover","dblclick","none"].includes(e)},placement:{type:String,default:"auto",validator:e=>S.includes(e)},keyboardNavigation:{type:Boolean,default:!1}},o(I,t(V))),emits:[...P,"anchor-click","anchor-right-click","content-click","click-outside","close","open"],setup(e,{emit:o}){const t=n(),{valueComputed:a}=E(e,o),r=i({get:()=>a.value&&!e.disabled&&!e.readonly,set(e){a.value=e,o(e?"open":"close")}}),l=w("va-dropdown",(()=>C(e,["disabled"]))),{debounced:s,cancel:d}=A(u(e,"hoverOverTimeout")),{debounced:p,cancel:m}=A(u(e,"hoverOutTimeout")),onMouseEnter=()=>{"hover"!==e.trigger||e.disabled||(s((()=>{r.value=!0})),m())},onMouseLeave=()=>{"hover"!==e.trigger||e.disabled||(e.isContentHoverable?p((()=>{r.value=!1})):r.value=!1,d())},emitAndClose=(t,a,l)=>{o(t,l),a&&"none"!==e.trigger&&(r.value=!1)},v=M("anchorRef");e.keyboardNavigation&&H(v,r),L(v,{click(t){if(!("click"!==e.trigger&&"right-click"!==O(e.trigger)||e.disabled))if(r.value)emitAndClose("anchor-click",e.closeOnAnchorClick,t);else{if("click"!==e.trigger)return;r.value=!0,o("anchor-click",t)}},contextmenu(t){"right-click"!==O(e.trigger)||e.disabled||(t.preventDefault(),r.value?(emitAndClose("anchor-right-click",e.closeOnAnchorClick,t),e.cursor&&c((()=>{r.value=!0}))):(r.value=!0,o("anchor-right-click",t)))},dblclick(t){"dblclick"!==e.trigger||e.disabled||(r.value?(emitAndClose("anchor-dblclick",e.closeOnAnchorClick,t),e.cursor&&c((()=>{r.value=!0}))):(r.value=!0,o("anchor-dblclick",t)))},mouseenter:onMouseEnter,mouseleave:onMouseLeave});const{anchorRef:f}=R(e);B([f,t],(()=>{e.closeOnClickOutside&&r.value&&emitAndClose("click-outside",e.closeOnClickOutside)}));const b=x(f,r);T(i((()=>e.cursor?b.value:f.value)),t,i((()=>({placement:e.placement,keepAnchorWidth:e.keepAnchorWidth,offset:e.offset,stickToEdges:e.stickToEdges,autoPlacement:e.autoPlacement,root:S.value,viewport:y.value}))));const h=i(j),k=_(),g=i((()=>e.preventOverflow||e.cursor)),y=i((()=>{var o,t,a;const r=null==(o=k.value)?void 0:o.querySelector(e.target||"body");return r?f.value&&!r.contains(f.value)?null==(a=k.value)?void 0:a.body:r:null==(t=k.value)?void 0:t.body})),S=i((()=>g.value?y.value:v.value)),D=i((()=>e.disabled||!g.value));return{teleportTargetComputed:S,teleportDisabled:D,isMounted:N(),anchorRef:f,valueComputed:r,contentRef:t,computedClass:l,idComputed:h,emitAndClose:emitAndClose,onMouseEnter:onMouseEnter,onMouseLeave:onMouseLeave,hide:()=>{r.value=!1},show:()=>{r.value=!0}}}});var I,V;const q=["aria-disabled","aria-expanded","aria-controls"],z=["id"];var F=$(W,[["render",function _sfc_render(e,o,t,a,r,l){return d(),p("div",{class:m(["va-dropdown",e.computedClass]),ref:"anchorRef",role:"button","aria-label":"toggle dropdown","aria-disabled":e.$props.disabled,"aria-expanded":!!e.valueComputed,"aria-controls":e.idComputed},[v(e.$slots,"anchor",f(b({value:e.valueComputed,hide:e.hide,show:e.show}))),e.isMounted?(d(),h(k,{key:0,to:e.teleportTargetComputed,disabled:e.teleportDisabled},[e.valueComputed?(d(),p("div",{key:0,ref:"contentRef",class:"va-dropdown__content-wrapper",id:e.idComputed,onMouseover:o[0]||(o[0]=o=>e.$props.isContentHoverable&&e.onMouseEnter()),onMouseout:o[1]||(o[1]=(...o)=>e.onMouseLeave&&e.onMouseLeave(...o)),onClick:o[2]||(o[2]=g((o=>e.emitAndClose("content-click",e.closeOnContentClick)),["stop"]))},[v(e.$slots,"default",f(b({value:e.valueComputed,hide:e.hide,show:e.show})))],40,z)):y("",!0)],8,["to","disabled"])):y("",!0)],10,q)}]]);export{F as _};

import './VaDropdown.css';
//# sourceMappingURL=VaDropdown.mjs.map
