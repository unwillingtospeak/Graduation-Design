var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,__defNormalProp=(t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,__spreadValues=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&__defNormalProp(e,n,t[n]);if(a)for(var n of a(t))r.call(t,n)&&__defNormalProp(e,n,t[n]);return e},__spreadProps=(e,a)=>t(e,n(a));import{defineComponent as s,shallowRef as u,computed as l,resolveComponent as i,openBlock as p,createBlock as c,mergeProps as m,withKeys as d,withModifiers as v,createSlots as f,withCtx as b,createElementBlock as C,createCommentVNode as y,createElementVNode as g,normalizeStyle as _,renderSlot as I,normalizeProps as x,guardReactiveProps as j,createVNode as w}from"vue";import{p as P,o as V}from"../../../vendor.mjs";import{u as N,a as h}from"../../composables/useFocus.mjs";import{u as k}from"../../composables/useColors.mjs";import{u as B}from"../../composables/useEmitProxy.mjs";import{u as S}from"../../composables/useForm.mjs";import"../../composables/useDropdown.mjs";import{a as O,b as $}from"../../composables/useStateful.mjs";import{s as A}from"../../utils/css-utils.mjs";import"../va-input/index.mjs";import{V as L}from"../va-icon/VaIcon.mjs";import{V as F}from"../va-button/VaButton.mjs";import{_ as M}from"../../../plugin-vue_export-helper.mjs";import{V as W}from"../va-input/components/VaInputWrapper/VaInputWrapper.mjs";const{createEmits:E,createListeners:D}=B(["change"]),{createEmits:q,createListeners:K}=B([{listen:"click-prepend",emit:"click:decrease-button"},{listen:"click-append",emit:"click:increase-button"},{listen:"click-prepend-inner",emit:"click:decrease-icon"},{listen:"click-append-inner",emit:"click:increase-icon"}]),R=s({name:"VaCounter",components:{VaInputWrapper:W,VaIcon:L,VaButton:F},props:__spreadProps(__spreadValues(__spreadValues({},S),O),{modelValue:{type:[String,Number],default:0},manualInput:{type:Boolean,default:!1},stateful:{type:Boolean,default:!1},min:{type:Number,default:void 0},max:{type:Number,default:void 0},step:{type:Number,default:1},label:{type:String,default:""},messages:{type:[Array,String],default:()=>[]},width:{type:[String,Number],default:"160px"},color:{type:String,default:"primary"},outline:{type:Boolean},bordered:{type:Boolean},increaseIcon:{type:String,default:"add"},decreaseIcon:{type:String,default:"remove"},buttons:{type:Boolean,default:!1},flat:{type:Boolean,default:!0},rounded:{type:Boolean,default:!1},margins:{type:[String,Number],default:"4px"},textColor:{type:String,default:void 0}}),emits:["update:modelValue",...E(),...q(),...N],inheritAttrs:!1,setup(e,{emit:t,attrs:n}){const a=u(),{isFocused:o,focus:r,blur:s}=h(a,t),{valueComputed:i}=$(e,t),getRoundDownWithStep=t=>e.min&&e.step?e.min+e.step*Math.floor((t-e.min)/e.step):t,calculateCounterValue=t=>{e.min&&t<e.min?i.value=e.min:e.max&&t>e.max?i.value=getRoundDownWithStep(e.max):i.value=getRoundDownWithStep(t)},p=l((()=>!!e.min&&Number(i.value)<=e.min)),c=l((()=>!!e.max&&(e.step?Number(i.value)>e.max-e.step:Number(i.value)>=e.max))),m=l((()=>e.disabled?-1:0)),d=l((()=>p.value||e.readonly||e.disabled)),v=l((()=>c.value||e.readonly||e.disabled)),decreaseCount=()=>{d.value||calculateCounterValue(Number(i.value)-e.step)},increaseCount=()=>{v.value||calculateCounterValue(Number(i.value)+e.step)},{getColor:f}=k(),b=l((()=>f(e.color))),C=l((()=>__spreadValues({class:{"va-counter__icon--inactive":d.value},color:b.value,name:e.decreaseIcon},!d.value&&{onClick:decreaseCount}))),y=l((()=>__spreadValues({class:{"va-counter__icon--inactive":v.value},color:b.value,name:e.increaseIcon},!v.value&&{onClick:increaseCount}))),g=l((()=>0===("string"==typeof e.margins?parseFloat(e.margins):e.margins))),_=l((()=>__spreadProps(__spreadValues({},P(e,["rounded","color","textColor"])),{flat:e.flat&&!e.outline,outline:e.flat&&e.outline}))),I=l((()=>__spreadProps(__spreadValues({},_.value),{icon:e.decreaseIcon,disabled:d.value}))),x=l((()=>__spreadProps(__spreadValues({},_.value),{icon:e.increaseIcon,disabled:v.value}))),j=l((()=>__spreadProps(__spreadValues(__spreadValues({tabindex:m.value,ariaLabel:e.label||"counter value",ariaValuemin:e.min,ariaValuemax:e.max},V(n,["class","style"])),P(e,["disabled","min","max","step"])),{readonly:e.readonly||!e.manualInput}))),w=l((()=>__spreadValues({},P(e,["color","readonly","disabled","messages","label","bordered","outline"])))),N=l((()=>[n.class,{"va-counter--input-square":g.value}])),B=l((()=>__spreadValues({width:A(e.width)},n.style||{}))),S=l((()=>A(e.margins)));return{input:a,valueComputed:i,isFocused:o,fieldListeners:K(t),inputListeners:D(t),inputAttributesComputed:j,inputWrapperPropsComputed:w,setCountInput:({target:e})=>{i.value=Number(null==e?void 0:e.value)},setCountChange:({target:e})=>{calculateCounterValue(Number(null==e?void 0:e.value))},decreaseCount:decreaseCount,increaseCount:increaseCount,decreaseIconProps:C,increaseIconProps:y,decreaseButtonProps:I,increaseButtonProps:x,colorComputed:b,classComputed:N,styleComputed:B,marginComputed:S,focus:r,blur:s}}}),z={ref:"input",tabindex:"0"},G=["value"];var H=M(R,[["render",function _sfc_render(e,t,n,a,o,r){const s=i("va-button"),u=i("va-icon"),l=i("va-input-wrapper");return p(),c(l,m({class:"va-counter"},__spreadValues(__spreadValues({},e.fieldListeners),e.inputWrapperPropsComputed),{class:e.classComputed,style:e.styleComputed,focused:e.isFocused,onKeydown:[t[8]||(t[8]=d(v((t=>e.increaseCount()),["prevent"]),["up"])),t[9]||(t[9]=d(v((t=>e.decreaseCount()),["prevent"]),["down"]))]}),f({default:b((()=>[e.$slots.content?y("",!0):(p(),C("input",m({key:0,ref:"input",class:"va-input__content__input",type:"number",inputmode:"decimal"},__spreadValues(__spreadValues({},e.inputAttributesComputed),e.inputListeners),{value:e.valueComputed,onInput:t[6]||(t[6]=(...t)=>e.setCountInput&&e.setCountInput(...t)),onChange:t[7]||(t[7]=(...t)=>e.setCountChange&&e.setCountChange(...t))}),null,16,G))])),_:2},[e.$props.buttons?{name:"prepend",fn:b((n=>[g("div",{class:"va-counter__prepend-wrapper",style:_({marginRight:e.marginComputed}),onMousedown:t[1]||(t[1]=v((t=>e.focus()),["prevent"]))},[I(e.$slots,"decreaseAction",x(j(__spreadProps(__spreadValues({},n),{decreaseCount:e.decreaseCount}))),(()=>[w(s,m({class:"va-counter__button-decrease","aria-label":"decrease counter"},e.decreaseButtonProps,{onClick:t[0]||(t[0]=t=>e.decreaseCount())}),null,16)]))],36)]))}:{name:"prependInner",fn:b((n=>[g("div",{onMousedown:t[2]||(t[2]=v((t=>e.focus()),["prevent"]))},[I(e.$slots,"decreaseAction",x(j(__spreadProps(__spreadValues({},n),{decreaseCount:e.decreaseCount}))),(()=>[w(u,m({class:"va-counter__icon-decrease"},e.decreaseIconProps),null,16)]))],32)]))},e.$props.buttons?{name:"append",fn:b((n=>[g("div",{class:"va-counter__append-wrapper",style:_({marginLeft:e.marginComputed}),onMousedown:t[4]||(t[4]=v((t=>e.focus()),["prevent"]))},[I(e.$slots,"increaseAction",x(j(__spreadProps(__spreadValues({},n),{increaseCount:e.increaseCount}))),(()=>[w(s,m({class:"va-counter__button-increase","aria-label":"increase counter"},e.increaseButtonProps,{onClick:t[3]||(t[3]=t=>e.increaseCount())}),null,16)]))],36)]))}:{name:"appendInner",fn:b((n=>[g("div",{onMousedown:t[5]||(t[5]=v((t=>e.focus()),["prevent"]))},[I(e.$slots,"increaseAction",x(j(__spreadProps(__spreadValues({},n),{increaseCount:e.increaseCount}))),(()=>[w(u,m({class:"va-counter__icon-increase"},e.increaseIconProps),null,16)]))],32)]))},e.$slots.content?{name:"default",fn:b((t=>[g("div",z,[I(e.$slots,"content",x(j(__spreadProps(__spreadValues({},t),{value:Number(e.valueComputed)}))))],512)]))}:void 0]),1040,["class","style","focused"])}]]);export{H as _};

import './VaCounter.css';
//# sourceMappingURL=VaCounter.mjs.map
