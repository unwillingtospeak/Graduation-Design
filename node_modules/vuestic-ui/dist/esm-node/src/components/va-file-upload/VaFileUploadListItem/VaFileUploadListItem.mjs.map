{"version":3,"file":"VaFileUploadListItem.mjs","sources":["../../../../../../src/components/va-file-upload/VaFileUploadListItem/VaFileUploadListItem.vue"],"sourcesContent":["<template>\n  <va-list-item\n    class=\"va-file-upload-list-item\"\n    tabindex=\"-1\"\n    :class=\"computedClasses\"\n    :disabled=\"disabled\"\n    :aria-disabled=\"disabled\"\n  >\n    <va-list-item-section v-if=\"removed && undo\">\n      <va-file-upload-undo @recover=\"recoverFile\" />\n    </va-list-item-section>\n    <va-list-item-section v-else>\n      <div class=\"va-file-upload-list-item__content\">\n        <div v-if=\"file && file.name\" class=\"va-file-upload-list-item__name\">\n          {{ file && file.name }}\n        </div>\n        <div class=\"va-file-upload-list-item__size\">\n          {{ file && file.size }}\n        </div>\n        <va-button\n          v-if=\"!disabled\"\n          flat\n          color=\"danger\"\n          icon=\"clear\"\n          class=\"va-file-upload-list-item__delete\"\n          aria-label=\"remove file\"\n          @click.stop=\"removeFile\"\n          @keydown.enter.stop=\"removeFile\"\n          @keydown.space.stop=\"removeFile\"\n          @focus=\"onFocus\"\n          @blur=\"onBlur\"\n        />\n      </div>\n    </va-list-item-section>\n  </va-list-item>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, PropType } from 'vue'\n\nimport { useBem, useFocus, useStrictInject } from '../../../composables'\nimport { VaFileUploadKey, ConvertedFile } from '../types'\n\nimport { VaListItem, VaListItemSection, VaButton } from '../../index'\nimport { VaFileUploadUndo } from '../VaFileUploadUndo'\n\nconst INJECTION_ERROR_MESSAGE = 'The VaFileUploadListItem component should be used in the context of VaFileUpload component'\n\nexport default defineComponent({\n  name: 'VaFileUploadListItem',\n\n  components: {\n    VaListItem,\n    VaListItemSection,\n    VaFileUploadUndo,\n    VaButton,\n  },\n\n  emits: ['remove'],\n\n  props: {\n    file: { type: Object as PropType<ConvertedFile | null>, default: null },\n    color: { type: String, default: 'success' },\n  },\n\n  setup (props, { emit }) {\n    const {\n      undo,\n      disabled,\n      undoDuration,\n    } = useStrictInject(VaFileUploadKey, INJECTION_ERROR_MESSAGE)\n    const { onFocus, onBlur } = useFocus()\n    const removed = ref(false)\n\n    const removeFile = () => {\n      if (undo.value) {\n        removed.value = true\n\n        setTimeout(() => {\n          if (removed.value) {\n            emit('remove')\n            removed.value = false\n          }\n        }, undoDuration.value ?? 0)\n      } else {\n        emit('remove')\n        removed.value = false\n      }\n    }\n\n    const recoverFile = () => { removed.value = false }\n\n    const computedClasses = useBem('va-file-upload-list-item', () => ({\n      undo: removed.value,\n    }))\n\n    return {\n      undo,\n      removed,\n      disabled,\n      computedClasses,\n\n      onBlur,\n      onFocus,\n      removeFile,\n      recoverFile,\n    }\n  },\n})\n</script>\n\n<style lang='scss'>\n@import \"../../../styles/resources\";\n@import \"variables\";\n\n.va-file-upload-list-item {\n  background-color: var(--va-file-upload-list-item-background-color);\n  box-shadow: var(--va-file-upload-list-item, var(--va-block-box-shadow));\n  border-radius: var(--va-file-upload-list-item-border-radius, var(--va-block-border-radius));\n  position: relative;\n  line-height: 1.5rem;\n  padding: 1.125rem 0.5rem 1rem 1rem;\n  max-width: 100%;\n  width: 100%;\n\n  & + & {\n    margin-top: 0.5rem;\n  }\n\n  .va-list-item__inner {\n    padding: 0;\n    overflow: hidden;\n  }\n\n  &__content {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n  }\n\n  &__name {\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    flex-basis: 60%;\n    overflow: hidden;\n  }\n\n  &__size {\n    color: var(--va-file-upload-list-item-size-text-color);\n  }\n\n  &__delete {\n    font-size: 1.5rem;\n    cursor: pointer;\n\n    --va-button-size: 1.5rem;\n  }\n\n  &--undo {\n    overflow: hidden;\n    position: relative;\n\n    .va-list-item-section {\n      padding: 0;\n    }\n  }\n}\n</style>\n"],"names":["_sfc_main","defineComponent","name","components","VaListItem","VaListItemSection","VaFileUploadUndo","VaButton","emits","props","file","type","Object","default","color","String","setup","emit","undo","disabled","undoDuration","useStrictInject","VaFileUploadKey","onFocus","onBlur","useFocus","removed","ref","computedClasses","useBem","value","removeFile","setTimeout","_a","recoverFile","_hoisted_1","class","_hoisted_3","_createBlock","_component_va_list_item","_normalizeClass","_ctx","tabindex","_component_va_list_item_section","key","_withCtx","_createVNode","_component_va_file_upload_undo","onRecover","_createElementVNode","_createElementBlock","_hoisted_2","_toDisplayString","_createCommentVNode","size","_component_va_button","flat","icon","onClick","_withModifiers","onKeydown","_withKeys"],"mappings":"2xFA8CA,MAEKA,EAAaC,EAAa,CAC7BC,KAAM,uBAENC,WAAY,CACVC,WAAAA,EACAC,kBAAAA,EACAC,iBAAAA,EACAC,SAAAA,GAGFC,MAAO,CAAC,UAERC,MAAO,CACLC,KAAM,CAAEC,KAAMC,OAA0CC,QAAS,MACjEC,MAAO,CAAEH,KAAMI,OAAQF,QAAS,YAGlCG,MAAOP,GAAOQ,KAAEA,IACR,MAAAC,KACJA,EAAAC,SACAA,EAAAC,aACAA,GACEC,EAAgBC,EAxBQ,+FAyBtBC,QAAEA,EAASC,OAAAA,GAAWC,IACtBC,EAAUC,GAAI,GAoBdC,EAAkBC,EAAO,4BAA4B,KAAO,CAChEX,KAAMQ,EAAQI,UAGT,MAAA,CACLZ,KAAAA,EACAQ,QAAAA,EACAP,SAAAA,EACAS,gBAAAA,EAEAJ,OAAAA,EACAD,QAAAA,EACAQ,WA9BiB,WACbb,EAAKY,OACPJ,EAAQI,OAAQ,EAEhBE,YAAW,KACLN,EAAQI,QACVb,EAAK,UACLS,EAAQI,OAAQ,KAEjB,OAAAG,EAAAb,EAAaU,OAAbG,EAAsB,KAEzBhB,EAAK,UACLS,EAAQI,OAAQ,IAmBlBI,YAfkB,KAAQR,EAAQI,OAAQ,OA9ErCK,EAAA,CAAAC,MAAM,8CACqBA,MAAM,kCAG/BC,EAAA,CAAAD,MAAM,sMAfjBE,EAiCeC,EAAA,CAhCbH,MAAKI,EAAC,CAAA,2BAEEC,EAAeb,kBADvBc,SAAS,KAERvB,SAAUsB,EAAAtB,SACV,gBAAesB,EAAAtB,UAAA,YAEhB,IAEuB,CAFKsB,EAAAf,SAAWe,YAAvCH,EAEuBK,EAAA,CAAAC,IAAA,GAAA,CAAA/B,QAAAgC,GADrB,IAA8C,CAA9CC,EAA8CC,EAAxB,CAAAC,UAASP,EAAWP,aAAA,KAAA,EAAA,CAAA,6BAE5CI,EAsBuBK,EAAA,CAAAC,IAAA,GAAA,CAAA/B,QAAAgC,GArBrB,IAoBM,CApBNI,EAoBM,MApBNd,EAoBM,CAnBOM,EAAA/B,MAAQ+B,OAAKvC,UAAxBgD,EAEM,MAFNC,EAEMC,EADDX,EAAQ/B,MAAA+B,EAAA/B,KAAKR,MAAI,IAAAmD,EAAA,IAAA,GAEtBJ,EAEM,MAFNZ,EAEMe,EADDX,EAAA/B,MAAQ+B,OAAKa,MAAI,GAGbb,WAUAY,EAAA,IAAA,QAXTf,EAYEiB,EAAA,CAAAX,IAAA,EAVAY,KAAA,GACA1C,MAAM,SACN2C,KAAK,QACLrB,MAAM,mCACN,aAAW,cACVsB,QAAKC,EAAOlB,EAAUV,WAAA,CAAA,SACtB6B,UAAO,CAAAC,EAAAF,EAAalB,EAAUV,WAAA,CAAA,SAAA,CAAA,UAAA8B,EAAAF,EACVlB,EAAUV,WAAA,CAAA,SAAA,CAAA,WAC9BR,QAAOkB,EAAAlB,QACPC,OAAMiB,EAAAjB,QAAA,KAAA,EAAA,CAAA,UAAA,YAAA,UAAA"}