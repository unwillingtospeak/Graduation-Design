{"version":3,"file":"VaDatePicker.mjs","sources":["../../../../../src/components/va-date-picker/VaDatePicker.vue"],"sourcesContent":["<template>\n  <div class=\"va-date-picker\" :class=\"classComputed\" :style=\"colorsStyle\">\n    <va-date-picker-header\n      v-bind=\"headerProps\"\n      v-model:view=\"syncView\"\n    >\n      <template v-for=\"(_, name) in $slots\" :key=\"name\" v-slot:[name]=\"bind\">\n        <slot :name=\"name\" v-bind=\"bind\" />\n      </template>\n    </va-date-picker-header>\n\n    <div class=\"va-date-picker__picker-wrapper\">\n      <va-day-picker\n        v-if=\"syncView.type === 'day'\"\n        ref=\"currentPicker\"\n        v-bind=\"dayPickerProps\"\n        :model-value=\"valueComputed\"\n        :view=\"syncView\"\n        :readonly=\"$props.disabled || isPickerReadonly('day')\"\n        @update:model-value=\"onDayModelValueUpdate\"\n        @hover:day=\"(value) => $emit('hover:day', value)\"\n        @click:day=\"(value) => $emit('click:day', value)\"\n      >\n        <template v-for=\"(_, name) in $slots\" :key=\"name\" v-slot:[name]=\"bind\">\n          <slot :name=\"name\" v-bind=\"bind\" />\n        </template>\n      </va-day-picker>\n\n      <va-month-picker\n        v-if=\"syncView.type === 'month'\"\n        ref=\"currentPicker\"\n        v-bind=\"monthPickerProps\"\n        :view=\"syncView\"\n        :model-value=\"valueComputed\"\n        :readonly=\"$props.disabled || isPickerReadonly('month')\"\n        @update:model-value=\"onMonthModelValueUpdate\"\n        @hover:month=\"(value) => $emit('hover:month', value)\"\n        @click:month=\"onMonthClick\"\n      >\n        <template v-for=\"(_, name) in $slots\" :key=\"name\" v-slot:[name]=\"bind\">\n          <slot :name=\"name\" v-bind=\"bind\" />\n        </template>\n      </va-month-picker>\n\n      <va-year-picker\n        v-if=\"syncView.type === 'year'\"\n        ref=\"currentPicker\"\n        v-bind=\"yearPickerProps\"\n        :view=\"syncView\"\n        :model-value=\"valueComputed\"\n        :readonly=\"$props.disabled || isPickerReadonly('year')\"\n        @hover:year=\"(value) => $emit('hover:year', value)\"\n        @update:model-value=\"onYearModelValueUpdate\"\n        @click:year=\"onYearClick\"\n      >\n        <template v-for=\"(_, name) in $slots\" :key=\"name\" v-slot:[name]=\"bind\">\n          <slot :name=\"name\" v-bind=\"bind\" />\n        </template>\n      </va-year-picker>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, nextTick, PropType, ref, watch } from 'vue'\n\nimport { filterComponentProps, extractComponentProps, extractComponentEmits } from '../../utils/child-props'\nimport { useColors, useStateful, useStatefulProps, useStatefulEmits } from '../../composables'\nimport { useView } from './hooks/view'\n\nimport { DatePickerModelValue, DatePickerType, DatePickerView } from './types'\n\nimport VaDayPicker from './components/VaDayPicker/VaDayPicker.vue'\nimport VaDatePickerHeader from './components/VaDatePickerHeader/VaDatePickerHeader.vue'\nimport VaMonthPicker from './components/VaMonthPicker/VaMonthPicker.vue'\nimport VaYearPicker from './components/VaYearPicker/VaYearPicker.vue'\n\nconst DEFAULT_MONTH_NAMES = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']\nconst DEFAULT_WEEKDAY_NAMES = ['SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA']\n\nexport default defineComponent({\n  name: 'VaDatePicker',\n\n  components: { VaDayPicker, VaDatePickerHeader, VaMonthPicker, VaYearPicker },\n\n  props: {\n    ...useStatefulProps,\n    ...extractComponentProps(VaDatePickerHeader),\n    ...extractComponentProps(VaDayPicker),\n    ...extractComponentProps(VaMonthPicker),\n    ...extractComponentProps(VaYearPicker),\n    modelValue: { type: [Date, Array, Object] as PropType<DatePickerModelValue> },\n    monthNames: { type: Array as PropType<string[]>, default: DEFAULT_MONTH_NAMES },\n    weekdayNames: { type: Array as PropType<string[]>, default: DEFAULT_WEEKDAY_NAMES },\n    view: { type: Object as PropType<DatePickerView> },\n    type: { type: String as PropType<DatePickerType>, default: 'day' },\n    readonly: { type: Boolean, default: false },\n    disabled: { type: Boolean, default: false },\n\n    // Colors\n    color: { type: String, default: undefined },\n    weekendsColor: { type: String, default: undefined },\n  },\n\n  emits: [\n    ...useStatefulEmits,\n    ...extractComponentEmits(VaDatePickerHeader),\n    ...extractComponentEmits(VaYearPicker),\n    ...extractComponentEmits(VaDayPicker),\n    ...extractComponentEmits(VaMonthPicker),\n  ],\n\n  setup (props, { emit }) {\n    const currentPicker = ref<typeof VaDayPicker | typeof VaMonthPicker | typeof VaYearPicker>()\n\n    const { valueComputed } = useStateful(props, emit)\n\n    const { syncView } = useView(props, emit, { type: props.type })\n\n    const classComputed = computed(() => ({\n      'va-date-picker_without-week-days': props.hideWeekDays,\n      'va-date-picker_disabled': props.disabled,\n    }))\n\n    const onDayModelValueUpdate = (modelValue: DatePickerModelValue) => {\n      if (props.readonly) { return }\n\n      // Do not update model value if we just want to change view (We can change it for now, but later we can add here timepicker)\n      if (props.type === 'day') { valueComputed.value = modelValue }\n    }\n\n    const onMonthClick = (date: Date) => {\n      emit('click:month', date)\n      const year = date.getFullYear()\n      const month = date.getMonth()\n      if (props.type !== 'month') {\n        syncView.value = { type: 'day', year, month }\n      }\n    }\n\n    const onMonthModelValueUpdate = (modelValue: DatePickerModelValue) => {\n      // Do not update model value if we just want to change view\n      if (props.type === 'month') { valueComputed.value = modelValue }\n    }\n\n    const onYearClick = (date : Date) => {\n      emit('click:year', date)\n\n      const year = date.getFullYear()\n\n      if (props.type !== 'year') {\n        syncView.value = { type: 'month', year, month: syncView.value.month }\n      }\n    }\n\n    const onYearModelValueUpdate = (modelValue: DatePickerModelValue) => {\n      // Do not update model value if we just want to change view\n      if (props.type === 'year') { valueComputed.value = modelValue }\n    }\n\n    const { colorsToCSSVariable } = useColors()\n\n    const colorsStyle = colorsToCSSVariable({\n      color: props.color,\n      'weekends-color': props.weekendsColor,\n    }, 'va-date-picker')\n\n    const focusCurrentPicker = () => currentPicker.value?.$el.focus()\n\n    watch(syncView, (newValue, prevValue) => {\n      // Don't focus new picker if user does not change type\n      if (newValue.type === prevValue.type) { return }\n\n      nextTick(focusCurrentPicker)\n    })\n\n    const isPickerReadonly = (pickerName: 'year' | 'month' | 'day') => {\n      return props.readonly && props.type === pickerName\n    }\n\n    return {\n      dayPickerProps: filterComponentProps(props, extractComponentProps(VaDayPicker)),\n      headerProps: filterComponentProps(props, extractComponentProps(VaDatePickerHeader)),\n      monthPickerProps: filterComponentProps(props, extractComponentProps(VaMonthPicker)),\n      yearPickerProps: filterComponentProps(props, extractComponentProps(VaYearPicker)),\n\n      syncView,\n\n      classComputed,\n      valueComputed,\n\n      onDayModelValueUpdate,\n\n      onMonthClick,\n      onMonthModelValueUpdate,\n\n      onYearClick,\n      onYearModelValueUpdate,\n\n      colorsStyle,\n      currentPicker,\n      focusCurrentPicker,\n\n      isPickerReadonly,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import 'variables';\n\n.va-date-picker {\n  --va-date-picker-content-height: calc(var(--va-date-picker-cell-size) * 7 + var(--va-date-picker-cell-gap) * 6);\n\n  width: calc(var(--va-date-picker-cell-size) * 7 + var(--va-date-picker-cell-gap) * 6);\n  font-family: var(--va-font-family);\n  font-style: var(--va-date-picker-font-style);\n  font-weight: var(--va-date-picker-font-weight);\n  font-size: var(--va-date-picker-font-size);\n  line-height: var(--va-date-picker-line-height);\n\n  &__picker-wrapper {\n    height: var(--va-date-picker-content-height);\n  }\n\n  &_without-week-days {\n    --va-date-picker-content-height: calc(var(--va-date-picker-cell-size) * 6 + var(--va-date-picker-cell-gap) * 6);\n  }\n\n  &_mobile {\n    .va-day-picker,\n    .va-month-picker,\n    .va-year-picker {\n      height: 100%;\n    }\n  }\n\n  &_disabled {\n    opacity: 0.4;\n    position: relative;\n\n    &::before {\n      content: '';\n      position: absolute;\n      height: 100%;\n      width: 100%;\n      z-index: 100;\n    }\n  }\n}\n\n.va-date-picker-header {\n  padding-bottom: 0.25rem;\n}\n</style>\n"],"names":["_sfc_main","defineComponent","name","components","VaDayPicker","VaDatePickerHeader","VaMonthPicker","VaYearPicker","props","__spreadValues","useStatefulProps","extractComponentProps","modelValue","type","Date","Array","Object","monthNames","default","weekdayNames","view","String","readonly","Boolean","disabled","color","weekendsColor","emits","useStatefulEmits","extractComponentEmits","setup","emit","currentPicker","ref","valueComputed","useStateful","syncView","useView","classComputed","computed","hideWeekDays","colorsToCSSVariable","useColors","colorsStyle","focusCurrentPicker","_a","value","$el","focus","watch","newValue","prevValue","nextTick","dayPickerProps","filterComponentProps","headerProps","monthPickerProps","yearPickerProps","onDayModelValueUpdate","onMonthClick","date","year","getFullYear","month","getMonth","onMonthModelValueUpdate","onYearClick","onYearModelValueUpdate","isPickerReadonly","pickerName","_hoisted_1","class","_createElementBlock","_normalizeClass","_ctx","style","_normalizeStyle","_createVNode","_component_va_date_picker_header","_mergeProps","_cache","$event","_createSlots","_","$slots","fn","_withCtx","bind","_renderSlot","_normalizeProps","_guardReactiveProps","_createElementVNode","_createBlock","_component_va_day_picker","key","$props","$emit","_component_va_month_picker","_component_va_year_picker"],"mappings":"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"}