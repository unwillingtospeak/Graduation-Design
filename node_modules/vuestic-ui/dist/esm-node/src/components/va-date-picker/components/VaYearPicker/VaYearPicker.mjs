import{defineComponent as e,shallowRef as a,toRefs as t,computed as l,onMounted as o,watch as r,resolveComponent as n,openBlock as d,createElementBlock as s,mergeProps as i,withKeys as u,withModifiers as c,Fragment as v,renderList as y,createBlock as p,withCtx as f,createTextVNode as g,toDisplayString as h}from"vue";import{c as m}from"../../utils/date-utils.mjs";import{u as k}from"../../hooks/grid-keyboard-navigation.mjs";import{u as I}from"../../hooks/use-picker.mjs";import{V as Y}from"../VaDatePickerCell.mjs";import{_ as x}from"../../../../../plugin-vue_export-helper.mjs";var b=x(e({name:"VaYearPicker",components:{VaDatePickerCell:Y},props:{modelValue:{type:[Date,Array,Object]},allowedYears:{type:Function,default:void 0},highlightToday:{type:Boolean,default:!0},startYear:{type:Number,default:1970},mode:{type:String,default:"auto"},view:{type:Object,default:()=>({type:"year"})},endYear:{type:Number,default:()=>(new Date).getFullYear()+50},readonly:{type:Boolean,default:!1}},emits:["update:modelValue","hover:year","click:year"],setup(e,{emit:n}){const d=a(),{view:s}=t(e),i=l((()=>((e,a)=>{const t=a-e+1;return Array.from(Array(t).keys()).map((a=>m(e+a)))})(e.startYear,e.endYear)));o((()=>{(e=>{if(!d.value)return;const a=d.value.scrollHeight,t=d.value.offsetHeight,l=a/i.value.length*e;d.value.scrollTo({top:l-t/2})})(i.value.findIndex((e=>e.getFullYear()===s.value.year)))}));const{hoveredIndex:u,onClick:c,isToday:v,isSelected:y,isInRange:p}=I("year",i,e,n),{focusedCellIndex:f,containerAttributes:g}=k({rowSize:1,start:0,end:i.value.length,onFocusIndex:l((()=>i.value.findIndex((e=>e.getFullYear()===s.value.year)))),onSelected:e=>c(i.value[e])});return r(f,(e=>-1!==e&&(e=>{if(!d.value)return;const a=d.value.scrollHeight,t=d.value.offsetHeight,l=a/i.value.length*e,o=a/i.value.length,r=l-d.value.scrollTop;r<0?d.value.scrollTo({top:l}):r>t&&d.value.scrollTo({top:l-t+o})})(e))),r(f,(e=>{u.value=e})),r(u,(e=>{f.value=e})),{hoveredIndex:u,years:i,rootNode:d,onClick:c,isToday:v,isSelected:y,isInRange:p,isYearDisabled:a=>void 0!==e.allowedYears&&!e.allowedYears(a),focusedCellIndex:f,containerAttributes:g}}}),[["render",function _sfc_render(e,a,t,l,o,r){const m=n("va-date-picker-cell");return d(),s("div",i({ref:"rootNode",class:"va-year-picker"},e.containerAttributes,{onKeydown:a[1]||(a[1]=u(c((()=>{}),["prevent"]),["space"]))}),[(d(!0),s(v,null,y(e.years,((t,l)=>(d(),p(m,{key:t.toString(),"in-range":e.isInRange(t),selected:e.isSelected(t),disabled:e.isYearDisabled(t),today:e.isToday(t),focused:e.focusedCellIndex===l,"highlight-today":e.highlightToday,readonly:e.readonly,onClick:a=>{e.onClick(t),e.focusedCellIndex=l},onMouseenter:a=>e.hoveredIndex=l,onMouseleave:a[0]||(a[0]=a=>e.hoveredIndex=-1)},{default:f((()=>[g(h(t.getFullYear()),1)])),_:2},1032,["in-range","selected","disabled","today","focused","highlight-today","readonly","onClick","onMouseenter"])))),128))],16)}]]);export{b as V};

import './VaYearPicker.css';
//# sourceMappingURL=VaYearPicker.mjs.map
