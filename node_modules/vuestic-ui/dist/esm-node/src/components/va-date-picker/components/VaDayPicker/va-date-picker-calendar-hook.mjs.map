{"version":3,"file":"va-date-picker-calendar-hook.mjs","sources":["../../../../../../../src/components/va-date-picker/components/VaDayPicker/va-date-picker-calendar-hook.ts"],"sourcesContent":["import { computed, Ref } from 'vue'\n\nimport { DatePickerView } from '../../types'\n\n/** Returns last day of previous month */\nexport const getMonthDaysCount = (year: number, month: number): number => new Date(year, month + 1, 0).getDate()\n\nexport const getMonthStartWeekday = (year: number, month: number) => new Date(year, month, 1).getDay()\n\n/** Returns array from 1 to length */\nexport const getNumbersArray = (length: number) => Array.from(Array(length).keys()).map((k) => k + 1)\n\nexport const useVaDatePickerCalendar = (view: Ref<DatePickerView>, options?: { firstWeekday?: Ref<'Monday' | 'Sunday'> }) => {\n  const CALENDAR_ROWS_COUNT = 6 // Need 6 rows if first day of a month is Saturday and the last day is Monday 31th.\n\n  const localizeWeekday = (weekdayNumber: number) => {\n    if (options && options.firstWeekday?.value === 'Monday') {\n      // Set Sunday as 7th day of the week and Monday as first day of the week.\n      return weekdayNumber === 0 ? 6 : weekdayNumber - 1\n    }\n\n    return weekdayNumber\n  }\n\n  const currentMonthStartWeekday = computed(() => localizeWeekday(getMonthStartWeekday(view.value.year, view.value.month)))\n\n  const getPreviousDates = () => {\n    if (currentMonthStartWeekday.value === 0) { return [] }\n\n    const prevMonthDaysCount = getMonthDaysCount(view.value.year, view.value.month - 1)\n    const prevMonthDays: number[] = getNumbersArray(prevMonthDaysCount)\n\n    return prevMonthDays\n      .slice(-currentMonthStartWeekday.value)\n      .map((d) => new Date(view.value.year, view.value.month - 1, d))\n  }\n\n  const getCurrentDates = () => {\n    const currentMonthDays: number[] = getNumbersArray(getMonthDaysCount(view.value.year, view.value.month))\n\n    return currentMonthDays.map((d) => new Date(view.value.year, view.value.month, d))\n  }\n\n  const prevAndCurrentDays = computed(() => [...getPreviousDates(), ...getCurrentDates()])\n  const currentMonthEndIndex = computed(() => prevAndCurrentDays.value.length)\n\n  const calendarDates = computed(() => {\n    const days = prevAndCurrentDays.value\n\n    const daysRemaining = 7 * CALENDAR_ROWS_COUNT - days.length\n\n    const nextMonthDaysCount = getMonthDaysCount(view.value.year, view.value.month + 1)\n    const nextMonthDays: number[] = getNumbersArray(nextMonthDaysCount)\n\n    return [\n      ...days,\n      ...nextMonthDays\n        .slice(0, daysRemaining)\n        .map((d) => new Date(view.value.year, view.value.month + 1, d)),\n    ]\n  })\n\n  return { calendarDates, currentMonthStartIndex: currentMonthStartWeekday, currentMonthEndIndex }\n}\n"],"names":["getMonthDaysCount","year","month","Date","getDate","getNumbersArray","length","Array","from","keys","map","k","useVaDatePickerCalendar","view","options","currentMonthStartWeekday","computed","localizeWeekday","value","weekdayNumber","getDay","_a","firstWeekday","getPreviousDates","prevMonthDaysCount","slice","d","prevAndCurrentDays","currentMonthEndIndex","calendarDates","days","daysRemaining","nextMonthDaysCount","nextMonthDays","currentMonthStartIndex"],"mappings":"+BAKa,MAAAA,kBAAoB,CAACC,EAAcC,IAA0B,IAAIC,KAAKF,EAAMC,EAAQ,EAAG,GAAGE,UAK1FC,gBAAmBC,GAAmBC,MAAMC,KAAKD,MAAMD,GAAQG,QAAQC,KAAKC,GAAMA,EAAI,IAEtFC,wBAA0B,CAACC,EAA2BC,KACjE,MAWMC,EAA2BC,GAAS,KAAMC,OAjBbhB,EAiBkDY,EAAKK,MAAMjB,KAjB/CC,EAiBqDW,EAAKK,MAAMhB,MATxFiB,EAR0C,IAAIhB,KAAKF,EAAMC,EAAO,GAAGkB,SAStFN,GAA2C,YAAhC,OAAAO,EAAAP,EAAQQ,mBAAR,EAAAD,EAAsBH,OAEV,IAAlBC,EAAsB,EAAIA,EAAgB,EAG5CA,EANe,IAACA,IARUlB,EAAcC,KAmB3CqB,iBAAmB,KACnB,GAAmC,IAAnCR,EAAyBG,MAAe,MAAO,GAE7C,MAAAM,EAAqBxB,kBAAkBa,EAAKK,MAAMjB,KAAMY,EAAKK,MAAMhB,MAAQ,GAGjF,OAFgCG,gBAAgBmB,GAG7CC,OAAOV,EAAyBG,OAChCR,KAAKgB,GAAM,IAAIvB,KAAKU,EAAKK,MAAMjB,KAAMY,EAAKK,MAAMhB,MAAQ,EAAGwB,MAS1DC,EAAqBX,GAAS,IAAM,IAAIO,sBALTlB,gBAAgBL,kBAAkBa,EAAKK,MAAMjB,KAAMY,EAAKK,MAAMhB,QAEzEQ,KAAKgB,GAAM,IAAIvB,KAAKU,EAAKK,MAAMjB,KAAMY,EAAKK,MAAMhB,MAAOwB,QAI3EE,EAAuBZ,GAAS,IAAMW,EAAmBT,MAAMZ,SAkBrE,MAAO,CAAEuB,cAhBab,GAAS,KAC7B,MAAMc,EAAOH,EAAmBT,MAE1Ba,EAAgB,GAA0BD,EAAKxB,OAE/C0B,EAAqBhC,kBAAkBa,EAAKK,MAAMjB,KAAMY,EAAKK,MAAMhB,MAAQ,GAC3E+B,EAA0B5B,gBAAgB2B,GAEzC,MAAA,IACFF,KACAG,EACAR,MAAM,EAAGM,GACTrB,KAAKgB,GAAM,IAAIvB,KAAKU,EAAKK,MAAMjB,KAAMY,EAAKK,MAAMhB,MAAQ,EAAGwB,SAI1CQ,uBAAwBnB,EAA0Ba,qBAAAA"}