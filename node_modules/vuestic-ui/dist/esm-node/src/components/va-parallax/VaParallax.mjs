import{defineComponent as e,shallowRef as l,ref as a,computed as t,onMounted as r,onBeforeUnmount as u,openBlock as n,createElementBlock as v,normalizeStyle as o,createElementVNode as s,renderSlot as i}from"vue";import{_ as p}from"../../../plugin-vue_export-helper.mjs";const d=e({name:"VaParallax",props:{target:{type:[Object,String]},src:{type:String,default:"",required:!0},alt:{type:String,default:"parallax"},height:{type:Number,default:400},reversed:{type:Boolean,default:!1},speed:{type:Number,default:.5,validator:e=>e>=0&&e<=1}},setup(e){const n=l(),v=l(),o=a(0),s=a(0),i=a(0),p=a(0),d=a(0),c=a(0),m=a(0),g=a(!1),f=t((()=>({height:e.height+"px"}))),h=t((()=>({display:"block",transform:`translate(-50%, ${s.value}px)`,opacity:g.value?1:0,top:e.reversed?0:"auto"}))),y=t((()=>{var l;if(!e.target)return getScrollableParent(null==(l=n.value)?void 0:l.parentElement);if(e.target instanceof HTMLElement)return e.target;const a=document.querySelector(e.target);return a||null})),getScrollableParent=e=>e?e.scrollHeight>e.clientHeight?e:getScrollableParent(e.parentElement):document.body,_=t((()=>{var e;return(null==(e=v.value)?void 0:e.naturalHeight)||0})),translate=()=>{(()=>{var l,a;const t=(null==(l=n.value)?void 0:l.getBoundingClientRect())||{top:0};d.value=(null==(a=y.value)?void 0:a.scrollTop)||0,i.value=_.value-e.height,o.value=t.top+d.value,c.value=window.innerHeight,m.value=d.value+c.value})(),p.value=(m.value-o.value)/(e.height+c.value),s.value=Math.round(i.value*p.value)*e.speed,e.reversed&&(s.value=-s.value)},addEventListeners=()=>{var e,l;null==(e=y.value)||e.addEventListener("scroll",translate),null==(l=y.value)||l.addEventListener("resize",translate)};return r((()=>{var e,l;(null==(e=v.value)?void 0:e.complete)?(translate(),addEventListeners()):null==(l=v.value)||l.addEventListener("load",(()=>{translate(),addEventListeners()}),!1),g.value=!0})),u((()=>{var e,l;null==(e=y.value)||e.removeEventListener("scroll",translate),null==(l=y.value)||l.removeEventListener("resize",translate)})),{img:v,rootElement:n,computedWrapperStyles:f,computedImgStyles:h}}}),c={class:"va-parallax__image-container"},m=["src","alt"],g={class:"va-parallax__item-container"};var f=p(d,[["render",function _sfc_render(e,l,a,t,r,u){return n(),v("div",{ref:"rootElement",class:"va-parallax",style:o(e.computedWrapperStyles)},[s("div",c,[s("img",{ref:"img",class:"va-parallax__image",src:e.$props.src,alt:e.$props.alt,style:o(e.computedImgStyles)},null,12,m)]),s("div",g,[i(e.$slots,"default")])],4)}]]);export{f as _};

import './VaParallax.css';
//# sourceMappingURL=VaParallax.mjs.map
