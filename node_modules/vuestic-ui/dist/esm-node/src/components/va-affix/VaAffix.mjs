var e=Object.defineProperty,t=Object.defineProperties,o=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,__defNormalProp=(t,o,i)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[o]=i;import{defineComponent as s,shallowRef as n,computed as a,ref as l,onMounted as d,nextTick as u,onBeforeUnmount as p,openBlock as m,createElementBlock as c,createElementVNode as v,normalizeStyle as g,renderSlot as x,normalizeClass as b,createCommentVNode as y}from"vue";import{n as h}from"../../../vendor.mjs";import{g as A}from"../../utils/ssr-utils.mjs";import{u as B,h as j,g as O}from"./VaAffix-utils.mjs";import{_ as w}from"../../../plugin-vue_export-helper.mjs";const T=s({name:"VaAffix",emits:["change"],props:{offsetTop:{type:Number,default:void 0},offsetBottom:{type:Number,default:void 0},target:{type:[Object,Function],default:A}},setup(e,{emit:s}){const m=n(),getTargetElement=()=>"function"==typeof e.target?e.target():e.target,c=a((()=>v.value.isTopAffixed||v.value.isBottomAffixed)),v=l({isTopAffixed:!1,isBottomAffixed:!1}),getState=()=>v.value,setState=e=>{v.value=e,s("change",c)},calculateTop=()=>{const t=getTargetElement();if(!t)return 0;if(void 0!==e.offsetTop){if(!(t instanceof Window)){const{top:o}=t.getBoundingClientRect();return o+e.offsetTop}return e.offsetTop}},calculateBottom=()=>{const t=getTargetElement();if(!t)return 0;if(void 0!==e.offsetBottom){if(!(t instanceof Window)){const{bottom:o}=t.getBoundingClientRect(),{borderTopWidth:i,borderBottomWidth:r}=getComputedStyle(t),{offsetHeight:f,clientHeight:s}=t,n=f-s-parseInt(i)-parseInt(r);return O()-(o-e.offsetBottom)+n}return e.offsetBottom}},convertToPixels=e=>{const t=e();return void 0===t?void 0:`${t}px`},g=a((()=>[{"va-affix--affixed":c}])),x=a((()=>({top:v.value.isTopAffixed?convertToPixels(calculateTop):void 0,bottom:v.value.isBottomAffixed?convertToPixels(calculateBottom):void 0,width:`${v.value.width}px`}))),b=l(),throttledEventHandler=(s,n)=>{const a=(l=((e,t)=>{for(var o in t||(t={}))r.call(t,o)&&__defNormalProp(e,o,t[o]);if(i)for(var o of i(t))f.call(t,o)&&__defNormalProp(e,o,t[o]);return e})({},e),d={initialPosition:b.value,element:m.value,target:getTargetElement(),setState:setState,getState:getState},t(l,o(d)));var l,d;if(s&&"resize"!==s){if(n&&n.target){const e=getTargetElement();e===n.target||e instanceof Window?j(s,a):setState({isBottomAffixed:!1,isTopAffixed:!1})}}else j(s,a)};let y=h;return d((()=>{var e;b.value=null==(e=m.value)?void 0:e.getBoundingClientRect();y=B(["scroll","resize"],{handler:throttledEventHandler}),u((()=>{throttledEventHandler(null)}))})),p(y),{computedClass:g,computedStyle:x,isAffixed:c,element:m}}}),C={ref:"element",class:"va-affix"};var P=w(T,[["render",function _sfc_render(e,t,o,i,r,f){return m(),c("div",C,[v("div",{style:g({visibility:e.isAffixed?"hidden":"inherit"})},[x(e.$slots,"default")],4),e.isAffixed?(m(),c("div",{key:0,class:b(e.computedClass),style:g(e.computedStyle)},[x(e.$slots,"default")],6)):y("",!0)],512)}]]);export{P as _};

import './VaAffix.css';
//# sourceMappingURL=VaAffix.mjs.map
