var e=Object.defineProperty,o=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,__defNormalProp=(o,a,r)=>a in o?e(o,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[a]=r,__spreadValues=(e,o)=>{for(var a in o||(o={}))n.call(o,a)&&__defNormalProp(e,a,o[a]);if(r)for(var a of r(o))t.call(o,a)&&__defNormalProp(e,a,o[a]);return e},__spreadProps=(e,r)=>o(e,a(r));import{defineComponent as l,shallowRef as s,computed as p,nextTick as d,resolveComponent as i,openBlock as u,createBlock as c,normalizeClass as m,normalizeStyle as f,withCtx as v,createVNode as b,mergeProps as y,createSlots as w,createElementVNode as V,toHandlers as h,renderSlot as g,normalizeProps as I,guardReactiveProps as D,createCommentVNode as j,withModifiers as x,withKeys as P,renderList as C}from"vue";import{o as k}from"../../../vendor.mjs";import{e as O,f as S}from"../../utils/child-props.mjs";import{a as _,u as T,b as B}from"../../composables/useClearable.mjs";import"colortranslator";import{u as F,a as K}from"../../composables/useFocus.mjs";import"../../composables/useDropdown.mjs";import{a as $,u as A,b as W}from"../../composables/useValidation.mjs";import{u as E}from"../../composables/useSyncProp.mjs";import{u as L}from"./hooks/time-text-parser.mjs";import{u as M}from"./hooks/time-text-formatter.mjs";import{_ as q}from"../va-time-picker/VaTimePicker.mjs";import"../va-input/index.mjs";import{V as R}from"../va-icon/VaIcon.mjs";import{V as U}from"../va-dropdown/index.mjs";import{_ as z}from"../../../plugin-vue_export-helper.mjs";import{V as G}from"../va-dropdown/components/VaDropdownContent/index.mjs";import{V as H}from"../va-input/components/VaInputWrapper/VaInputWrapper.mjs";const J=O(H,["focused","maxLength","counterValue"]);var N=z(l({name:"VaTimeInput",components:{VaDropdown:U,VaDropdownContent:G,VaTimePicker:q,VaIcon:R,VaInputWrapper:H},emits:[...F,...$,..._,"update:modelValue","update:isOpen"],props:__spreadProps(__spreadValues(__spreadValues(__spreadValues(__spreadValues({},T),J),O(q)),A),{isOpen:{type:Boolean,default:void 0},modelValue:{type:Date,default:void 0},clearValue:{type:Date,default:void 0},format:{type:Function},parse:{type:Function},manualInput:{type:Boolean,default:!1},leftIcon:{type:Boolean,default:!1},icon:{type:String,default:"schedule"}}),inheritAttrs:!1,setup(e,{emit:o,slots:a,attrs:r}){const n=s(),t=s(),[l]=E("isOpen",e,o,!1),[i]=E("modelValue",e,o),{parse:u,isValid:c}=L(e),{format:m}=M(e),f=p((()=>m(i.value||e.clearValue))),v=p({get:()=>!e.disabled&&!e.readonly&&l.value,set(e){l.value=e,d(e?()=>{var e;return null==(e=t.value)?void 0:e.focus()}:()=>{var e;return null==(e=n.value)?void 0:e.focus()})}}),{isFocused:b,focus:y,blur:w,onFocus:V,onBlur:h}=K(n),reset=()=>{o("update:modelValue",e.clearValue),o("clear")},{computedError:g,computedErrorMessages:I,listeners:D,validationAriaAttributes:j}=W(e,o,reset,y),{canBeCleared:x,clearIconProps:P,onFocus:C,onBlur:_}=B(e,f),T=p((()=>x.value&&f.value!==m(e.clearValue))),F=p((()=>({name:e.icon,color:e.color,size:"small"}))),$=p((()=>__spreadProps(__spreadValues({},S(e,J).value),{focused:b.value,error:g.value,errorMessages:I.value,readonly:e.readonly||!e.manualInput}))),A=p((()=>({focus:()=>{e.disabled||(V(),e.readonly||(C(),D.onFocus()))},blur:()=>{e.disabled||(h(),e.readonly||(_(),D.onBlur()))}}))),R=p((()=>{const o=[e.leftIcon&&"prependInner",(!e.leftIcon||e.clearable)&&"icon"];return Object.keys(a).filter((e=>!o.includes(e)))})),U=p((()=>e.disabled||e.readonly?-1:0)),z=p((()=>__spreadValues(__spreadValues({readonly:e.readonly||!e.manualInput,tabindex:e.disabled?-1:0,value:f.value,ariaLabel:e.label||"selected date",ariaRequired:e.requiredMark,ariaDisabled:e.disabled,ariaReadOnly:e.readonly},j.value),k(r,["class","style"]))));return{input:n,timePicker:t,timePickerProps:S(e,O(q)),computedInputWrapperProps:$,computedInputListeners:A,isOpenSync:l,doShowDropdown:v,modelValueSync:i,valueText:f,onInputTextChanged:e=>{var o;const a=null==(o=e.target)?void 0:o.value;if(!a)return reset();const r=u(a);c.value&&r?i.value=r:(i.value=void 0,c.value=!0)},canBeClearedComputed:T,iconProps:F,clearIconProps:P,filteredSlots:R,inputAttributesComputed:z,iconTabindexComputed:U,hideDropdown:()=>{v.value=!1},showDropdown:(e,o,a)=>{v.value=!0},toggleDropdown:o=>{var a;(a=o instanceof KeyboardEvent?o:void 0,l.value||!(e.disabled||e.readonly||e.manualInput&&"Space"!==(null==a?void 0:a.code)))&&(v.value=!v.value)},reset:reset,focus:y,blur:w}}}),[["render",function _sfc_render(e,o,a,r,n,t){const l=i("va-icon"),s=i("va-input-wrapper"),p=i("va-time-picker"),d=i("va-dropdown-content"),k=i("va-dropdown");return u(),c(k,{modelValue:e.doShowDropdown,"onUpdate:modelValue":o[2]||(o[2]=o=>e.doShowDropdown=o),class:m(["va-time-input",e.$attrs.class]),placement:"bottom-start","inner-anchor-selector":".va-input-wrapper__field",style:f(e.$attrs.style),offset:[2,0],"close-on-content-click":!1,disabled:e.$props.disabled,"keyboard-navigation":""},{anchor:v((()=>[b(s,y({class:"va-time-input__anchor"},e.computedInputWrapperProps),w({default:v((()=>[V("input",y({ref:"input",class:"va-time-input__input"},e.inputAttributesComputed,h(e.computedInputListeners),{onChange:o[0]||(o[0]=(...o)=>e.onInputTextChanged&&e.onInputTextChanged(...o))}),null,16)])),prependInner:v((o=>[g(e.$slots,"prependInner",I(D(__spreadProps(__spreadValues({},o),{toggleDropdown:e.toggleDropdown,showDropdown:e.showDropdown,hideDropdown:e.hideDropdown,isOpen:e.isOpenSync,focus:e.focus})))),e.$props.leftIcon?(u(),c(l,y({key:0,role:"button","aria-label":"toggle dropdown","aria-hidden":"false",tabindex:e.iconTabindexComputed},e.iconProps),null,16,["tabindex"])):j("",!0)])),icon:v((()=>[e.canBeClearedComputed?(u(),c(l,y({key:0,role:"button","aria-label":"reset time","aria-hidden":"false",tabindex:e.iconTabindexComputed},e.clearIconProps,{onClick:x(e.reset,["stop"]),onKeydown:[P(x(e.reset,["stop"]),["enter"]),P(x(e.reset,["stop"]),["space"])]}),null,16,["tabindex","onClick","onKeydown"])):e.$props.leftIcon?j("",!0):(u(),c(l,y({key:1,role:"button","aria-label":"toggle dropdown","aria-hidden":"false",tabindex:e.iconTabindexComputed},e.iconProps),null,16,["tabindex"]))])),_:2},[C(e.filteredSlots,(o=>({name:o,fn:v((a=>[g(e.$slots,o,I(D(__spreadProps(__spreadValues({},a),{toggleDropdown:e.toggleDropdown,showDropdown:e.showDropdown,hideDropdown:e.hideDropdown,isOpen:e.isOpenSync,focus:e.focus}))))]))})))]),1040)])),default:v((()=>[b(d,{"no-padding":"",onKeydown:P(x(e.hideDropdown,["prevent"]),["esc"]),onKeypress:P(x(e.hideDropdown,["prevent"]),["enter"])},{default:v((()=>[b(p,y({ref:"timePicker"},e.timePickerProps,{modelValue:e.modelValueSync,"onUpdate:modelValue":o[1]||(o[1]=o=>e.modelValueSync=o)}),null,16,["modelValue"])])),_:1},8,["onKeydown","onKeypress"])])),_:3},8,["modelValue","class","style","disabled"])}]]);export{N as _};

import './VaTimeInput.css';
//# sourceMappingURL=VaTimeInput.mjs.map
