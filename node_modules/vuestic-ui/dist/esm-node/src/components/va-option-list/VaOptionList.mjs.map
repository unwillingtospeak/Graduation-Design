{"version":3,"file":"VaOptionList.mjs","sources":["../../../../../src/components/va-option-list/VaOptionList.vue"],"sourcesContent":["<template>\n  <VaMessageListWrapper\n    :error=\"computedError\"\n    :error-messages=\"computedErrorMessages\"\n    :error-count=\"$props.errorCount\"\n  >\n    <ul class=\"va-option-list__list\">\n      <li\n        v-for=\"option in $props.options\"\n        :key=\"getKey(option)\"\n      >\n        <slot v-bind=\"{ option, selectedValue, isDisabled, getText, getValue }\">\n          <va-radio\n            v-if=\"$props.type === 'radio'\"\n            :ref=\"setItemRef\"\n            v-model=\"selectedValue\"\n            :label=\"getText(option)\"\n            :disabled=\"isDisabled(option)\"\n            :option=\"getValue(option)\"\n            v-bind=\"computedProps\"\n          />\n          <va-checkbox\n            v-else-if=\"$props.type === 'checkbox'\"\n            :ref=\"setItemRef\"\n            v-model=\"selectedValue\"\n            :label=\"getText(option)\"\n            :disabled=\"isDisabled(option)\"\n            :array-value=\"getValue(option)\"\n            v-bind=\"computedProps\"\n          />\n          <va-switch\n            v-else\n            :ref=\"setItemRef\"\n            v-model=\"selectedValue\"\n            :label=\"getText(option)\"\n            :disabled=\"isDisabled(option)\"\n            :array-value=\"getValue(option)\"\n            v-bind=\"computedProps\"\n          />\n        </slot>\n      </li>\n    </ul>\n  </VaMessageListWrapper>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, PropType, onMounted } from 'vue'\nimport pick from 'lodash/pick'\n\nimport { __DEV__ } from '../../utils/global-utils'\nimport {\n  useSelectableList, useSelectableListProps, SelectableOption,\n  useValidation, useValidationProps,\n  useStateful, useStatefulProps, useStatefulEmits,\n  useArrayRefs,\n} from '../../composables'\n\nimport { VaMessageListWrapper } from '../va-input'\nimport { VaCheckbox } from '../va-checkbox'\nimport { VaRadio } from '../va-radio'\nimport { VaSwitch } from '../va-switch'\n\ntype OptionListValue = SelectableOption | SelectableOption[] | null\n\nexport default defineComponent({\n  name: 'VaOptionList',\n  components: {\n    VaRadio,\n    VaCheckbox,\n    VaSwitch,\n    VaMessageListWrapper,\n  },\n  emits: [...useStatefulEmits],\n  props: {\n    ...useSelectableListProps,\n    ...useValidationProps,\n    ...useStatefulProps,\n    type: {\n      type: String as PropType<'radio' | 'checkbox' | 'switch'>,\n      default: 'checkbox',\n      validator: (type: any) => ['radio', 'checkbox', 'switch'].includes(type),\n    },\n    disabled: ({ type: Boolean, default: false }),\n    readonly: ({ type: Boolean, default: false }),\n    defaultValue: ({ type: [String, Number, Object, Array] as PropType<OptionListValue | null> }),\n    name: ({ type: String, default: '' }),\n    color: ({ type: String, default: 'primary' }),\n    leftLabel: ({ type: Boolean, default: false }),\n    modelValue: ({ type: [String, Number, Object, Array] as PropType<OptionListValue | null> }),\n  },\n\n  setup (props, { emit }) {\n    const { valueComputed } = useStateful(props, emit, props.defaultValue)\n\n    const { getValue, getText, getTrackBy, getDisabled } = useSelectableList(props)\n\n    const { itemRefs, setItemRef } = useArrayRefs()\n\n    const isRadio = computed(() => props.type === 'radio')\n\n    const selectedValue = computed({\n      get () {\n        const value = isRadio.value ? null : []\n\n        return valueComputed.value || value as OptionListValue\n      },\n      set (value: OptionListValue) {\n        if (props.readonly) { return }\n\n        if (isRadio.value && !Array.isArray(value)) {\n          valueComputed.value = value ? getValue(value) : value\n        } else {\n          valueComputed.value = Array.isArray(value)\n            ? value.map(getValue)\n            : [value ? getValue(value) : value]\n        }\n      },\n    })\n\n    const getKey = (option: SelectableOption) => getTrackBy(option)\n\n    const isDisabled = (option: SelectableOption) => props.disabled || getDisabled(option)\n\n    const reset = () => { valueComputed.value = undefined }\n\n    const focus = () => {\n      const firstActiveEl = Array.isArray(itemRefs.value) && itemRefs.value.find(el => !(el as HTMLInputElement).disabled)\n\n      if (firstActiveEl && typeof firstActiveEl.focus === 'function') {\n        firstActiveEl.focus()\n      }\n    }\n\n    const { computedError, computedErrorMessages } = useValidation(props, emit, reset, focus)\n\n    const computedProps = computed(() => pick(props, ['name', 'color', 'readonly', 'leftLabel']))\n\n    onMounted(() => {\n      if (__DEV__ && props.type !== 'radio' && !Array.isArray(props.modelValue)) {\n        console.warn(`Prop 'modelValue = ${props.modelValue}' has not a proper type!\\n For component property 'type = ${props.type}' it must be of type 'array'.`)\n      }\n    })\n\n    return {\n      selectedValue,\n      computedError,\n      computedErrorMessages,\n      getValue,\n      getText,\n      getKey,\n      isDisabled,\n      reset,\n      focus,\n      setItemRef,\n      computedProps,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import 'variables';\n\n.va-option-list {\n  &__list {\n    line-height: var(--va-option-list-line-height);\n  }\n}\n</style>\n"],"names":["_sfc_main","defineComponent","name","components","VaRadio","VaCheckbox","VaSwitch","VaMessageListWrapper","emits","useStatefulEmits","props","__spreadValues","useSelectableListProps","useValidationProps","useStatefulProps","type","String","default","validator","includes","disabled","Boolean","readonly","defaultValue","Number","Object","Array","color","leftLabel","modelValue","setup","emit","valueComputed","useStateful","getValue","getText","getTrackBy","getDisabled","useSelectableList","itemRefs","setItemRef","useArrayRefs","isRadio","computed","selectedValue","get","value","set","isArray","map","reset","focus","firstActiveEl","find","el","computedError","computedErrorMessages","useValidation","computedProps","pick","onMounted","getKey","option","isDisabled","_hoisted_1","class","_createBlock","_component_VaMessageListWrapper","error","_ctx","$props","errorCount","_createElementVNode","_openBlock","_createElementBlock","_Fragment","_renderList","options","key","_renderSlot","$slots","_normalizeProps","_guardReactiveProps","_component_va_radio","_mergeProps","ref","_cache","$event","label","_component_va_checkbox","_component_va_switch"],"mappings":"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"}