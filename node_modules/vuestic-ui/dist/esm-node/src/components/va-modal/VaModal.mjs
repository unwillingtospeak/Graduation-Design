var e=Object.defineProperty,o=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,__defNormalProp=(o,t,a)=>t in o?e(o,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[t]=a,__spreadValues=(e,o)=>{for(var t in o||(o={}))l.call(o,t)&&__defNormalProp(e,t,o[t]);if(a)for(var t of a(o))s.call(o,t)&&__defNormalProp(e,t,o[t]);return e};import{w as n}from"../../services/config-transport/withConfigTransport.mjs";import{defineComponent as r,h as i,Transition as d,shallowRef as c,toRef as u,computed as m,watchEffect as p,resolveComponent as v,openBlock as f,createElementBlock as y,normalizeClass as b,renderSlot as g,normalizeProps as k,guardReactiveProps as h,createCommentVNode as C,createBlock as x,Teleport as _,createVNode as $,mergeProps as T,withCtx as B,normalizeStyle as S,createElementVNode as E,withKeys as O,Fragment as j,toDisplayString as w,createTextVNode as A}from"vue";import"../../../vendor.mjs";import{u as D}from"../../composables/useColors.mjs";import"../../composables/useDropdown.mjs";import{u as L,a as z,b as P}from"../../composables/useStateful.mjs";import{u as V}from"../../composables/useTextColor.mjs";import{u as I}from"../../composables/useDocument.mjs";import{u as W}from"../../composables/useWindow.mjs";import{V as H}from"../va-button/index.mjs";import{V as M}from"../va-icon/index.mjs";import{_ as K}from"../../../plugin-vue_export-helper.mjs";const N=r({name:"ModalElement",inheritAttrs:!1,props:{isTransition:{type:Boolean,default:!0}},setup:(e,{slots:o,attrs:t})=>()=>{var a;return e.isTransition?i(d,__spreadValues({},t),o):null==(a=o.default)?void 0:a.call(o,t)}}),F=r({name:"VaModal",inheritAttrs:!1,components:{VaButton:H,VaIcon:M,ModalElement:N},emits:[...L,"cancel","ok","before-open","open","before-close","close","click-outside"],props:(q=__spreadValues({},z),U={modelValue:{type:Boolean,default:!1},attachElement:{type:String,default:"body"},disableAttachment:{type:Boolean,default:!1},title:{type:String,default:""},message:{type:String,default:""},okText:{type:String,default:"OK"},cancelText:{type:String,default:"Cancel"},hideDefaultActions:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},mobileFullscreen:{type:Boolean,default:!0},noDismiss:{type:Boolean,default:!1},noOutsideDismiss:{type:Boolean,default:!1},noEscDismiss:{type:Boolean,default:!1},maxWidth:{type:String,default:""},maxHeight:{type:String,default:""},anchorClass:{type:String},size:{type:String,default:"medium",validator:e=>["medium","small","large"].includes(e)},fixedLayout:{type:Boolean,default:!1},withoutTransitions:{type:Boolean,default:!1},overlay:{type:Boolean,default:!0},overlayOpacity:{type:[Number,String],default:.6},blur:{type:Boolean,default:!1},zIndex:{type:[Number,String]},backgroundColor:{type:String,default:"white"},noPadding:{type:Boolean,default:!1}},o(q,t(U))),setup(e,{emit:o}){const t=c(),{getColor:a}=D(),{textColorComputed:l}=V(u(e,"backgroundColor")),{valueComputed:s}=P(e,o),n=m((()=>({"va-modal--fullscreen":e.fullscreen,"va-modal--mobile-fullscreen":e.mobileFullscreen,"va-modal--fixed-layout":e.fixedLayout,"va-modal--no-padding":e.noPadding,[`va-modal--size-${e.size}`]:"medium"!==e.size}))),r=m((()=>({"z-index":e.zIndex}))),i=m((()=>({maxWidth:e.maxWidth,maxHeight:e.maxHeight,color:l.value,background:a(e.backgroundColor)}))),d=m((()=>{var o;const t=!!(null==(o=f.value)?void 0:o.querySelectorAll(".va-modal__overlay").length);if(e.overlay&&!t)return{"background-color":`rgba(0, 0, 0, ${e.overlayOpacity})`,"z-index":e.zIndex&&Number(e.zIndex)-1}})),hide=()=>{s.value=!1},cancel=()=>{hide(),o("cancel")},listenKeyUp=o=>{o.modalsCounter=o.modalsCounter?o.modalsCounter+1:1;const t=o.modalsCounter;setTimeout((()=>{"Escape"!==o.code||e.noEscDismiss||e.noDismiss||o.modalsCounter!==t||cancel()}))},v=W(),f=I();p((()=>{var o,t,a,l;s.value?null==(o=v.value)||o.addEventListener("keyup",listenKeyUp):null==(t=v.value)||t.removeEventListener("keyup",listenKeyUp),e.blur&&(s.value?null==(a=f.value)||a.body.classList.add("va-modal-overlay-background--blurred"):null==(l=f.value)||l.body.classList.remove("va-modal-overlay-background--blurred"))}));const y={show:()=>{s.value=!0},hide:hide,toggle:()=>{s.value=!s.value},cancel:cancel,ok:()=>{hide(),o("ok")},onOutsideClick:()=>{e.noOutsideDismiss||e.noDismiss||(o("click-outside"),cancel())},onBeforeEnterTransition:e=>o("before-open",e),onAfterEnterTransition:e=>o("open",e),onBeforeLeaveTransition:e=>o("before-close",e),onAfterLeaveTransition:e=>o("close",e),listenKeyUp:listenKeyUp};return __spreadValues({getColor:a,rootElement:t,valueComputed:s,computedClass:n,computedDialogStyle:i,computedModalContainerStyle:r,computedOverlayStyles:d},y)}});var q,U;const G=["aria-labelledby"],J={key:0,class:"va-modal__anchor"},Q={key:0,class:"va-modal"},R={key:0},X={key:1,class:"va-modal__header"},Y={key:2,class:"va-modal__message"},Z={key:3,class:"va-modal__message"},ee={key:4,class:"va-modal__footer"},oe={key:5,class:"va-modal__footer"};const te=n(K(F,[["render",function _sfc_render(e,o,t,a,l,s){const n=v("va-icon"),r=v("va-button"),i=v("modal-element");return f(),y("div",{ref:"rootElement",class:b(["va-modal-entry",e.$props.anchorClass]),role:"dialog","aria-modal":"true","aria-labelledby":e.title},[e.$slots.anchor?(f(),y("div",J,[g(e.$slots,"anchor",k(h({show:e.show,hide:e.hide,toggle:e.toggle})))])):C("",!0),(f(),x(_,{to:e.attachElement,disabled:e.$props.disableAttachment},[$(i,T({name:"va-modal",isTransition:!e.$props.withoutTransitions,appear:"",duration:300},e.$attrs,{onBeforeEnter:e.onBeforeEnterTransition,onAfterEnter:e.onAfterEnterTransition,onBeforeLeave:e.onBeforeLeaveTransition,onAfterLeave:e.onAfterLeaveTransition}),{default:B((()=>[e.valueComputed?(f(),y("div",Q,[e.$props.overlay?(f(),y("div",{key:0,class:"va-modal__overlay",style:S(e.computedOverlayStyles),onClick:o[0]||(o[0]=(...o)=>e.onOutsideClick&&e.onOutsideClick(...o))},null,4)):C("",!0),E("div",{class:"va-modal__container",style:S(e.computedModalContainerStyle)},[E("div",{class:b(["va-modal__dialog",e.computedClass]),style:S(e.computedDialogStyle)},[e.$props.fullscreen?(f(),x(n,{key:0,name:"close",class:"va-modal__close",role:"button","aria-label":"close","aria-hidden":"false",tabindex:"0",onClick:e.cancel,onKeydown:[O(e.cancel,["space"]),O(e.cancel,["enter"])]},null,8,["onClick","onKeydown"])):C("",!0),E("div",{class:"va-modal__inner",style:S({maxWidth:e.$props.maxWidth,maxHeight:e.$props.maxHeight})},[e.$slots.content?(f(),y("div",R,[g(e.$slots,"content",k(h({cancel:e.cancel,ok:e.ok})))])):C("",!0),e.$slots.content?C("",!0):(f(),y(j,{key:1},[e.title?(f(),y("div",{key:0,class:"va-modal__title",style:S({color:e.getColor("primary")})},w(e.$props.title),5)):C("",!0),e.$slots.header?(f(),y("div",X,[g(e.$slots,"header")])):C("",!0),e.$props.message?(f(),y("div",Y,w(e.$props.message),1)):C("",!0),e.$slots.default?(f(),y("div",Z,[g(e.$slots,"default")])):C("",!0),!e.$props.cancelText&&!e.$props.okText||e.$props.hideDefaultActions?C("",!0):(f(),y("div",ee,[e.$props.cancelText?(f(),x(r,{key:0,color:"gray",class:"mr-2",flat:"",onClick:e.cancel},{default:B((()=>[A(w(e.$props.cancelText),1)])),_:1},8,["onClick"])):C("",!0),$(r,{onClick:e.ok},{default:B((()=>[A(w(e.$props.okText),1)])),_:1},8,["onClick"])])),e.$slots.footer?(f(),y("div",oe,[g(e.$slots,"footer")])):C("",!0)],64))],4)],6)],4)])):C("",!0)])),_:3},16,["isTransition","onBeforeEnter","onAfterEnter","onBeforeLeave","onAfterLeave"])],8,["to","disabled"]))],10,G)}]]));export{te as V};

import './VaModal.css';
//# sourceMappingURL=VaModal.mjs.map
