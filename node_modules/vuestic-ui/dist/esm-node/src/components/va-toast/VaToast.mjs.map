{"version":3,"file":"VaToast.mjs","sources":["../../../../../src/components/va-toast/VaToast.vue"],"sourcesContent":["<template>\n  <transition name=\"va-toast-fade\">\n    <div\n      v-show=\"visible\"\n      ref=\"rootElement\"\n      :role=\"$props.closeable ? 'alertdialog' : 'alert'\"\n      class=\"va-toast\"\n      :class=\"toastClasses\"\n      :style=\"toastStyles\"\n      @mouseenter=\"clearTimer\"\n      @mouseleave=\"startTimer\"\n      @click=\"onToastClick\"\n    >\n      <div class=\"va-toast__group\">\n        <h2 v-if=\"$props.title\" class=\"va-toast__title\" v-text=\"$props.title\" />\n\n        <div class=\"va-toast__content\" v-show=\"$props.message\">\n          <div v-if=\"$props.dangerouslyUseHtmlString\" v-html=\"computedMessage\" />\n          <p v-else v-text=\"computedMessage\" />\n        </div>\n\n        <div class=\"va-toast__content\" v-if=\"$props.render\">\n          <VaToastRenderer :render=\"$props.render\" />\n        </div>\n\n        <va-icon\n          v-if=\"$props.closeable\"\n          class=\"va-toast__close-icon\"\n          role=\"button\"\n          aria-label=\"close toast\"\n          aria-hidden=\"false\"\n          tabindex=\"0\"\n          size=\"small\"\n          :name=\"$props.icon\"\n          @click.stop=\"onToastClose\"\n          @keydown.enter.stop=\"onToastClose\"\n        />\n      </div>\n    </div>\n  </transition>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType, ref, computed, onMounted, shallowRef } from 'vue'\n\nimport { useColors, useTimer, useTextColor } from '../../composables'\n\nimport { ToastPosition } from './types'\n\nimport VaIcon from '../va-icon/VaIcon.vue'\n\nconst VaToastRenderer = defineComponent({\n  name: 'VaToastRenderer',\n  props: {\n    render: { type: Function, required: true },\n  },\n  setup: (props) => () => props.render(),\n})\n\nexport default defineComponent({\n  name: 'VaToast',\n  components: { VaIcon, VaToastRenderer },\n  emits: ['on-click', 'on-close'],\n  props: {\n    title: { type: String, default: '' },\n    offsetY: { type: Number, default: 16 },\n    offsetX: { type: Number, default: 16 },\n    message: { type: [String, Function], default: '' },\n    dangerouslyUseHtmlString: { type: Boolean, default: false },\n    icon: { type: String, default: 'close' },\n    customClass: { type: String, default: '' },\n    duration: { type: Number, default: 5000 },\n    color: { type: String, default: '' },\n    closeable: { type: Boolean, default: true },\n    onClose: { type: Function },\n    onClick: { type: Function },\n    multiLine: { type: Boolean, default: false },\n    position: {\n      type: String as PropType<ToastPosition>,\n      default: 'top-right',\n      validator: (value: string) => ['top-right', 'top-left', 'bottom-right', 'bottom-left'].includes(value),\n    },\n    render: { type: Function },\n  },\n  setup (props, { emit }) {\n    const rootElement = shallowRef<HTMLElement>()\n\n    const { getColor } = useColors()\n\n    const { textColorComputed } = useTextColor()\n\n    const visible = ref(false)\n\n    const positionX = computed(() => {\n      return props.position.includes('right') ? 'right' : 'left'\n    })\n\n    const positionY = computed(() => {\n      return props.position.includes('top') ? 'top' : 'bottom'\n    })\n\n    const toastClasses = computed(() => [\n      props.customClass,\n      props.multiLine ? 'va-toast--multiline' : '',\n    ])\n\n    const toastStyles = computed(() => ({\n      [positionY.value]: `${props.offsetY}px`,\n      [positionX.value]: `${props.offsetX}px`,\n      backgroundColor: getColor(props.color),\n      color: textColorComputed.value,\n    }))\n\n    const computedMessage = computed(() => (typeof props.message === 'function') ? props.message() : props.message)\n\n    const destroyElement = () => {\n      rootElement.value?.removeEventListener('transitionend', destroyElement)\n\n      rootElement.value?.remove()\n    }\n\n    const onToastClick = () => {\n      if (typeof props.onClick === 'function') {\n        props.onClick()\n      } else {\n        emit('on-click')\n      }\n    }\n\n    const onToastClose = () => {\n      visible.value = false\n\n      rootElement.value?.addEventListener('transitionend', destroyElement)\n\n      if (typeof props.onClose === 'function') {\n        props.onClose()\n      } else {\n        emit('on-close')\n      }\n    }\n\n    const timer = useTimer()\n    const clearTimer = timer.clear\n    const startTimer = () => {\n      if (props.duration > 0) {\n        timer.start(() => visible.value && onToastClose(), props.duration)\n      }\n    }\n\n    onMounted(() => {\n      visible.value = true\n\n      startTimer()\n    })\n\n    return {\n      visible,\n      toastClasses,\n      toastStyles,\n      computedMessage,\n      onToastClick,\n      onToastClose,\n      startTimer,\n      clearTimer,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"../../styles/resources\";\n@import \"variables\";\n\n.va-toast {\n  position: fixed;\n  box-sizing: border-box;\n  width: var(--va-toast-width);\n  padding: var(--va-toast-padding);\n  display: flex;\n  align-items: center;\n  border-radius: var(--va-toast-border-radius);\n  border: 1px solid var(--va-toast-border-color);\n  background-color: var(--va-toast-background-color);\n  color: var(--va-toast-color);\n  box-shadow: var(--va-toast-box-shadow);\n  transition: var(--va-toast-transition);\n  overflow: hidden;\n  z-index: var(--va-toast-z-index);\n  font-family: var(--va-font-family);\n\n  &--multiline {\n    min-height: 70px;\n  }\n\n  &--right {\n    right: 16px;\n  }\n\n  &--left {\n    left: 16px;\n  }\n\n  &__group {\n    margin-left: var(--va-toast-group-margin-left);\n    margin-right: var(--va-toast-group-margin-right);\n  }\n\n  &__title {\n    font-weight: var(--va-toast-title-font-weight);\n    font-size: var(--va-toast-title-font-size);\n    color: var(--va-toast-title-color);\n    margin: var(--va-toast-title-margin);\n  }\n\n  &__content {\n    font-size: var(--va-toast-content-font-size);\n    line-height: var(--va-toast-content-line-height);\n    padding-right: var(--va-toast-content-padding-right);\n\n    p,\n    div {\n      margin: 0;\n    }\n  }\n\n  &__icon {\n    height: var(--va-toast-icon-height);\n    width: var(--va-toast-icon-width);\n    font-size: var(--va-toast-icon-font-size);\n  }\n\n  &__close-icon {\n    position: absolute;\n    top: 50%;\n    right: var(--va-toast-close-icon-right);\n    cursor: pointer;\n    transform: translateY(-50%);\n    font-size: var(--va-toast-close-icon-font-siz);\n\n    &:hover {\n      color: var(--va-toast-hover-color);\n    }\n\n    &:focus {\n      @include focus-outline;\n    }\n  }\n}\n\n.va-toast-fade-enter {\n  &.right {\n    right: 0;\n    transform: translateX(100%);\n  }\n\n  &.left {\n    left: 0;\n    transform: translateX(-100%);\n  }\n}\n\n.va-toast-fade-leave-active {\n  opacity: 0;\n}\n</style>\n"],"names":["VaToastRenderer","defineComponent","name","props","render","type","Function","required","setup","_sfc_main","components","VaIcon","emits","title","String","default","offsetY","Number","offsetX","message","dangerouslyUseHtmlString","Boolean","icon","customClass","duration","color","closeable","onClose","onClick","multiLine","position","validator","value","includes","emit","rootElement","shallowRef","getColor","useColors","textColorComputed","useTextColor","visible","ref","positionX","computed","positionY","toastClasses","toastStyles","backgroundColor","computedMessage","destroyElement","_a","removeEventListener","_b","remove","onToastClose","addEventListener","timer","useTimer","clearTimer","clear","startTimer","start","onMounted","onToastClick","_hoisted_2","class","_hoisted_4","_createBlock","_Transition","_withCtx","_withDirectives","_createElementVNode","role","_ctx","_normalizeClass","style","_normalizeStyle","onMouseenter","_cache","args","onMouseleave","$props","_createElementBlock","key","textContent","_toDisplayString","_hoisted_3","_createCommentVNode","innerHTML","_hoisted_5","openBlock","_hoisted_6","_vShow","_hoisted_7","_createVNode","_component_VaToastRenderer","_component_va_icon","tabindex","size","_withModifiers","onKeydown","_withKeys"],"mappings":"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"}