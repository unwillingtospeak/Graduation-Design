{"version":3,"file":"VaImage.mjs","sources":["../../../../../src/components/va-image/VaImage.vue"],"sourcesContent":["<template>\n  <div class=\"va-image\" aria-live=\"polite\">\n    <div\n      v-if=\"loadingError\"\n      class=\"va-image__error\"\n    >\n      <slot name=\"error\" />\n    </div>\n\n    <div :style=\"paddingStyles\" />\n    <div\n      v-show=\"!loadingError && !loading\"\n      class=\"va-image__img\"\n    >\n      <img\n        :style=\"imageStyles\"\n        :src=\"$props.src\"\n        :alt=\"$props.alt\"\n        @error=\"handleError\"\n        @load=\"handleLoad\"\n      />\n    </div>\n    <div class=\"va-image__overlay\">\n      <slot />\n    </div>\n    <div\n      v-if=\"loading\"\n      class=\"va-image__loader\"\n    >\n      <slot name=\"loader\" />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed, watch, ref } from 'vue'\n\nexport default defineComponent({\n  name: 'VaImage',\n  emits: ['loaded', 'error'],\n  props: {\n    ratio: { type: Number, default: 1 },\n    contain: { type: Boolean, default: false },\n    src: { type: String, required: true },\n    alt: { type: String, default: '' },\n  },\n  setup (props, { emit }) {\n    const loading = ref(true)\n    const loadingError = ref(false)\n\n    const imageStyles = computed(() => ({\n      objectFit: props.contain ? 'contain' as const : 'cover' as const,\n    }))\n\n    const paddingStyles = computed(() => ({\n      paddingBottom: `${1 / props.ratio * 100}%`,\n    }))\n\n    const handleLoad = () => {\n      loading.value = false\n      emit('loaded', props.src)\n    }\n\n    const handleError = (err: Event) => {\n      loadingError.value = true\n      loading.value = false\n      emit('error', err)\n    }\n\n    watch(() => props.src, () => {\n      loading.value = true\n      loadingError.value = false\n    })\n\n    return {\n      loading,\n      loadingError,\n      imageStyles,\n      paddingStyles,\n      handleLoad,\n      handleError,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"../../styles/resources\";\n@import \"variables\";\n\n.va-image {\n  overflow: var(--va-image-overflow);\n  position: var(--va-image-position);\n  font-family: var(--va-font-family);\n\n  img {\n    height: 100%;\n    width: 100%;\n  }\n\n  &__img,\n  &__loader,\n  &__error,\n  &__overlay {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n  }\n\n  &__loader,\n  &__error,\n  &__overlay {\n    @include flex-center();\n  }\n}\n</style>\n"],"names":["_sfc_main","defineComponent","name","emits","props","ratio","type","Number","default","contain","Boolean","src","String","required","alt","setup","emit","loading","ref","loadingError","imageStyles","computed","objectFit","paddingStyles","paddingBottom","watch","value","handleLoad","handleError","err","class","_hoisted_3","_hoisted_5","_openBlock","_createElementBlock","_hoisted_1","_ctx","_hoisted_2","_renderSlot","$slots","_createCommentVNode","_createElementVNode","style","_normalizeStyle","_withDirectives","$props","onError","_cache","args","onLoad","_hoisted_4","_vShow","_hoisted_6"],"mappings":"4RAqCA,MAAKA,EAAaC,EAAa,CAC7BC,KAAM,UACNC,MAAO,CAAC,SAAU,SAClBC,MAAO,CACLC,MAAO,CAAEC,KAAMC,OAAQC,QAAS,GAChCC,QAAS,CAAEH,KAAMI,QAASF,SAAS,GACnCG,IAAK,CAAEL,KAAMM,OAAQC,UAAU,GAC/BC,IAAK,CAAER,KAAMM,OAAQJ,QAAS,KAEhCO,MAAOX,GAAOY,KAAEA,IACR,MAAAC,EAAUC,GAAI,GACdC,EAAeD,GAAI,GAEnBE,EAAcC,GAAS,KAAO,CAClCC,UAAWlB,EAAMK,QAAU,UAAqB,YAG5Cc,EAAgBF,GAAS,KAAO,CACpCG,cAAkB,EAAIpB,EAAMC,MAAQ,IAArB,QAmBV,OALDoB,GAAA,IAAMrB,EAAMO,MAAK,KACrBM,EAAQS,OAAQ,EAChBP,EAAaO,OAAQ,KAGhB,CACLT,QAAAA,EACAE,aAAAA,EACAC,YAAAA,EACAG,cAAAA,EACAI,WArBiB,KACjBV,EAAQS,OAAQ,EACXV,EAAA,SAAUZ,EAAMO,MAoBrBiB,YAjBmBC,IACnBV,EAAaO,OAAQ,EACrBT,EAAQS,OAAQ,EAChBV,EAAK,QAASa,WAjEbC,MAAM,WAAW,YAAU,mBAG5BA,MAAM,mBAQNC,EAAA,CAAAD,MAAM,iCAUHE,EAAA,CAAAF,MAAM,8BAKTA,MAAM,2EA1BV,OAAAG,IAAAC,EA8BM,MA9BNC,EA8BM,CA5BIC,EAAAjB,cAAAc,IADRC,EAKM,MALNG,EAKM,CADJC,EAAqBF,EAAAG,OAAA,YAAAC,EAAA,IAAA,GAGvBC,EAA8B,MAAA,CAAxBC,MAAKC,EAAEP,EAAab,gBAAA,KAAA,GAC1BqB,EAAAH,EAWM,MAXNV,EAWM,CAPJU,EAME,MAAA,CALCC,MAAKC,EAAEP,EAAWhB,aAClBT,IAAKyB,EAAOS,OAAAlC,IACZG,IAAKsB,EAAOS,OAAA/B,IACZgC,QAAKC,EAAE,KAAAA,EAAA,GAAA,IAAAC,IAAAZ,EAAAR,aAAAQ,EAAAR,eAAAoB,IACPC,OAAIF,EAAE,KAAAA,EAAA,GAAA,IAAAC,IAAAZ,EAAAT,YAAAS,EAAAT,cAAAqB,KAAA,KAAA,GAAAE,UARA,CAAAC,GAAAf,EAAAjB,eAAiBiB,EAAOnB,WAWnCwB,EAEM,MAFNT,EAEM,CADJM,EAAQF,EAAAG,OAAA,aAGFH,EADRnB,SAAAgB,IAAAC,EAKM,MALNkB,EAKM,CADJd,EAAsBF,EAAAG,OAAA,aAAAC,EAAA,IAAA"}