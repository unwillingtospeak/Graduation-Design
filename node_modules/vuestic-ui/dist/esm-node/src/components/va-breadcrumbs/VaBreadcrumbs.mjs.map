{"version":3,"file":"VaBreadcrumbs.mjs","sources":["../../../../../src/components/va-breadcrumbs/VaBreadcrumbs.vue"],"sourcesContent":["<script lang=\"ts\">\nimport { computed, defineComponent, Fragment, h, ref, VNode } from 'vue'\n\nimport { useAlign, useAlignProps, useColors } from '../../composables'\nimport { hasOwnProperty } from '../../services/utils'\n\nexport default defineComponent({\n  name: 'VaBreadcrumbs',\n  props: {\n    ...useAlignProps,\n    separator: { type: String, default: '/' },\n    color: { type: String, default: 'gray' },\n    activeColor: { type: String, default: null },\n    separatorColor: { type: String, default: null },\n  },\n  setup (props, { slots }) {\n    const { alignComputed } = useAlign(props)\n\n    const { getColor } = useColors()\n    const computedThemesSeparatorColor = computed(() => {\n      return props.separatorColor ? getColor(props.separatorColor) : getColor(props.color)\n    })\n    const computedThemesActiveColor = computed(() => {\n      return props.activeColor ? getColor(props.activeColor) : getColor(props.color)\n    })\n\n    const childNodeFilter = (result: VNode[], node?: VNode) => {\n      const nodes = node && node.type === Fragment && node.children ? node.children as VNode[] : [node]\n\n      return [\n        ...result,\n        ...nodes.filter((node?: VNode) => !!(node?.type as any)?.name?.match(/VaBreadcrumbsItem$/)),\n      ]\n    }\n\n    const createSeparatorComponent = () => {\n      // Temp fix for https://github.com/intlify/vue-i18n-next/issues/412\n      // `separatorNode` can be moved outside this method after update vuestic's minimal vue version to 3.1.0\n      // testing: have to monitor errors after leaving breadcrumbs page in doc\n      const separatorNode = slots.separator ? slots.separator() : [props.separator]\n\n      return h('span', {\n        ariaHidden: true,\n        class: ['va-breadcrumbs__separator'],\n        style: [{ color: computedThemesSeparatorColor.value }],\n      }, separatorNode)\n    }\n\n    const isDisabledChild = (child: VNode) => {\n      const childPropData = child?.props\n      if (!childPropData || !hasOwnProperty(childPropData, 'disabled')) {\n        return false\n      }\n\n      if (childPropData.disabled === '') { // NOTE: by default empty attribute is ''\n        return true\n      }\n\n      return Boolean(childPropData.disabled)\n    }\n\n    const isAllChildLinks = ref(true)\n    const getChildren = () => {\n      const childNodes = (slots as any)?.default()?.reduce(childNodeFilter, []) || []\n      const childNodesLength = childNodes.length\n      const isLastIndexChildNodes = (index: number) => index === childNodesLength - 1\n      const isChildLink = (child: VNode) => {\n        const childPropData = child?.props\n        if (!childPropData || !hasOwnProperty(childPropData, 'to')) {\n          return false\n        }\n\n        return !!(childPropData.to && !childPropData.disabled)\n      }\n\n      const createChildComponent = (child: VNode, index: number) => h(\n        'span', {\n          class: 'va-breadcrumbs__item',\n          ariaCurrent: (isLastIndexChildNodes(index) && isChildLink(child)) ? 'location' : false,\n          style: {\n            color: (!isLastIndexChildNodes(index) && !isDisabledChild(child)) ? computedThemesActiveColor.value : null,\n          },\n        },\n        [child],\n      )\n\n      const children = [] as VNode[]\n\n      if (childNodesLength) {\n        childNodes.forEach((child: VNode, index: number) => {\n          if (isAllChildLinks.value && !isChildLink(child)) {\n            isAllChildLinks.value = false\n          }\n\n          children.push(createChildComponent(child, index))\n\n          if (!isLastIndexChildNodes(index)) {\n            children.push(createSeparatorComponent())\n          }\n        })\n      }\n\n      return children\n    }\n\n    return () => h('div', {\n      class: 'va-breadcrumbs',\n      style: alignComputed.value,\n      role: isAllChildLinks.value ? 'navigation' : undefined,\n      ariaLabel: isAllChildLinks.value ? 'breadcrumbs' : undefined,\n    }, getChildren())\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"variables\";\n\n.va-breadcrumbs {\n  display: var(--va-breadcrumbs-display);\n  width: var(--va-breadcrumbs-width);\n  justify-content: var(--va-breadcrumbs-justify-content);\n  font-family: var(--va-font-family);\n\n  &__item {\n    display: var(--va-breadcrumbs-item-display);\n  }\n\n  &__separator {\n    padding: var(--va-breadcrumbs-separator-padding);\n    display: var(--va-breadcrumbs-separator-display);\n  }\n}\n</style>\n"],"names":["_sfc_main","defineComponent","name","props","useAlignProps","separator","type","String","default","color","activeColor","separatorColor","setup","slots","alignComputed","useAlign","getColor","useColors","computedThemesSeparatorColor","computed","computedThemesActiveColor","childNodeFilter","result","node","Fragment","children","filter","node2","_b","_a","match","isDisabledChild","child","childPropData","hasOwnProperty","disabled","Boolean","isAllChildLinks","ref","getChildren","childNodes","reduce","childNodesLength","length","isLastIndexChildNodes","index","isChildLink","to","forEach","value","push","h","class","ariaCurrent","style","createChildComponent","separatorNode","ariaHidden","createSeparatorComponent","role","ariaLabel"],"mappings":"ulBAMA,MAAKA,EAAaC,EAAa,CAC7BC,KAAM,gBACNC,4JACKC,KADE,CAELC,UAAW,CAAEC,KAAMC,OAAQC,QAAS,KACpCC,MAAO,CAAEH,KAAMC,OAAQC,QAAS,QAChCE,YAAa,CAAEJ,KAAMC,OAAQC,QAAS,MACtCG,eAAgB,CAAEL,KAAMC,OAAQC,QAAS,kBAE3CI,MAAOT,GAAOU,MAAEA,IACR,MAAAC,cAAEA,GAAkBC,EAASZ,IAE7Ba,SAAEA,GAAaC,IACfC,EAA+BC,GAAS,IACrChB,EAAMQ,eAAiBK,EAASb,EAAMQ,gBAAkBK,EAASb,EAAMM,SAE1EW,EAA4BD,GAAS,IAClChB,EAAMO,YAAcM,EAASb,EAAMO,aAAeM,EAASb,EAAMM,SAGpEY,gBAAkB,CAACC,EAAiBC,IAGjC,IACFD,MAHSC,GAAQA,EAAKjB,OAASkB,GAAYD,EAAKE,SAAWF,EAAKE,SAAsB,CAACF,IAIjFG,QAAQC,YAAiB,SAAG,OAAMC,EAAN,OAAMC,EAAA,MAAAF,OAAA,EAAAA,EAAArB,WAAc,EAAAuB,EAAA3B,eAAM4B,MAAM,2BAiBnEC,gBAAmBC,IACvB,MAAMC,EAAuB,MAAPD,OAAO,EAAAA,EAAA7B,MAC7B,SAAK8B,IAAkBC,EAAeD,EAAe,eAItB,KAA3BA,EAAcE,UAIXC,QAAQH,EAAcE,YAGzBE,EAAkBC,GAAI,GACtBC,YAAc,WACZ,MAAAC,GAAc,0BAAehC,gBAAf,EAAAqB,EAA0BY,OAAOpB,gBAAiB,MAAO,GACvEqB,EAAmBF,EAAWG,OAC9BC,sBAAyBC,GAAkBA,IAAUH,EAAmB,EACxEI,YAAed,IACnB,MAAMC,EAAuB,MAAPD,OAAO,EAAAA,EAAA7B,MAC7B,SAAK8B,IAAkBC,EAAeD,EAAe,WAI7BA,EAAAc,IAAOd,EAAcE,WAczCV,EAAW,GAgBV,OAdHiB,GACSF,EAAAQ,SAAQ,CAAChB,EAAca,KAC5BR,EAAgBY,QAAUH,YAAYd,KACxCK,EAAgBY,OAAQ,GAG1BxB,EAASyB,KAnBgB,EAAClB,EAAca,IAAkBM,EAC5D,OAAQ,CACNC,MAAO,uBACPC,eAAcT,sBAAsBC,KAAUC,YAAYd,KAAU,WACpEsB,MAAO,CACL7C,MAASmC,sBAAsBC,IAAWd,gBAAgBC,GAA4C,KAAlCZ,EAA0B6B,QAGlG,CAACjB,IAWeuB,CAAqBvB,EAAOa,IAErCD,sBAAsBC,IAChBpB,EAAAyB,KA9DgB,MAIzB,MAAAM,EAAgB3C,EAAMR,UAAYQ,EAAMR,YAAc,CAACF,EAAME,WAEnE,OAAO8C,EAAE,OAAQ,CACfM,YAAY,EACZL,MAAO,CAAC,6BACRE,MAAO,CAAC,CAAE7C,MAAOS,EAA6B+B,SAC7CO,IAoDiBE,OAKbjC,GAGF,MAAA,IAAM0B,EAAE,MAAO,CACpBC,MAAO,iBACPE,MAAOxC,EAAcmC,MACrBU,KAAMtB,EAAgBY,MAAQ,kBAAe,EAC7CW,UAAWvB,EAAgBY,MAAQ,mBAAgB,GAClDV"}