{"version":3,"file":"useFilterable.mjs","sources":["../../../../../../src/components/va-data-table/hooks/useFilterable.ts"],"sourcesContent":["import { Ref, watch, computed } from 'vue'\n\nimport type { DataTableRow, DataTableFilterMethod, DataTableItem } from '../types'\n\ninterface useFilterableProps {\n  filter: string\n  filterMethod: DataTableFilterMethod | undefined\n  [prop: string]: unknown\n}\n\nexport type TFilteredArgs = { items: DataTableItem[], itemsIndexes: number[] }\nexport type TFilterableEmits = (event: 'filtered', arg: TFilteredArgs) => void\n\nexport default function useFilterable (\n  rawRows: Ref<DataTableRow[]>,\n  props: useFilterableProps,\n  emit: TFilterableEmits,\n) {\n  const filteredRows = computed<DataTableRow[]>(() => {\n    if (!rawRows.value.length) {\n      return rawRows.value\n    }\n\n    if (props.filter === '' && !props.filterMethod) {\n      return rawRows.value\n    }\n\n    return rawRows.value.filter(row => row.cells.some(cell => {\n      return typeof props.filterMethod === 'function'\n        ? props.filterMethod(cell.source)\n        : cell.value.toLowerCase().includes(props.filter.toLowerCase())\n    }))\n  })\n\n  watch(filteredRows, () => {\n    emit('filtered', {\n      items: filteredRows.value.map(row => row.source),\n      itemsIndexes: filteredRows.value.map(row => row.initialIndex),\n    })\n  })\n\n  return {\n    filteredRows,\n  }\n}\n"],"names":["useFilterable","rawRows","props","emit","filteredRows","computed","value","length","filter","filterMethod","row","cells","some","cell","source","toLowerCase","includes","watch","items","map","itemsIndexes","initialIndex"],"mappings":"0CAcE,SAAAA,cAAAC,EACAC,EACAC,GAEM,MAAAC,EAAeC,GAAyB,IACvCJ,EAAQK,MAAMC,SAIE,KAAjBL,EAAMM,QAAkBN,EAAMO,cAI3BR,EAAQK,MAAME,WAAcE,EAAIC,MAAMC,MAAaC,GACnB,mBAAvBX,EAAMO,aAChBP,EAAMO,aAAaI,EAAKC,QACxBD,EAAKP,MAAMS,cAAcC,SAASd,EAAMM,OAAOO,mBAV5Cd,EAAQK,QAqBZ,OAPPW,EAAMb,GAAc,KAClBD,EAAK,WAAY,CACfe,MAAOd,EAAaE,MAAMa,KAAIT,GAAOA,EAAII,SACzCM,aAAchB,EAAaE,MAAMa,KAAIT,GAAOA,EAAIW,oBAI7C,CACLjB,aAAAA"}