import{ref as e,computed as r,watch as t}from"vue";function useSortable(n,o,l,s){const u=e(""),a=r({get:()=>void 0===l.sortBy?u.value:l.sortBy,set(e){void 0===l.sortBy&&(u.value=e),s("update:sortBy",e)}}),i=e(null),v=r({get:()=>void 0===l.sortingOrder?i.value:l.sortingOrder,set(e){void 0===l.sortingOrder&&(i.value=e),s("update:sortingOrder",e)}}),d=r((()=>{if(o.value.length<=1)return o.value;const e=n.value.find((e=>e.name===a.value));if(!e||!e.sortable)return o.value;const r=n.value.indexOf(e);return[...o.value].sort(((t,n)=>{const o=t.cells[r].value,l=n.cells[r].value,s=t.cells[r].source,u=n.cells[r].source;if(null===v.value)return t.initialIndex-n.initialIndex;return("desc"===v.value?-1:1)*("function"==typeof e.sortingFn?e.sortingFn(s,u):o.localeCompare(l))}))}));t(d,(()=>{s("sorted",{sortBy:a.value,sortingOrder:v.value,items:d.value.map((e=>e.source)),itemsIndexes:d.value.map((e=>e.initialIndex))})}));const c=r((()=>"asc"===v.value?"expand_less":"desc"===v.value?"expand_more":"unfold_more"));return{sortBySync:a,sortingOrderSync:v,toggleSorting:function toggleSorting(e){e.name===a.value?v.value=((e,r)=>{const t=r.findIndex((r=>r===e));return-1!==t?r[(t+1)%r.length]:r[0]})(v.value,e.sortingOptions):(a.value=e.name,v.value=e.sortingOptions[0])},sortedRows:d,sortingOrderIconName:c}}export{useSortable as u};
//# sourceMappingURL=useSortable.mjs.map
