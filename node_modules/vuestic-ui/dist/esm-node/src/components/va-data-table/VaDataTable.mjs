var e=Object.defineProperty,t=Object.defineProperties,l=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,__defNormalProp=(t,l,a)=>l in t?e(t,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[l]=a;import{defineComponent as r,computed as n,resolveComponent as i,openBlock as d,createBlock as c,mergeProps as u,withCtx as m,createElementVNode as b,createElementBlock as p,renderSlot as y,normalizeProps as g,guardReactiveProps as S,createCommentVNode as v,normalizeClass as k,Fragment as w,renderList as f,normalizeStyle as h,withModifiers as C,withKeys as _,toDisplayString as R,createVNode as B,TransitionGroup as $,createTextVNode as x}from"vue";import{o as H,p as V}from"../../../vendor.mjs";import{s as O,u as j}from"./hooks/useColumns.mjs";import{u as F}from"./hooks/useRows.mjs";import{u as N}from"./hooks/useFilterable.mjs";import{u as D}from"./hooks/useSortable.mjs";import{u as A}from"./hooks/usePaginatedRows.mjs";import{u as I}from"./hooks/useSelectableRow.mjs";import{u as P}from"./hooks/useStylable.mjs";import{u as T}from"./hooks/useBinding.mjs";import{u as M}from"./hooks/useAnimationName.mjs";import{V as L}from"../va-inner-loading/index.mjs";import{V as K}from"../va-checkbox/index.mjs";import{V as U}from"../va-icon/index.mjs";import{_ as z}from"../../../plugin-vue_export-helper.mjs";const E=r({name:"VaDataTable",components:{VaInnerLoading:L,VaCheckbox:K,VaIcon:U},inheritAttrs:!1,props:{columns:{type:Array,default:()=>[]},items:{type:Array,default:()=>[]},itemsTrackBy:{type:[String,Function],default:""},modelValue:{type:Array},sortingOrder:{type:String},sortBy:{type:String},sortingOptions:{type:Array,default:()=>["asc","desc",null],validator:O},filter:{type:String,default:""},filterMethod:{type:Function},hoverable:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},animated:{type:Boolean,default:!0},selectable:{type:Boolean,default:!1},selectMode:{type:String,default:"multiple"},selectedColor:{type:String,default:"primary"},perPage:{type:Number},currentPage:{type:Number},loading:{type:Boolean,default:!1},loadingColor:{type:String,default:"primary"},noDataHtml:{type:String,default:"No items"},noDataFilteredHtml:{type:String,default:"No items match the provided filtering condition"},hideDefaultHeader:{type:Boolean,default:!1},footerClone:{type:Boolean,default:!1},allowFooterSorting:{type:Boolean,default:!1},striped:{type:Boolean,default:!1},stickyHeader:{type:Boolean,default:!1},stickyFooter:{type:Boolean,default:!1},height:{type:[String,Number]},rowBind:{type:null},cellBind:{type:null}},emits:["update:modelValue","update:sortBy","update:sortingOrder","filtered","sorted","selectionChange","row:click","row:dblclick","row:contextmenu"],setup(e,{attrs:r,emit:i}){const{columnsComputed:d}=j(e),{rowsComputed:c}=F(d,e),{filteredRows:u}=N(c,e,i),{sortBySync:m,sortingOrderSync:b,toggleSorting:p,sortedRows:y,sortingOrderIconName:g}=D(d,u,e,i),{paginatedRows:S}=A(y,e),{ctrlSelectRow:v,shiftSelectRows:k,toggleBulkSelection:w,isRowSelected:f,severalRowsSelected:h,allRowsSelected:C}=I(S,e,i),{rowCSSVariables:_,stickyCSSVariables:R,getHeaderCSSVariables:B,getCellCSSVariables:$,getFooterCSSVariables:x,getClass:O,getStyle:L}=P(e),{getRowBind:K,getCellBind:U}=T(e),z=M(e,S),E=n((()=>0===e.items.length)),q=n((()=>0===S.value.length)),G=n((()=>({class:[{"va-data-table--sticky":e.stickyHeader||e.stickyFooter},{"va-data-table--scroll":!!e.height},r.class],style:[R.value,r.style]}))),J=n((()=>{return n=((e,t)=>{for(var l in t||(t={}))o.call(t,l)&&__defNormalProp(e,l,t[l]);if(a)for(var l of a(t))s.call(t,l)&&__defNormalProp(e,l,t[l]);return e})({},H(r,["class","style"])),i={class:V(e,["striped","selectable","hoverable","clickable"])},t(n,l(i));var n,i}));return{columnsComputed:d,rows:S,ctrlSelectRow:v,shiftSelectRows:k,toggleBulkSelection:w,isRowSelected:f,severalRowsSelected:h,allRowsSelected:C,sortBySync:m,sortingOrderSync:b,toggleSorting:p,sortingOrderIconName:g,rowCSSVariables:_,getHeaderCSSVariables:B,getCellCSSVariables:$,getFooterCSSVariables:x,getClass:O,getStyle:L,showNoDataHtml:E,showNoDataFilteredHtml:q,onRowClickHandler:(t,l,a)=>{e.clickable&&i(t,{event:l,item:a.source,itemIndex:a.initialIndex})},computedAttributes:G,computedTableAttributes:J,animationName:z,getColumnAriaSortOrder:e=>b.value&&m.value===e?"asc"===b.value?"ascending":"descending":"none",getRowBind:K,getCellBind:U}}}),q={key:0},G={key:0,class:"va-data-table__table-tr"},J={key:0,scope:"col",class:"va-data-table__table-th va-data-table__table-cell-select"},Q=["aria-sort","aria-label","title","onClick","onKeydown"],W=["tabindex"],X={key:0},Y={key:"showNoDataHtml"},Z=["colspan","innerHTML"],ee={key:"showNoDataFilteredHtml"},te=["colspan","innerHTML"],le=["onClick","onDblclick","onContextmenu"],ae={key:0,class:"va-data-table__table-tr"},oe={key:0,class:"va-data-table__table-th"},se=["title","aria-label","onClick","onKeydown"],re=["tabindex"],ne={key:0};var ie=z(E,[["render",function _sfc_render(e,t,l,a,o,s){const r=i("va-checkbox"),n=i("va-icon"),H=i("va-inner-loading");return d(),c(H,u({class:"va-data-table","aria-live":"polite"},e.computedAttributes,{loading:e.loading,color:e.loadingColor}),{default:m((()=>[b("table",u({class:"va-data-table__table"},e.computedTableAttributes),["colgroup"in e.$slots?(d(),p("colgroup",q,[y(e.$slots,"colgroup",g(S(e.columnsComputed)))])):v("",!0),b("thead",{class:k(["va-data-table__table-thead",{"va-data-table__table-thead--sticky":e.$props.stickyHeader}])},[y(e.$slots,"headerPrepend"),e.hideDefaultHeader?v("",!0):(d(),p("tr",G,[e.selectable?(d(),p("th",J,["multiple"===e.selectMode?(d(),c(r,{key:0,"aria-label":"select all rows","model-value":e.severalRowsSelected?"idl":e.allRowsSelected,"true-value":!0,"false-value":!1,color:e.selectedColor,"indeterminate-value":"idl",indeterminate:"","onUpdate:modelValue":e.toggleBulkSelection},null,8,["model-value","color","onUpdate:modelValue"])):v("",!0)])):v("",!0),(d(!0),p(w,null,f(e.columnsComputed,(l=>(d(),p("th",{key:l.name,scope:"col","aria-sort":e.getColumnAriaSortOrder(l.name),"aria-label":l.sortable?`sort column by ${l.label}`:void 0,title:l.thTitle,class:k(["va-data-table__table-th",e.getClass(l.thClass)]),style:h([e.getHeaderCSSVariables(l),e.getStyle(l.thStyle)]),onClick:C((t=>l.sortable&&e.toggleSorting(l)),["exact"]),onKeydown:_(C((t=>l.sortable&&e.toggleSorting(l)),["stop"]),["enter"])},[b("div",{class:"va-data-table__table-th-wrapper",tabindex:l.sortable?0:-1},[`header(${l.name})`in e.$slots?(d(),p("span",X,[y(e.$slots,`header(${l.name})`,g(S({label:l.label,key:l.key})))])):y(e.$slots,"header",g(u({key:1},{label:l.label,key:l.key})),(()=>[b("span",null,R(l.label),1)])),l.sortable?(d(),p("div",{key:2,class:"va-data-table__table-th-sorting","aria-hidden":"true",onSelectstart:t[0]||(t[0]=C((()=>{}),["prevent"]))},[B(n,{name:e.sortingOrderIconName,size:"small",class:k(["va-data-table__table-th-sorting-icon",{active:e.sortBySync===l.name&&null!==e.sortingOrderSync}])},null,8,["name","class"])],32)):v("",!0)],8,W)],46,Q)))),128))])),y(e.$slots,"headerAppend")],2),b("tbody",{class:"va-data-table__table-tbody",style:h(e.rowCSSVariables)},[y(e.$slots,"bodyPrepend"),B($,{name:e.animationName,appear:""},{default:m((()=>[e.showNoDataHtml?(d(),p("tr",Y,[b("td",{colspan:e.columnsComputed.length+(e.selectable?1:0),innerHTML:e.noDataHtml,class:"no-data"},null,8,Z)])):e.showNoDataFilteredHtml?(d(),p("tr",ee,[b("td",{colspan:e.columnsComputed.length+(e.selectable?1:0),innerHTML:e.noDataFilteredHtml,class:"no-data"},null,8,te)])):v("",!0),(d(!0),p(w,null,f(e.rows,(l=>(d(),p("tr",u({key:`table-row_${l.initialIndex}`,class:["va-data-table__table-tr",[{selected:e.isRowSelected(l)}]]},e.getRowBind(l),{onClick:t=>e.onRowClickHandler("row:click",t,l),onDblclick:t=>e.onRowClickHandler("row:dblclick",t,l),onContextmenu:t=>e.onRowClickHandler("row:contextmenu",t,l)}),[e.selectable?(d(),p("td",{class:"va-data-table__table-td va-data-table__table-cell-select",key:`selectable_${l.initialIndex}`,onSelectstart:t[1]||(t[1]=C((()=>{}),["prevent"]))},[B(r,{"model-value":e.isRowSelected(l),color:e.selectedColor,"aria-label":`select row ${l.initialIndex}`,onClick:[C((t=>e.shiftSelectRows(l)),["shift","exact","stop"]),C((t=>e.ctrlSelectRow(l)),["ctrl","exact","stop"]),C((t=>e.ctrlSelectRow(l)),["exact","stop"])]},null,8,["model-value","color","aria-label","onClick"])],32)):v("",!0),(d(!0),p(w,null,f(l.cells,(t=>(d(),p("td",u({key:`table-cell_${t.column.name+t.rowIndex}`,class:["va-data-table__table-td",e.getClass(t.column.tdClass)],style:[e.getCellCSSVariables(t),e.getStyle(t.column.tdStyle)]},e.getCellBind(t,l)),[`cell(${t.column.name})`in e.$slots?y(e.$slots,`cell(${t.column.name})`,g(u({key:0},t))):y(e.$slots,"cell",g(u({key:1},t)),(()=>[x(R(t.value),1)]))],16)))),128))],16,le)))),128))])),_:3},8,["name"]),y(e.$slots,"bodyAppend")],4),e.footerClone?(d(),p("tfoot",{key:1,class:k(["va-data-table__table-tfoot",{"va-data-table__table-tfoot--sticky":e.$props.stickyFooter}])},[y(e.$slots,"footerPrepend"),e.hideDefaultHeader?v("",!0):(d(),p("tr",ae,[e.selectable?(d(),p("th",oe,["multiple"===e.selectMode?(d(),c(r,{key:0,"aria-label":"select all rows","model-value":e.severalRowsSelected?"idl":e.allRowsSelected,"true-value":!0,"false-value":!1,color:e.selectedColor,"indeterminate-value":"idl",indeterminate:"","onUpdate:modelValue":e.toggleBulkSelection},null,8,["model-value","color","onUpdate:modelValue"])):v("",!0)])):v("",!0),(d(!0),p(w,null,f(e.columnsComputed,(l=>(d(),p("th",{key:l.name,title:l.thTitle,"aria-label":e.allowFooterSorting&&l.sortable?`sort column by ${l.label}`:void 0,class:k(["va-data-table__table-th",e.getClass(l.thClass)]),style:h([e.getFooterCSSVariables(l),e.getStyle(l.thStyle)]),onClick:C((t=>e.allowFooterSorting&&l.sortable&&e.toggleSorting(l)),["exact"]),onKeydown:_(C((t=>e.allowFooterSorting&&l.sortable&&e.toggleSorting(l)),["stop"]),["enter"])},[b("div",{class:"va-data-table__table-th-wrapper",tabindex:e.allowFooterSorting&&l.sortable?0:-1},[`footer(${l.name})`in e.$slots?(d(),p("span",ne,[y(e.$slots,`footer(${l.name})`,g(S({label:l.label,key:l.key})))])):y(e.$slots,"footer",g(u({key:1},l)),(()=>[b("span",null,R(l.label),1)])),e.allowFooterSorting&&l.sortable?(d(),p("div",{key:2,class:"va-data-table__table-th-sorting",onSelectstart:t[2]||(t[2]=C((()=>{}),["prevent"]))},[B(n,{name:e.sortingOrderIconName,size:"small",class:k(["va-data-table__table-th-sorting-icon",{active:e.sortBySync===l.name&&null!==e.sortingOrderSync}])},null,8,["name","class"])],32)):v("",!0)],8,re)],46,se)))),128))])),y(e.$slots,"footerAppend")],2)):v("",!0)],16)])),_:3},16,["loading","color"])}]]);export{ie as _};

import './VaDataTable.css';
//# sourceMappingURL=VaDataTable.mjs.map
