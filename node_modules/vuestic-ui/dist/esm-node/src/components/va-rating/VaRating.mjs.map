{"version":3,"file":"VaRating.mjs","sources":["../../../../../src/components/va-rating/VaRating.vue"],"sourcesContent":["<template>\n  <div\n    class=\"va-rating\"\n    :class=\"rootClass\"\n    :aria-label=\"`current rating ${$props.modelValue} of ${$props.max}`\"\n  >\n    <div\n      class=\"va-rating__item-wrapper\"\n      @keyup.left=\"onArrowKeyPress(-1)\"\n      @keyup.right=\"onArrowKeyPress(1)\"\n      @mouseenter=\"onMouseEnter\"\n      @mouseleave=\"onMouseLeave\"\n    >\n      <va-rating-item\n        v-for=\"itemNumber in $props.max\"\n        :key=\"itemNumber\"\n        v-bind=\"VaRatingItemProps\"\n        :aria-label=\"`vote rating ${itemNumber} of ${$props.max}`\"\n        :model-value=\"getItemValue(itemNumber - 1)\"\n        :tabindex=\"tabIndexComputed\"\n        :disabled=\"$props.disabled\"\n        :readonly=\"$props.readonly\"\n        @hover=\"isInteractionsEnabled && onItemHoveredValueUpdate(itemNumber - 1, $event)\"\n        @update:model-value=\"isInteractionsEnabled && onItemValueUpdate(itemNumber - 1, $event)\"\n      >\n        <template v-if=\"$props.numbers\" v-slot=\"{ props }\">\n          <VaRatingItemNumberButton\n            v-bind=\"VaRatingItemNumberButtonProps\"\n            :model-value=\"props.value\"\n            :item-number=\"itemNumber\"\n            @click=\"props.onClick\"\n          />\n        </template>\n      </va-rating-item>\n    </div>\n    <span\n      v-if=\"$props.texts && $props.texts.length === $props.max\"\n      class=\"va-rating__text-wrapper\"\n      :style=\"{ color: computedColor }\"\n    >\n      {{ $props.texts[Math.round(visibleValue) - 1] }}\n    </span>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed, PropType } from 'vue'\n\nimport { extractComponentProps, filterComponentProps } from '../../utils/child-props'\nimport { useForm, useFormProps } from '../../composables'\nimport { useRating, useRatingProps } from './hooks/useRating'\nimport { useVaRatingColors, useVaRatingColorsProps } from './hooks/useVaRatingColors'\n\nimport { RatingValue } from './types'\n\nimport VaRatingItem from './components/VaRatingItem/VaRatingItem.vue'\nimport VaRatingItemNumberButton from './components/VaRatingItemNumberButton.vue'\n\nconst VaRatingItemProps = extractComponentProps(VaRatingItem)\nconst VaRatingItemNumberButtonProps = extractComponentProps(VaRatingItemNumberButton, ['modelValue', 'itemNumber'])\n\nexport default defineComponent({\n  name: 'VaRating',\n  props: {\n    ...useRatingProps,\n    ...useVaRatingColorsProps,\n    ...useFormProps,\n    ...VaRatingItemProps,\n    ...VaRatingItemNumberButtonProps,\n    numbers: { type: Boolean, default: false },\n    halves: { type: Boolean, default: false },\n    max: { type: Number, default: 5 },\n    texts: { type: Array as PropType<string[]>, default: () => [] },\n  },\n  emits: ['update:modelValue'],\n  components: { VaRatingItem, VaRatingItemNumberButton },\n  setup (props) {\n    const { computedClasses: rootClass } = useForm('va-rating', props)\n    const rating = useRating(props)\n    const isInteractionsEnabled = computed(() => !props.disabled && !props.readonly)\n\n    return {\n      ...useVaRatingColors(props),\n      ...rating,\n      rootClass,\n      VaRatingItemProps: filterComponentProps(props, VaRatingItemProps),\n      VaRatingItemNumberButtonProps: filterComponentProps(props, VaRatingItemNumberButtonProps),\n      isInteractionsEnabled,\n      tabIndexComputed: computed(() => isInteractionsEnabled.value ? 0 : undefined),\n      onArrowKeyPress: (direction: 1 | -1) => {\n        const step = props.halves ? RatingValue.HALF : RatingValue.FULL\n        rating.onItemValueUpdate(rating.visibleValue.value, step * direction)\n      },\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"../../styles/resources\";\n@import 'variables';\n\n.va-rating {\n  display: var(--va-rating-display);\n  font-family: var(--va-font-family);\n\n  &__number-item {\n    @include normalize-button();\n\n    font-size: var(--va-rating-number-item-font-size);\n    margin: var(--va-rating-number-item-margin);\n    font-weight: var(--va-rating-number-item-font-weight);\n\n    @include flex-center();\n\n    cursor: pointer;\n\n    @at-root {\n      .va-rating--disabled & {\n        @include va-disabled();\n      }\n\n      .va-rating--readonly & {\n        cursor: default;\n      }\n    }\n  }\n\n  &__item-wrapper {\n    display: var(--va-rating-item-wrapper-display);\n    cursor: var(--va-rating-item-wrapper-cursor);\n\n    @at-root {\n      .va-rating--readonly &,\n      .va-rating--disabled & {\n        cursor: default;\n      }\n    }\n  }\n\n  &-item {\n    display: var(--va-rating-item-display);\n\n    @include flex-center();\n\n    .va-rating--disabled & {\n      @include va-disabled();\n\n      &__wrapper {\n        cursor: initial !important;\n      }\n    }\n\n    .va-rating--readonly & &__wrapper {\n      cursor: initial !important;\n    }\n  }\n\n  &__text-wrapper {\n    padding-left: 10px;\n  }\n}\n</style>\n"],"names":["VaRatingItemProps","extractComponentProps","VaRatingItem","VaRatingItemNumberButtonProps","VaRatingItemNumberButton","_sfc_main","defineComponent","name","props","__spreadProps","__spreadValues","useRatingProps","useVaRatingColorsProps","useFormProps","numbers","type","Boolean","default","halves","max","Number","texts","Array","emits","components","setup","computedClasses","rootClass","useForm","rating","useRating","isInteractionsEnabled","computed","disabled","readonly","useVaRatingColors","filterComponentProps","tabIndexComputed","value","onArrowKeyPress","direction","step","RatingValue","HALF","FULL","onItemValueUpdate","visibleValue","_createElementBlock","class","_normalizeClass","_ctx","$props","modelValue","_createElementVNode","onKeyup","_cache","_withKeys","$event","onMouseenter","args","onMouseEnter","onMouseleave","onMouseLeave","_openBlock","_Fragment","_renderList","itemNumber","_createBlock","_component_va_rating_item","_mergeProps","key","tabindex","onHover","onItemHoveredValueUpdate","_createSlots","_","fn","_withCtx","_createVNode","_component_VaRatingItemNumberButton","onClick","length","style","_normalizeStyle","computedColor","_toDisplayString","Math","round","_createCommentVNode"],"mappings":"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"}