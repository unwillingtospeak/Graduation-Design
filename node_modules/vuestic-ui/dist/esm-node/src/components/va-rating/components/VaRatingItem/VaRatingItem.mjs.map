{"version":3,"file":"VaRatingItem.mjs","sources":["../../../../../../../src/components/va-rating/components/VaRatingItem/VaRatingItem.vue"],"sourcesContent":["<template>\n  <div\n    ref=\"rootEl\"\n    class=\"va-rating-item\"\n    role=\"button\"\n    :tabindex=\"tabIndexComputed\"\n    @keyup.enter=\"onClick\"\n    @keyup.space=\"onClick\"\n    @mousemove=\"onMouseMove\"\n    @mouseleave=\"onMouseLeave\"\n  >\n    <slot :props=\"{ value: visibleValue, onClick }\">\n      <va-icon\n        class=\"va-rating-item__wrapper\"\n        tabindex=\"-1\"\n        tag=\"button\"\n        :name=\"computedIconName\"\n        :size=\"$props.size\"\n        :color=\"computedColor\"\n        @click=\"onClick\"\n      />\n    </slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, ref, shallowRef, watch } from 'vue'\n\nimport { useColors, useSyncProp } from '../../../../composables'\n\nimport { RatingValue } from '../../types'\n\nimport { VaIcon } from '../../../va-icon'\n\nexport default defineComponent({\n  name: 'VaRatingItem',\n\n  components: { VaIcon },\n\n  props: {\n    modelValue: { type: Number, default: 0 },\n    icon: { type: String, default: 'star' },\n    halfIcon: { type: String, default: 'star_half' },\n    emptyIcon: { type: String, default: 'star_outline' },\n    halves: { type: Boolean, default: false },\n    hover: { type: Boolean, default: false },\n    tabindex: { type: Number, default: 0 },\n    disabled: { type: Boolean, default: false },\n    readonly: { type: Boolean, default: false },\n    size: { type: [String, Number], default: 'medium' },\n    unselectedColor: { type: String },\n    color: { type: String, default: 'primary' },\n  },\n\n  emits: ['update:modelValue', 'click', 'hover'],\n\n  setup (props, { emit }) {\n    const rootEl = shallowRef<HTMLElement>()\n\n    const [modelValue] = useSyncProp('modelValue', props, emit, RatingValue.EMPTY)\n    const hoveredValue = ref<number | null>(null)\n\n    const visibleValue = computed(() => {\n      if (props.hover && !props.disabled && !props.readonly) {\n        return hoveredValue.value || modelValue.value\n      }\n      return modelValue.value\n    })\n\n    const { getColor } = useColors()\n    const computedColor = computed(() => getColor(\n      props.unselectedColor && visibleValue.value === RatingValue.EMPTY\n        ? props.unselectedColor\n        : props.color,\n    ))\n\n    const onMouseMove = (ev: MouseEvent) => {\n      if (!rootEl.value) { return }\n      const { offsetX } = ev\n      const iconWidth = rootEl.value.clientWidth\n\n      if (props.halves) {\n        hoveredValue.value = offsetX / iconWidth <= RatingValue.HALF ? RatingValue.HALF : RatingValue.FULL\n      } else {\n        hoveredValue.value = RatingValue.FULL\n      }\n    }\n\n    const onMouseLeave = () => {\n      hoveredValue.value = null\n    }\n\n    const onEnter = () => {\n      modelValue.value = 1\n    }\n\n    const onClick = () => {\n      modelValue.value = hoveredValue.value || RatingValue.FULL\n      emit('click', hoveredValue.value || RatingValue.FULL)\n    }\n\n    watch(hoveredValue, () => emit('hover', hoveredValue.value || RatingValue.EMPTY))\n\n    return {\n      computedColor,\n      rootEl,\n      onEnter,\n      onClick,\n      onMouseMove,\n      onMouseLeave,\n      visibleValue,\n      computedIconName: computed(() => {\n        if (props.halves && visibleValue.value === RatingValue.HALF) {\n          return props.halfIcon\n        }\n        if (visibleValue.value === RatingValue.EMPTY) {\n          return props.emptyIcon\n        }\n\n        return props.icon\n      }),\n      tabIndexComputed: computed(() => props.disabled ? -1 : props.tabindex),\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"../../../../styles/resources\";\n\n.va-rating-item {\n  display: inline-block;\n\n  &:focus {\n    @include focus-outline();\n  }\n\n  &__wrapper {\n    @include normalize-button();\n  }\n}\n</style>\n"],"names":["_sfc_main","defineComponent","name","components","VaIcon","props","modelValue","type","Number","default","icon","String","halfIcon","emptyIcon","halves","Boolean","hover","tabindex","disabled","readonly","size","unselectedColor","color","emits","setup","emit","rootEl","shallowRef","useSyncProp","RatingValue","EMPTY","hoveredValue","ref","visibleValue","computed","value","getColor","useColors","computedColor","watch","onEnter","onClick","FULL","onMouseMove","ev","offsetX","iconWidth","clientWidth","HALF","onMouseLeave","computedIconName","tabIndexComputed","_createElementBlock","class","role","_ctx","onKeyup","_cache","_withKeys","args","onMousemove","onMouseleave","_renderSlot","$slots","_createVNode","_component_va_icon","tag","$props"],"mappings":"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"}