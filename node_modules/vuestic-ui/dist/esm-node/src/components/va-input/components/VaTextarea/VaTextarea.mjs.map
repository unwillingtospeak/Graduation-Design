{"version":3,"file":"VaTextarea.mjs","sources":["../../../../../../../src/components/va-input/components/VaTextarea/VaTextarea.vue"],"sourcesContent":["<template>\n  <textarea\n    ref=\"textarea\"\n    class=\"textarea\"\n    :style=\"computedStyle\"\n    v-bind=\"{ ...computedProps, ...listeners }\"\n    :value=\"modelValue\"\n  />\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, onMounted, ref, watch, nextTick, CSSProperties, shallowRef } from 'vue'\nimport pick from 'lodash/pick.js'\n\nimport { useFormProps, useEmitProxy } from '../../../../composables'\nimport { useTextareaRowHeight } from './useTextareaRowHeight'\n\nconst positiveNumberValidator = (val: number) => {\n  if (val > 0 && (val | 0) === val) {\n    return true\n  }\n  throw new Error(`\\`minRows|maxRows\\` must be a positive integer greater than 0, but ${val} is provided`)\n}\n\nconst { createEmits, createListeners } = useEmitProxy([\n  'input', 'change', 'click', 'update:modelValue',\n])\n\nexport default defineComponent({\n  name: 'VaTextarea',\n\n  props: {\n    ...useFormProps,\n    modelValue: { type: [String, Number], default: '' },\n    placeholder: { type: String },\n    autosize: { type: Boolean, default: false },\n    minRows: {\n      type: Number,\n      default: 1,\n      validator: positiveNumberValidator,\n    },\n    maxRows: {\n      type: Number,\n      validator: positiveNumberValidator,\n    },\n  },\n\n  emits: createEmits(),\n\n  setup (props, { emit }) {\n    const textarea = shallowRef<HTMLTextAreaElement>()\n\n    const rowHeight = ref(-1)\n    const height = ref(-1)\n    const { calculateRowHeight, calculateHeight } = useTextareaRowHeight(textarea)\n\n    const isResizable = computed(() => {\n      return Boolean((props.autosize || props.maxRows || props.minRows !== 1) && textarea.value)\n    })\n\n    const updateRowHeight = () => {\n      if (isResizable.value) {\n        rowHeight.value = calculateRowHeight()\n      }\n    }\n\n    const updateHeight = () => {\n      if (isResizable.value) {\n        height.value = calculateHeight()\n      }\n    }\n\n    onMounted(() => {\n      updateRowHeight()\n      updateHeight()\n    })\n\n    watch(() => props.modelValue, () => {\n      nextTick(updateHeight)\n    })\n\n    const computedStyle = computed(() => ({\n      minHeight: rowHeight.value * props.minRows + 'px',\n      maxHeight: props.maxRows ? (rowHeight.value * props.maxRows + 'px') : undefined,\n      height: height.value + 'px',\n      resize: isResizable.value ? undefined : 'none',\n    }) as CSSProperties)\n\n    const computedProps = computed(() => ({\n      ...pick(props, ['disabled', 'readonly', 'placeholder', 'ariaLabel']),\n    }))\n\n    const focus = () => {\n      textarea.value?.focus()\n    }\n\n    const blur = () => {\n      textarea.value?.blur()\n    }\n\n    return {\n      textarea,\n      computedStyle,\n      listeners: createListeners(emit),\n      computedProps,\n      focus,\n      blur,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n.textarea {\n  padding: 0;\n  border: 0;\n  font-family: var(--va-font-family);\n}\n</style>\n"],"names":["positiveNumberValidator","val","Error","createEmits","createListeners","useEmitProxy","_sfc_main","defineComponent","name","props","useFormProps","modelValue","type","String","Number","default","placeholder","autosize","Boolean","minRows","validator","maxRows","emits","setup","emit","textarea","shallowRef","rowHeight","ref","height","calculateRowHeight","calculateHeight","useTextareaRowHeight","isResizable","computed","value","updateHeight","onMounted","watch","nextTick","computedStyle","minHeight","maxHeight","resize","computedProps","__spreadValues","pick","listeners","focus","_a","blur","_openBlock","_createElementBlock","_mergeProps","class","style","_ctx","_hoisted_1"],"mappings":"u8BAiBA,MAAMA,wBAA2BC,IAC/B,GAAIA,EAAM,IAAY,EAAAA,KAAOA,EACpB,OAAA,EAEH,MAAA,IAAIC,MAAM,sEAAsED,mBAGlFE,YAAEA,EAAaC,gBAAAA,GAAoBC,EAAa,CACpD,QAAS,SAAU,QAAS,sBAGzBC,EAAaC,EAAa,CAC7BC,KAAM,aAENC,2BACKC,KADE,CAELC,WAAY,CAAEC,KAAM,CAACC,OAAQC,QAASC,QAAS,IAC/CC,YAAa,CAAEJ,KAAMC,QACrBI,SAAU,CAAEL,KAAMM,QAASH,SAAS,GACpCI,QAAS,CACPP,KAAME,OACNC,QAAS,EACTK,UAAWpB,yBAEbqB,QAAS,CACPT,KAAME,OACNM,UAAWpB,qCAIfsB,MAAOnB,IAEPoB,MAAOd,GAAOe,KAAEA,IACd,MAAMC,EAAWC,IAEXC,EAAYC,GAAM,GAClBC,EAASD,GAAM,IACfE,mBAAEA,EAAAC,gBAAoBA,GAAoBC,EAAqBP,GAE/DQ,EAAcC,GAAS,IACpBhB,WAAeD,UAAYR,EAAMY,SAA6B,IAAlBZ,EAAMU,UAAkBM,EAASU,SAShFC,aAAe,KACfH,EAAYE,QACdN,EAAOM,MAAQJ,MAInBM,GAAU,KAXJJ,EAAYE,QACdR,EAAUQ,MAAQL,uBAehBQ,GAAA,IAAM7B,EAAME,aAAY,KAC5B4B,EAASH,iBAGL,MAAAI,EAAgBN,GAAS,KAAO,CACpCO,UAAWd,EAAUQ,MAAQ1B,EAAMU,QAAU,KAC7CuB,UAAWjC,EAAMY,QAAWM,EAAUQ,MAAQ1B,EAAMY,QAAU,UAAQ,EACtEQ,OAAQA,EAAOM,MAAQ,KACvBQ,OAAQV,EAAYE,WAAQ,EAAY,WAGpCS,EAAgBV,GAAS,IAAOW,eAAA,GACjCC,EAAKrC,EAAO,CAAC,WAAY,WAAY,cAAe,iBAWlD,MAAA,CACLgB,SAAAA,EACAe,cAAAA,EACAO,UAAW3C,EAAgBoB,GAC3BoB,cAAAA,EACAI,MAbY,WACZ,OAAAC,EAAAxB,EAASU,QAAOc,EAAAD,SAahBE,KAVW,WACX,OAAAD,EAAAxB,EAASU,QAAOc,EAAAC,6FAhGpB,OAAAC,IAAAC,EAME,WANFC,EAME,CALAzB,IAAI,WACJ0B,MAAM,WACLC,MAAOC,EAAAhB,eAAAK,eAAAA,eAAA,GACKW,EAAkBZ,eAAAY,EAAAT,WAC9B,CAAAZ,MAAOqB,EAAU7C,aAAA,KAAA,GAAA8C"}