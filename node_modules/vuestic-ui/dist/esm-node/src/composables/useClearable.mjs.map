{"version":3,"file":"useClearable.mjs","sources":["../../../../src/composables/useClearable.ts"],"sourcesContent":["import { computed, Ref } from 'vue'\n\nimport { useFocus } from './useFocus'\n\ninterface ClearableProps {\n  clearable: boolean\n  clearableIcon: string\n  clearValue: any\n  disabled?: boolean\n  readonly?: boolean\n  success?: boolean\n  color?: string\n}\n\nexport const useClearableProps = {\n  clearable: { type: Boolean, default: false },\n  clearableIcon: { type: String, default: 'highlight_off' },\n  clearValue: { type: String, default: '' },\n}\n\nexport const useClearableEmits = ['clear']\n\nexport const useClearable = (\n  props: ClearableProps,\n  inputValue: Ref<any>,\n  el?: Ref<any>,\n  hasError?: Ref<boolean>,\n) => {\n  const { isFocused, onFocus, onBlur } = useFocus(el)\n\n  const clearedValues = [null, undefined, props.clearValue]\n\n  const canBeCleared = computed(() => (\n    props.clearable &&\n    !props.disabled &&\n    !props.readonly &&\n    !clearedValues.includes(inputValue.value)\n  ))\n\n  const clearIconColor = computed(() => {\n    if (isFocused?.value) { return props.color || 'primary' }\n    if (hasError?.value) { return 'danger' }\n    if (props.success) { return 'success' }\n\n    return 'secondary'\n  })\n\n  const clearIconProps = computed(() => ({\n    name: props.clearableIcon,\n    color: clearIconColor.value,\n    size: 'small',\n  }))\n\n  return {\n    canBeCleared,\n    clearIconColor,\n    clearIconProps,\n    onFocus,\n    onBlur,\n  }\n}\n"],"names":["useClearableProps","clearable","type","Boolean","default","clearableIcon","String","clearValue","useClearableEmits","useClearable","props","inputValue","el","hasError","isFocused","onFocus","onBlur","useFocus","clearedValues","canBeCleared","computed","disabled","readonly","includes","value","clearIconColor","color","success","clearIconProps","name","size"],"mappings":"kEAcO,MAAMA,EAAoB,CAC/BC,UAAW,CAAEC,KAAMC,QAASC,SAAS,GACrCC,cAAe,CAAEH,KAAMI,OAAQF,QAAS,iBACxCG,WAAY,CAAEL,KAAMI,OAAQF,QAAS,KAG1BI,EAAoB,CAAC,SAErBC,aAAe,CAC1BC,EACAC,EACAC,EACAC,KAEA,MAAMC,UAAEA,EAAAC,QAAWA,EAASC,OAAAA,GAAWC,EAASL,GAE1CM,EAAgB,CAAC,UAAM,EAAWR,EAAMH,YAExCY,EAAeC,GAAS,IAC5BV,EAAMT,YACLS,EAAMW,WACNX,EAAMY,WACNJ,EAAcK,SAASZ,EAAWa,SAG/BC,EAAiBL,GAAS,WAC1BN,WAAWU,OAAgBd,EAAMgB,OAAS,iBAC1Cb,WAAUW,OAAgB,SAC1Bd,EAAMiB,QAAkB,UAErB,cAGHC,EAAiBR,GAAS,KAAO,CACrCS,KAAMnB,EAAML,cACZqB,MAAOD,EAAeD,MACtBM,KAAM,YAGD,MAAA,CACLX,aAAAA,EACAM,eAAAA,EACAG,eAAAA,EACAb,QAAAA,EACAC,OAAAA"}